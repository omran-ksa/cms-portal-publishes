{"version":3,"file":"member-group-picker-modal.element-I2C8EUhz.js","sources":["../../../src/packages/members/member-group/collection/repository/constants.ts","../../../src/packages/members/member-group/collection/views/constants.ts","../../../src/packages/members/member-group/collection/constants.ts","../../../src/packages/members/member-group/repository/detail/member-group-detail.store.context-token.ts","../../../src/packages/members/member-group/repository/detail/constants.ts","../../../src/packages/members/member-group/repository/item/member-group-item.store.context-token.ts","../../../src/packages/members/member-group/repository/item/constants.ts","../../../src/packages/members/member-group/workspace/member-group/member-group-workspace.context-token.ts","../../../src/packages/members/member-group/workspace/member-group/constants.ts","../../../src/packages/members/member-group/workspace/member-group-root/constants.ts","../../../src/packages/members/member-group/entity.ts","../../../src/packages/members/member-group/paths.ts","../../../src/packages/members/member-group/components/member-group-picker-modal/member-group-picker-modal.token.ts","../../../src/packages/members/member-group/components/input-member-group/input-member-group.context.ts","../../../src/packages/members/member-group/components/input-member-group/input-member-group.element.ts","../../../src/packages/members/member-group/collection/repository/member-group-collection.server.data-source.ts","../../../src/packages/members/member-group/collection/repository/member-group-collection.repository.ts","../../../src/packages/members/member-group/components/member-group-picker-modal/member-group-picker-modal.element.ts"],"sourcesContent":["export const UMB_MEMBER_GROUP_COLLECTION_REPOSITORY_ALIAS = 'Umb.Repository.MemberGroup.Collection';\r\n","export const UMB_MEMBER_GROUP_TABLE_COLLECTION_VIEW_ALIAS = 'Umb.CollectionView.MemberGroup.Table';\r\n","export const UMB_MEMBER_GROUP_COLLECTION_ALIAS = 'Umb.Collection.MemberGroup';\r\nexport * from './repository/constants.js';\r\nexport * from './views/constants.js';\r\n","import type { UmbMemberGroupDetailStore } from './member-group-detail.store.js';\r\nimport { UmbContextToken } from '@umbraco-cms/backoffice/context-api';\r\n\r\nexport const UMB_MEMBER_GROUP_DETAIL_STORE_CONTEXT = new UmbContextToken<UmbMemberGroupDetailStore>(\r\n\t'UmbMemberGroupDetailStore',\r\n);\r\n","export const UMB_MEMBER_GROUP_DETAIL_REPOSITORY_ALIAS = 'Umb.Repository.MemberGroup.Detail';\r\nexport const UMB_MEMBER_GROUP_DETAIL_STORE_ALIAS = 'Umb.Store.MemberGroup.Detail';\r\nexport { UMB_MEMBER_GROUP_DETAIL_STORE_CONTEXT } from './member-group-detail.store.context-token.js';\r\n","import type { UmbMemberGroupItemStore } from './member-group-item.store.js';\r\nimport { UmbContextToken } from '@umbraco-cms/backoffice/context-api';\r\n\r\nexport const UMB_MEMBER_GROUP_ITEM_STORE_CONTEXT = new UmbContextToken<UmbMemberGroupItemStore>(\r\n\t'UmbMemberGroupItemStore',\r\n);\r\n","export const UMB_MEMBER_GROUP_ITEM_REPOSITORY_ALIAS = 'Umb.Repository.MemberGroupItem';\r\nexport const UMB_MEMBER_GROUP_STORE_ALIAS = 'Umb.Store.MemberGroupItem';\r\nexport { UMB_MEMBER_GROUP_ITEM_STORE_CONTEXT } from './member-group-item.store.context-token.js';\r\n","import type { UmbMemberGroupWorkspaceContext } from './member-group-workspace.context.js';\r\nimport { UmbContextToken } from '@umbraco-cms/backoffice/context-api';\r\nimport type { UmbSubmittableWorkspaceContext } from '@umbraco-cms/backoffice/workspace';\r\n\r\nexport const UMB_MEMBER_GROUP_WORKSPACE_CONTEXT = new UmbContextToken<\r\n\tUmbSubmittableWorkspaceContext,\r\n\tUmbMemberGroupWorkspaceContext\r\n>(\r\n\t'UmbWorkspaceContext',\r\n\tundefined,\r\n\t(context): context is UmbMemberGroupWorkspaceContext => context.getEntityType?.() === 'member-group',\r\n);\r\n","export const UMB_MEMBER_GROUP_WORKSPACE_ALIAS = 'Umb.Workspace.MemberGroup';\r\nexport { UMB_MEMBER_GROUP_WORKSPACE_CONTEXT } from './member-group-workspace.context-token.js';\r\n","export const UMB_MEMBER_GROUP_ROOT_WORKSPACE_ALIAS = 'Umb.Workspace.MemberGroupRoot';\r\n","export const UMB_MEMBER_GROUP_ROOT_ENTITY_TYPE = 'member-group-root';\r\nexport const UMB_MEMBER_GROUP_ENTITY_TYPE = 'member-group';\r\n\r\nexport type UmbMemberGroupEntityType = typeof UMB_MEMBER_GROUP_ENTITY_TYPE;\r\nexport type UmbMemberGroupRootEntityType = typeof UMB_MEMBER_GROUP_ROOT_ENTITY_TYPE;\r\n","import { UMB_MEMBER_MANAGEMENT_SECTION_PATHNAME } from '../section/paths.js';\r\nimport { UMB_MEMBER_GROUP_ENTITY_TYPE, UMB_MEMBER_GROUP_ROOT_ENTITY_TYPE } from './entity.js';\r\nimport { UMB_WORKSPACE_PATH_PATTERN } from '@umbraco-cms/backoffice/workspace';\r\n\r\nexport const UMB_MEMBER_GROUP_WORKSPACE_PATH = UMB_WORKSPACE_PATH_PATTERN.generateAbsolute({\r\n\tsectionName: UMB_MEMBER_MANAGEMENT_SECTION_PATHNAME,\r\n\tentityType: UMB_MEMBER_GROUP_ENTITY_TYPE,\r\n});\r\n\r\nexport const UMB_MEMBER_GROUP_ROOT_WORKSPACE_PATH = UMB_WORKSPACE_PATH_PATTERN.generateAbsolute({\r\n\tsectionName: UMB_MEMBER_MANAGEMENT_SECTION_PATHNAME,\r\n\tentityType: UMB_MEMBER_GROUP_ROOT_ENTITY_TYPE,\r\n});\r\n","import type { UmbMemberGroupItemModel } from '../../types.js';\r\nimport { UmbModalToken } from '@umbraco-cms/backoffice/modal';\r\n\r\nexport interface UmbMemberGroupPickerModalData {\r\n\tmultiple?: boolean;\r\n\tfilter?: (memberGroup: UmbMemberGroupItemModel) => boolean;\r\n}\r\n\r\nexport interface UmbMemberGroupPickerModalValue {\r\n\tselection: Array<string | null>;\r\n}\r\n\r\nexport const UMB_MEMBER_GROUP_PICKER_MODAL = new UmbModalToken<\r\n\tUmbMemberGroupPickerModalData,\r\n\tUmbMemberGroupPickerModalValue\r\n>('Umb.Modal.MemberGroupPicker', {\r\n\tmodal: {\r\n\t\ttype: 'sidebar',\r\n\t\tsize: 'small',\r\n\t},\r\n});\r\n","import type { UmbMemberGroupItemModel } from '../../types.js';\r\nimport { UMB_MEMBER_GROUP_ITEM_REPOSITORY_ALIAS } from '../../constants.js';\r\nimport { UMB_MEMBER_GROUP_PICKER_MODAL } from '../member-group-picker-modal/member-group-picker-modal.token.js';\r\nimport { UmbPickerInputContext } from '@umbraco-cms/backoffice/picker-input';\r\nimport type { UmbControllerHostElement } from '@umbraco-cms/backoffice/controller-api';\r\n\r\nexport class UmbMemberGroupPickerInputContext extends UmbPickerInputContext<UmbMemberGroupItemModel> {\r\n\tconstructor(host: UmbControllerHostElement) {\r\n\t\tsuper(host, UMB_MEMBER_GROUP_ITEM_REPOSITORY_ALIAS, UMB_MEMBER_GROUP_PICKER_MODAL);\r\n\t}\r\n}\r\n","import type { UmbMemberGroupItemModel } from '../../types.js';\r\nimport { UmbMemberGroupPickerInputContext } from './input-member-group.context.js';\r\nimport { css, html, customElement, property, state, repeat, nothing } from '@umbraco-cms/backoffice/external/lit';\r\nimport { splitStringToArray } from '@umbraco-cms/backoffice/utils';\r\nimport { UmbChangeEvent } from '@umbraco-cms/backoffice/event';\r\nimport { UmbLitElement } from '@umbraco-cms/backoffice/lit-element';\r\nimport { UmbSorterController } from '@umbraco-cms/backoffice/sorter';\r\nimport { UMB_WORKSPACE_MODAL } from '@umbraco-cms/backoffice/workspace';\r\nimport { UmbModalRouteRegistrationController } from '@umbraco-cms/backoffice/router';\r\nimport { UmbFormControlMixin } from '@umbraco-cms/backoffice/validation';\r\n\r\n@customElement('umb-input-member-group')\r\nexport class UmbInputMemberGroupElement extends UmbFormControlMixin<string | undefined, typeof UmbLitElement>(\r\n\tUmbLitElement,\r\n) {\r\n\t#sorter = new UmbSorterController<string>(this, {\r\n\t\tgetUniqueOfElement: (element) => {\r\n\t\t\treturn element.id;\r\n\t\t},\r\n\t\tgetUniqueOfModel: (modelEntry) => {\r\n\t\t\treturn modelEntry;\r\n\t\t},\r\n\t\tidentifier: 'Umb.SorterIdentifier.InputMemberGroup',\r\n\t\titemSelector: 'uui-ref-node',\r\n\t\tcontainerSelector: 'uui-ref-list',\r\n\t\tonChange: ({ model }) => {\r\n\t\t\tthis.selection = model;\r\n\t\t\tthis.dispatchEvent(new UmbChangeEvent());\r\n\t\t},\r\n\t});\r\n\r\n\t/**\r\n\t * This is a minimum amount of selected items in this input.\r\n\t * @type {number}\r\n\t * @attr\r\n\t * @default\r\n\t */\r\n\t@property({ type: Number })\r\n\tpublic set min(value: number) {\r\n\t\tthis.#pickerContext.min = value;\r\n\t}\r\n\tpublic get min(): number {\r\n\t\treturn this.#pickerContext.min;\r\n\t}\r\n\r\n\t/**\r\n\t * Min validation message.\r\n\t * @type {boolean}\r\n\t * @attr\r\n\t * @default\r\n\t */\r\n\t@property({ type: String, attribute: 'min-message' })\r\n\tminMessage = 'This field need more items';\r\n\r\n\t/**\r\n\t * This is a maximum amount of selected items in this input.\r\n\t * @type {number}\r\n\t * @attr\r\n\t * @default\r\n\t */\r\n\t@property({ type: Number })\r\n\tpublic set max(value: number) {\r\n\t\tthis.#pickerContext.max = value;\r\n\t}\r\n\tpublic get max(): number {\r\n\t\treturn this.#pickerContext.max;\r\n\t}\r\n\r\n\t/**\r\n\t * Max validation message.\r\n\t * @type {boolean}\r\n\t * @attr\r\n\t * @default\r\n\t */\r\n\t@property({ type: String, attribute: 'min-message' })\r\n\tmaxMessage = 'This field exceeds the allowed amount of items';\r\n\r\n\tpublic set selection(ids: Array<string>) {\r\n\t\tthis.#pickerContext.setSelection(ids);\r\n\t\tthis.#sorter.setModel(ids);\r\n\t}\r\n\tpublic get selection(): Array<string> {\r\n\t\treturn this.#pickerContext.getSelection();\r\n\t}\r\n\r\n\t@property({ type: Array })\r\n\tallowedContentTypeIds?: string[] | undefined;\r\n\r\n\t@property({ type: String })\r\n\tpublic override set value(selectionString: string | undefined) {\r\n\t\tthis.selection = splitStringToArray(selectionString);\r\n\t}\r\n\tpublic override get value(): string | undefined {\r\n\t\treturn this.selection.length > 0 ? this.selection.join(',') : undefined;\r\n\t}\r\n\r\n\t@property({ type: Object, attribute: false })\r\n\tpublic filter: (memberGroup: UmbMemberGroupItemModel) => boolean = () => true;\r\n\r\n\t/**\r\n\t * Sets the input to readonly mode, meaning value cannot be changed but still able to read and select its content.\r\n\t * @type {boolean}\r\n\t * @attr\r\n\t * @default\r\n\t */\r\n\t@property({ type: Boolean, reflect: true })\r\n\tpublic get readonly() {\r\n\t\treturn this.#readonly;\r\n\t}\r\n\tpublic set readonly(value) {\r\n\t\tthis.#readonly = value;\r\n\r\n\t\tif (this.#readonly) {\r\n\t\t\tthis.#sorter.disable();\r\n\t\t} else {\r\n\t\t\tthis.#sorter.enable();\r\n\t\t}\r\n\t}\r\n\t#readonly = false;\r\n\r\n\t@state()\r\n\tprivate _editMemberGroupPath = '';\r\n\r\n\t@state()\r\n\tprivate _items?: Array<UmbMemberGroupItemModel>;\r\n\r\n\t#pickerContext = new UmbMemberGroupPickerInputContext(this);\r\n\r\n\tconstructor() {\r\n\t\tsuper();\r\n\r\n\t\tnew UmbModalRouteRegistrationController(this, UMB_WORKSPACE_MODAL)\r\n\t\t\t.addAdditionalPath('member-group')\r\n\t\t\t.onSetup(() => {\r\n\t\t\t\treturn { data: { entityType: 'member-group', preset: {} } };\r\n\t\t\t})\r\n\t\t\t.observeRouteBuilder((routeBuilder) => {\r\n\t\t\t\tthis._editMemberGroupPath = routeBuilder({});\r\n\t\t\t});\r\n\r\n\t\tthis.addValidator(\r\n\t\t\t'rangeUnderflow',\r\n\t\t\t() => this.minMessage,\r\n\t\t\t() => !!this.min && this.#pickerContext.getSelection().length < this.min,\r\n\t\t);\r\n\r\n\t\tthis.addValidator(\r\n\t\t\t'rangeOverflow',\r\n\t\t\t() => this.maxMessage,\r\n\t\t\t() => !!this.max && this.#pickerContext.getSelection().length > this.max,\r\n\t\t);\r\n\r\n\t\tthis.observe(this.#pickerContext.selection, (selection) => (this.value = selection.join(',')), '_observeSelection');\r\n\t\tthis.observe(this.#pickerContext.selectedItems, (selectedItems) => (this._items = selectedItems), '_observeItems');\r\n\t}\r\n\r\n\tprotected override getFormElement() {\r\n\t\treturn undefined;\r\n\t}\r\n\r\n\t#openPicker() {\r\n\t\tthis.#pickerContext.openPicker({\r\n\t\t\tfilter: this.filter,\r\n\t\t});\r\n\t}\r\n\r\n\t#removeItem(item: UmbMemberGroupItemModel) {\r\n\t\tthis.#pickerContext.requestRemoveItem(item.unique);\r\n\t}\r\n\r\n\toverride render() {\r\n\t\treturn html`${this.#renderItems()} ${this.#renderAddButton()}`;\r\n\t}\r\n\r\n\t#renderItems() {\r\n\t\tif (!this._items) return;\r\n\t\treturn html`\r\n\t\t\t<uui-ref-list>\r\n\t\t\t\t${repeat(\r\n\t\t\t\t\tthis._items,\r\n\t\t\t\t\t(item) => item.unique,\r\n\t\t\t\t\t(item) => this.#renderItem(item),\r\n\t\t\t\t)}\r\n\t\t\t</uui-ref-list>\r\n\t\t`;\r\n\t}\r\n\r\n\t#renderAddButton() {\r\n\t\tif (this.max === 1 && this.selection.length >= this.max) return nothing;\r\n\t\tif (this.readonly && this.selection.length > 0) {\r\n\t\t\treturn nothing;\r\n\t\t} else {\r\n\t\t\treturn html`<uui-button\r\n\t\t\t\tid=\"btn-add\"\r\n\t\t\t\tlook=\"placeholder\"\r\n\t\t\t\t@click=${this.#openPicker}\r\n\t\t\t\tlabel=${this.localize.term('general_choose')}\r\n\t\t\t\t?disabled=${this.readonly}></uui-button>`;\r\n\t\t}\r\n\t}\r\n\r\n\t#renderItem(item: UmbMemberGroupItemModel) {\r\n\t\tif (!item.unique) return nothing;\r\n\t\treturn html`\r\n\t\t\t<uui-ref-node\r\n\t\t\t\tname=${item.name}\r\n\t\t\t\tid=${item.unique}\r\n\t\t\t\thref=\"${this._editMemberGroupPath}edit/${item.unique}\"\r\n\t\t\t\t?readonly=${this.readonly}>\r\n\t\t\t\t<uui-action-bar slot=\"actions\"> ${this.#renderRemoveButton(item)} </uui-action-bar>\r\n\t\t\t\t<umb-icon slot=\"icon\" name=\"icon-users\"></umb-icon>\r\n\t\t\t</uui-ref-node>\r\n\t\t`;\r\n\t}\r\n\r\n\t#renderRemoveButton(item: UmbMemberGroupItemModel) {\r\n\t\tif (this.readonly) return nothing;\r\n\t\treturn html`<uui-button\r\n\t\t\t@click=${() => this.#removeItem(item)}\r\n\t\t\tlabel=${this.localize.term('general_remove')}></uui-button>`;\r\n\t}\r\n\r\n\tstatic override styles = [\r\n\t\tcss`\r\n\t\t\t#btn-add {\r\n\t\t\t\twidth: 100%;\r\n\t\t\t}\r\n\r\n\t\t\tuui-ref-node[drag-placeholder] {\r\n\t\t\t\topacity: 0.2;\r\n\t\t\t}\r\n\t\t`,\r\n\t];\r\n}\r\n\r\nexport default UmbInputMemberGroupElement;\r\n\r\ndeclare global {\r\n\tinterface HTMLElementTagNameMap {\r\n\t\t'umb-input-member-group': UmbInputMemberGroupElement;\r\n\t}\r\n}\r\n","import type { UmbMemberGroupCollectionFilterModel } from '../types.js';\r\nimport type { UmbMemberGroupDetailModel } from '../../types.js';\r\nimport { UMB_MEMBER_GROUP_ENTITY_TYPE } from '../../entity.js';\r\nimport type { UmbCollectionDataSource } from '@umbraco-cms/backoffice/collection';\r\nimport type { UmbControllerHost } from '@umbraco-cms/backoffice/controller-api';\r\nimport { tryExecute } from '@umbraco-cms/backoffice/resources';\r\nimport type { MemberGroupResponseModel } from '@umbraco-cms/backoffice/external/backend-api';\r\nimport { MemberGroupService } from '@umbraco-cms/backoffice/external/backend-api';\r\n\r\n/**\r\n * A data source that fetches the member collection data from the server.\r\n * @class UmbMemberGroupCollectionServerDataSource\r\n * @implements {UmbCollectionDataSource}\r\n */\r\nexport class UmbMemberGroupCollectionServerDataSource implements UmbCollectionDataSource<UmbMemberGroupDetailModel> {\r\n\t#host: UmbControllerHost;\r\n\r\n\t/**\r\n\t * Creates an instance of UmbMemberGroupCollectionServerDataSource.\r\n\t * @param {UmbControllerHost} host - The controller host for this controller to be appended to\r\n\t * @memberof UmbMemberGroupCollectionServerDataSource\r\n\t */\r\n\tconstructor(host: UmbControllerHost) {\r\n\t\tthis.#host = host;\r\n\t}\r\n\r\n\t/**\r\n\t * Gets the member collection filtered by the given filter.\r\n\t * @param {UmbMemberGroupCollectionFilterModel} filter\r\n\t * @returns {*}\r\n\t * @memberof UmbMemberGroupCollectionServerDataSource\r\n\t */\r\n\tasync getCollection(query: UmbMemberGroupCollectionFilterModel) {\r\n\t\tconst { data, error } = await tryExecute(this.#host, MemberGroupService.getMemberGroup({ query }));\r\n\r\n\t\tif (error) {\r\n\t\t\treturn { error };\r\n\t\t}\r\n\r\n\t\tif (!data) {\r\n\t\t\treturn { data: { items: [], total: 0 } };\r\n\t\t}\r\n\r\n\t\tconst { items, total } = data;\r\n\r\n\t\tconst mappedItems: Array<UmbMemberGroupDetailModel> = items.map((item: MemberGroupResponseModel) => {\r\n\t\t\tconst memberDetail: UmbMemberGroupDetailModel = {\r\n\t\t\t\tentityType: UMB_MEMBER_GROUP_ENTITY_TYPE,\r\n\t\t\t\tunique: item.id,\r\n\t\t\t\tname: item.name,\r\n\t\t\t};\r\n\r\n\t\t\treturn memberDetail;\r\n\t\t});\r\n\r\n\t\treturn { data: { items: mappedItems, total } };\r\n\t}\r\n}\r\n","import type { UmbMemberGroupCollectionFilterModel } from '../types.js';\r\nimport { UmbMemberGroupCollectionServerDataSource } from './member-group-collection.server.data-source.js';\r\nimport type { UmbMemberGroupCollectionDataSource } from './types.js';\r\nimport { UmbRepositoryBase } from '@umbraco-cms/backoffice/repository';\r\nimport type { UmbCollectionRepository } from '@umbraco-cms/backoffice/collection';\r\nimport type { UmbControllerHost } from '@umbraco-cms/backoffice/controller-api';\r\n\r\nexport class UmbMemberGroupCollectionRepository extends UmbRepositoryBase implements UmbCollectionRepository {\r\n\t#collectionSource: UmbMemberGroupCollectionDataSource;\r\n\r\n\tconstructor(host: UmbControllerHost) {\r\n\t\tsuper(host);\r\n\t\tthis.#collectionSource = new UmbMemberGroupCollectionServerDataSource(host);\r\n\t}\r\n\r\n\tasync requestCollection(filter: UmbMemberGroupCollectionFilterModel) {\r\n\t\treturn this.#collectionSource.getCollection(filter);\r\n\t}\r\n}\r\n\r\nexport default UmbMemberGroupCollectionRepository;\r\n","import { UmbMemberGroupCollectionRepository } from '../../collection/index.js';\r\nimport type { UmbMemberGroupDetailModel } from '../../types.js';\r\nimport type {\r\n\tUmbMemberGroupPickerModalValue,\r\n\tUmbMemberGroupPickerModalData,\r\n} from './member-group-picker-modal.token.js';\r\nimport { html, customElement, state, repeat } from '@umbraco-cms/backoffice/external/lit';\r\nimport { UmbSelectionManager } from '@umbraco-cms/backoffice/utils';\r\nimport { UmbModalBaseElement } from '@umbraco-cms/backoffice/modal';\r\n\r\n@customElement('umb-member-group-picker-modal')\r\nexport class UmbMemberGroupPickerModalElement extends UmbModalBaseElement<\r\n\tUmbMemberGroupPickerModalData,\r\n\tUmbMemberGroupPickerModalValue\r\n> {\r\n\t@state()\r\n\tprivate _memberGroups: Array<UmbMemberGroupDetailModel> = [];\r\n\r\n\t#collectionRepository = new UmbMemberGroupCollectionRepository(this);\r\n\t#selectionManager = new UmbSelectionManager(this);\r\n\r\n\toverride connectedCallback(): void {\r\n\t\tsuper.connectedCallback();\r\n\t\tthis.#selectionManager.setSelectable(true);\r\n\t\tthis.#selectionManager.setMultiple(this.data?.multiple ?? false);\r\n\t\tthis.#selectionManager.setSelection(this.value?.selection ?? []);\r\n\t}\r\n\r\n\toverride async firstUpdated() {\r\n\t\tconst { data } = await this.#collectionRepository.requestCollection({});\r\n\t\tthis._memberGroups = data?.items ?? [];\r\n\t}\r\n\r\n\tget #filteredMemberGroups() {\r\n\t\tif (this.data?.filter) {\r\n\t\t\treturn this._memberGroups.filter(this.data.filter as any);\r\n\t\t} else {\r\n\t\t\treturn this._memberGroups;\r\n\t\t}\r\n\t}\r\n\r\n\t#submit() {\r\n\t\tthis.value = { selection: this.#selectionManager.getSelection() };\r\n\t\tthis.modalContext?.submit();\r\n\t}\r\n\r\n\t#close() {\r\n\t\tthis.modalContext?.reject();\r\n\t}\r\n\r\n\toverride render() {\r\n\t\treturn html`<umb-body-layout headline=${this.localize.term('defaultdialogs_chooseMemberGroup')}>\r\n\t\t\t<uui-box>\r\n\t\t\t\t${repeat(\r\n\t\t\t\t\tthis.#filteredMemberGroups,\r\n\t\t\t\t\t(item) => item.unique,\r\n\t\t\t\t\t(item) => html`\r\n\t\t\t\t\t\t<uui-menu-item\r\n\t\t\t\t\t\t\tlabel=${item.name ?? ''}\r\n\t\t\t\t\t\t\tselectable\r\n\t\t\t\t\t\t\t@selected=${() => this.#selectionManager.select(item.unique)}\r\n\t\t\t\t\t\t\t@deselected=${() => this.#selectionManager.deselect(item.unique)}\r\n\t\t\t\t\t\t\t?selected=${this.#selectionManager.isSelected(item.unique)}>\r\n\t\t\t\t\t\t\t<uui-icon slot=\"icon\" name=\"icon-users\"></uui-icon>\r\n\t\t\t\t\t\t</uui-menu-item>\r\n\t\t\t\t\t`,\r\n\t\t\t\t)}\r\n\t\t\t</uui-box>\r\n\t\t\t<div slot=\"actions\">\r\n\t\t\t\t<uui-button label=${this.localize.term('general_close')} @click=${this.#close}></uui-button>\r\n\t\t\t\t<uui-button\r\n\t\t\t\t\tlabel=${this.localize.term('general_choose')}\r\n\t\t\t\t\tlook=\"primary\"\r\n\t\t\t\t\tcolor=\"positive\"\r\n\t\t\t\t\t@click=${this.#submit}></uui-button>\r\n\t\t\t</div>\r\n\t\t</umb-body-layout> `;\r\n\t}\r\n}\r\n\r\nexport default UmbMemberGroupPickerModalElement;\r\n\r\ndeclare global {\r\n\tinterface HTMLElementTagNameMap {\r\n\t\t'umb-member-group-picker-modal': UmbMemberGroupPickerModalElement;\r\n\t}\r\n}\r\n"],"names":["UMB_MEMBER_GROUP_COLLECTION_REPOSITORY_ALIAS","UMB_MEMBER_GROUP_TABLE_COLLECTION_VIEW_ALIAS","UMB_MEMBER_GROUP_COLLECTION_ALIAS","UMB_MEMBER_GROUP_DETAIL_STORE_CONTEXT","UmbContextToken","UMB_MEMBER_GROUP_DETAIL_REPOSITORY_ALIAS","UMB_MEMBER_GROUP_DETAIL_STORE_ALIAS","UMB_MEMBER_GROUP_ITEM_STORE_CONTEXT","UMB_MEMBER_GROUP_ITEM_REPOSITORY_ALIAS","UMB_MEMBER_GROUP_STORE_ALIAS","UMB_MEMBER_GROUP_WORKSPACE_CONTEXT","context","UMB_MEMBER_GROUP_WORKSPACE_ALIAS","UMB_MEMBER_GROUP_ROOT_WORKSPACE_ALIAS","UMB_MEMBER_GROUP_ROOT_ENTITY_TYPE","UMB_MEMBER_GROUP_ENTITY_TYPE","UMB_MEMBER_GROUP_WORKSPACE_PATH","UMB_WORKSPACE_PATH_PATTERN","UMB_MEMBER_MANAGEMENT_SECTION_PATHNAME","UMB_MEMBER_GROUP_ROOT_WORKSPACE_PATH","UMB_MEMBER_GROUP_PICKER_MODAL","UmbModalToken","UmbMemberGroupPickerInputContext","UmbPickerInputContext","host","_sorter","_readonly","_pickerContext","_UmbInputMemberGroupElement_instances","openPicker_fn","removeItem_fn","renderItems_fn","renderAddButton_fn","renderItem_fn","renderRemoveButton_fn","UmbInputMemberGroupElement","UmbFormControlMixin","UmbLitElement","__privateAdd","UmbSorterController","element","modelEntry","model","UmbChangeEvent","UmbModalRouteRegistrationController","UMB_WORKSPACE_MODAL","routeBuilder","__privateGet","selection","selectedItems","value","ids","selectionString","splitStringToArray","__privateSet","html","__privateMethod","item","repeat","nothing","css","__decorateClass","property","state","customElement","UmbMemberGroupCollectionServerDataSource","#host","query","data","error","tryExecute","MemberGroupService","items","total","UmbMemberGroupCollectionRepository","UmbRepositoryBase","#collectionSource","filter","_collectionRepository","_selectionManager","_UmbMemberGroupPickerModalElement_instances","filteredMemberGroups_get","submit_fn","close_fn","UmbMemberGroupPickerModalElement","UmbModalBaseElement","UmbSelectionManager","UmbMemberGroupPickerModalElement$1"],"mappings":"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"}