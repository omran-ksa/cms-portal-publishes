{"version":3,"file":"member-collection.element-BAFp1JDh.js","sources":["../../../src/packages/members/member/collection/member-collection-header.element.ts","../../../src/packages/members/member/collection/member-collection.element.ts"],"sourcesContent":["import { UmbMemberTypeTreeRepository } from '../../member-type/tree/member-type-tree.repository.js';\r\nimport type { UmbMemberTypeItemModel } from '../../member-type/repository/item/types.js';\r\nimport { UMB_MEMBER_COLLECTION_CONTEXT } from './member-collection.context-token.js';\r\nimport { css, customElement, html, ifDefined, repeat, state } from '@umbraco-cms/backoffice/external/lit';\r\nimport { UmbLitElement } from '@umbraco-cms/backoffice/lit-element';\r\n\r\n@customElement('umb-member-collection-header')\r\nexport class UmbMemberCollectionHeaderElement extends UmbLitElement {\r\n\t#collectionContext?: typeof UMB_MEMBER_COLLECTION_CONTEXT.TYPE;\r\n\r\n\t// TODO: Should we make a collection repository for member types?\r\n\t#contentTypeRepository = new UmbMemberTypeTreeRepository(this);\r\n\r\n\t@state()\r\n\tprivate _contentTypes: Array<UmbMemberTypeItemModel> = [];\r\n\r\n\t@state()\r\n\tprivate _selectedContentTypeUnique?: string;\r\n\r\n\tconstructor() {\r\n\t\tsuper();\r\n\r\n\t\tthis.consumeContext(UMB_MEMBER_COLLECTION_CONTEXT, (instance) => {\r\n\t\t\tthis.#collectionContext = instance;\r\n\t\t});\r\n\r\n\t\tthis.#requestContentTypes();\r\n\t}\r\n\r\n\tasync #requestContentTypes() {\r\n\t\tconst { data } = await this.#contentTypeRepository.requestTreeRootItems({});\r\n\r\n\t\tif (data) {\r\n\t\t\tthis._contentTypes = data.items.map((item) => ({\r\n\t\t\t\tunique: item.unique,\r\n\t\t\t\tname: item.name,\r\n\t\t\t\ticon: item.icon || '',\r\n\t\t\t\tentityType: item.entityType,\r\n\t\t\t}));\r\n\t\t}\r\n\t}\r\n\r\n\tget #getContentTypeFilterLabel() {\r\n\t\tif (!this._selectedContentTypeUnique) return this.localize.term('general_all') + ' Member types';\r\n\t\treturn (\r\n\t\t\tthis._contentTypes.find((type) => type.unique === this._selectedContentTypeUnique)?.name ||\r\n\t\t\tthis.localize.term('general_all')\r\n\t\t);\r\n\t}\r\n\r\n\t#onContentTypeFilterChange(contentTypeUnique: string) {\r\n\t\tthis._selectedContentTypeUnique = contentTypeUnique;\r\n\t\tthis.#collectionContext?.setMemberTypeFilter(contentTypeUnique);\r\n\t}\r\n\r\n\toverride render() {\r\n\t\treturn html`\r\n\t\t\t<umb-collection-action-bundle></umb-collection-action-bundle>\r\n\t\t\t<umb-collection-filter-field></umb-collection-filter-field>\r\n\t\t\t${this.#renderContentTypeFilter()}\r\n\t\t`;\r\n\t}\r\n\r\n\t#renderContentTypeFilter() {\r\n\t\treturn html`\r\n\t\t\t<umb-dropdown>\r\n\t\t\t\t<span slot=\"label\">${this.#getContentTypeFilterLabel}</span>\r\n\t\t\t\t<div id=\"dropdown-layout\">\r\n\t\t\t\t\t<uui-button\r\n\t\t\t\t\t\tlabel=${this.localize.term('general_all')}\r\n\t\t\t\t\t\tlook=${!this._selectedContentTypeUnique ? 'secondary' : 'default'}\r\n\t\t\t\t\t\tcompact\r\n\t\t\t\t\t\t@click=${() => this.#onContentTypeFilterChange('')}></uui-button>\r\n\t\t\t\t\t${repeat(\r\n\t\t\t\t\t\tthis._contentTypes,\r\n\t\t\t\t\t\t(memberType) => memberType.unique,\r\n\t\t\t\t\t\t(memberType) => html`\r\n\t\t\t\t\t\t\t<uui-button\r\n\t\t\t\t\t\t\t\tlabel=${ifDefined(memberType.name)}\r\n\t\t\t\t\t\t\t\tlook=${memberType.unique === this._selectedContentTypeUnique ? 'secondary' : 'default'}\r\n\t\t\t\t\t\t\t\tcompact\r\n\t\t\t\t\t\t\t\t@click=${() => this.#onContentTypeFilterChange(memberType.unique)}></uui-button>\r\n\t\t\t\t\t\t`,\r\n\t\t\t\t\t)}\r\n\t\t\t\t</div>\r\n\t\t\t</umb-dropdown>\r\n\t\t`;\r\n\t}\r\n\tstatic override styles = [\r\n\t\tcss`\r\n\t\t\t:host {\r\n\t\t\t\theight: 100%;\r\n\t\t\t\twidth: 100%;\r\n\t\t\t\tdisplay: flex;\r\n\t\t\t\tjustify-content: space-between;\r\n\t\t\t\twhite-space: nowrap;\r\n\t\t\t\tgap: var(--uui-size-space-5);\r\n\t\t\t\talign-items: center;\r\n\t\t\t}\r\n\r\n\t\t\t#dropdown-layout {\r\n\t\t\t\tdisplay: flex;\r\n\t\t\t\tflex-direction: column;\r\n\t\t\t\t--uui-button-content-align: left;\r\n\t\t\t}\r\n\r\n\t\t\tumb-collection-filter-field {\r\n\t\t\t\twidth: 100%;\r\n\t\t\t}\r\n\t\t`,\r\n\t];\r\n}\r\n\r\nexport default UmbMemberCollectionHeaderElement;\r\n\r\ndeclare global {\r\n\tinterface HTMLElementTagNameMap {\r\n\t\t'umb-member-collection-header': UmbMemberCollectionHeaderElement;\r\n\t}\r\n}\r\n","import { html, customElement } from '@umbraco-cms/backoffice/external/lit';\r\nimport { UmbCollectionDefaultElement } from '@umbraco-cms/backoffice/collection';\r\n\r\nimport './member-collection-header.element.js';\r\n\r\n@customElement('umb-member-collection')\r\nexport class UmbMemberCollectionElement extends UmbCollectionDefaultElement {\r\n\tprotected override renderToolbar() {\r\n\t\treturn html`<umb-member-collection-header slot=\"header\"></umb-member-collection-header>`;\r\n\t}\r\n}\r\n\r\n/** @deprecated Should be exported as `element` only; to be removed in Umbraco 17. */\r\nexport default UmbMemberCollectionElement;\r\n\r\nexport { UmbMemberCollectionElement as element };\r\n\r\ndeclare global {\r\n\tinterface HTMLElementTagNameMap {\r\n\t\t'umb-member-collection': UmbMemberCollectionElement;\r\n\t}\r\n}\r\n"],"names":["_collectionContext","_contentTypeRepository","_UmbMemberCollectionHeaderElement_instances","requestContentTypes_fn","getContentTypeFilterLabel_get","onContentTypeFilterChange_fn","renderContentTypeFilter_fn","UmbMemberCollectionHeaderElement","UmbLitElement","__privateAdd","UmbMemberTypeTreeRepository","UMB_MEMBER_COLLECTION_CONTEXT","instance","__privateSet","__privateMethod","html","data","__privateGet","item","type","contentTypeUnique","repeat","memberType","ifDefined","css","__decorateClass","state","customElement","UmbMemberCollectionElement","UmbCollectionDefaultElement","UmbMemberCollectionElement$1"],"mappings":"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"}