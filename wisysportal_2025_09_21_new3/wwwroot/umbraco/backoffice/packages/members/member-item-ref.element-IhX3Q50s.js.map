{"version":3,"file":"member-item-ref.element-IhX3Q50s.js","sources":["../../../src/packages/members/member/item/member-item-ref.element.ts"],"sourcesContent":["import { UMB_MEMBER_ENTITY_TYPE } from '../entity.js';\r\nimport { UMB_MEMBER_MANAGEMENT_SECTION_ALIAS } from '../../section/constants.js';\r\nimport { UMB_EDIT_MEMBER_WORKSPACE_PATH_PATTERN } from '../paths.js';\r\nimport type { UmbMemberItemModel } from './repository/types.js';\r\nimport { createExtensionApiByAlias } from '@umbraco-cms/backoffice/extension-registry';\r\nimport { customElement, html, ifDefined, nothing, property, state } from '@umbraco-cms/backoffice/external/lit';\r\nimport { UmbLitElement } from '@umbraco-cms/backoffice/lit-element';\r\nimport { UmbModalRouteRegistrationController } from '@umbraco-cms/backoffice/router';\r\nimport { UMB_SECTION_USER_PERMISSION_CONDITION_ALIAS } from '@umbraco-cms/backoffice/section';\r\nimport { UMB_WORKSPACE_MODAL } from '@umbraco-cms/backoffice/workspace';\r\n\r\n@customElement('umb-member-item-ref')\r\nexport class UmbMemberItemRefElement extends UmbLitElement {\r\n\t#item?: UmbMemberItemModel | undefined;\r\n\r\n\t@property({ type: Object })\r\n\tpublic get item(): UmbMemberItemModel | undefined {\r\n\t\treturn this.#item;\r\n\t}\r\n\tpublic set item(value: UmbMemberItemModel | undefined) {\r\n\t\tthis.#item = value;\r\n\t}\r\n\r\n\t@property({ type: Boolean })\r\n\treadonly = false;\r\n\r\n\t@property({ type: Boolean })\r\n\tstandalone = false;\r\n\r\n\t@state()\r\n\t_editPath = '';\r\n\r\n\t@state()\r\n\t_userHasSectionAccess = false;\r\n\r\n\tconstructor() {\r\n\t\tsuper();\r\n\r\n\t\tcreateExtensionApiByAlias(this, UMB_SECTION_USER_PERMISSION_CONDITION_ALIAS, [\r\n\t\t\t{\r\n\t\t\t\tconfig: {\r\n\t\t\t\t\tmatch: UMB_MEMBER_MANAGEMENT_SECTION_ALIAS,\r\n\t\t\t\t},\r\n\t\t\t\tonChange: (permitted: boolean) => {\r\n\t\t\t\t\tthis._userHasSectionAccess = permitted;\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t]);\r\n\r\n\t\tnew UmbModalRouteRegistrationController(this, UMB_WORKSPACE_MODAL)\r\n\t\t\t.onSetup(() => {\r\n\t\t\t\treturn { data: { entityType: UMB_MEMBER_ENTITY_TYPE, preset: {} } };\r\n\t\t\t})\r\n\t\t\t.observeRouteBuilder((routeBuilder) => {\r\n\t\t\t\tthis._editPath = routeBuilder({});\r\n\t\t\t});\r\n\t}\r\n\r\n\t#getHref(item: UmbMemberItemModel) {\r\n\t\tif (!this._editPath) return;\r\n\t\tconst path = UMB_EDIT_MEMBER_WORKSPACE_PATH_PATTERN.generateLocal({ unique: item.unique });\r\n\t\treturn `${this._editPath}/${path}`;\r\n\t}\r\n\r\n\toverride render() {\r\n\t\tif (!this.item) return nothing;\r\n\r\n\t\treturn html`\r\n\t\t\t<uui-ref-node-member\r\n\t\t\t\tname=${this.item.name}\r\n\t\t\t\thref=${ifDefined(this.#getHref(this.item))}\r\n\t\t\t\t?readonly=${this.readonly || !this._userHasSectionAccess}\r\n\t\t\t\t?standalone=${this.standalone}>\r\n\t\t\t\t<slot name=\"actions\" slot=\"actions\"></slot>\r\n\t\t\t\t${this.#renderIcon(this.item)}\r\n\t\t\t</uui-ref-node-member>\r\n\t\t`;\r\n\t}\r\n\r\n\t#renderIcon(item: UmbMemberItemModel) {\r\n\t\tif (!item.memberType.icon) return;\r\n\t\treturn html`<umb-icon slot=\"icon\" name=${item.memberType.icon}></umb-icon>`;\r\n\t}\r\n}\r\n\r\nexport { UmbMemberItemRefElement as element };\r\n\r\ndeclare global {\r\n\tinterface HTMLElementTagNameMap {\r\n\t\t'umb-member-item-ref': UmbMemberItemRefElement;\r\n\t}\r\n}\r\n"],"names":["_item","_UmbMemberItemRefElement_instances","getHref_fn","renderIcon_fn","UmbMemberItemRefElement","UmbLitElement","__privateAdd","createExtensionApiByAlias","UMB_SECTION_USER_PERMISSION_CONDITION_ALIAS","UMB_MEMBER_MANAGEMENT_SECTION_ALIAS","permitted","UmbModalRouteRegistrationController","UMB_WORKSPACE_MODAL","UMB_MEMBER_ENTITY_TYPE","routeBuilder","__privateGet","value","__privateSet","html","ifDefined","__privateMethod","nothing","item","path","UMB_EDIT_MEMBER_WORKSPACE_PATH_PATTERN","__decorateClass","property","state","customElement"],"mappings":";;;;;;;;;;;;;;;wYAAAA,GAAAC,GAAAC,GAAAC;AAYa,IAAAC,IAAN,cAAsCC,EAAc;AAAA,EAuB1D,cAAc;AACP,UAAA,GAxBDC,EAAA,MAAAL,CAAA,GACNK,EAAA,MAAAN,CAAA,GAWW,KAAA,WAAA,IAGE,KAAA,aAAA,IAGD,KAAA,YAAA,IAGY,KAAA,wBAAA,IAKvBO,EAA0B,MAAMC,GAA6C;AAAA,MAC5E;AAAA,QACC,QAAQ;AAAA,UACP,OAAOC;AAAA,QACR;AAAA,QACA,UAAU,CAACC,MAAuB;AACjC,eAAK,wBAAwBA;AAAA,QAAA;AAAA,MAC9B;AAAA,IACD,CACA,GAED,IAAIC,EAAoC,MAAMC,CAAmB,EAC/D,QAAQ,OACD,EAAE,MAAM,EAAE,YAAYC,GAAwB,QAAQ,CAAA,IAAK,EAClE,EACA,oBAAoB,CAACC,MAAiB;AACjC,WAAA,YAAYA,EAAa,EAAE;AAAA,IAAA,CAChC;AAAA,EAAA;AAAA,EAvCH,IAAW,OAAuC;AACjD,WAAOC,EAAK,MAAAf,CAAA;AAAA,EAAA;AAAA,EAEb,IAAW,KAAKgB,GAAuC;AACtD,IAAAC,EAAA,MAAKjB,GAAQgB,CAAA;AAAA,EAAA;AAAA,EA4CL,SAAS;AACb,WAAC,KAAK,OAEHE;AAAA;AAAA,WAEE,KAAK,KAAK,IAAI;AAAA,WACdC,EAAUC,EAAK,MAAAnB,GAAAC,CAAA,EAAL,KAAc,MAAA,KAAK,KAAK,CAAC;AAAA,gBAC9B,KAAK,YAAY,CAAC,KAAK,qBAAqB;AAAA,kBAC1C,KAAK,UAAU;AAAA;AAAA,MAE3BkB,EAAK,MAAAnB,GAAAE,CAAA,EAAL,KAAiB,MAAA,KAAK,IAAK,CAAA;AAAA;AAAA,MATRkB;AAAA,EASQ;AASjC;AAtECrB,IAAA,oBAAA,QAAA;AADMC,IAAA,oBAAA,QAAA;AA8CNC,IAAQ,SAACoB,GAA0B;AAC9B,MAAA,CAAC,KAAK,UAAW;AACrB,QAAMC,IAAOC,EAAuC,cAAc,EAAE,QAAQF,EAAK,QAAQ;AACzF,SAAO,GAAG,KAAK,SAAS,IAAIC,CAAI;AACjC;AAiBApB,IAAW,SAACmB,GAA0B;AACjC,MAACA,EAAK,WAAW;AACd,WAAAJ,+BAAkCI,EAAK,WAAW,IAAI;AAC9D;AAlEWG,EAAA;AAAA,EADVC,EAAS,EAAE,MAAM,OAAQ,CAAA;AAAA,GAHdtB,EAID,WAAA,QAAA,CAAA;AAQXqB,EAAA;AAAA,EADCC,EAAS,EAAE,MAAM,QAAS,CAAA;AAAA,GAXftB,EAYZ,WAAA,YAAA,CAAA;AAGAqB,EAAA;AAAA,EADCC,EAAS,EAAE,MAAM,QAAS,CAAA;AAAA,GAdftB,EAeZ,WAAA,cAAA,CAAA;AAGAqB,EAAA;AAAA,EADCE,EAAM;AAAA,GAjBKvB,EAkBZ,WAAA,aAAA,CAAA;AAGAqB,EAAA;AAAA,EADCE,EAAM;AAAA,GApBKvB,EAqBZ,WAAA,yBAAA,CAAA;AArBYA,IAANqB,EAAA;AAAA,EADNG,EAAc,qBAAqB;AAAA,GACvBxB,CAAA;"}