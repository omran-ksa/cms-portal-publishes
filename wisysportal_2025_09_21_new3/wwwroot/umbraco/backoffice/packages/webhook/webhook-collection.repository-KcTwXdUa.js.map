{"version":3,"file":"webhook-collection.repository-KcTwXdUa.js","sources":["../../../src/packages/webhook/webhook/collection/repository/webhook-collection.server.data-source.ts","../../../src/packages/webhook/webhook/collection/repository/webhook-collection.repository.ts"],"sourcesContent":["import type { UmbWebhookCollectionFilterModel } from '../types.js';\r\nimport { UMB_WEBHOOK_ENTITY_TYPE } from '../../../entity.js';\r\nimport type { UmbWebhookDetailModel } from '../../types.js';\r\nimport { WebhookService } from '@umbraco-cms/backoffice/external/backend-api';\r\nimport type { UmbControllerHost } from '@umbraco-cms/backoffice/controller-api';\r\nimport { tryExecute } from '@umbraco-cms/backoffice/resources';\r\n\r\n/**\r\n * A data source that fetches the webhook collection data from the server.\r\n * @class UmbWebhookCollectionServerDataSource\r\n * @implements {UmbCollectionDataSource}\r\n */\r\nexport class UmbWebhookCollectionServerDataSource implements UmbWebhookCollectionServerDataSource {\r\n\t#host: UmbControllerHost;\r\n\r\n\t/**\r\n\t * Creates an instance of UmbWebhookCollectionServerDataSource.\r\n\t * @param {UmbControllerHost} host - The controller host for this controller to be appended to\r\n\t * @memberof UmbWebhookCollectionServerDataSource\r\n\t */\r\n\tconstructor(host: UmbControllerHost) {\r\n\t\tthis.#host = host;\r\n\t}\r\n\r\n\t/**\r\n\t * Gets the Webhook collection filtered by the given filter.\r\n\t * @param {UmbWebhookCollectionFilterModel} filter\r\n\t * @param _filter\r\n\t * @returns {*}\r\n\t * @memberof UmbWebhookCollectionServerDataSource\r\n\t */\r\n\tasync getCollection(_filter: UmbWebhookCollectionFilterModel) {\r\n\t\tconst { data, error } = await tryExecute(this.#host, WebhookService.getWebhook({ query: _filter }));\r\n\r\n\t\tif (error || !data) {\r\n\t\t\treturn { error };\r\n\t\t}\r\n\r\n\t\tconst items = data.items.map((item) => {\r\n\t\t\tconst model: UmbWebhookDetailModel = {\r\n\t\t\t\tentityType: UMB_WEBHOOK_ENTITY_TYPE,\r\n\t\t\t\tunique: item.id,\r\n\t\t\t\turl: item.url,\r\n\t\t\t\tname: item.name,\r\n\t\t\t\tdescription: item.description,\r\n\t\t\t\tenabled: item.enabled,\r\n\t\t\t\theaders: item.headers,\r\n\t\t\t\tevents: item.events,\r\n\t\t\t\tcontentTypes: item.contentTypeKeys,\r\n\t\t\t};\r\n\r\n\t\t\treturn model;\r\n\t\t});\r\n\r\n\t\treturn { data: { items, total: data.total } };\r\n\t}\r\n}\r\n","import type { UmbWebhookCollectionFilterModel } from '../types.js';\r\nimport { UmbWebhookCollectionServerDataSource } from './webhook-collection.server.data-source.js';\r\nimport type { UmbWebhookCollectionDataSource } from './types.js';\r\nimport { UmbRepositoryBase } from '@umbraco-cms/backoffice/repository';\r\nimport type { UmbCollectionRepository } from '@umbraco-cms/backoffice/collection';\r\nimport type { UmbControllerHost } from '@umbraco-cms/backoffice/controller-api';\r\n\r\nexport class UmbWebhookCollectionRepository extends UmbRepositoryBase implements UmbCollectionRepository {\r\n\t#collectionSource: UmbWebhookCollectionDataSource;\r\n\r\n\tconstructor(host: UmbControllerHost) {\r\n\t\tsuper(host);\r\n\t\tthis.#collectionSource = new UmbWebhookCollectionServerDataSource(host);\r\n\t}\r\n\r\n\tasync requestCollection(filter: UmbWebhookCollectionFilterModel) {\r\n\t\treturn this.#collectionSource.getCollection(filter);\r\n\t}\r\n}\r\n\r\nexport default UmbWebhookCollectionRepository;\r\n"],"names":["UmbWebhookCollectionServerDataSource","#host","host","_filter","data","error","tryExecute","WebhookService","item","UMB_WEBHOOK_ENTITY_TYPE","UmbWebhookCollectionRepository","UmbRepositoryBase","#collectionSource","filter"],"mappings":";;;;AAYO,MAAMA,EAAqF;AAAA,EACjGC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,EAOA,YAAYC,GAAyB;AACpC,SAAKD,KAAQC;AAAA,EAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,EAUd,MAAM,cAAcC,GAA0C;AAC7D,UAAM,EAAE,MAAAC,GAAM,OAAAC,MAAU,MAAMC,EAAW,KAAKL,IAAOM,EAAe,WAAW,EAAE,OAAOJ,EAAS,CAAA,CAAC;AAE9F,WAAAE,KAAS,CAACD,IACN,EAAE,OAAAC,EAAM,IAmBT,EAAE,MAAM,EAAE,OAhBHD,EAAK,MAAM,IAAI,CAACI,OACQ;AAAA,MACpC,YAAYC;AAAA,MACZ,QAAQD,EAAK;AAAA,MACb,KAAKA,EAAK;AAAA,MACV,MAAMA,EAAK;AAAA,MACX,aAAaA,EAAK;AAAA,MAClB,SAASA,EAAK;AAAA,MACd,SAASA,EAAK;AAAA,MACd,QAAQA,EAAK;AAAA,MACb,cAAcA,EAAK;AAAA,IACpB,EAGA,GAEuB,OAAOJ,EAAK,QAAQ;AAAA,EAAA;AAE9C;ACjDO,MAAMM,UAAuCC,EAAqD;AAAA,EACxGC;AAAA,EAEA,YAAYV,GAAyB;AACpC,UAAMA,CAAI,GACL,KAAAU,KAAoB,IAAIZ,EAAqCE,CAAI;AAAA,EAAA;AAAA,EAGvE,MAAM,kBAAkBW,GAAyC;AACzD,WAAA,KAAKD,GAAkB,cAAcC,CAAM;AAAA,EAAA;AAEpD;"}