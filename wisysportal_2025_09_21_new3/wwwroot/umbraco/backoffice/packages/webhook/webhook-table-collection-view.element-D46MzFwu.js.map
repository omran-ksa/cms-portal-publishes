{"version":3,"file":"webhook-table-collection-view.element-D46MzFwu.js","sources":["../../../src/packages/webhook/webhook/collection/views/table/column-layouts/name/webhook-table-name-column-layout.element.ts","../../../src/packages/webhook/webhook/collection/views/table/column-layouts/content-type/webhook-table-name-column-layout.element.ts","../../../src/packages/webhook/webhook/collection/views/table/webhook-table-collection-view.element.ts"],"sourcesContent":["import { UmbTextStyles } from '@umbraco-cms/backoffice/style';\r\nimport { html, LitElement, nothing, customElement, property, css } from '@umbraco-cms/backoffice/external/lit';\r\n\r\n@customElement('umb-webhook-table-name-column-layout')\r\nexport class UmbWebhookTableNameColumnLayoutElement extends LitElement {\r\n\t@property({ attribute: false })\r\n\tvalue?: { unique: string; name: string };\r\n\r\n\toverride render() {\r\n\t\tif (!this.value) return nothing;\r\n\r\n\t\treturn html`<a href=${'section/settings/workspace/webhook/edit/' + this.value.unique}>${this.value.name}</a>`;\r\n\t}\r\n\r\n\tstatic override styles = [\r\n\t\tUmbTextStyles,\r\n\t\tcss`\r\n\t\t\t:host {\r\n\t\t\t\twhite-space: nowrap;\r\n\t\t\t}\r\n\t\t`,\r\n\t];\r\n}\r\n\r\ndeclare global {\r\n\tinterface HTMLElementTagNameMap {\r\n\t\t'umb-webhook-table-name-column-layout': UmbWebhookTableNameColumnLayoutElement;\r\n\t}\r\n}\r\n","import { UmbTextStyles } from '@umbraco-cms/backoffice/style';\r\nimport { html, nothing, customElement, property, state } from '@umbraco-cms/backoffice/external/lit';\r\nimport { UmbLitElement } from '@umbraco-cms/backoffice/lit-element';\r\nimport { UmbMediaTypeItemRepository } from '@umbraco-cms/backoffice/media-type';\r\nimport { UmbDocumentTypeItemRepository } from '@umbraco-cms/backoffice/document-type';\r\n\r\n@customElement('umb-webhook-table-content-type-column-layout')\r\nexport class UmbWebhookTableContentTypeColumnLayoutElement extends UmbLitElement {\r\n\t@property({ attribute: false })\r\n\tvalue?: { contentTypeName: string; contentTypes: Array<string> };\r\n\r\n\t@state()\r\n\tprivate _contentTypes = '';\r\n\r\n\t#repository?: UmbDocumentTypeItemRepository | UmbMediaTypeItemRepository;\r\n\r\n\toverride connectedCallback(): void {\r\n\t\tsuper.connectedCallback();\r\n\r\n\t\tthis.#getContentTypes();\r\n\t}\r\n\r\n\tasync #getContentTypes() {\r\n\t\tswitch (this.value?.contentTypeName) {\r\n\t\t\tcase 'Content':\r\n\t\t\t\tthis.#repository = new UmbDocumentTypeItemRepository(this);\r\n\t\t\t\tbreak;\r\n\t\t\tcase 'Media':\r\n\t\t\t\tthis.#repository = new UmbMediaTypeItemRepository(this);\r\n\t\t\t\tbreak;\r\n\t\t}\r\n\r\n\t\tif (this.value?.contentTypeName && this.#repository) {\r\n\t\t\tconst { data } = await this.#repository.requestItems(this.value.contentTypes);\r\n\t\t\tthis._contentTypes = data?.map((item) => this.localize.string(item.name)).join(', ') ?? '';\r\n\t\t}\r\n\t}\r\n\r\n\toverride render() {\r\n\t\tif (!this.value) return nothing;\r\n\r\n\t\treturn html`${this._contentTypes}`;\r\n\t}\r\n\r\n\tstatic override styles = [UmbTextStyles];\r\n}\r\n\r\ndeclare global {\r\n\tinterface HTMLElementTagNameMap {\r\n\t\t'umb-webhook-table-content-type-column-layout': UmbWebhookTableContentTypeColumnLayoutElement;\r\n\t}\r\n}\r\n","import type { UmbWebhookDetailModel } from '../../../types.js';\r\nimport type { UmbDefaultCollectionContext } from '@umbraco-cms/backoffice/collection';\r\nimport { css, customElement, html, state } from '@umbraco-cms/backoffice/external/lit';\r\nimport { UmbLitElement } from '@umbraco-cms/backoffice/lit-element';\r\nimport { UMB_COLLECTION_CONTEXT } from '@umbraco-cms/backoffice/collection';\r\nimport type { UmbTableColumn, UmbTableConfig, UmbTableItem } from '@umbraco-cms/backoffice/components';\r\n\r\nimport './column-layouts/name/webhook-table-name-column-layout.element.js';\r\nimport './column-layouts/content-type/webhook-table-name-column-layout.element.js';\r\nimport { UMB_EDIT_WEBHOOK_WORKSPACE_PATH_PATTERN } from '../../../paths.js';\r\n\r\n@customElement('umb-webhook-table-collection-view')\r\nexport class UmbWebhookTableCollectionViewElement extends UmbLitElement {\r\n\t@state()\r\n\tprivate _tableConfig: UmbTableConfig = {\r\n\t\tallowSelection: false,\r\n\t};\r\n\r\n\t@state()\r\n\tprivate _tableColumns: Array<UmbTableColumn> = [\r\n\t\t{\r\n\t\t\tname: this.localize.term('general_name'),\r\n\t\t\talias: 'name',\r\n\t\t},\r\n\t\t{\r\n\t\t\tname: this.localize.term('webhooks_url'),\r\n\t\t\talias: 'url',\r\n\t\t},\r\n\t\t{\r\n\t\t\tname: this.localize.term('webhooks_events'),\r\n\t\t\talias: 'events',\r\n\t\t},\r\n\t\t{\r\n\t\t\tname: this.localize.term('webhooks_types'),\r\n\t\t\talias: 'contentTypes',\r\n\t\t\telementName: 'umb-webhook-table-content-type-column-layout',\r\n\t\t},\r\n\t\t{\r\n\t\t\tname: this.localize.term('general_status'),\r\n\t\t\talias: 'status',\r\n\t\t},\r\n\t\t{\r\n\t\t\tname: '',\r\n\t\t\talias: 'entityActions',\r\n\t\t\talign: 'right',\r\n\t\t},\r\n\t];\r\n\r\n\t@state()\r\n\tprivate _tableItems: Array<UmbTableItem> = [];\r\n\r\n\t#collectionContext?: UmbDefaultCollectionContext<UmbWebhookDetailModel>;\r\n\t#enabledLabel: string;\r\n\t#disabledLabel: string;\r\n\t#unnamedWebhookLabel: string;\r\n\r\n\tconstructor() {\r\n\t\tsuper();\r\n\r\n\t\tthis.#enabledLabel = this.localize.term('webhooks_enabled');\r\n\t\tthis.#disabledLabel = this.localize.term('webhooks_disabled');\r\n\t\tthis.#unnamedWebhookLabel = this.localize.term('webhooks_unnamedWebhook');\r\n\r\n\t\tthis.consumeContext(UMB_COLLECTION_CONTEXT, (instance) => {\r\n\t\t\tthis.#collectionContext = instance;\r\n\t\t\tthis.#observeCollectionItems();\r\n\t\t});\r\n\t}\r\n\r\n\t#observeCollectionItems() {\r\n\t\tif (!this.#collectionContext) return;\r\n\t\tthis.observe(this.#collectionContext.items, (items) => this.#createTableItems(items), 'umbCollectionItemsObserver');\r\n\t}\r\n\r\n\t#createTableItems(webhooks: Array<UmbWebhookDetailModel>) {\r\n\t\tthis._tableItems = webhooks.map((webhook) => {\r\n\t\t\tconst name = webhook.name || `(${this.#unnamedWebhookLabel})`;\r\n\t\t\tconst path = UMB_EDIT_WEBHOOK_WORKSPACE_PATH_PATTERN.generateAbsolute({ unique: webhook.unique });\r\n\r\n\t\t\treturn {\r\n\t\t\t\tid: webhook.unique,\r\n\t\t\t\ticon: 'icon-webhook',\r\n\t\t\t\tdata: [\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tcolumnAlias: 'name',\r\n\t\t\t\t\t\tvalue: html`<a href=${path}>${name}</a>`,\r\n\t\t\t\t\t},\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tcolumnAlias: 'url',\r\n\t\t\t\t\t\tvalue: webhook.url,\r\n\t\t\t\t\t},\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tcolumnAlias: 'events',\r\n\t\t\t\t\t\tvalue: webhook.events.map((event) => event.eventName).join(', ') || 'None',\r\n\t\t\t\t\t},\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tcolumnAlias: 'contentTypes',\r\n\t\t\t\t\t\tvalue: { contentTypeName: webhook.events[0].eventType, contentTypes: webhook.contentTypes },\r\n\t\t\t\t\t},\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tcolumnAlias: 'status',\r\n\t\t\t\t\t\tvalue: html`<uui-tag color=${webhook.enabled ? 'positive' : 'danger'}\r\n\t\t\t\t\t\t\t>${webhook.enabled ? this.#enabledLabel : this.#disabledLabel}</uui-tag\r\n\t\t\t\t\t\t>`,\r\n\t\t\t\t\t},\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tcolumnAlias: 'entityActions',\r\n\t\t\t\t\t\tvalue: html`<umb-entity-actions-table-column-view\r\n\t\t\t\t\t\t\t.value=${{\r\n\t\t\t\t\t\t\t\tentityType: webhook.entityType,\r\n\t\t\t\t\t\t\t\tunique: webhook.unique,\r\n\t\t\t\t\t\t\t\tname: webhook.name,\r\n\t\t\t\t\t\t\t}}></umb-entity-actions-table-column-view>`,\r\n\t\t\t\t\t},\r\n\t\t\t\t],\r\n\t\t\t};\r\n\t\t});\r\n\t}\r\n\r\n\toverride render() {\r\n\t\treturn html`\r\n\t\t\t<umb-table .config=${this._tableConfig} .columns=${this._tableColumns} .items=${this._tableItems}></umb-table>\r\n\t\t`;\r\n\t}\r\n\r\n\tstatic override styles = [\r\n\t\tcss`\r\n\t\t\t:host {\r\n\t\t\t\tdisplay: flex;\r\n\t\t\t\tflex-direction: column;\r\n\t\t\t}\r\n\t\t`,\r\n\t];\r\n}\r\n\r\nexport default UmbWebhookTableCollectionViewElement;\r\n\r\ndeclare global {\r\n\tinterface HTMLElementTagNameMap {\r\n\t\t'umb-webhook-table-collection-view': UmbWebhookTableCollectionViewElement;\r\n\t}\r\n}\r\n"],"names":["UmbWebhookTableNameColumnLayoutElement","LitElement","html","nothing","UmbTextStyles","css","__decorateClass","property","customElement","_repository","_UmbWebhookTableContentTypeColumnLayoutElement_instances","getContentTypes_fn","UmbWebhookTableContentTypeColumnLayoutElement","UmbLitElement","__privateAdd","__privateMethod","__privateSet","UmbDocumentTypeItemRepository","UmbMediaTypeItemRepository","__privateGet","data","item","state","_collectionContext","_enabledLabel","_disabledLabel","_unnamedWebhookLabel","_UmbWebhookTableCollectionViewElement_instances","observeCollectionItems_fn","createTableItems_fn","UmbWebhookTableCollectionViewElement","UMB_COLLECTION_CONTEXT","instance","items","webhooks","webhook","name","path","UMB_EDIT_WEBHOOK_WORKSPACE_PATH_PATTERN","event","UmbWebhookTableCollectionViewElement$1"],"mappings":"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"}