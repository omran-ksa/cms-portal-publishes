{"version":3,"file":"block-grid-type-workspace-view-settings.element--cCroOZU.js","sources":["../../../src/packages/block/block-grid/workspace/views/block-grid-type-workspace-view-settings.element.ts"],"sourcesContent":["import { css, html, customElement, state } from '@umbraco-cms/backoffice/external/lit';\r\nimport { UmbTextStyles } from '@umbraco-cms/backoffice/style';\r\nimport { UmbLitElement } from '@umbraco-cms/backoffice/lit-element';\r\nimport type { UmbWorkspaceViewElement } from '@umbraco-cms/backoffice/workspace';\r\nimport { UMB_PROPERTY_DATASET_CONTEXT } from '@umbraco-cms/backoffice/property';\r\nimport type { UmbInputNumberRangeElement } from '@umbraco-cms/backoffice/components';\r\nimport { UMB_DATA_TYPE_WORKSPACE_CONTEXT } from '@umbraco-cms/backoffice/data-type';\r\n\r\n@customElement('umb-block-grid-type-workspace-view')\r\nexport class UmbBlockGridTypeWorkspaceViewSettingsElement extends UmbLitElement implements UmbWorkspaceViewElement {\r\n\t#labelOnTopSetting = { alias: 'labelOnTop', value: true };\r\n\r\n\t@state()\r\n\tprivate _showSizeOptions = false;\r\n\r\n\t@state()\r\n\tprivate _rowMinSpan?: number;\r\n\r\n\t@state()\r\n\tprivate _rowMaxSpan?: number;\r\n\r\n\t@state()\r\n\tprivate _dataTypeGridColumns?: number;\r\n\r\n\t#datasetContext?: typeof UMB_PROPERTY_DATASET_CONTEXT.TYPE;\r\n\r\n\tconstructor() {\r\n\t\tsuper();\r\n\r\n\t\tthis.consumeContext(UMB_DATA_TYPE_WORKSPACE_CONTEXT, async (context) => {\r\n\t\t\tthis.observe(\r\n\t\t\t\tawait context?.propertyValueByAlias<undefined | string>('gridColumns'),\r\n\t\t\t\t(value) => {\r\n\t\t\t\t\tthis._dataTypeGridColumns = value ? parseInt(value, 10) : undefined;\r\n\t\t\t\t},\r\n\t\t\t\t'observeGridColumns',\r\n\t\t\t);\r\n\t\t}).passContextAliasMatches();\r\n\r\n\t\tthis.consumeContext(UMB_PROPERTY_DATASET_CONTEXT, async (context) => {\r\n\t\t\tthis.#datasetContext = context;\r\n\r\n\t\t\t// TODO set showSizeOption to true when rowMinSpan or rowMaxSpan is set\r\n\r\n\t\t\tthis.observe(\r\n\t\t\t\tawait context?.propertyValueByAlias('columnSpanOptions'),\r\n\t\t\t\t(value) => {\r\n\t\t\t\t\tif (Array.isArray(value) && value.length > 0) {\r\n\t\t\t\t\t\tthis._showSizeOptions = true;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tthis.removeUmbControllerByAlias('_observeColumnSpanOptions');\r\n\t\t\t\t},\r\n\t\t\t\t'observeColumnSpanOptions',\r\n\t\t\t);\r\n\r\n\t\t\tthis.observe(\r\n\t\t\t\tawait context?.propertyValueByAlias<number | undefined>('rowMinSpan'),\r\n\t\t\t\t(value) => {\r\n\t\t\t\t\tthis._rowMinSpan = value;\r\n\t\t\t\t},\r\n\t\t\t\t'observeRowMinSpan',\r\n\t\t\t);\r\n\r\n\t\t\tthis.observe(\r\n\t\t\t\tawait context?.propertyValueByAlias<number | undefined>('rowMaxSpan'),\r\n\t\t\t\t(value) => {\r\n\t\t\t\t\tthis._rowMaxSpan = value;\r\n\t\t\t\t},\r\n\t\t\t\t'observeRowMaxSpan',\r\n\t\t\t);\r\n\t\t});\r\n\t}\r\n\r\n\t#onRowSpanChange(e: CustomEvent) {\r\n\t\tthis.#datasetContext?.setPropertyValue('rowMinSpan', (e.target as UmbInputNumberRangeElement).minValue);\r\n\t\tthis.#datasetContext?.setPropertyValue('rowMaxSpan', (e.target as UmbInputNumberRangeElement).maxValue);\r\n\t}\r\n\r\n\toverride render() {\r\n\t\treturn html`\r\n\t\t\t<uui-box headline=${this.localize.term('general_general')}>\r\n\t\t\t\t<umb-property\r\n\t\t\t\t\tlabel=${this.localize.term('general_label')}\r\n\t\t\t\t\talias=\"label\"\r\n\t\t\t\t\tproperty-editor-ui-alias=\"Umb.PropertyEditorUi.TextBox\"\r\n\t\t\t\t\t.config=${[this.#labelOnTopSetting]}></umb-property>\r\n\r\n\t\t\t\t<umb-property\r\n\t\t\t\t\tlabel=${this.localize.term('blockEditor_labelContentElementType')}\r\n\t\t\t\t\tread-only\r\n\t\t\t\t\talias=\"contentElementTypeKey\"\r\n\t\t\t\t\tproperty-editor-ui-alias=\"Umb.PropertyEditorUi.DocumentTypePicker\"\r\n\t\t\t\t\t.config=${[\r\n\t\t\t\t\t\t{ alias: 'onlyPickElementTypes', value: true },\r\n\t\t\t\t\t\t{ alias: 'validationLimit', value: { min: 0, max: 1 } },\r\n\t\t\t\t\t]}></umb-property>\r\n\r\n\t\t\t\t<umb-property\r\n\t\t\t\t\tlabel=${this.localize.term('blockEditor_labelSettingsElementType')}\r\n\t\t\t\t\talias=\"settingsElementTypeKey\"\r\n\t\t\t\t\tproperty-editor-ui-alias=\"Umb.PropertyEditorUi.DocumentTypePicker\"\r\n\t\t\t\t\t.config=${[\r\n\t\t\t\t\t\t{ alias: 'onlyPickElementTypes', value: true },\r\n\t\t\t\t\t\t{ alias: 'validationLimit', value: { min: 0, max: 1 } },\r\n\t\t\t\t\t]}></umb-property>\r\n\t\t\t</uui-box>\r\n\t\t\t<uui-box headline=${this.localize.term('blockEditor_headlineAllowance')}>\r\n\t\t\t\t<umb-property\r\n\t\t\t\t\tlabel=${this.localize.term('blockEditor_allowBlockInRoot')}\r\n\t\t\t\t\talias=\"allowAtRoot\"\r\n\t\t\t\t\tproperty-editor-ui-alias=\"Umb.PropertyEditorUi.Toggle\"></umb-property>\r\n\r\n\t\t\t\t<umb-property\r\n\t\t\t\t\tlabel=${this.localize.term('blockEditor_allowBlockInAreas')}\r\n\t\t\t\t\talias=\"allowInAreas\"\r\n\t\t\t\t\tproperty-editor-ui-alias=\"Umb.PropertyEditorUi.Toggle\"></umb-property>\r\n\t\t\t</uui-box>\r\n\t\t\t<uui-box headline=${this.localize.term('blockEditor_sizeOptions')}> ${this.#renderSizeOptions()} </uui-box>\r\n\t\t`;\r\n\t}\r\n\r\n\t#renderSizeOptions() {\r\n\t\tif (this._showSizeOptions) {\r\n\t\t\treturn html`\r\n\t\t\t\t<umb-property\r\n\t\t\t\t\tlabel=${this.localize.term('blockEditor_allowedBlockColumns')}\r\n\t\t\t\t\talias=\"columnSpanOptions\"\r\n\t\t\t\t\tproperty-editor-ui-alias=\"Umb.PropertyEditorUi.BlockGridColumnSpan\"\r\n\t\t\t\t\tdata-test-attr=\"${this._dataTypeGridColumns + ' '}\"\r\n\t\t\t\t\t.config=${[\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\talias: 'maxColumns',\r\n\t\t\t\t\t\t\tvalue: this._dataTypeGridColumns,\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t]}></umb-property>\r\n\r\n\t\t\t\t<umb-property-layout label=${this.localize.term('blockEditor_allowedBlockRows')}>\r\n\t\t\t\t\t<umb-input-number-range\r\n\t\t\t\t\t\tslot=\"editor\"\r\n\t\t\t\t\t\t.minValue=${this._rowMinSpan}\r\n\t\t\t\t\t\t.maxValue=${this._rowMaxSpan}\r\n\t\t\t\t\t\t@change=${this.#onRowSpanChange}></umb-input-number-range>\r\n\t\t\t\t</umb-property-layout>\r\n\t\t\t`;\r\n\t\t} else {\r\n\t\t\treturn html`<div id=\"showOptions\">\r\n\t\t\t\t<uui-button\r\n\t\t\t\t\tlabel=${this.localize.term('blockEditor_showSizeOptions')}\r\n\t\t\t\t\tlook=\"placeholder\"\r\n\t\t\t\t\t@click=${() => (this._showSizeOptions = !this._showSizeOptions)}></uui-button>\r\n\t\t\t</div>`;\r\n\t\t}\r\n\t}\r\n\r\n\tstatic override styles = [\r\n\t\tUmbTextStyles,\r\n\t\tcss`\r\n\t\t\t:host {\r\n\t\t\t\tdisplay: grid;\r\n\t\t\t\tgrid-template-columns: repeat(auto-fill, minmax(600px, 1fr));\r\n\t\t\t\tgap: var(--uui-size-layout-1);\r\n\t\t\t\tmargin: var(--uui-size-layout-1);\r\n\t\t\t\tpadding-bottom: var(--uui-size-layout-1); // To enforce some distance to the bottom of the scroll-container.\r\n\t\t\t}\r\n\r\n\t\t\t#showOptions {\r\n\t\t\t\tdisplay: flex;\r\n\t\t\t\theight: 100px;\r\n\t\t\t}\r\n\t\t\t#showOptions uui-button {\r\n\t\t\t\tflex: 1;\r\n\t\t\t}\r\n\t\t`,\r\n\t];\r\n}\r\n\r\nexport default UmbBlockGridTypeWorkspaceViewSettingsElement;\r\n\r\ndeclare global {\r\n\tinterface HTMLElementTagNameMap {\r\n\t\t'umb-block-grid-type-workspace-view-settings': UmbBlockGridTypeWorkspaceViewSettingsElement;\r\n\t}\r\n}\r\n"],"names":["_labelOnTopSetting","_datasetContext","_UmbBlockGridTypeWorkspaceViewSettingsElement_instances","onRowSpanChange_fn","renderSizeOptions_fn","UmbBlockGridTypeWorkspaceViewSettingsElement","UmbLitElement","__privateAdd","UMB_DATA_TYPE_WORKSPACE_CONTEXT","context","value","UMB_PROPERTY_DATASET_CONTEXT","__privateSet","html","__privateGet","__privateMethod","UmbTextStyles","css","__decorateClass","state","customElement","UmbBlockGridTypeWorkspaceViewSettingsElement$1"],"mappings":";;;;;;;;;;;wYAAAA,GAAAC,GAAAC,GAAAC,GAAAC;AASa,IAAAC,IAAN,cAA2DC,EAAiD;AAAA,EAiBlH,cAAc;AACP,UAAA,GAlBDC,EAAA,MAAAL,CAAA,GACNK,EAAA,MAAAP,GAAqB,EAAE,OAAO,cAAc,OAAO,IAAK,GAGxD,KAAQ,mBAAmB,IAW3BO,EAAA,MAAAN,CAAA,GAKM,KAAA,eAAeO,GAAiC,OAAOC,MAAY;AAClE,WAAA;AAAA,QACJ,MAAMA,GAAS,qBAAyC,aAAa;AAAA,QACrE,CAACC,MAAU;AACV,eAAK,uBAAuBA,IAAQ,SAASA,GAAO,EAAE,IAAI;AAAA,QAC3D;AAAA,QACA;AAAA,MACD;AAAA,IACA,CAAA,EAAE,wBAAwB,GAEtB,KAAA,eAAeC,GAA8B,OAAOF,MAAY;AACpE,MAAAG,EAAA,MAAKX,GAAkBQ,CAAA,GAIlB,KAAA;AAAA,QACJ,MAAMA,GAAS,qBAAqB,mBAAmB;AAAA,QACvD,CAACC,MAAU;AACV,UAAI,MAAM,QAAQA,CAAK,KAAKA,EAAM,SAAS,MAC1C,KAAK,mBAAmB,KAEzB,KAAK,2BAA2B,2BAA2B;AAAA,QAC5D;AAAA,QACA;AAAA,MACD,GAEK,KAAA;AAAA,QACJ,MAAMD,GAAS,qBAAyC,YAAY;AAAA,QACpE,CAACC,MAAU;AACV,eAAK,cAAcA;AAAA,QACpB;AAAA,QACA;AAAA,MACD,GAEK,KAAA;AAAA,QACJ,MAAMD,GAAS,qBAAyC,YAAY;AAAA,QACpE,CAACC,MAAU;AACV,eAAK,cAAcA;AAAA,QACpB;AAAA,QACA;AAAA,MACD;AAAA,IAAA,CACA;AAAA,EAAA;AAAA,EAQO,SAAS;AACV,WAAAG;AAAA,uBACc,KAAK,SAAS,KAAK,iBAAiB,CAAC;AAAA;AAAA,aAE/C,KAAK,SAAS,KAAK,eAAe,CAAC;AAAA;AAAA;AAAA,eAGjC,CAACC,EAAK,MAAAd,CAAA,CAAkB,CAAC;AAAA;AAAA;AAAA,aAG3B,KAAK,SAAS,KAAK,qCAAqC,CAAC;AAAA;AAAA;AAAA;AAAA,eAIvD;AAAA,MACT,EAAE,OAAO,wBAAwB,OAAO,GAAK;AAAA,MAC7C,EAAE,OAAO,mBAAmB,OAAO,EAAE,KAAK,GAAG,KAAK,EAAI,EAAA;AAAA,IAAA,CACtD;AAAA;AAAA;AAAA,aAGO,KAAK,SAAS,KAAK,sCAAsC,CAAC;AAAA;AAAA;AAAA,eAGxD;AAAA,MACT,EAAE,OAAO,wBAAwB,OAAO,GAAK;AAAA,MAC7C,EAAE,OAAO,mBAAmB,OAAO,EAAE,KAAK,GAAG,KAAK,EAAI,EAAA;AAAA,IAAA,CACtD;AAAA;AAAA,uBAEiB,KAAK,SAAS,KAAK,+BAA+B,CAAC;AAAA;AAAA,aAE7D,KAAK,SAAS,KAAK,8BAA8B,CAAC;AAAA;AAAA;AAAA;AAAA;AAAA,aAKlD,KAAK,SAAS,KAAK,+BAA+B,CAAC;AAAA;AAAA;AAAA;AAAA,uBAIzC,KAAK,SAAS,KAAK,yBAAyB,CAAC,KAAKe,EAAA,MAAKb,MAAL,KAAyB,IAAA,CAAA;AAAA;AAAA,EAAA;AAyDlG;AApKCF,IAAA,oBAAA,QAAA;AAcAC,IAAA,oBAAA,QAAA;AAfMC,IAAA,oBAAA,QAAA;AAgENC,IAAgB,SAAC,GAAgB;AAChC,EAAAW,EAAA,MAAKb,CAAiB,GAAA,iBAAiB,cAAe,EAAE,OAAsC,QAAQ,GACtGa,EAAA,MAAKb,CAAiB,GAAA,iBAAiB,cAAe,EAAE,OAAsC,QAAQ;AACvG;AA6CAG,IAAkB,WAAG;AACpB,SAAI,KAAK,mBACDS;AAAA;AAAA,aAEG,KAAK,SAAS,KAAK,iCAAiC,CAAC;AAAA;AAAA;AAAA,uBAG3C,KAAK,uBAAuB,GAAG;AAAA,eACvC;AAAA,IACT;AAAA,MACC,OAAO;AAAA,MACP,OAAO,KAAK;AAAA,IAAA;AAAA,EACb,CACA;AAAA;AAAA,iCAE2B,KAAK,SAAS,KAAK,8BAA8B,CAAC;AAAA;AAAA;AAAA,kBAGjE,KAAK,WAAW;AAAA,kBAChB,KAAK,WAAW;AAAA,gBAClBE,QAAKb,GAAgBC,CAAA,CAAA;AAAA;AAAA,OAI3BU;AAAA;AAAA,aAEG,KAAK,SAAS,KAAK,6BAA6B,CAAC;AAAA;AAAA,cAEhD,MAAO,KAAK,mBAAmB,CAAC,KAAK,gBAAiB;AAAA;AAGnE;AA/IYR,EAiJI,SAAS;AAAA,EACxBW;AAAA,EACAC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAiBD;AAhKQC,EAAA;AAAA,EADPC,EAAM;AAAA,GAHKd,EAIJ,WAAA,oBAAA,CAAA;AAGAa,EAAA;AAAA,EADPC,EAAM;AAAA,GANKd,EAOJ,WAAA,eAAA,CAAA;AAGAa,EAAA;AAAA,EADPC,EAAM;AAAA,GATKd,EAUJ,WAAA,eAAA,CAAA;AAGAa,EAAA;AAAA,EADPC,EAAM;AAAA,GAZKd,EAaJ,WAAA,wBAAA,CAAA;AAbIA,IAANa,EAAA;AAAA,EADNE,EAAc,oCAAoC;AAAA,GACtCf,CAAA;AAuKb,MAAAgB,IAAehB;"}