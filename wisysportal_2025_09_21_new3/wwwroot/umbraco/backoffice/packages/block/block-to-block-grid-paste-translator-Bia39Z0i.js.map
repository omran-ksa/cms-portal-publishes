{"version":3,"file":"block-to-block-grid-paste-translator-Bia39Z0i.js","sources":["../../../src/packages/block/block-grid/clipboard/block/paste/block-to-block-grid-paste-translator.ts"],"sourcesContent":["import type { UmbBlockGridLayoutModel, UmbBlockGridValueModel } from '../../../types.js';\r\nimport { UMB_BLOCK_GRID_PROPERTY_EDITOR_SCHEMA_ALIAS } from '../../../constants.js';\r\nimport type { UmbBlockGridPropertyEditorConfig } from '../../../property-editors/block-grid-editor/types.js';\r\nimport { UmbControllerBase } from '@umbraco-cms/backoffice/class-api';\r\nimport type { UmbClipboardPastePropertyValueTranslator } from '@umbraco-cms/backoffice/clipboard';\r\nimport type { UmbBlockClipboardEntryValueModel, UmbBlockLayoutBaseModel } from '@umbraco-cms/backoffice/block';\r\n\r\nexport class UmbBlockToBlockGridClipboardPastePropertyValueTranslator\r\n\textends UmbControllerBase\r\n\timplements UmbClipboardPastePropertyValueTranslator<UmbBlockClipboardEntryValueModel, UmbBlockGridValueModel>\r\n{\r\n\t/**\r\n\t * Translates a block clipboard entry value to a Block Grid property value.\r\n\t * @param {UmbBlockClipboardEntryValueModel} value The block clipboard entry value.\r\n\t * @returns {Promise<UmbBlockGridValueModel>} The translated Block Grid property value.\r\n\t * @memberof UmbBlockToBlockGridClipboardPastePropertyValueTranslator\r\n\t */\r\n\tasync translate(value: UmbBlockClipboardEntryValueModel): Promise<UmbBlockGridValueModel> {\r\n\t\tif (!value) {\r\n\t\t\tthrow new Error('Values is missing.');\r\n\t\t}\r\n\r\n\t\tconst valueClone = structuredClone(value);\r\n\r\n\t\tconst blockGridPropertyValue: UmbBlockGridValueModel = {\r\n\t\t\tcontentData: valueClone.contentData,\r\n\t\t\tsettingsData: valueClone.settingsData,\r\n\t\t\texpose: [],\r\n\t\t\tlayout: {\r\n\t\t\t\t[UMB_BLOCK_GRID_PROPERTY_EDITOR_SCHEMA_ALIAS]: valueClone.layout?.map((baseLayout: UmbBlockLayoutBaseModel) => {\r\n\t\t\t\t\tconst gridLayout: UmbBlockGridLayoutModel = {\r\n\t\t\t\t\t\t...baseLayout,\r\n\t\t\t\t\t\tcolumnSpan: 12,\r\n\t\t\t\t\t\trowSpan: 1,\r\n\t\t\t\t\t\tareas: [],\r\n\t\t\t\t\t};\r\n\r\n\t\t\t\t\treturn gridLayout;\r\n\t\t\t\t}),\r\n\t\t\t},\r\n\t\t};\r\n\r\n\t\treturn blockGridPropertyValue;\r\n\t}\r\n\r\n\t/**\r\n\t * Determines if a block clipboard entry value is compatible with the Block Grid property editor.\r\n\t * @param {UmbBlockClipboardEntryValueModel} propertyValue The block clipboard entry value.\r\n\t * @param {UmbBlockGridPropertyEditorConfig} config The Block Grid property editor configuration.\r\n\t * @returns {Promise<boolean>} A promise that resolves with a boolean indicating if the value is compatible.\r\n\t * @memberof UmbBlockToBlockGridClipboardPastePropertyValueTranslator\r\n\t */\r\n\tasync isCompatibleValue(\r\n\t\tpropertyValue: UmbBlockGridValueModel,\r\n\t\tconfig: UmbBlockGridPropertyEditorConfig,\r\n\t): Promise<boolean> {\r\n\t\tconst allowedBlockContentTypes =\r\n\t\t\tconfig.find((c) => c.alias === 'blocks')?.value.map((b) => b.contentElementTypeKey) ?? [];\r\n\t\tconst blockContentTypes = propertyValue.contentData.map((c) => c.contentTypeKey);\r\n\t\treturn blockContentTypes?.every((b) => allowedBlockContentTypes.includes(b)) ?? false;\r\n\t}\r\n}\r\n\r\nexport { UmbBlockToBlockGridClipboardPastePropertyValueTranslator as api };\r\n"],"names":["UmbBlockToBlockGridClipboardPastePropertyValueTranslator","UmbControllerBase","value","valueClone","UMB_BLOCK_GRID_PROPERTY_EDITOR_SCHEMA_ALIAS","baseLayout","propertyValue","config","allowedBlockContentTypes","c","b"],"mappings":";;AAOO,MAAMA,UACJC,EAET;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,EAOC,MAAM,UAAUC,GAA0E;AACzF,QAAI,CAACA;AACE,YAAA,IAAI,MAAM,oBAAoB;AAG/B,UAAAC,IAAa,gBAAgBD,CAAK;AAoBjC,WAlBgD;AAAA,MACtD,aAAaC,EAAW;AAAA,MACxB,cAAcA,EAAW;AAAA,MACzB,QAAQ,CAAC;AAAA,MACT,QAAQ;AAAA,QACP,CAACC,CAA2C,GAAGD,EAAW,QAAQ,IAAI,CAACE,OAC1B;AAAA,UAC3C,GAAGA;AAAA,UACH,YAAY;AAAA,UACZ,SAAS;AAAA,UACT,OAAO,CAAA;AAAA,QACR,EAGA;AAAA,MAAA;AAAA,IAEH;AAAA,EAEO;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,EAUR,MAAM,kBACLC,GACAC,GACmB;AACnB,UAAMC,IACLD,EAAO,KAAK,CAACE,MAAMA,EAAE,UAAU,QAAQ,GAAG,MAAM,IAAI,CAACC,MAAMA,EAAE,qBAAqB,KAAK,CAAC;AAElF,WADmBJ,EAAc,YAAY,IAAI,CAACG,MAAMA,EAAE,cAAc,GACrD,MAAM,CAACC,MAAMF,EAAyB,SAASE,CAAC,CAAC,KAAK;AAAA,EAAA;AAElF;"}