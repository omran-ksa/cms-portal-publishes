{"version":3,"file":"block-to-block-list-paste-translator-B0QQ7gk6.js","sources":["../../../src/packages/block/block-list/clipboard/block/paste/block-to-block-list-paste-translator.ts"],"sourcesContent":["import { UMB_BLOCK_LIST_PROPERTY_EDITOR_SCHEMA_ALIAS } from '../../../property-editors/block-list-editor/constants.js';\r\nimport type { UmbBlockListValueModel } from '../../../types.js';\r\nimport type { UmbBlockClipboardEntryValueModel } from '@umbraco-cms/backoffice/block';\r\nimport { UmbControllerBase } from '@umbraco-cms/backoffice/class-api';\r\nimport type { UmbClipboardPastePropertyValueTranslator } from '@umbraco-cms/backoffice/clipboard';\r\n\r\nexport class UmbBlockToBlockListClipboardPastePropertyValueTranslator\r\n\textends UmbControllerBase\r\n\timplements UmbClipboardPastePropertyValueTranslator<UmbBlockClipboardEntryValueModel, UmbBlockListValueModel>\r\n{\r\n\t/**\r\n\t * Translates a block clipboard entry value to a block list property value.\r\n\t * @param {UmbBlockClipboardEntryValueModel} value - The block clipboard entry value.\r\n\t * @returns {Promise<UmbBlockListValueModel>} - The block list property value.\r\n\t * @memberof UmbBlockToBlockListClipboardPastePropertyValueTranslator\r\n\t */\r\n\tasync translate(value: UmbBlockClipboardEntryValueModel): Promise<UmbBlockListValueModel> {\r\n\t\tif (!value) {\r\n\t\t\tthrow new Error('Value is missing.');\r\n\t\t}\r\n\r\n\t\tconst valueClone = structuredClone(value);\r\n\r\n\t\tconst blockListPropertyValue: UmbBlockListValueModel = {\r\n\t\t\tcontentData: valueClone.contentData,\r\n\t\t\tsettingsData: valueClone.settingsData,\r\n\t\t\texpose: [],\r\n\t\t\tlayout: {\r\n\t\t\t\t[UMB_BLOCK_LIST_PROPERTY_EDITOR_SCHEMA_ALIAS]: valueClone.layout ?? undefined,\r\n\t\t\t},\r\n\t\t};\r\n\r\n\t\treturn blockListPropertyValue;\r\n\t}\r\n\r\n\t/**\r\n\t * Checks if the clipboard entry value is compatible with the config.\r\n\t * @param {UmbBlockListValueModel} propertyValue - The property value\r\n\t * @param {*} config - The Property Editor config.\r\n\t * @returns {Promise<boolean>} - Whether the clipboard entry value is compatible with the config.\r\n\t * @memberof UmbBlockToBlockListClipboardPastePropertyValueTranslator\r\n\t */\r\n\tasync isCompatibleValue(\r\n\t\tpropertyValue: UmbBlockListValueModel,\r\n\t\t// TODO: Replace any with the correct type.\r\n\t\tconfig: Array<{ alias: string; value: [{ contentElementTypeKey: string }] }>,\r\n\t): Promise<boolean> {\r\n\t\tconst allowedBlockContentTypes =\r\n\t\t\tconfig.find((c) => c.alias === 'blocks')?.value.map((b) => b.contentElementTypeKey) ?? [];\r\n\t\tconst blockContentTypes = propertyValue.contentData.map((c) => c.contentTypeKey);\r\n\t\treturn blockContentTypes?.every((b) => allowedBlockContentTypes.includes(b)) ?? false;\r\n\t}\r\n}\r\n\r\nexport { UmbBlockToBlockListClipboardPastePropertyValueTranslator as api };\r\n"],"names":["UmbBlockToBlockListClipboardPastePropertyValueTranslator","UmbControllerBase","value","valueClone","UMB_BLOCK_LIST_PROPERTY_EDITOR_SCHEMA_ALIAS","propertyValue","config","allowedBlockContentTypes","c","b"],"mappings":";;AAMO,MAAMA,UACJC,EAET;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,EAOC,MAAM,UAAUC,GAA0E;AACzF,QAAI,CAACA;AACE,YAAA,IAAI,MAAM,mBAAmB;AAG9B,UAAAC,IAAa,gBAAgBD,CAAK;AAWjC,WATgD;AAAA,MACtD,aAAaC,EAAW;AAAA,MACxB,cAAcA,EAAW;AAAA,MACzB,QAAQ,CAAC;AAAA,MACT,QAAQ;AAAA,QACP,CAACC,CAA2C,GAAGD,EAAW,UAAU;AAAA,MAAA;AAAA,IAEtE;AAAA,EAEO;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,EAUR,MAAM,kBACLE,GAEAC,GACmB;AACnB,UAAMC,IACLD,EAAO,KAAK,CAACE,MAAMA,EAAE,UAAU,QAAQ,GAAG,MAAM,IAAI,CAACC,MAAMA,EAAE,qBAAqB,KAAK,CAAC;AAElF,WADmBJ,EAAc,YAAY,IAAI,CAACG,MAAMA,EAAE,cAAc,GACrD,MAAM,CAACC,MAAMF,EAAyB,SAASE,CAAC,CAAC,KAAK;AAAA,EAAA;AAElF;"}