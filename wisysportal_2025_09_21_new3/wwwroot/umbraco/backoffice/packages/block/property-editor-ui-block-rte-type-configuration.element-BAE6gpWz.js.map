{"version":3,"file":"property-editor-ui-block-rte-type-configuration.element-BAE6gpWz.js","sources":["../../../src/packages/block/block-rte/property-editors/property-editor-ui-block-rte-type-configuration.element.ts"],"sourcesContent":["import { UMB_BLOCK_RTE_TYPE } from '../constants.js';\r\nimport { customElement, html, property, state, nothing } from '@umbraco-cms/backoffice/external/lit';\r\nimport { UmbInputBlockTypeElement } from '@umbraco-cms/backoffice/block-type';\r\nimport { UmbLitElement } from '@umbraco-cms/backoffice/lit-element';\r\nimport { UmbModalRouteRegistrationController } from '@umbraco-cms/backoffice/router';\r\nimport { UmbChangeEvent } from '@umbraco-cms/backoffice/event';\r\nimport { UMB_WORKSPACE_MODAL } from '@umbraco-cms/backoffice/workspace';\r\nimport type { UmbBlockTypeBaseModel } from '@umbraco-cms/backoffice/block-type';\r\nimport type {\r\n\tUmbPropertyEditorUiElement,\r\n\tUmbPropertyEditorConfigCollection,\r\n} from '@umbraco-cms/backoffice/property-editor';\r\n\r\n/**\r\n * @element umb-property-editor-ui-block-rte-type-configuration\r\n */\r\n@customElement('umb-property-editor-ui-block-rte-type-configuration')\r\nexport class UmbPropertyEditorUIBlockRteBlockConfigurationElement\r\n\textends UmbLitElement\r\n\timplements UmbPropertyEditorUiElement\r\n{\r\n\treadonly #blockTypeWorkspaceModalRegistration?: UmbModalRouteRegistrationController<\r\n\t\ttypeof UMB_WORKSPACE_MODAL.DATA,\r\n\t\ttypeof UMB_WORKSPACE_MODAL.VALUE\r\n\t>;\r\n\r\n\t@property({ attribute: false })\r\n\tvalue: UmbBlockTypeBaseModel[] = [];\r\n\r\n\t@property({ type: Object, attribute: false })\r\n\tpublic config?: UmbPropertyEditorConfigCollection;\r\n\r\n\t@state()\r\n\tprivate _workspacePath?: string;\r\n\r\n\tconstructor() {\r\n\t\tsuper();\r\n\t\tthis.#blockTypeWorkspaceModalRegistration?.destroy();\r\n\r\n\t\tthis.#blockTypeWorkspaceModalRegistration = new UmbModalRouteRegistrationController(this, UMB_WORKSPACE_MODAL)\r\n\t\t\t.addAdditionalPath(UMB_BLOCK_RTE_TYPE)\r\n\t\t\t.onSetup(() => {\r\n\t\t\t\treturn { data: { entityType: UMB_BLOCK_RTE_TYPE, preset: {} }, modal: { size: 'large' } };\r\n\t\t\t})\r\n\t\t\t.observeRouteBuilder((routeBuilder) => {\r\n\t\t\t\tconst newpath = routeBuilder({});\r\n\t\t\t\tthis._workspacePath = newpath;\r\n\t\t\t});\r\n\t}\r\n\r\n\t#onCreate(e: CustomEvent) {\r\n\t\tconst selectedElementType = e.detail.contentElementTypeKey;\r\n\t\tif (selectedElementType) {\r\n\t\t\tthis.#blockTypeWorkspaceModalRegistration?.open({}, 'create/' + selectedElementType + '/null');\r\n\t\t}\r\n\t}\r\n\t#onChange(e: CustomEvent) {\r\n\t\te.stopPropagation();\r\n\t\tthis.value = (e.target as UmbInputBlockTypeElement).value;\r\n\t\tthis.dispatchEvent(new UmbChangeEvent());\r\n\t}\r\n\r\n\toverride render() {\r\n\t\treturn UmbInputBlockTypeElement\r\n\t\t\t? html`<umb-input-block-type\r\n\t\t\t\t\t.value=${this.value}\r\n\t\t\t\t\t.workspacePath=${this._workspacePath}\r\n\t\t\t\t\t@create=${this.#onCreate}\r\n\t\t\t\t\t@change=${this.#onChange}\r\n\t\t\t\t\t@delete=${this.#onChange}></umb-input-block-type>`\r\n\t\t\t: nothing;\r\n\t}\r\n}\r\n\r\nexport default UmbPropertyEditorUIBlockRteBlockConfigurationElement;\r\n\r\ndeclare global {\r\n\tinterface HTMLElementTagNameMap {\r\n\t\t'umb-property-editor-ui-block-rte-type-configuration': UmbPropertyEditorUIBlockRteBlockConfigurationElement;\r\n\t}\r\n}\r\n"],"names":["_blockTypeWorkspaceModalRegistration","_UmbPropertyEditorUIBlockRteBlockConfigurationElement_instances","onCreate_fn","onChange_fn","UmbPropertyEditorUIBlockRteBlockConfigurationElement","UmbLitElement","__privateAdd","__privateGet","__privateSet","UmbModalRouteRegistrationController","UMB_WORKSPACE_MODAL","UMB_BLOCK_RTE_TYPE","routeBuilder","newpath","UmbInputBlockTypeElement","html","__privateMethod","nothing","e","selectedElementType","UmbChangeEvent","__decorateClass","property","state","customElement","UmbPropertyEditorUIBlockRteBlockConfigurationElement$1"],"mappings":";;;;;;;;;;;;;wXAAAA,GAAAC,GAAAC,GAAAC;AAiBa,IAAAC,IAAN,cACEC,EAET;AAAA,EAeC,cAAc;AACP,UAAA,GAnBDC,EAAA,MAAAL,CAAA,GAIGK,EAAA,MAAAN,CAAA,GAMT,KAAA,QAAiC,CAAC,GAUjCO,EAAA,MAAKP,IAAsC,QAAQ,GAE9CQ,EAAA,MAAAR,GAAuC,IAAIS,EAAoC,MAAMC,CAAmB,EAC3G,kBAAkBC,CAAkB,EACpC,QAAQ,OACD,EAAE,MAAM,EAAE,YAAYA,GAAoB,QAAQ,CAAC,EAAA,GAAK,OAAO,EAAE,MAAM,UAAU,EACxF,EACA,oBAAoB,CAACC,MAAiB;AAChC,YAAAC,IAAUD,EAAa,EAAE;AAC/B,WAAK,iBAAiBC;AAAA,IAAA,CACtB,CAAA;AAAA,EAAA;AAAA,EAeM,SAAS;AACjB,WAAOC,IACJC;AAAA,cACS,KAAK,KAAK;AAAA,sBACF,KAAK,cAAc;AAAA,eAC1BC,QAAKf,GAASC,CAAA,CAAA;AAAA,eACdc,QAAKf,GAASE,CAAA,CAAA;AAAA,eACda,EAAA,MAAKf,KAAS,6BACxBgB;AAAA,EAAA;AAEL;AAnDUjB,IAAA,oBAAA,QAAA;AAJHC,IAAA,oBAAA,QAAA;AAiCNC,IAAS,SAACgB,GAAgB;AACnB,QAAAC,IAAsBD,EAAE,OAAO;AACrC,EAAIC,KACHZ,EAAA,MAAKP,IAAsC,KAAK,CAAA,GAAI,YAAYmB,IAAsB,OAAO;AAE/F;AACAhB,IAAS,SAACe,GAAgB;AACzB,EAAAA,EAAE,gBAAgB,GACb,KAAA,QAASA,EAAE,OAAoC,OAC/C,KAAA,cAAc,IAAIE,GAAgB;AACxC;AAjCAC,EAAA;AAAA,EADCC,EAAS,EAAE,WAAW,GAAO,CAAA;AAAA,GATlBlB,EAUZ,WAAA,SAAA,CAAA;AAGOiB,EAAA;AAAA,EADNC,EAAS,EAAE,MAAM,QAAQ,WAAW,GAAO,CAAA;AAAA,GAZhClB,EAaL,WAAA,UAAA,CAAA;AAGCiB,EAAA;AAAA,EADPE,EAAM;AAAA,GAfKnB,EAgBJ,WAAA,kBAAA,CAAA;AAhBIA,IAANiB,EAAA;AAAA,EADNG,EAAc,qDAAqD;AAAA,GACvDpB,CAAA;AAyDb,MAAAqB,IAAerB;"}