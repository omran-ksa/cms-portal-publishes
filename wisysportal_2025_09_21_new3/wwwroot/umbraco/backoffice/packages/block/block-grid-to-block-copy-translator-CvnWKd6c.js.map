{"version":3,"file":"block-grid-to-block-copy-translator-CvnWKd6c.js","sources":["../../../src/packages/block/block-grid/clipboard/block/copy/block-grid-to-block-copy-translator.ts"],"sourcesContent":["import type { UmbBlockGridValueModel } from '../../../types.js';\r\nimport { UMB_BLOCK_GRID_PROPERTY_EDITOR_SCHEMA_ALIAS } from '../../../property-editors/constants.js';\r\nimport type { UmbGridBlockClipboardEntryValueModel } from '../../types.js';\r\nimport { UmbControllerBase } from '@umbraco-cms/backoffice/class-api';\r\nimport type { UmbClipboardCopyPropertyValueTranslator } from '@umbraco-cms/backoffice/clipboard';\r\nimport type { UmbBlockClipboardEntryValueModel } from '@umbraco-cms/backoffice/block';\r\n\r\nexport class UmbBlockGridToBlockClipboardCopyPropertyValueTranslator\r\n\textends UmbControllerBase\r\n\timplements UmbClipboardCopyPropertyValueTranslator<UmbBlockGridValueModel, UmbBlockClipboardEntryValueModel>\r\n{\r\n\t/**\r\n\t * Translates a Block Grid property value to a Block clipboard entry value.\r\n\t * @param {UmbBlockGridValueModel} propertyValue - The Block Grid property value.\r\n\t * @returns {Promise<UmbBlockClipboardEntryValueModel>} - The Block clipboard entry value.\r\n\t * @memberof UmbBlockGridToBlockClipboardCopyPropertyValueTranslator\r\n\t */\r\n\tasync translate(propertyValue: UmbBlockGridValueModel): Promise<UmbBlockClipboardEntryValueModel> {\r\n\t\tif (!propertyValue) {\r\n\t\t\tthrow new Error('Property value is missing.');\r\n\t\t}\r\n\r\n\t\treturn this.#constructBlockValue(propertyValue);\r\n\t}\r\n\r\n\t#constructGridBlockValue(propertyValue: UmbBlockGridValueModel): UmbGridBlockClipboardEntryValueModel {\r\n\t\t// TODO: investigate if structured can be remove here.\r\n\t\tconst valueClone = structuredClone(propertyValue);\r\n\r\n\t\tconst gridBlockValue: UmbGridBlockClipboardEntryValueModel = {\r\n\t\t\tcontentData: valueClone.contentData,\r\n\t\t\tlayout: valueClone.layout?.[UMB_BLOCK_GRID_PROPERTY_EDITOR_SCHEMA_ALIAS] ?? undefined,\r\n\t\t\tsettingsData: valueClone.settingsData,\r\n\t\t};\r\n\r\n\t\treturn gridBlockValue;\r\n\t}\r\n\r\n\t#constructBlockValue(propertyValue: UmbBlockGridValueModel): UmbBlockClipboardEntryValueModel {\r\n\t\tconst gridBlockValue = this.#constructGridBlockValue(propertyValue);\r\n\r\n\t\tconst contentData: typeof gridBlockValue.contentData = [];\r\n\t\tconst settingsData: typeof gridBlockValue.settingsData = [];\r\n\r\n\t\tconst layout: UmbBlockClipboardEntryValueModel['layout'] = gridBlockValue.layout?.map((gridLayout) => {\r\n\t\t\tconst contentDataEntry = gridBlockValue.contentData.find(\r\n\t\t\t\t(contentData) => contentData.key === gridLayout.contentKey,\r\n\t\t\t);\r\n\t\t\tif (!contentDataEntry) {\r\n\t\t\t\tthrow new Error('No content data found for layout entry');\r\n\t\t\t}\r\n\t\t\tcontentData.push(contentDataEntry);\r\n\r\n\t\t\tif (gridLayout.settingsKey) {\r\n\t\t\t\tconst settingsDataEntry = gridBlockValue.settingsData.find(\r\n\t\t\t\t\t(settingsData) => settingsData.key === gridLayout.settingsKey,\r\n\t\t\t\t);\r\n\t\t\t\tif (!settingsDataEntry) {\r\n\t\t\t\t\tthrow new Error('No settings data found for layout entry');\r\n\t\t\t\t}\r\n\t\t\t\tsettingsData.push(settingsDataEntry);\r\n\t\t\t}\r\n\r\n\t\t\treturn {\r\n\t\t\t\tcontentKey: gridLayout.contentKey,\r\n\t\t\t\tsettingsKey: gridLayout.settingsKey,\r\n\t\t\t};\r\n\t\t});\r\n\r\n\t\treturn {\r\n\t\t\tlayout: layout,\r\n\t\t\tcontentData,\r\n\t\t\tsettingsData,\r\n\t\t};\r\n\t}\r\n}\r\n\r\nexport { UmbBlockGridToBlockClipboardCopyPropertyValueTranslator as api };\r\n"],"names":["UmbBlockGridToBlockClipboardCopyPropertyValueTranslator","UmbControllerBase","propertyValue","#constructBlockValue","#constructGridBlockValue","valueClone","UMB_BLOCK_GRID_PROPERTY_EDITOR_SCHEMA_ALIAS","gridBlockValue","contentData","settingsData","gridLayout","contentDataEntry","settingsDataEntry"],"mappings":";;AAOO,MAAMA,UACJC,EAET;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,EAOC,MAAM,UAAUC,GAAkF;AACjG,QAAI,CAACA;AACE,YAAA,IAAI,MAAM,4BAA4B;AAGtC,WAAA,KAAKC,GAAqBD,CAAa;AAAA,EAAA;AAAA,EAG/CE,GAAyBF,GAA6E;AAE/F,UAAAG,IAAa,gBAAgBH,CAAa;AAQzC,WANsD;AAAA,MAC5D,aAAaG,EAAW;AAAA,MACxB,QAAQA,EAAW,SAASC,CAA2C,KAAK;AAAA,MAC5E,cAAcD,EAAW;AAAA,IAC1B;AAAA,EAEO;AAAA,EAGRF,GAAqBD,GAAyE;AACvF,UAAAK,IAAiB,KAAKH,GAAyBF,CAAa,GAE5DM,IAAiD,CAAC,GAClDC,IAAmD,CAAC;AA2BnD,WAAA;AAAA,MACN,QA1B0DF,EAAe,QAAQ,IAAI,CAACG,MAAe;AAC/F,cAAAC,IAAmBJ,EAAe,YAAY;AAAA,UACnD,CAACC,MAAgBA,EAAY,QAAQE,EAAW;AAAA,QACjD;AACA,YAAI,CAACC;AACE,gBAAA,IAAI,MAAM,wCAAwC;AAIzD,YAFAH,EAAY,KAAKG,CAAgB,GAE7BD,EAAW,aAAa;AACrB,gBAAAE,IAAoBL,EAAe,aAAa;AAAA,YACrD,CAACE,MAAiBA,EAAa,QAAQC,EAAW;AAAA,UACnD;AACA,cAAI,CAACE;AACE,kBAAA,IAAI,MAAM,yCAAyC;AAE1D,UAAAH,EAAa,KAAKG,CAAiB;AAAA,QAAA;AAG7B,eAAA;AAAA,UACN,YAAYF,EAAW;AAAA,UACvB,aAAaA,EAAW;AAAA,QACzB;AAAA,MAAA,CACA;AAAA,MAIA,aAAAF;AAAA,MACA,cAAAC;AAAA,IACD;AAAA,EAAA;AAEF;"}