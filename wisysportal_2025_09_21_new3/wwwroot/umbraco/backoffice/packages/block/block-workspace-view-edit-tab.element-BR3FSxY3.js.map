{"version":3,"file":"block-workspace-view-edit-tab.element-BR3FSxY3.js","sources":["../../../src/packages/block/block/workspace/views/edit/block-workspace-view-edit-property.element.ts","../../../src/packages/block/block/workspace/views/edit/block-workspace-view-edit-properties.element.ts","../../../src/packages/block/block/workspace/views/edit/block-workspace-view-edit-tab.element.ts"],"sourcesContent":["import type UmbBlockElementManager from '../../block-element-manager.js';\r\nimport { html, customElement, property, state, nothing } from '@umbraco-cms/backoffice/external/lit';\r\nimport type { UmbPropertyTypeModel } from '@umbraco-cms/backoffice/content-type';\r\nimport { UmbLitElement } from '@umbraco-cms/backoffice/lit-element';\r\nimport { UmbDataPathPropertyValueQuery } from '@umbraco-cms/backoffice/validation';\r\nimport { UmbVariantId } from '@umbraco-cms/backoffice/variant';\r\n\r\n@customElement('umb-block-workspace-view-edit-property')\r\nexport class UmbBlockWorkspaceViewEditPropertyElement extends UmbLitElement {\r\n\t//\r\n\t@property({ attribute: false })\r\n\tvariantId?: UmbVariantId;\r\n\r\n\t@property({ attribute: false })\r\n\tproperty?: UmbPropertyTypeModel;\r\n\r\n\t@state()\r\n\t_dataPath?: string;\r\n\r\n\t@state()\r\n\t_writeable?: boolean;\r\n\r\n\t@property({ attribute: false })\r\n\townerContext?: UmbBlockElementManager;\r\n\r\n\toverride willUpdate(changedProperties: Map<string, any>) {\r\n\t\tsuper.willUpdate(changedProperties);\r\n\t\tif (changedProperties.has('type') || changedProperties.has('variantId') || changedProperties.has('ownerContext')) {\r\n\t\t\tif (this.variantId && this.property && this.ownerContext) {\r\n\t\t\t\tconst propertyVariantId = new UmbVariantId(\r\n\t\t\t\t\tthis.property.variesByCulture ? this.variantId.culture : null,\r\n\t\t\t\t\tthis.property.variesBySegment ? this.variantId.segment : null,\r\n\t\t\t\t);\r\n\t\t\t\tthis._dataPath = `$.values[${UmbDataPathPropertyValueQuery({\r\n\t\t\t\t\talias: this.property.alias,\r\n\t\t\t\t\tculture: propertyVariantId.culture,\r\n\t\t\t\t\tsegment: propertyVariantId.segment,\r\n\t\t\t\t})}].value`;\r\n\r\n\t\t\t\tthis.observe(\r\n\t\t\t\t\tthis.ownerContext.propertyWriteGuard.isPermittedForVariantAndProperty(\r\n\t\t\t\t\t\tpropertyVariantId,\r\n\t\t\t\t\t\tthis.property,\r\n\t\t\t\t\t\tthis.variantId,\r\n\t\t\t\t\t),\r\n\t\t\t\t\t(write) => {\r\n\t\t\t\t\t\tthis._writeable = write;\r\n\t\t\t\t\t},\r\n\t\t\t\t\t'observeView',\r\n\t\t\t\t);\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\toverride render() {\r\n\t\tif (!this._dataPath || this._writeable === undefined) return nothing;\r\n\r\n\t\treturn html`<umb-property-type-based-property\r\n\t\t\tdata-path=${this._dataPath}\r\n\t\t\t.property=${this.property}\r\n\t\t\t?readonly=${!this._writeable}></umb-property-type-based-property>`;\r\n\t}\r\n}\r\n\r\nexport default UmbBlockWorkspaceViewEditPropertyElement;\r\n\r\ndeclare global {\r\n\tinterface HTMLElementTagNameMap {\r\n\t\t'umb-block-workspace-view-edit-property': UmbBlockWorkspaceViewEditPropertyElement;\r\n\t}\r\n}\r\n","import type { UmbBlockWorkspaceElementManagerNames } from '../../block-workspace.context.js';\r\nimport type UmbBlockElementManager from '../../block-element-manager.js';\r\nimport { UMB_BLOCK_WORKSPACE_CONTEXT } from '../../block-workspace.context-token.js';\r\nimport { css, html, customElement, property, state, repeat, nothing } from '@umbraco-cms/backoffice/external/lit';\r\nimport { UmbTextStyles } from '@umbraco-cms/backoffice/style';\r\nimport type { UmbContentTypeModel, UmbPropertyTypeModel } from '@umbraco-cms/backoffice/content-type';\r\nimport { UmbContentTypePropertyStructureHelper } from '@umbraco-cms/backoffice/content-type';\r\nimport { UmbLitElement } from '@umbraco-cms/backoffice/lit-element';\r\nimport { UmbVariantId } from '@umbraco-cms/backoffice/variant';\r\n\r\nimport './block-workspace-view-edit-property.element.js';\r\n\r\n@customElement('umb-block-workspace-view-edit-properties')\r\nexport class UmbBlockWorkspaceViewEditPropertiesElement extends UmbLitElement {\r\n\t#managerName?: UmbBlockWorkspaceElementManagerNames;\r\n\t#workspaceContext?: typeof UMB_BLOCK_WORKSPACE_CONTEXT.TYPE;\r\n\t#propertyStructureHelper = new UmbContentTypePropertyStructureHelper<UmbContentTypeModel>(this);\r\n\t#properties?: Array<UmbPropertyTypeModel>;\r\n\t#visiblePropertiesUniques: Array<string> = [];\r\n\r\n\t@property({ attribute: false })\r\n\tpublic get managerName(): UmbBlockWorkspaceElementManagerNames | undefined {\r\n\t\treturn this.#managerName;\r\n\t}\r\n\tpublic set managerName(value: UmbBlockWorkspaceElementManagerNames | undefined) {\r\n\t\tthis.#managerName = value;\r\n\t\tthis.#setStructureManager();\r\n\t}\r\n\r\n\t@property({ type: String, attribute: 'container-name', reflect: false })\r\n\tpublic get containerId(): string | null | undefined {\r\n\t\treturn this.#propertyStructureHelper.getContainerId();\r\n\t}\r\n\tpublic set containerId(value: string | null | undefined) {\r\n\t\tthis.#propertyStructureHelper.setContainerId(value);\r\n\t}\r\n\r\n\t@state()\r\n\t_dataOwner?: UmbBlockElementManager;\r\n\r\n\t@state()\r\n\t_workspaceVariantId?: UmbVariantId;\r\n\r\n\t@state()\r\n\t_visibleProperties?: Array<UmbPropertyTypeModel>;\r\n\r\n\t@state()\r\n\tprivate _ownerEntityType?: string;\r\n\r\n\tconstructor() {\r\n\t\tsuper();\r\n\r\n\t\tthis.consumeContext(UMB_BLOCK_WORKSPACE_CONTEXT, (workspaceContext) => {\r\n\t\t\tthis.#workspaceContext = workspaceContext;\r\n\t\t\tthis._ownerEntityType = this.#workspaceContext?.getEntityType();\r\n\t\t\tthis.observe(\r\n\t\t\t\tworkspaceContext?.variantId,\r\n\t\t\t\t(variantId) => {\r\n\t\t\t\t\tthis._workspaceVariantId = variantId;\r\n\t\t\t\t\tthis.#processPropertyStructure();\r\n\t\t\t\t},\r\n\t\t\t\t'observeVariantId',\r\n\t\t\t);\r\n\t\t\tthis.#setStructureManager();\r\n\t\t});\r\n\t}\r\n\r\n\t#setStructureManager() {\r\n\t\tif (!this.#workspaceContext || !this.#managerName) return;\r\n\r\n\t\tthis._dataOwner = this.#workspaceContext[this.#managerName];\r\n\t\tconst structureManager = this._dataOwner.structure;\r\n\r\n\t\tthis.#propertyStructureHelper.setStructureManager(structureManager);\r\n\t\tthis.observe(\r\n\t\t\tthis.#propertyStructureHelper.propertyStructure,\r\n\t\t\t(properties) => {\r\n\t\t\t\tthis.#properties = properties;\r\n\t\t\t\tthis.#processPropertyStructure();\r\n\t\t\t},\r\n\t\t\t'observePropertyStructure',\r\n\t\t);\r\n\t}\r\n\r\n\t#processPropertyStructure() {\r\n\t\tif (!this._dataOwner || !this.#properties || !this.#propertyStructureHelper || !this._workspaceVariantId) {\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tconst propertyViewGuard = this._dataOwner.propertyViewGuard;\r\n\r\n\t\tthis.#properties.forEach((property) => {\r\n\t\t\tconst propertyVariantId = new UmbVariantId(\r\n\t\t\t\tproperty.variesByCulture ? this._workspaceVariantId!.culture : null,\r\n\t\t\t\tproperty.variesBySegment ? this._workspaceVariantId!.segment : null,\r\n\t\t\t);\r\n\t\t\tthis.observe(\r\n\t\t\t\tpropertyViewGuard.isPermittedForVariantAndProperty(propertyVariantId, property, this._workspaceVariantId!),\r\n\t\t\t\t(permitted) => {\r\n\t\t\t\t\tif (permitted) {\r\n\t\t\t\t\t\tthis.#visiblePropertiesUniques.push(property.unique);\r\n\t\t\t\t\t\tthis.#calculateVisibleProperties();\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tconst index = this.#visiblePropertiesUniques.indexOf(property.unique);\r\n\t\t\t\t\t\tif (index !== -1) {\r\n\t\t\t\t\t\t\tthis.#visiblePropertiesUniques.splice(index, 1);\r\n\t\t\t\t\t\t\tthis.#calculateVisibleProperties();\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t},\r\n\t\t\t\t`propertyViewGuard-permittedForVariantAndProperty-${property.unique}`,\r\n\t\t\t);\r\n\t\t});\r\n\t}\r\n\r\n\t#calculateVisibleProperties() {\r\n\t\tthis._visibleProperties = this.#properties!.filter((property) =>\r\n\t\t\tthis.#visiblePropertiesUniques.includes(property.unique),\r\n\t\t);\r\n\t}\r\n\r\n\toverride render() {\r\n\t\treturn this._workspaceVariantId && this._visibleProperties\r\n\t\t\t? repeat(\r\n\t\t\t\t\tthis._visibleProperties,\r\n\t\t\t\t\t(property) => property.alias,\r\n\t\t\t\t\t(property) =>\r\n\t\t\t\t\t\thtml`<umb-block-workspace-view-edit-property\r\n\t\t\t\t\t\t\tclass=\"property\"\r\n\t\t\t\t\t\t\t.ownerContext=${this._dataOwner}\r\n\t\t\t\t\t\t\t.ownerEntityType=${this._ownerEntityType}\r\n\t\t\t\t\t\t\t.variantId=${this._workspaceVariantId}\r\n\t\t\t\t\t\t\t.property=${property}></umb-block-workspace-view-edit-property>`,\r\n\t\t\t\t)\r\n\t\t\t: nothing;\r\n\t}\r\n\r\n\tstatic override styles = [\r\n\t\tUmbTextStyles,\r\n\t\tcss`\r\n\t\t\t.property {\r\n\t\t\t\tborder-bottom: 1px solid var(--uui-color-divider);\r\n\t\t\t}\r\n\t\t\t.property:last-child {\r\n\t\t\t\tborder-bottom: 0;\r\n\t\t\t}\r\n\t\t`,\r\n\t];\r\n}\r\n\r\nexport default UmbBlockWorkspaceViewEditPropertiesElement;\r\n\r\ndeclare global {\r\n\tinterface HTMLElementTagNameMap {\r\n\t\t'umb-block-workspace-view-edit-properties': UmbBlockWorkspaceViewEditPropertiesElement;\r\n\t}\r\n}\r\n","import { UMB_BLOCK_WORKSPACE_CONTEXT } from '../../block-workspace.context-token.js';\r\nimport { css, html, customElement, property, state, repeat } from '@umbraco-cms/backoffice/external/lit';\r\nimport { UmbTextStyles } from '@umbraco-cms/backoffice/style';\r\nimport type { UmbContentTypeModel, UmbPropertyTypeContainerModel } from '@umbraco-cms/backoffice/content-type';\r\nimport { UmbContentTypeContainerStructureHelper } from '@umbraco-cms/backoffice/content-type';\r\nimport { UmbLitElement } from '@umbraco-cms/backoffice/lit-element';\r\n\r\nimport './block-workspace-view-edit-properties.element.js';\r\n// eslint-disable-next-line import/order\r\nimport type { UmbBlockWorkspaceElementManagerNames } from '../../block-workspace.context.js';\r\n\r\n@customElement('umb-block-workspace-view-edit-tab')\r\nexport class UmbBlockWorkspaceViewEditTabElement extends UmbLitElement {\r\n\t@property({ attribute: false })\r\n\tpublic get managerName(): UmbBlockWorkspaceElementManagerNames | undefined {\r\n\t\treturn this.#managerName;\r\n\t}\r\n\tpublic set managerName(value: UmbBlockWorkspaceElementManagerNames | undefined) {\r\n\t\tthis.#managerName = value;\r\n\t\tthis.#setStructureManager();\r\n\t}\r\n\t#managerName?: UmbBlockWorkspaceElementManagerNames;\r\n\t#blockWorkspace?: typeof UMB_BLOCK_WORKSPACE_CONTEXT.TYPE;\r\n\t#groupStructureHelper = new UmbContentTypeContainerStructureHelper<UmbContentTypeModel>(this);\r\n\r\n\t@property({ type: String })\r\n\tpublic get containerId(): string | null | undefined {\r\n\t\treturn this._containerId;\r\n\t}\r\n\tpublic set containerId(value: string | null | undefined) {\r\n\t\tthis._containerId = value;\r\n\t\tthis.#groupStructureHelper.setContainerId(value);\r\n\t}\r\n\t@state()\r\n\tprivate _containerId?: string | null;\r\n\r\n\t/**\r\n\t * If true, the group box will be hidden, if we are to only represents one group.\r\n\t * This is used by Inline Editing Mode of Block List Editor.\r\n\t */\r\n\t@property({ type: Boolean, reflect: false })\r\n\thideSingleGroup = false;\r\n\r\n\t@state()\r\n\t_groups: Array<UmbPropertyTypeContainerModel> = [];\r\n\r\n\t@state()\r\n\t_hasProperties = false;\r\n\r\n\tconstructor() {\r\n\t\tsuper();\r\n\r\n\t\tthis.consumeContext(UMB_BLOCK_WORKSPACE_CONTEXT, (workspaceContext) => {\r\n\t\t\tthis.#blockWorkspace = workspaceContext;\r\n\t\t\tthis.#setStructureManager();\r\n\t\t});\r\n\t}\r\n\r\n\t#setStructureManager() {\r\n\t\tif (!this.#blockWorkspace || !this.#managerName) return;\r\n\t\tthis.#groupStructureHelper.setStructureManager(this.#blockWorkspace[this.#managerName].structure);\r\n\t\tthis.observe(\r\n\t\t\tthis.#groupStructureHelper.mergedContainers,\r\n\t\t\t(groups) => {\r\n\t\t\t\tthis._groups = groups;\r\n\t\t\t},\r\n\t\t\t'observeGroups',\r\n\t\t);\r\n\t\tthis.observe(\r\n\t\t\tthis.#groupStructureHelper.hasProperties,\r\n\t\t\t(hasProperties) => {\r\n\t\t\t\tthis._hasProperties = hasProperties;\r\n\t\t\t},\r\n\t\t\t'observeHasProperties',\r\n\t\t);\r\n\t}\r\n\r\n\toverride render() {\r\n\t\treturn html`\r\n\t\t\t${this._hasProperties\r\n\t\t\t\t? html`<uui-box>\r\n\t\t\t\t\t\t<umb-block-workspace-view-edit-properties\r\n\t\t\t\t\t\t\t.managerName=${this.#managerName}\r\n\t\t\t\t\t\t\tdata-mark=\"property-group:root\"\r\n\t\t\t\t\t\t\t.containerId=${this._containerId}></umb-block-workspace-view-edit-properties>\r\n\t\t\t\t\t</uui-box>`\r\n\t\t\t\t: ''}\r\n\t\t\t${this.hideSingleGroup && this._groups.length === 1\r\n\t\t\t\t? this.renderGroup(this._groups[0])\r\n\t\t\t\t: repeat(\r\n\t\t\t\t\t\tthis._groups,\r\n\t\t\t\t\t\t(group) => group.id,\r\n\t\t\t\t\t\t(group) => html` <uui-box .headline=${group.name}>${this.renderGroup(group)}</uui-box>`,\r\n\t\t\t\t\t)}\r\n\t\t`;\r\n\t}\r\n\r\n\trenderGroup(group: UmbPropertyTypeContainerModel) {\r\n\t\treturn html`\r\n\t\t\t<umb-block-workspace-view-edit-properties\r\n\t\t\t\t.managerName=${this.#managerName}\r\n\t\t\t\tdata-mark=\"property-group:${group.name}\"\r\n\t\t\t\t.containerId=${group.id}></umb-block-workspace-view-edit-properties>\r\n\t\t`;\r\n\t}\r\n\r\n\tstatic override styles = [\r\n\t\tUmbTextStyles,\r\n\t\tcss`\r\n\t\t\tuui-box {\r\n\t\t\t\t--uui-box-default-padding: 0 var(--uui-size-space-5);\r\n\t\t\t}\r\n\t\t\tuui-box:not(:first-child) {\r\n\t\t\t\tmargin-top: var(--uui-size-layout-1);\r\n\t\t\t}\r\n\t\t`,\r\n\t];\r\n}\r\n\r\nexport default UmbBlockWorkspaceViewEditTabElement;\r\n\r\ndeclare global {\r\n\tinterface HTMLElementTagNameMap {\r\n\t\t'umb-block-workspace-view-edit-tab': UmbBlockWorkspaceViewEditTabElement;\r\n\t}\r\n}\r\n"],"names":["UmbBlockWorkspaceViewEditPropertyElement","UmbLitElement","changedProperties","propertyVariantId","UmbVariantId","UmbDataPathPropertyValueQuery","write","nothing","html","__decorateClass","property","state","customElement","_managerName","_workspaceContext","_propertyStructureHelper","_properties","_visiblePropertiesUniques","_UmbBlockWorkspaceViewEditPropertiesElement_instances","setStructureManager_fn","processPropertyStructure_fn","calculateVisibleProperties_fn","UmbBlockWorkspaceViewEditPropertiesElement","__privateAdd","UmbContentTypePropertyStructureHelper","UMB_BLOCK_WORKSPACE_CONTEXT","workspaceContext","__privateSet","__privateGet","variantId","__privateMethod","value","repeat","structureManager","properties","propertyViewGuard","permitted","index","UmbTextStyles","css","_blockWorkspace","_groupStructureHelper","_UmbBlockWorkspaceViewEditTabElement_instances","UmbBlockWorkspaceViewEditTabElement","UmbContentTypeContainerStructureHelper","group","groups","hasProperties","UmbBlockWorkspaceViewEditTabElement$1"],"mappings":"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"}