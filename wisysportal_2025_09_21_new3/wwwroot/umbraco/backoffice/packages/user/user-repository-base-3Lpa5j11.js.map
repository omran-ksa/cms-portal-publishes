{"version":3,"file":"user-repository-base-3Lpa5j11.js","sources":["../../../src/packages/user/user/repository/user-repository-base.ts"],"sourcesContent":["import { UMB_USER_DETAIL_STORE_CONTEXT } from './detail/user-detail.store.token.js';\r\nimport { UMB_USER_ITEM_STORE_CONTEXT } from './item/user-item.store.token.js';\r\nimport type { UmbControllerHost } from '@umbraco-cms/backoffice/controller-api';\r\nimport { UMB_NOTIFICATION_CONTEXT } from '@umbraco-cms/backoffice/notification';\r\nimport { UmbRepositoryBase } from '@umbraco-cms/backoffice/repository';\r\n\r\nexport abstract class UmbUserRepositoryBase extends UmbRepositoryBase {\r\n\tprotected init;\r\n\tprotected detailStore?: typeof UMB_USER_DETAIL_STORE_CONTEXT.TYPE;\r\n\tprotected itemStore?: typeof UMB_USER_ITEM_STORE_CONTEXT.TYPE;\r\n\tprotected notificationContext?: typeof UMB_NOTIFICATION_CONTEXT.TYPE;\r\n\r\n\tconstructor(host: UmbControllerHost) {\r\n\t\tsuper(host);\r\n\r\n\t\tthis.init = Promise.all([\r\n\t\t\tthis.consumeContext(UMB_USER_DETAIL_STORE_CONTEXT, (instance) => {\r\n\t\t\t\tthis.detailStore = instance;\r\n\t\t\t})\r\n\t\t\t\t.asPromise({ preventTimeout: true })\r\n\t\t\t\t// Ignore the error, we can assume that the flow was stopped (asPromise failed), but it does not mean that the consumption was not successful.\r\n\t\t\t\t.catch(() => undefined),\r\n\r\n\t\t\tthis.consumeContext(UMB_USER_ITEM_STORE_CONTEXT, (instance) => {\r\n\t\t\t\tthis.itemStore = instance;\r\n\t\t\t})\r\n\t\t\t\t.asPromise({ preventTimeout: true })\r\n\t\t\t\t.catch(() => undefined),\r\n\r\n\t\t\tthis.consumeContext(UMB_NOTIFICATION_CONTEXT, (instance) => {\r\n\t\t\t\tthis.notificationContext = instance;\r\n\t\t\t})\r\n\t\t\t\t.asPromise({ preventTimeout: true })\r\n\t\t\t\t.catch(() => undefined),\r\n\t\t]);\r\n\t}\r\n}\r\n"],"names":["UmbUserRepositoryBase","UmbRepositoryBase","host","UMB_USER_DETAIL_STORE_CONTEXT","instance","UMB_USER_ITEM_STORE_CONTEXT","UMB_NOTIFICATION_CONTEXT"],"mappings":";;;AAMO,MAAeA,UAA8BC,EAAkB;AAAA,EAMrE,YAAYC,GAAyB;AACpC,UAAMA,CAAI,GAEL,KAAA,OAAO,QAAQ,IAAI;AAAA,MACvB,KAAK,eAAeC,GAA+B,CAACC,MAAa;AAChE,aAAK,cAAcA;AAAA,MAAA,CACnB,EACC,UAAU,EAAE,gBAAgB,IAAM,EAElC,MAAM,MAAA;AAAA,OAAe;AAAA,MAEvB,KAAK,eAAeC,GAA6B,CAACD,MAAa;AAC9D,aAAK,YAAYA;AAAA,MAAA,CACjB,EACC,UAAU,EAAE,gBAAgB,IAAM,EAClC,MAAM,MAAA;AAAA,OAAe;AAAA,MAEvB,KAAK,eAAeE,GAA0B,CAACF,MAAa;AAC3D,aAAK,sBAAsBA;AAAA,MAAA,CAC3B,EACC,UAAU,EAAE,gBAAgB,IAAM,EAClC,MAAM;OAAe;AAAA,IAAA,CACvB;AAAA,EAAA;AAEH;"}