{"version":3,"file":"user-item-ref.element-B27pc37p.js","sources":["../../../src/packages/user/user/item/user-item-ref.element.ts"],"sourcesContent":["import { UMB_USER_ENTITY_TYPE } from '../entity.js';\r\nimport type { UmbUserItemModel } from '../repository/index.js';\r\nimport { UMB_USER_MANAGEMENT_SECTION_ALIAS } from '../../section/constants.js';\r\nimport { UMB_EDIT_USER_WORKSPACE_PATH_PATTERN } from '../paths.js';\r\nimport { css, customElement, html, ifDefined, nothing, property, state } from '@umbraco-cms/backoffice/external/lit';\r\nimport { UmbLitElement } from '@umbraco-cms/backoffice/lit-element';\r\nimport { UmbModalRouteRegistrationController } from '@umbraco-cms/backoffice/router';\r\nimport { UMB_SECTION_USER_PERMISSION_CONDITION_ALIAS } from '@umbraco-cms/backoffice/section';\r\nimport { UMB_WORKSPACE_MODAL } from '@umbraco-cms/backoffice/workspace';\r\nimport { createExtensionApiByAlias } from '@umbraco-cms/backoffice/extension-registry';\r\n\r\n@customElement('umb-user-item-ref')\r\nexport class UmbUserItemRefElement extends UmbLitElement {\r\n\t#item?: UmbUserItemModel | undefined;\r\n\r\n\t@property({ type: Object })\r\n\tpublic get item(): UmbUserItemModel | undefined {\r\n\t\treturn this.#item;\r\n\t}\r\n\tpublic set item(value: UmbUserItemModel | undefined) {\r\n\t\tthis.#item = value;\r\n\t}\r\n\r\n\t@property({ type: Boolean })\r\n\treadonly = false;\r\n\r\n\t@property({ type: Boolean })\r\n\tstandalone = false;\r\n\r\n\t@state()\r\n\t_editPath = '';\r\n\r\n\t@state()\r\n\t_userHasSectionAccess = false;\r\n\r\n\tconstructor() {\r\n\t\tsuper();\r\n\r\n\t\tcreateExtensionApiByAlias(this, UMB_SECTION_USER_PERMISSION_CONDITION_ALIAS, [\r\n\t\t\t{\r\n\t\t\t\tconfig: {\r\n\t\t\t\t\tmatch: UMB_USER_MANAGEMENT_SECTION_ALIAS,\r\n\t\t\t\t},\r\n\t\t\t\tonChange: (permitted: boolean) => {\r\n\t\t\t\t\tthis._userHasSectionAccess = permitted;\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t]);\r\n\r\n\t\tnew UmbModalRouteRegistrationController(this, UMB_WORKSPACE_MODAL)\r\n\t\t\t.onSetup(() => {\r\n\t\t\t\treturn { data: { entityType: UMB_USER_ENTITY_TYPE, preset: {} } };\r\n\t\t\t})\r\n\t\t\t.observeRouteBuilder((routeBuilder) => {\r\n\t\t\t\tthis._editPath = routeBuilder({});\r\n\t\t\t});\r\n\t}\r\n\r\n\t#getHref(item: UmbUserItemModel) {\r\n\t\tif (!this._editPath) return;\r\n\t\tconst path = UMB_EDIT_USER_WORKSPACE_PATH_PATTERN.generateLocal({ unique: item.unique });\r\n\t\treturn `${this._editPath}/${path}`;\r\n\t}\r\n\r\n\toverride render() {\r\n\t\tif (!this.item) return nothing;\r\n\r\n\t\treturn html`\r\n\t\t\t<uui-ref-node-user\r\n\t\t\t\tname=${this.item.name}\r\n\t\t\t\thref=${ifDefined(this.#getHref(this.item))}\r\n\t\t\t\t?readonly=${this.readonly || !this._userHasSectionAccess}\r\n\t\t\t\t?standalone=${this.standalone}>\r\n\t\t\t\t<umb-user-avatar\r\n\t\t\t\t\tslot=\"icon\"\r\n\t\t\t\t\t.name=${this.item.name}\r\n\t\t\t\t\t.kind=${this.item.kind}\r\n\t\t\t\t\t.imgUrls=${this.item.avatarUrls}></umb-user-avatar>\r\n\t\t\t\t<slot name=\"actions\" slot=\"actions\"></slot>\r\n\t\t\t</uui-ref-node-user>\r\n\t\t`;\r\n\t}\r\n\r\n\tstatic override styles = [\r\n\t\tcss`\r\n\t\t\tumb-user-avatar {\r\n\t\t\t\tfont-size: var(--uui-size-4);\r\n\t\t\t}\r\n\t\t`,\r\n\t];\r\n}\r\n\r\nexport { UmbUserItemRefElement as element };\r\n\r\ndeclare global {\r\n\tinterface HTMLElementTagNameMap {\r\n\t\t'umb-user-item-ref': UmbUserItemRefElement;\r\n\t}\r\n}\r\n"],"names":["_item","_UmbUserItemRefElement_instances","getHref_fn","UmbUserItemRefElement","UmbLitElement","__privateAdd","createExtensionApiByAlias","UMB_SECTION_USER_PERMISSION_CONDITION_ALIAS","UMB_USER_MANAGEMENT_SECTION_ALIAS","permitted","UmbModalRouteRegistrationController","UMB_WORKSPACE_MODAL","UMB_USER_ENTITY_TYPE","routeBuilder","__privateGet","value","__privateSet","html","ifDefined","__privateMethod","nothing","item","path","UMB_EDIT_USER_WORKSPACE_PATH_PATTERN","css","__decorateClass","property","state","customElement"],"mappings":";;;;;;;;;;;;;;;wYAAAA,GAAAC,GAAAC;AAYa,IAAAC,IAAN,cAAoCC,EAAc;AAAA,EAuBxD,cAAc;AACP,UAAA,GAxBDC,EAAA,MAAAJ,CAAA,GACNI,EAAA,MAAAL,CAAA,GAWW,KAAA,WAAA,IAGE,KAAA,aAAA,IAGD,KAAA,YAAA,IAGY,KAAA,wBAAA,IAKvBM,EAA0B,MAAMC,GAA6C;AAAA,MAC5E;AAAA,QACC,QAAQ;AAAA,UACP,OAAOC;AAAA,QACR;AAAA,QACA,UAAU,CAACC,MAAuB;AACjC,eAAK,wBAAwBA;AAAA,QAAA;AAAA,MAC9B;AAAA,IACD,CACA,GAED,IAAIC,EAAoC,MAAMC,CAAmB,EAC/D,QAAQ,OACD,EAAE,MAAM,EAAE,YAAYC,GAAsB,QAAQ,CAAA,IAAK,EAChE,EACA,oBAAoB,CAACC,MAAiB;AACjC,WAAA,YAAYA,EAAa,EAAE;AAAA,IAAA,CAChC;AAAA,EAAA;AAAA,EAvCH,IAAW,OAAqC;AAC/C,WAAOC,EAAK,MAAAd,CAAA;AAAA,EAAA;AAAA,EAEb,IAAW,KAAKe,GAAqC;AACpD,IAAAC,EAAA,MAAKhB,GAAQe,CAAA;AAAA,EAAA;AAAA,EA4CL,SAAS;AACb,WAAC,KAAK,OAEHE;AAAA;AAAA,WAEE,KAAK,KAAK,IAAI;AAAA,WACdC,EAAUC,EAAK,MAAAlB,GAAAC,CAAA,EAAL,KAAc,MAAA,KAAK,KAAK,CAAC;AAAA,gBAC9B,KAAK,YAAY,CAAC,KAAK,qBAAqB;AAAA,kBAC1C,KAAK,UAAU;AAAA;AAAA;AAAA,aAGpB,KAAK,KAAK,IAAI;AAAA,aACd,KAAK,KAAK,IAAI;AAAA,gBACX,KAAK,KAAK,UAAU;AAAA;AAAA;AAAA,MAZXkB;AAAA,EAYW;AAapC;AA7ECpB,IAAA,oBAAA,QAAA;AADMC,IAAA,oBAAA,QAAA;AA8CNC,IAAQ,SAACmB,GAAwB;AAC5B,MAAA,CAAC,KAAK,UAAW;AACrB,QAAMC,IAAOC,EAAqC,cAAc,EAAE,QAAQF,EAAK,QAAQ;AACvF,SAAO,GAAG,KAAK,SAAS,IAAIC,CAAI;AACjC;AAlDYnB,EAuEI,SAAS;AAAA,EACxBqB;AAAA;AAAA;AAAA;AAAA;AAKD;AAzEWC,EAAA;AAAA,EADVC,EAAS,EAAE,MAAM,OAAQ,CAAA;AAAA,GAHdvB,EAID,WAAA,QAAA,CAAA;AAQXsB,EAAA;AAAA,EADCC,EAAS,EAAE,MAAM,QAAS,CAAA;AAAA,GAXfvB,EAYZ,WAAA,YAAA,CAAA;AAGAsB,EAAA;AAAA,EADCC,EAAS,EAAE,MAAM,QAAS,CAAA;AAAA,GAdfvB,EAeZ,WAAA,cAAA,CAAA;AAGAsB,EAAA;AAAA,EADCE,EAAM;AAAA,GAjBKxB,EAkBZ,WAAA,aAAA,CAAA;AAGAsB,EAAA;AAAA,EADCE,EAAM;AAAA,GApBKxB,EAqBZ,WAAA,yBAAA,CAAA;AArBYA,IAANsB,EAAA;AAAA,EADNG,EAAc,mBAAmB;AAAA,GACrBzB,CAAA;"}