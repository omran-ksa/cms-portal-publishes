{"version":3,"file":"index.js","sources":["../../../../src/packages/user/current-user/action/current-user-app-button.element.ts","../../../../src/packages/user/current-user/utils/is-current-user.function.ts"],"sourcesContent":["import type {\r\n\tManifestCurrentUserActionDefaultKind,\r\n\tMetaCurrentUserActionDefaultKind,\r\n\tUmbCurrentUserAction,\r\n} from '../current-user-action.extension.js';\r\nimport { UmbTextStyles } from '@umbraco-cms/backoffice/style';\r\nimport { html, customElement, ifDefined, state, property, nothing } from '@umbraco-cms/backoffice/external/lit';\r\nimport { UmbLitElement } from '@umbraco-cms/backoffice/lit-element';\r\nimport { UmbActionExecutedEvent } from '@umbraco-cms/backoffice/event';\r\n\r\n@customElement('umb-current-user-app-button')\r\nexport class UmbCurrentUserAppButtonElement<\r\n\tMetaType extends MetaCurrentUserActionDefaultKind = MetaCurrentUserActionDefaultKind,\r\n\tApiType extends UmbCurrentUserAction<MetaType> = UmbCurrentUserAction<MetaType>,\r\n> extends UmbLitElement {\r\n\t#api?: ApiType;\r\n\r\n\t@state()\r\n\tprivate _href?: string;\r\n\r\n\t@property({ attribute: false })\r\n\tpublic manifest?: ManifestCurrentUserActionDefaultKind<MetaType>;\r\n\r\n\tpublic set api(api: ApiType | undefined) {\r\n\t\tthis.#api = api;\r\n\r\n\t\tthis.#api?.getHref?.().then((href) => {\r\n\t\t\tthis._href = href;\r\n\t\t});\r\n\t}\r\n\r\n\tasync #onClick(event: Event) {\r\n\t\tif (!this._href) {\r\n\t\t\tevent.stopPropagation();\r\n\t\t\tawait this.#api?.execute();\r\n\t\t}\r\n\t\tthis.dispatchEvent(new UmbActionExecutedEvent());\r\n\t}\r\n\r\n\tget label(): string | undefined {\r\n\t\treturn this.manifest?.meta.label ? this.localize.string(this.manifest.meta.label) : undefined;\r\n\t}\r\n\r\n\toverride render() {\r\n\t\treturn html`\r\n\t\t\t<uui-button @click=${this.#onClick} look=\"secondary\" label=${ifDefined(this.label)} href=${ifDefined(this._href)}>\r\n\t\t\t\t${this.manifest?.meta.icon ? html`<uui-icon name=${this.manifest.meta.icon}></uui-icon>` : nothing}\r\n\t\t\t\t${this.label}\r\n\t\t\t</uui-button>\r\n\t\t`;\r\n\t}\r\n\r\n\tstatic override styles = [UmbTextStyles];\r\n}\r\n\r\nexport default UmbCurrentUserAppButtonElement;\r\n\r\ndeclare global {\r\n\tinterface HTMLElementTagNameMap {\r\n\t\t'umb-current-user-app-button': UmbCurrentUserAppButtonElement;\r\n\t}\r\n}\r\n","import { UMB_CURRENT_USER_CONTEXT } from '../current-user.context.token.js';\r\nimport { UmbContextConsumerController } from '@umbraco-cms/backoffice/context-api';\r\nimport type { UmbControllerHost } from '@umbraco-cms/backoffice/controller-api';\r\n\r\n/**\r\n * Check if the current user is the user with the given unique id\r\n * @param host\r\n * @param userUnique\r\n */\r\nexport const isCurrentUser = async (host: UmbControllerHost, userUnique: string) => {\r\n\tconst ctrl = new UmbContextConsumerController(host, UMB_CURRENT_USER_CONTEXT);\r\n\tconst currentUserContext = await ctrl.asPromise().catch(() => undefined);\r\n\tctrl.destroy();\r\n\r\n\treturn await currentUserContext!.isUserCurrentUser(userUnique);\r\n};\r\n"],"names":["_api","_UmbCurrentUserAppButtonElement_instances","onClick_fn","UmbCurrentUserAppButtonElement","UmbLitElement","__privateAdd","api","__privateSet","__privateGet","href","html","__privateMethod","ifDefined","nothing","event","UmbActionExecutedEvent","UmbTextStyles","__decorateClass","state","property","customElement","isCurrentUser","host","userUnique","ctrl","UmbContextConsumerController","UMB_CURRENT_USER_CONTEXT","currentUserContext"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;wXAAAA,GAAAC,GAAAC;AAWa,IAAAC,IAAN,cAGGC,EAAc;AAAA,EAHjB,cAAA;AAAA,UAAA,GAAA,SAAA,GAAAC,EAAA,MAAAJ,CAAA,GAINI,EAAA,MAAAL,CAAA;AAAA,EAAA;AAAA,EAQA,IAAW,IAAIM,GAA0B;AACxC,IAAAC,EAAA,MAAKP,GAAOM,CAAA,GAEZE,EAAA,MAAKR,CAAM,GAAA,UAAA,EAAY,KAAK,CAACS,MAAS;AACrC,WAAK,QAAQA;AAAA,IAAA,CACb;AAAA,EAAA;AAAA,EAWF,IAAI,QAA4B;AACxB,WAAA,KAAK,UAAU,KAAK,QAAQ,KAAK,SAAS,OAAO,KAAK,SAAS,KAAK,KAAK,IAAI;AAAA,EAAA;AAAA,EAG5E,SAAS;AACV,WAAAC;AAAA,wBACeC,EAAA,MAAKV,GAAQC,CAAA,CAAA,2BAA2BU,EAAU,KAAK,KAAK,CAAC,SAASA,EAAU,KAAK,KAAK,CAAC;AAAA,MAC7G,KAAK,UAAU,KAAK,OAAOF,mBAAsB,KAAK,SAAS,KAAK,IAAI,iBAAiBG,CAAO;AAAA,MAChG,KAAK,KAAK;AAAA;AAAA;AAAA,EAAA;AAMhB;AAtCCb,IAAA,oBAAA,QAAA;AAJMC,IAAA,oBAAA,QAAA;AAoBAC,IAAQ,eAACY,GAAc;AACxB,EAAC,KAAK,UACTA,EAAM,gBAAgB,GAChB,MAAAN,EAAA,MAAKR,IAAM,QAAQ,IAErB,KAAA,cAAc,IAAIe,GAAwB;AAChD;AA1BYZ,EAyCI,SAAS,CAACa,CAAa;AAlC/BC,EAAA;AAAA,EADPC,EAAM;AAAA,GANKf,EAOJ,WAAA,SAAA,CAAA;AAGDc,EAAA;AAAA,EADNE,EAAS,EAAE,WAAW,GAAO,CAAA;AAAA,GATlBhB,EAUL,WAAA,YAAA,CAAA;AAVKA,IAANc,EAAA;AAAA,EADNG,EAAc,6BAA6B;AAAA,GAC/BjB,CAAA;ACFA,MAAAkB,IAAgB,OAAOC,GAAyBC,MAAuB;AACnF,QAAMC,IAAO,IAAIC,EAA6BH,GAAMI,CAAwB,GACtEC,IAAqB,MAAMH,EAAK,YAAY,MAAM,MAAA;AAAA,GAAe;AACvE,SAAAA,EAAK,QAAQ,GAEN,MAAMG,EAAoB,kBAAkBJ,CAAU;AAC9D;"}