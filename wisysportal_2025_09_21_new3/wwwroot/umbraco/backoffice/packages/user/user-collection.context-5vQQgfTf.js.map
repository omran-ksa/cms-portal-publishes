{"version":3,"file":"user-collection.context-5vQQgfTf.js","sources":["../../../src/packages/user/user/collection/user-collection.context.ts"],"sourcesContent":["import type { UmbUserDetailModel } from '../types.js';\r\nimport { UMB_COLLECTION_VIEW_USER_GRID } from './views/index.js';\r\nimport type { UmbUserCollectionFilterModel, UmbUserOrderByOption } from './types.js';\r\nimport type { UmbUserOrderByType, UmbUserStateFilterType } from './utils/index.js';\r\nimport { UmbUserOrderBy } from './utils/index.js';\r\nimport { UmbDefaultCollectionContext } from '@umbraco-cms/backoffice/collection';\r\nimport type { UmbControllerHost } from '@umbraco-cms/backoffice/controller-api';\r\nimport { UmbArrayState, UmbStringState } from '@umbraco-cms/backoffice/observable-api';\r\nimport type { UmbDirectionType } from '@umbraco-cms/backoffice/utils';\r\nimport { UmbDirection } from '@umbraco-cms/backoffice/utils';\r\n\r\nconst orderByOptions: Array<UmbUserOrderByOption> = [\r\n\t{\r\n\t\tunique: 'nameAscending',\r\n\t\tlabel: '#user_sortNameAscending',\r\n\t\tconfig: {\r\n\t\t\torderBy: UmbUserOrderBy.NAME,\r\n\t\t\torderDirection: UmbDirection.ASCENDING,\r\n\t\t},\r\n\t},\r\n\t{\r\n\t\tunique: 'nameDescending',\r\n\t\tlabel: '#user_sortNameDescending',\r\n\t\tconfig: {\r\n\t\t\torderBy: UmbUserOrderBy.NAME,\r\n\t\t\torderDirection: UmbDirection.DESCENDING,\r\n\t\t},\r\n\t},\r\n\t{\r\n\t\tunique: 'createDateDescending',\r\n\t\tlabel: '#user_sortCreateDateDescending',\r\n\t\tconfig: {\r\n\t\t\torderBy: UmbUserOrderBy.CREATE_DATE,\r\n\t\t\torderDirection: UmbDirection.DESCENDING,\r\n\t\t},\r\n\t},\r\n\t{\r\n\t\tunique: 'createDateAscending',\r\n\t\tlabel: '#user_sortCreateDateAscending',\r\n\t\tconfig: {\r\n\t\t\torderBy: UmbUserOrderBy.CREATE_DATE,\r\n\t\t\torderDirection: UmbDirection.ASCENDING,\r\n\t\t},\r\n\t},\r\n\t{\r\n\t\tunique: 'lastLoginDateDescending',\r\n\t\tlabel: '#user_sortLastLoginDateDescending',\r\n\t\tconfig: {\r\n\t\t\torderBy: UmbUserOrderBy.LAST_LOGIN_DATE,\r\n\t\t\torderDirection: UmbDirection.DESCENDING,\r\n\t\t},\r\n\t},\r\n];\r\n\r\nexport class UmbUserCollectionContext extends UmbDefaultCollectionContext<\r\n\tUmbUserDetailModel,\r\n\tUmbUserCollectionFilterModel\r\n> {\r\n\t#orderByOptions = new UmbArrayState<UmbUserOrderByOption>([], (x) => x.label);\r\n\torderByOptions = this.#orderByOptions.asObservable();\r\n\r\n\t#activeOrderByOption = new UmbStringState<string | undefined>(undefined);\r\n\tactiveOrderByOption = this.#activeOrderByOption.asObservable();\r\n\r\n\tconstructor(host: UmbControllerHost) {\r\n\t\tconst firstOption: UmbUserOrderByOption = orderByOptions[0];\r\n\r\n\t\tsuper(host, UMB_COLLECTION_VIEW_USER_GRID, {\r\n\t\t\torderBy: firstOption.config.orderBy,\r\n\t\t\torderDirection: firstOption.config.orderDirection,\r\n\t\t});\r\n\r\n\t\tthis.#orderByOptions.setValue(orderByOptions);\r\n\t\tthis.#activeOrderByOption.setValue(firstOption.unique);\r\n\t}\r\n\r\n\t/**\r\n\t * Sets the active order by option for the collection and refreshes the collection.\r\n\t * @param {string} unique\r\n\t * @memberof UmbUserCollectionContext\r\n\t */\r\n\tsetActiveOrderByOption(unique: string) {\r\n\t\tconst option = this.#orderByOptions.getValue().find((x) => x.unique === unique);\r\n\t\tthis.#activeOrderByOption.setValue(unique);\r\n\t\tthis.setFilter({ orderBy: option?.config.orderBy, orderDirection: option?.config.orderDirection });\r\n\t}\r\n\r\n\t/**\r\n\t * Sets the state filter for the collection and refreshes the collection.\r\n\t * @param {Array<UmbUserStateFilterModel>} selection\r\n\t * @memberof UmbUserCollectionContext\r\n\t */\r\n\tsetStateFilter(selection: Array<UmbUserStateFilterType>) {\r\n\t\tthis.setFilter({ userStates: selection });\r\n\t}\r\n\r\n\t/**\r\n\t * Sets the order by filter for the collection and refreshes the collection.\r\n\t * @param {UmbUserOrderByModel} orderBy\r\n\t * @memberof UmbUserCollectionContext\r\n\t */\r\n\tsetOrderByFilter(orderBy: UmbUserOrderByType) {\r\n\t\tthis.setFilter({ orderBy });\r\n\t}\r\n\r\n\t/**\r\n\t * Sets the user group filter for the collection and refreshes the collection.\r\n\t * @param {Array<string>} selection\r\n\t * @memberof UmbUserCollectionContext\r\n\t */\r\n\tsetUserGroupFilter(selection: Array<string>) {\r\n\t\tthis.setFilter({ userGroupIds: selection });\r\n\t}\r\n\r\n\t/**\r\n\t * Sets the order direction filter for the collection and refreshes the collection.\r\n\t * @param {any} orderDirection\r\n\t * @memberof UmbUserCollectionContext\r\n\t */\r\n\tsetOrderDirectionFilter(orderDirection: UmbDirectionType) {\r\n\t\tthis.setFilter({ orderDirection });\r\n\t}\r\n}\r\n\r\nexport { UmbUserCollectionContext as api };\r\n"],"names":["orderByOptions","UmbUserOrderBy","UmbDirection","UmbUserCollectionContext","UmbDefaultCollectionContext","host","firstOption","UMB_COLLECTION_VIEW_USER_GRID","#orderByOptions","UmbArrayState","x","#activeOrderByOption","UmbStringState","unique","option","selection","orderBy","orderDirection"],"mappings":";;;;;AAWA,MAAMA,IAA8C;AAAA,EACnD;AAAA,IACC,QAAQ;AAAA,IACR,OAAO;AAAA,IACP,QAAQ;AAAA,MACP,SAASC,EAAe;AAAA,MACxB,gBAAgBC,EAAa;AAAA,IAAA;AAAA,EAE/B;AAAA,EACA;AAAA,IACC,QAAQ;AAAA,IACR,OAAO;AAAA,IACP,QAAQ;AAAA,MACP,SAASD,EAAe;AAAA,MACxB,gBAAgBC,EAAa;AAAA,IAAA;AAAA,EAE/B;AAAA,EACA;AAAA,IACC,QAAQ;AAAA,IACR,OAAO;AAAA,IACP,QAAQ;AAAA,MACP,SAASD,EAAe;AAAA,MACxB,gBAAgBC,EAAa;AAAA,IAAA;AAAA,EAE/B;AAAA,EACA;AAAA,IACC,QAAQ;AAAA,IACR,OAAO;AAAA,IACP,QAAQ;AAAA,MACP,SAASD,EAAe;AAAA,MACxB,gBAAgBC,EAAa;AAAA,IAAA;AAAA,EAE/B;AAAA,EACA;AAAA,IACC,QAAQ;AAAA,IACR,OAAO;AAAA,IACP,QAAQ;AAAA,MACP,SAASD,EAAe;AAAA,MACxB,gBAAgBC,EAAa;AAAA,IAAA;AAAA,EAC9B;AAEF;AAEO,MAAMC,UAAiCC,EAG5C;AAAA,EAOD,YAAYC,GAAyB;AAC9B,UAAAC,IAAoCN,EAAe,CAAC;AAE1D,UAAMK,GAAME,GAA+B;AAAA,MAC1C,SAASD,EAAY,OAAO;AAAA,MAC5B,gBAAgBA,EAAY,OAAO;AAAA,IAAA,CACnC,GAZF,KAAAE,KAAkB,IAAIC,EAAoC,IAAI,CAACC,MAAMA,EAAE,KAAK,GAC3D,KAAA,iBAAA,KAAKF,GAAgB,aAAa,GAE5B,KAAAG,KAAA,IAAIC,EAAmC,MAAS,GACjD,KAAA,sBAAA,KAAKD,GAAqB,aAAa,GAUvD,KAAAH,GAAgB,SAASR,CAAc,GACvC,KAAAW,GAAqB,SAASL,EAAY,MAAM;AAAA,EAAA;AAAA,EAftDE;AAAA,EAGAG;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,EAoBA,uBAAuBE,GAAgB;AAChC,UAAAC,IAAS,KAAKN,GAAgB,SAAS,EAAE,KAAK,CAACE,MAAMA,EAAE,WAAWG,CAAM;AACzE,SAAAF,GAAqB,SAASE,CAAM,GACpC,KAAA,UAAU,EAAE,SAASC,GAAQ,OAAO,SAAS,gBAAgBA,GAAQ,OAAO,eAAA,CAAgB;AAAA,EAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,EAQlG,eAAeC,GAA0C;AACxD,SAAK,UAAU,EAAE,YAAYA,EAAA,CAAW;AAAA,EAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,EAQzC,iBAAiBC,GAA6B;AACxC,SAAA,UAAU,EAAE,SAAAA,GAAS;AAAA,EAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,EAQ3B,mBAAmBD,GAA0B;AAC5C,SAAK,UAAU,EAAE,cAAcA,EAAA,CAAW;AAAA,EAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,EAQ3C,wBAAwBE,GAAkC;AACpD,SAAA,UAAU,EAAE,gBAAAA,GAAgB;AAAA,EAAA;AAEnC;"}