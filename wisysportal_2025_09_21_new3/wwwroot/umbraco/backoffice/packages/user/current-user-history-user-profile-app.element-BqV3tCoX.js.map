{"version":3,"file":"current-user-history-user-profile-app.element-BqV3tCoX.js","sources":["../../../src/packages/user/current-user/history/current-user-history-user-profile-app.element.ts"],"sourcesContent":["import type { UmbCurrentUserHistoryItem, UmbCurrentUserHistoryStore } from './current-user-history.store.js';\r\nimport { UMB_CURRENT_USER_HISTORY_STORE_CONTEXT } from './current-user-history.store.token.js';\r\nimport { html, customElement, state, map, ifDefined, css } from '@umbraco-cms/backoffice/external/lit';\r\nimport { UmbLitElement } from '@umbraco-cms/backoffice/lit-element';\r\nimport { UmbTextStyles } from '@umbraco-cms/backoffice/style';\r\n\r\n@customElement('umb-current-user-history-user-profile-app')\r\nexport class UmbCurrentUserHistoryUserProfileAppElement extends UmbLitElement {\r\n\t@state()\r\n\tprivate _history: Array<UmbCurrentUserHistoryItem> = [];\r\n\r\n\t#currentUserHistoryStore?: UmbCurrentUserHistoryStore;\r\n\r\n\tconstructor() {\r\n\t\tsuper();\r\n\r\n\t\tthis.consumeContext(UMB_CURRENT_USER_HISTORY_STORE_CONTEXT, (instance) => {\r\n\t\t\tthis.#currentUserHistoryStore = instance;\r\n\t\t\tthis.#observeHistory();\r\n\t\t});\r\n\t}\r\n\r\n\t#observeHistory() {\r\n\t\tif (this.#currentUserHistoryStore) {\r\n\t\t\tthis.observe(\r\n\t\t\t\tthis.#currentUserHistoryStore.latestHistory,\r\n\t\t\t\t(history) => {\r\n\t\t\t\t\tthis._history = history.reverse();\r\n\t\t\t\t},\r\n\t\t\t\t'umbCurrentUserHistoryObserver',\r\n\t\t\t);\r\n\t\t}\r\n\t}\r\n\r\n\t#truncate(input: string, length: number, separator = '...'): string {\r\n\t\tif (input.length <= length) return input;\r\n\r\n\t\tconst separatorLength = separator.length;\r\n\t\tconst charsToShow = length - separatorLength;\r\n\t\tconst frontChars = Math.ceil(charsToShow / 2);\r\n\t\tconst backChars = Math.floor(charsToShow / 2);\r\n\r\n\t\treturn input.substring(9, frontChars) + separator + input.substring(input.length - backChars);\r\n\t}\r\n\r\n\toverride render() {\r\n\t\treturn html`\r\n\t\t\t<uui-box headline=${this.localize.term('user_yourHistory')}>\r\n\t\t\t\t<uui-ref-list>${map(this._history, (item) => html` ${this.#renderItem(item)} `)}</uui-ref-list>\r\n\t\t\t</uui-box>\r\n\t\t`;\r\n\t}\r\n\r\n\t#renderItem(item: UmbCurrentUserHistoryItem) {\r\n\t\tconst label = Array.isArray(item.label) ? item.label[0] : item.label;\r\n\t\tconst detail = Array.isArray(item.label) ? item.label.join(' > ') : this.#truncate(item.path, 50);\r\n\r\n\t\treturn html`\r\n\t\t\t<uui-ref-node name=${label} detail=${ifDefined(detail)} href=${item.path}>\r\n\t\t\t\t<uui-icon slot=\"icon\" name=\"icon-link\"></uui-icon>\r\n\t\t\t</uui-ref-node>\r\n\t\t`;\r\n\t}\r\n\r\n\tstatic override styles = [\r\n\t\tUmbTextStyles,\r\n\t\tcss`\r\n\t\t\tuui-ref-node {\r\n\t\t\t\tpadding-left: 0;\r\n\t\t\t\tpadding-right: 0;\r\n\t\t\t}\r\n\t\t`,\r\n\t];\r\n}\r\n\r\nexport default UmbCurrentUserHistoryUserProfileAppElement;\r\n\r\ndeclare global {\r\n\tinterface HTMLElementTagNameMap {\r\n\t\t'umb-current-user-history-user-profile-app': UmbCurrentUserHistoryUserProfileAppElement;\r\n\t}\r\n}\r\n"],"names":["_currentUserHistoryStore","_UmbCurrentUserHistoryUserProfileAppElement_instances","observeHistory_fn","truncate_fn","renderItem_fn","UmbCurrentUserHistoryUserProfileAppElement","UmbLitElement","__privateAdd","UMB_CURRENT_USER_HISTORY_STORE_CONTEXT","instance","__privateSet","__privateMethod","html","map","item","__privateGet","history","input","length","separator","separatorLength","charsToShow","frontChars","backChars","label","detail","ifDefined","UmbTextStyles","css","__decorateClass","state","customElement","UmbCurrentUserHistoryUserProfileAppElement$1"],"mappings":";;;;;;;;;;wXAAAA,GAAAC,GAAAC,GAAAC,GAAAC;AAOa,IAAAC,IAAN,cAAyDC,EAAc;AAAA,EAM7E,cAAc;AACP,UAAA,GAPDC,EAAA,MAAAN,CAAA,GAEN,KAAQ,WAA6C,CAAC,GAEtDM,EAAA,MAAAP,CAAA,GAKM,KAAA,eAAeQ,GAAwC,CAACC,MAAa;AACzE,MAAAC,EAAA,MAAKV,GAA2BS,CAAA,GAChCE,EAAA,MAAKV,GAALC,CAAA,EAAA,KAAA,IAAA;AAAA,IAAA,CACA;AAAA,EAAA;AAAA,EA0BO,SAAS;AACV,WAAAU;AAAA,uBACc,KAAK,SAAS,KAAK,kBAAkB,CAAC;AAAA,oBACzCC,EAAI,KAAK,UAAU,CAACC,MAASF,KAAQD,EAAA,MAAKV,GAALG,CAAA,EAAA,KAAA,MAAiBU,CAAK,CAAA,GAAG,CAAC;AAAA;AAAA;AAAA,EAAA;AAyBnF;AA9DCd,IAAA,oBAAA,QAAA;AAJMC,IAAA,oBAAA,QAAA;AAeNC,IAAe,WAAG;AACjB,EAAIa,QAAKf,CAA0B,KAC7B,KAAA;AAAA,IACJe,QAAKf,CAAyB,EAAA;AAAA,IAC9B,CAACgB,MAAY;AACP,WAAA,WAAWA,EAAQ,QAAQ;AAAA,IACjC;AAAA,IACA;AAAA,EACD;AAEF;AAEAb,IAAS,SAACc,GAAeC,GAAgBC,IAAY,OAAe;AAC/D,MAAAF,EAAM,UAAUC,EAAe,QAAAD;AAEnC,QAAMG,IAAkBD,EAAU,QAC5BE,IAAcH,IAASE,GACvBE,IAAa,KAAK,KAAKD,IAAc,CAAC,GACtCE,IAAY,KAAK,MAAMF,IAAc,CAAC;AAErC,SAAAJ,EAAM,UAAU,GAAGK,CAAU,IAAIH,IAAYF,EAAM,UAAUA,EAAM,SAASM,CAAS;AAC7F;AAUAnB,IAAW,SAACU,GAAiC;AACtC,QAAAU,IAAQ,MAAM,QAAQV,EAAK,KAAK,IAAIA,EAAK,MAAM,CAAC,IAAIA,EAAK,OACzDW,IAAS,MAAM,QAAQX,EAAK,KAAK,IAAIA,EAAK,MAAM,KAAK,KAAK,IAAIH,EAAA,MAAKV,GAALE,CAAA,EAAA,KAAA,MAAeW,EAAK,MAAM,EAAA;AAEvF,SAAAF;AAAA,wBACeY,CAAK,WAAWE,EAAUD,CAAM,CAAC,SAASX,EAAK,IAAI;AAAA;AAAA;AAAA;AAI1E;AAvDYT,EAyDI,SAAS;AAAA,EACxBsB;AAAA,EACAC;AAAA;AAAA;AAAA;AAAA;AAAA;AAMD;AA/DQC,EAAA;AAAA,EADPC,EAAM;AAAA,GADKzB,EAEJ,WAAA,YAAA,CAAA;AAFIA,IAANwB,EAAA;AAAA,EADNE,EAAc,2CAA2C;AAAA,GAC7C1B,CAAA;AAoEb,MAAA2B,IAAe3B;"}