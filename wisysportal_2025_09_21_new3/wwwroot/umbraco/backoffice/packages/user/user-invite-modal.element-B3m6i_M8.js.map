{"version":3,"file":"user-invite-modal.element-B3m6i_M8.js","sources":["../../../src/packages/user/user/invite/modal/invite/user-invite-modal.element.ts"],"sourcesContent":["import type { UmbUserGroupInputElement } from '../../../../user-group/components/input-user-group/user-group-input.element.js';\r\nimport { UmbInviteUserRepository } from '../../repository/invite-user.repository.js';\r\nimport { css, html, customElement } from '@umbraco-cms/backoffice/external/lit';\r\nimport { UmbTextStyles } from '@umbraco-cms/backoffice/style';\r\nimport { UmbModalBaseElement } from '@umbraco-cms/backoffice/modal';\r\nimport type { UmbReferenceByUnique } from '@umbraco-cms/backoffice/models';\r\n\r\n@customElement('umb-invite-user-modal')\r\nexport class UmbInviteUserModalElement extends UmbModalBaseElement {\r\n\t#inviteUserRepository = new UmbInviteUserRepository(this);\r\n\r\n\tasync #onSubmit(e: Event) {\r\n\t\te.preventDefault();\r\n\r\n\t\tconst form = e.target as HTMLFormElement;\r\n\t\tif (!form) return;\r\n\r\n\t\tconst isValid = form.checkValidity();\r\n\t\tif (!isValid) return;\r\n\r\n\t\tconst formData = new FormData(form);\r\n\r\n\t\tconst name = formData.get('name') as string;\r\n\t\tconst email = formData.get('email') as string;\r\n\r\n\t\t//TODO: How should we handle pickers forms?\r\n\t\tconst userGroupPicker = form.querySelector('#userGroups') as UmbUserGroupInputElement;\r\n\t\tconst userGroupUniques: Array<UmbReferenceByUnique> = userGroupPicker?.selection.map((unique) => {\r\n\t\t\treturn { unique };\r\n\t\t});\r\n\r\n\t\tconst message = formData.get('message') as string;\r\n\r\n\t\t// TODO: figure out when to use email or username\r\n\t\tconst { error } = await this.#inviteUserRepository.invite({\r\n\t\t\tname,\r\n\t\t\temail,\r\n\t\t\tuserName: email,\r\n\t\t\tmessage,\r\n\t\t\tuserGroupUniques,\r\n\t\t});\r\n\r\n\t\tif (!error) {\r\n\t\t\tthis._submitModal();\r\n\t\t}\r\n\t}\r\n\r\n\toverride render() {\r\n\t\treturn html`<uui-dialog-layout headline=\"Invite User\">\r\n\t\t\t${this.#renderForm()}\r\n\t\t\t<uui-button @click=${this._rejectModal} slot=\"actions\" label=\"Cancel\" look=\"secondary\"></uui-button>\r\n\t\t\t<uui-button\r\n\t\t\t\tform=\"InviteUserForm\"\r\n\t\t\t\tslot=\"actions\"\r\n\t\t\t\ttype=\"submit\"\r\n\t\t\t\tlabel=\"Send invite\"\r\n\t\t\t\tlook=\"primary\"\r\n\t\t\t\tcolor=\"positive\"></uui-button\r\n\t\t></uui-dialog-layout>`;\r\n\t}\r\n\r\n\t#renderForm() {\r\n\t\treturn html` <p style=\"margin-top: 0\">\r\n\t\t\t\tInvite new users to give them access to Umbraco. An invite email will be sent to the user with information on\r\n\t\t\t\thow to log in to Umbraco. Invites last for 72 hours.\r\n\t\t\t</p>\r\n\t\t\t<uui-form>\r\n\t\t\t\t<form id=\"InviteUserForm\" name=\"form\" @submit=\"${this.#onSubmit}\">\r\n\t\t\t\t\t<uui-form-layout-item>\r\n\t\t\t\t\t\t<uui-label id=\"nameLabel\" slot=\"label\" for=\"name\" required>Name</uui-label>\r\n\t\t\t\t\t\t<uui-input id=\"name\" label=\"name\" type=\"text\" name=\"name\" required></uui-input>\r\n\t\t\t\t\t</uui-form-layout-item>\r\n\t\t\t\t\t<uui-form-layout-item>\r\n\t\t\t\t\t\t<uui-label id=\"emailLabel\" slot=\"label\" for=\"email\" required>Email</uui-label>\r\n\t\t\t\t\t\t<uui-input id=\"email\" label=\"email\" type=\"email\" name=\"email\" required></uui-input>\r\n\t\t\t\t\t</uui-form-layout-item>\r\n\t\t\t\t\t<uui-form-layout-item>\r\n\t\t\t\t\t\t<uui-label id=\"userGroupsLabel\" slot=\"label\" for=\"userGroups\" required>User group</uui-label>\r\n\t\t\t\t\t\t<span slot=\"description\">Add groups to assign access and permissions</span>\r\n\t\t\t\t\t\t<umb-user-group-input id=\"userGroups\" name=\"userGroups\"></umb-user-group-input>\r\n\t\t\t\t\t</uui-form-layout-item>\r\n\t\t\t\t\t<uui-form-layout-item>\r\n\t\t\t\t\t\t<uui-label id=\"messageLabel\" slot=\"label\" for=\"message\" required>Message</uui-label>\r\n\t\t\t\t\t\t<uui-textarea id=\"message\" label=\"message\" name=\"message\" required></uui-textarea>\r\n\t\t\t\t\t</uui-form-layout-item>\r\n\t\t\t\t</form>\r\n\t\t\t</uui-form>`;\r\n\t}\r\n\r\n\tstatic override styles = [\r\n\t\tUmbTextStyles,\r\n\t\tcss`\r\n\t\t\t:host {\r\n\t\t\t\tdisplay: flex;\r\n\t\t\t\talign-items: center;\r\n\t\t\t\tjustify-content: center;\r\n\t\t\t\theight: 100%;\r\n\t\t\t\twidth: 100%;\r\n\t\t\t}\r\n\r\n\t\t\tuui-input {\r\n\t\t\t\twidth: 100%;\r\n\t\t\t}\r\n\r\n\t\t\tuui-textarea {\r\n\t\t\t\t--uui-textarea-min-height: 100px;\r\n\t\t\t}\r\n\t\t`,\r\n\t];\r\n}\r\n\r\nexport default UmbInviteUserModalElement;\r\n\r\ndeclare global {\r\n\tinterface HTMLElementTagNameMap {\r\n\t\t'umb-invite-user-modal': UmbInviteUserModalElement;\r\n\t}\r\n}\r\n"],"names":["_inviteUserRepository","_UmbInviteUserModalElement_instances","onSubmit_fn","renderForm_fn","UmbInviteUserModalElement","UmbModalBaseElement","__privateAdd","UmbInviteUserRepository","html","__privateMethod","form","formData","name","email","userGroupUniques","unique","message","error","__privateGet","UmbTextStyles","css","__decorateClass","customElement","UmbInviteUserModalElement$1"],"mappings":";;;;;;;;;;+TAAAA,GAAAC,GAAAC,GAAAC;AAQa,IAAAC,IAAN,cAAwCC,EAAoB;AAAA,EAA5D,cAAA;AAAA,UAAA,GAAA,SAAA,GAAAC,EAAA,MAAAL,CAAA,GACkBK,EAAA,MAAAN,GAAA,IAAIO,EAAwB,IAAI,CAAA;AAAA,EAAA;AAAA,EAsC/C,SAAS;AACV,WAAAC;AAAA,KACJC,EAAA,MAAKR,MAAL,KAAkB,IAAA,CAAA;AAAA,wBACC,KAAK,YAAY;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,EAAA;AA2DzC;AApGCD,IAAA,oBAAA,QAAA;AADMC,IAAA,oBAAA,QAAA;AAGAC,IAAS,eAAC,GAAU;AACzB,IAAE,eAAe;AAEjB,QAAMQ,IAAO,EAAE;AAIf,MAHI,CAACA,KAGD,CADYA,EAAK,cAAc,EACrB;AAER,QAAAC,IAAW,IAAI,SAASD,CAAI,GAE5BE,IAAOD,EAAS,IAAI,MAAM,GAC1BE,IAAQF,EAAS,IAAI,OAAO,GAI5BG,IADkBJ,EAAK,cAAc,aAAa,GACe,UAAU,IAAI,CAACK,OAC9E,EAAE,QAAAA,EAAO,EAChB,GAEKC,IAAUL,EAAS,IAAI,SAAS,GAGhC,EAAE,OAAAM,EAAM,IAAI,MAAMC,EAAA,MAAKlB,GAAsB,OAAO;AAAA,IACzD,MAAAY;AAAA,IACA,OAAAC;AAAA,IACA,UAAUA;AAAA,IACV,SAAAG;AAAA,IACA,kBAAAF;AAAA,EAAA,CACA;AAED,EAAKG,KACJ,KAAK,aAAa;AAEpB;AAgBAd,IAAW,WAAG;AACN,SAAAK;AAAA;AAAA;AAAA;AAAA;AAAA,qDAK4CC,QAAKR,GAASC,CAAA,CAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAoBlE;AA/EYE,EAiFI,SAAS;AAAA,EACxBe;AAAA,EACAC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAiBD;AApGYhB,IAANiB,EAAA;AAAA,EADNC,EAAc,uBAAuB;AAAA,GACzBlB,CAAA;AAuGb,MAAAmB,IAAenB;"}