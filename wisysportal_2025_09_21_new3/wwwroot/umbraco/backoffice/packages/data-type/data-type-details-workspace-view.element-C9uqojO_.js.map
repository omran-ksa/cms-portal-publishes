{"version":3,"file":"data-type-details-workspace-view.element-C9uqojO_.js","sources":["../../../src/packages/data-type/workspace/views/details/data-type-details-workspace-view.element.ts"],"sourcesContent":["import { UMB_DATA_TYPE_WORKSPACE_CONTEXT } from '../../data-type-workspace.context-token.js';\r\nimport { css, customElement, html, nothing, state } from '@umbraco-cms/backoffice/external/lit';\r\nimport { UmbLitElement } from '@umbraco-cms/backoffice/lit-element';\r\nimport { UmbTextStyles } from '@umbraco-cms/backoffice/style';\r\nimport { umbOpenModal } from '@umbraco-cms/backoffice/modal';\r\nimport { UMB_PROPERTY_EDITOR_UI_PICKER_MODAL } from '@umbraco-cms/backoffice/property-editor';\r\nimport type { UmbWorkspaceViewElement } from '@umbraco-cms/backoffice/workspace';\r\nimport { umbBindToValidation } from '@umbraco-cms/backoffice/validation';\r\n\r\n@customElement('umb-data-type-details-workspace-view')\r\nexport class UmbDataTypeDetailsWorkspaceViewEditElement extends UmbLitElement implements UmbWorkspaceViewElement {\r\n\t@state()\r\n\tprivate _propertyEditorUiIcon?: string | null = null;\r\n\r\n\t@state()\r\n\tprivate _propertyEditorUiName?: string | null = null;\r\n\r\n\t@state()\r\n\tprivate _propertyEditorUiAlias?: string | null = null;\r\n\r\n\t@state()\r\n\tprivate _propertyEditorSchemaAlias?: string | null = null;\r\n\r\n\t#workspaceContext?: typeof UMB_DATA_TYPE_WORKSPACE_CONTEXT.TYPE;\r\n\r\n\tconstructor() {\r\n\t\tsuper();\r\n\r\n\t\tthis.consumeContext(UMB_DATA_TYPE_WORKSPACE_CONTEXT, (workspaceContext) => {\r\n\t\t\tthis.#workspaceContext = workspaceContext;\r\n\t\t\tthis.#observeDataType();\r\n\t\t});\r\n\t}\r\n\r\n\t#observeDataType() {\r\n\t\tif (!this.#workspaceContext) {\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tthis.observe(this.#workspaceContext.propertyEditorUiAlias, (value) => {\r\n\t\t\tthis._propertyEditorUiAlias = value;\r\n\t\t});\r\n\r\n\t\tthis.observe(this.#workspaceContext.propertyEditorSchemaAlias, (value) => {\r\n\t\t\tthis._propertyEditorSchemaAlias = value;\r\n\t\t});\r\n\r\n\t\tthis.observe(this.#workspaceContext.propertyEditorUiName, (value) => {\r\n\t\t\tthis._propertyEditorUiName = value;\r\n\t\t});\r\n\r\n\t\tthis.observe(this.#workspaceContext.propertyEditorUiIcon, (value) => {\r\n\t\t\tthis._propertyEditorUiIcon = value;\r\n\t\t});\r\n\t}\r\n\r\n\tasync #openPropertyEditorUIPicker() {\r\n\t\tconst value = await umbOpenModal(this, UMB_PROPERTY_EDITOR_UI_PICKER_MODAL, {\r\n\t\t\tvalue: {\r\n\t\t\t\tselection: this._propertyEditorUiAlias ? [this._propertyEditorUiAlias] : [],\r\n\t\t\t},\r\n\t\t}).catch(() => undefined);\r\n\r\n\t\tif (value) {\r\n\t\t\tthis.#workspaceContext?.setPropertyEditorUiAlias(value.selection[0]);\r\n\t\t}\r\n\t}\r\n\r\n\toverride render() {\r\n\t\treturn html`\r\n\t\t\t<uui-box>\r\n\t\t\t\t${this._propertyEditorUiAlias && this._propertyEditorSchemaAlias\r\n\t\t\t\t\t? this.#renderPropertyEditorReference()\r\n\t\t\t\t\t: this.#renderChooseButton()}\r\n\t\t\t</uui-box>\r\n\t\t\t${this.#renderSettings()}\r\n\t\t`;\r\n\t}\r\n\r\n\t#renderSettings() {\r\n\t\tif (!this._propertyEditorUiAlias || !this._propertyEditorSchemaAlias) return nothing;\r\n\t\treturn html`\r\n\t\t\t<uui-box headline=${this.localize.term('general_settings')}>\r\n\t\t\t\t<umb-property-editor-config></umb-property-editor-config>\r\n\t\t\t</uui-box>\r\n\t\t`;\r\n\t}\r\n\r\n\t// Notice, we have implemented a property-layout for each states of the property editor ui picker, in this way the validation message gets removed once the choose-button is gone. (As we are missing ability to detect if elements got removed from DOM)[NL]\r\n\t#renderChooseButton() {\r\n\t\treturn html`\r\n\t\t\t<umb-property-layout\r\n\t\t\t\tdata-mark=\"property:editorUiAlias\"\r\n\t\t\t\tlabel=\"Property Editor\"\r\n\t\t\t\tdescription=${this.localize.term('propertyEditorPicker_title')}\r\n\t\t\t\tmandatory>\r\n\t\t\t\t<uui-button\r\n\t\t\t\t\tslot=\"editor\"\r\n\t\t\t\t\tid=\"btn-add\"\r\n\t\t\t\t\tlabel=${this.localize.term('propertyEditorPicker_title')}\r\n\t\t\t\t\tlook=\"placeholder\"\r\n\t\t\t\t\tcolor=\"default\"\r\n\t\t\t\t\trequired\r\n\t\t\t\t\t${umbBindToValidation(this)}\r\n\t\t\t\t\t@click=${this.#openPropertyEditorUIPicker}></uui-button>\r\n\t\t\t</umb-property-layout>\r\n\t\t`;\r\n\t}\r\n\r\n\t#renderPropertyEditorReference() {\r\n\t\tif (!this._propertyEditorUiAlias || !this._propertyEditorSchemaAlias) return nothing;\r\n\t\treturn html`\r\n\t\t\t<umb-property-layout\r\n\t\t\t\tdata-mark=\"property:editorUiAlias\"\r\n\t\t\t\tlabel=\"Property Editor\"\r\n\t\t\t\tdescription=${this.localize.term('propertyEditorPicker_title')}\r\n\t\t\t\tmandatory>\r\n\t\t\t\t<umb-ref-property-editor-ui\r\n\t\t\t\t\tslot=\"editor\"\r\n\t\t\t\t\tname=${this._propertyEditorUiName ?? ''}\r\n\t\t\t\t\talias=${this._propertyEditorUiAlias}\r\n\t\t\t\t\tproperty-editor-schema-alias=${this._propertyEditorSchemaAlias}\r\n\t\t\t\t\tstandalone\r\n\t\t\t\t\t@open=${this.#openPropertyEditorUIPicker}>\r\n\t\t\t\t\t${this._propertyEditorUiIcon\r\n\t\t\t\t\t\t? html`<umb-icon name=${this._propertyEditorUiIcon} slot=\"icon\"></umb-icon>`\r\n\t\t\t\t\t\t: nothing}\r\n\t\t\t\t\t<uui-action-bar slot=\"actions\">\r\n\t\t\t\t\t\t<uui-button\r\n\t\t\t\t\t\t\tlabel=${this.localize.term('general_change')}\r\n\t\t\t\t\t\t\t@click=${this.#openPropertyEditorUIPicker}></uui-button>\r\n\t\t\t\t\t</uui-action-bar>\r\n\t\t\t\t</umb-ref-property-editor-ui>\r\n\t\t\t</umb-property-layout>\r\n\t\t`;\r\n\t}\r\n\r\n\tstatic override styles = [\r\n\t\tUmbTextStyles,\r\n\t\tcss`\r\n\t\t\t:host {\r\n\t\t\t\tdisplay: block;\r\n\t\t\t\tmargin: var(--uui-size-layout-1);\r\n\t\t\t\tpadding-bottom: var(--uui-size-layout-1);\r\n\t\t\t}\r\n\r\n\t\t\tuui-box {\r\n\t\t\t\tmargin-top: var(--uui-size-layout-1);\r\n\t\t\t}\r\n\r\n\t\t\t#btn-add {\r\n\t\t\t\tdisplay: block;\r\n\t\t\t}\r\n\t\t`,\r\n\t];\r\n}\r\n\r\nexport default UmbDataTypeDetailsWorkspaceViewEditElement;\r\n\r\ndeclare global {\r\n\tinterface HTMLElementTagNameMap {\r\n\t\t'umb-data-type-details-workspace-view': UmbDataTypeDetailsWorkspaceViewEditElement;\r\n\t}\r\n}\r\n"],"names":["_workspaceContext","_UmbDataTypeDetailsWorkspaceViewEditElement_instances","observeDataType_fn","openPropertyEditorUIPicker_fn","renderSettings_fn","renderChooseButton_fn","renderPropertyEditorReference_fn","UmbDataTypeDetailsWorkspaceViewEditElement","UmbLitElement","__privateAdd","UMB_DATA_TYPE_WORKSPACE_CONTEXT","workspaceContext","__privateSet","__privateMethod","html","__privateGet","value","umbOpenModal","UMB_PROPERTY_EDITOR_UI_PICKER_MODAL","nothing","umbBindToValidation","UmbTextStyles","css","__decorateClass","state","customElement","UmbDataTypeDetailsWorkspaceViewEditElement$1"],"mappings":";;;;;;;;;;;;;wXAAAA,GAAAC,GAAAC,GAAAC,GAAAC,GAAAC,GAAAC;AAUa,IAAAC,IAAN,cAAyDC,EAAiD;AAAA,EAehH,cAAc;AACP,UAAA,GAhBDC,EAAA,MAAAR,CAAA,GAEN,KAAQ,wBAAwC,MAGhD,KAAQ,wBAAwC,MAGhD,KAAQ,yBAAyC,MAGjD,KAAQ,6BAA6C,MAErDQ,EAAA,MAAAT,CAAA,GAKM,KAAA,eAAeU,GAAiC,CAACC,MAAqB;AAC1E,MAAAC,EAAA,MAAKZ,GAAoBW,CAAA,GACzBE,EAAA,MAAKZ,GAALC,CAAA,EAAA,KAAA,IAAA;AAAA,IAAA,CACA;AAAA,EAAA;AAAA,EAqCO,SAAS;AACV,WAAAY;AAAA;AAAA,MAEH,KAAK,0BAA0B,KAAK,6BACnCD,QAAKZ,GAALK,CAAA,EAAA,KAAA,IAAA,IACAO,EAAK,MAAAZ,GAAAI,CAAA,EAAL,KAA0B,IAAA,CAAA;AAAA;AAAA,KAE5BQ,EAAA,MAAKZ,MAAL,KAAsB,IAAA,CAAA;AAAA;AAAA,EAAA;AAgF3B;AApICD,IAAA,oBAAA,QAAA;AAbMC,IAAA,oBAAA,QAAA;AAwBNC,IAAgB,WAAG;AACd,EAACa,QAAKf,CAAmB,MAI7B,KAAK,QAAQe,EAAA,MAAKf,CAAkB,EAAA,uBAAuB,CAACgB,MAAU;AACrE,SAAK,yBAAyBA;AAAA,EAAA,CAC9B,GAED,KAAK,QAAQD,EAAA,MAAKf,CAAkB,EAAA,2BAA2B,CAACgB,MAAU;AACzE,SAAK,6BAA6BA;AAAA,EAAA,CAClC,GAED,KAAK,QAAQD,EAAA,MAAKf,CAAkB,EAAA,sBAAsB,CAACgB,MAAU;AACpE,SAAK,wBAAwBA;AAAA,EAAA,CAC7B,GAED,KAAK,QAAQD,EAAA,MAAKf,CAAkB,EAAA,sBAAsB,CAACgB,MAAU;AACpE,SAAK,wBAAwBA;AAAA,EAAA,CAC7B;AACF;AAEMb,IAA2B,iBAAG;AACnC,QAAMa,IAAQ,MAAMC,EAAa,MAAMC,GAAqC;AAAA,IAC3E,OAAO;AAAA,MACN,WAAW,KAAK,yBAAyB,CAAC,KAAK,sBAAsB,IAAI,CAAA;AAAA,IAAC;AAAA,EAC3E,CACA,EAAE,MAAM,MAAA;AAAA,GAAe;AAExB,EAAIF,KACHD,EAAA,MAAKf,CAAmB,GAAA,yBAAyBgB,EAAM,UAAU,CAAC,CAAC;AAErE;AAaAZ,IAAe,WAAG;AACjB,SAAI,CAAC,KAAK,0BAA0B,CAAC,KAAK,6BAAmCe,IACtEL;AAAA,uBACc,KAAK,SAAS,KAAK,kBAAkB,CAAC;AAAA;AAAA;AAAA;AAI5D;AAGAT,IAAmB,WAAG;AACd,SAAAS;AAAA;AAAA;AAAA;AAAA,kBAIS,KAAK,SAAS,KAAK,4BAA4B,CAAC;AAAA;AAAA;AAAA;AAAA;AAAA,aAKrD,KAAK,SAAS,KAAK,4BAA4B,CAAC;AAAA;AAAA;AAAA;AAAA,OAItDM,EAAoB,IAAI,CAAC;AAAA,cAClBP,QAAKZ,GAA2BE,CAAA,CAAA;AAAA;AAAA;AAG7C;AAEAG,IAA8B,WAAG;AAChC,SAAI,CAAC,KAAK,0BAA0B,CAAC,KAAK,6BAAmCa,IACtEL;AAAA;AAAA;AAAA;AAAA,kBAIS,KAAK,SAAS,KAAK,4BAA4B,CAAC;AAAA;AAAA;AAAA;AAAA,YAItD,KAAK,yBAAyB,EAAE;AAAA,aAC/B,KAAK,sBAAsB;AAAA,oCACJ,KAAK,0BAA0B;AAAA;AAAA,aAEtDD,QAAKZ,GAA2BE,CAAA,CAAA;AAAA,OACtC,KAAK,wBACJW,mBAAsB,KAAK,qBAAqB,6BAChDK,CAAO;AAAA;AAAA;AAAA,eAGA,KAAK,SAAS,KAAK,gBAAgB,CAAC;AAAA,gBACnCN,QAAKZ,GAA2BE,CAAA,CAAA;AAAA;AAAA;AAAA;AAAA;AAK/C;AA7HYI,EA+HI,SAAS;AAAA,EACxBc;AAAA,EACAC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAeD;AA9IQC,EAAA;AAAA,EADPC,EAAM;AAAA,GADKjB,EAEJ,WAAA,yBAAA,CAAA;AAGAgB,EAAA;AAAA,EADPC,EAAM;AAAA,GAJKjB,EAKJ,WAAA,yBAAA,CAAA;AAGAgB,EAAA;AAAA,EADPC,EAAM;AAAA,GAPKjB,EAQJ,WAAA,0BAAA,CAAA;AAGAgB,EAAA;AAAA,EADPC,EAAM;AAAA,GAVKjB,EAWJ,WAAA,8BAAA,CAAA;AAXIA,IAANgB,EAAA;AAAA,EADNE,EAAc,sCAAsC;AAAA,GACxClB,CAAA;AAmJb,MAAAmB,IAAenB;"}