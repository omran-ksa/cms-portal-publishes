{"version":3,"file":"data-type-tree-item-children-collection.repository-BXEAhdFa.js","sources":["../../../src/packages/data-type/tree/tree-item-children/collection/repository/data-type-tree-item-children-collection.repository.ts"],"sourcesContent":["import { UmbDataTypeTreeRepository } from '../../../data-type-tree.repository.js';\r\nimport type { UmbCollectionFilterModel, UmbCollectionRepository } from '@umbraco-cms/backoffice/collection';\r\nimport { UmbRepositoryBase } from '@umbraco-cms/backoffice/repository';\r\nimport { UMB_ENTITY_CONTEXT, type UmbEntityModel } from '@umbraco-cms/backoffice/entity';\r\n\r\nexport class UmbDataTypeTreeItemChildrenCollectionRepository\r\n\textends UmbRepositoryBase\r\n\timplements UmbCollectionRepository\r\n{\r\n\t#treeRepository = new UmbDataTypeTreeRepository(this);\r\n\r\n\tasync requestCollection(filter: UmbCollectionFilterModel) {\r\n\t\t// TODO: get parent from args\r\n\t\tconst entityContext = await this.getContext(UMB_ENTITY_CONTEXT);\r\n\t\tif (!entityContext) throw new Error('Entity context not found');\r\n\r\n\t\tconst entityType = entityContext.getEntityType();\r\n\t\tconst unique = entityContext.getUnique();\r\n\r\n\t\tif (!entityType) throw new Error('Entity type not found');\r\n\t\tif (unique === undefined) throw new Error('Unique not found');\r\n\r\n\t\tconst parent: UmbEntityModel = { entityType, unique };\r\n\r\n\t\tif (parent.unique === null) {\r\n\t\t\treturn this.#treeRepository.requestTreeRootItems({ skip: filter.skip, take: filter.take });\r\n\t\t} else {\r\n\t\t\treturn this.#treeRepository.requestTreeItemsOf({ parent, skip: filter.skip, take: filter.take });\r\n\t\t}\r\n\t}\r\n}\r\n\r\nexport { UmbDataTypeTreeItemChildrenCollectionRepository as api };\r\n"],"names":["UmbDataTypeTreeItemChildrenCollectionRepository","UmbRepositoryBase","#treeRepository","UmbDataTypeTreeRepository","filter","entityContext","UMB_ENTITY_CONTEXT","entityType","unique","parent"],"mappings":";;;AAKO,MAAMA,UACJC,EAET;AAAA,EACCC,KAAkB,IAAIC,EAA0B,IAAI;AAAA,EAEpD,MAAM,kBAAkBC,GAAkC;AAEzD,UAAMC,IAAgB,MAAM,KAAK,WAAWC,CAAkB;AAC9D,QAAI,CAACD,EAAqB,OAAA,IAAI,MAAM,0BAA0B;AAExD,UAAAE,IAAaF,EAAc,cAAc,GACzCG,IAASH,EAAc,UAAU;AAEvC,QAAI,CAACE,EAAkB,OAAA,IAAI,MAAM,uBAAuB;AACxD,QAAIC,MAAW,OAAiB,OAAA,IAAI,MAAM,kBAAkB;AAEtD,UAAAC,IAAyB,EAAE,YAAAF,GAAY,QAAAC,EAAO;AAEhD,WAAAC,EAAO,WAAW,OACd,KAAKP,GAAgB,qBAAqB,EAAE,MAAME,EAAO,MAAM,MAAMA,EAAO,MAAM,IAElF,KAAKF,GAAgB,mBAAmB,EAAE,QAAAO,GAAQ,MAAML,EAAO,MAAM,MAAMA,EAAO,KAAA,CAAM;AAAA,EAChG;AAEF;"}