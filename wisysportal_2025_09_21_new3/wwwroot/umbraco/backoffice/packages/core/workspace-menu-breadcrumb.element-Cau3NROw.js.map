{"version":3,"file":"workspace-menu-breadcrumb.element-Cau3NROw.js","sources":["../../../src/packages/core/workspace/components/workspace-breadcrumb/workspace-menu-breadcrumb/workspace-menu-breadcrumb.element.ts"],"sourcesContent":["import { UMB_WORKSPACE_CONTEXT } from '../../../workspace.context-token.js';\r\nimport { css, customElement, html, ifDefined, map, state } from '@umbraco-cms/backoffice/external/lit';\r\nimport { UmbLitElement } from '@umbraco-cms/backoffice/lit-element';\r\nimport { UmbTextStyles } from '@umbraco-cms/backoffice/style';\r\nimport { UMB_MENU_STRUCTURE_WORKSPACE_CONTEXT } from '@umbraco-cms/backoffice/menu';\r\nimport { UMB_SECTION_CONTEXT } from '@umbraco-cms/backoffice/section';\r\nimport type { UmbMenuStructureWorkspaceContext, UmbStructureItemModel } from '@umbraco-cms/backoffice/menu';\r\n\r\n@customElement('umb-workspace-breadcrumb')\r\nexport class UmbWorkspaceBreadcrumbElement extends UmbLitElement {\r\n\t@state()\r\n\t_name: string = '';\r\n\r\n\t@state()\r\n\t_structure: UmbStructureItemModel[] = [];\r\n\r\n\t// TODO: figure out the correct context type\r\n\t#workspaceContext?: any;\r\n\t#sectionContext?: typeof UMB_SECTION_CONTEXT.TYPE;\r\n\t#structureContext?: typeof UMB_MENU_STRUCTURE_WORKSPACE_CONTEXT.TYPE;\r\n\r\n\tconstructor() {\r\n\t\tsuper();\r\n\r\n\t\tthis.consumeContext(UMB_SECTION_CONTEXT, (instance) => {\r\n\t\t\tthis.#sectionContext = instance;\r\n\t\t});\r\n\r\n\t\tthis.consumeContext(UMB_WORKSPACE_CONTEXT, (instance) => {\r\n\t\t\tthis.#workspaceContext = instance as any;\r\n\t\t\tthis.#observeStructure();\r\n\t\t\tthis.#observeName();\r\n\t\t});\r\n\r\n\t\tthis.consumeContext<UmbMenuStructureWorkspaceContext>(UMB_MENU_STRUCTURE_WORKSPACE_CONTEXT, (instance) => {\r\n\t\t\tthis.#structureContext = instance;\r\n\t\t\tthis.#observeStructure();\r\n\t\t});\r\n\t}\r\n\r\n\t#observeStructure() {\r\n\t\tif (!this.#structureContext || !this.#workspaceContext) return;\r\n\t\tconst isNew = this.#workspaceContext.getIsNew();\r\n\r\n\t\tthis.observe(\r\n\t\t\tthis.#structureContext.structure,\r\n\t\t\t(value) => {\r\n\t\t\t\tthis._structure = isNew ? value : value.slice(0, -1);\r\n\t\t\t},\r\n\t\t\t'menuStructureObserver',\r\n\t\t);\r\n\t}\r\n\r\n\t#observeName() {\r\n\t\tthis.observe(\r\n\t\t\tthis.#workspaceContext?.name,\r\n\t\t\t// eslint-disable-next-line @typescript-eslint/ban-ts-comment\r\n\t\t\t// @ts-ignore\r\n\t\t\t(value) => (this._name = value || ''),\r\n\t\t\t'breadcrumbWorkspaceNameObserver',\r\n\t\t);\r\n\t}\r\n\r\n\t#getHref(structureItem: UmbStructureItemModel) {\r\n\t\tif (structureItem.isFolder) return undefined;\r\n\t\treturn `section/${this.#sectionContext?.getPathname()}/workspace/${structureItem.entityType}/edit/${structureItem.unique}`;\r\n\t}\r\n\r\n\toverride render() {\r\n\t\treturn html`\r\n\t\t\t<uui-breadcrumbs>\r\n\t\t\t\t${map(\r\n\t\t\t\t\tthis._structure,\r\n\t\t\t\t\t(structureItem) =>\r\n\t\t\t\t\t\thtml`<uui-breadcrumb-item href=${ifDefined(this.#getHref(structureItem))}\r\n\t\t\t\t\t\t\t>${this.localize.string(structureItem.name)}</uui-breadcrumb-item\r\n\t\t\t\t\t\t>`,\r\n\t\t\t\t)}\r\n\t\t\t\t<uui-breadcrumb-item last-item>${this._name}</uui-breadcrumb-item>\r\n\t\t\t</uui-breadcrumbs>\r\n\t\t`;\r\n\t}\r\n\r\n\tstatic override styles = [\r\n\t\tUmbTextStyles,\r\n\t\tcss`\r\n\t\t\t:host {\r\n\t\t\t\tmargin-left: var(--uui-size-layout-1);\r\n\t\t\t}\r\n\t\t`,\r\n\t];\r\n}\r\n\r\nexport default UmbWorkspaceBreadcrumbElement;\r\n\r\ndeclare global {\r\n\tinterface HTMLElementTagNameMap {\r\n\t\t'umb-workspace-breadcrumb': UmbWorkspaceBreadcrumbElement;\r\n\t}\r\n}\r\n"],"names":["_workspaceContext","_sectionContext","_structureContext","_UmbWorkspaceBreadcrumbElement_instances","observeStructure_fn","observeName_fn","getHref_fn","UmbWorkspaceBreadcrumbElement","UmbLitElement","__privateAdd","UMB_SECTION_CONTEXT","instance","__privateSet","UMB_WORKSPACE_CONTEXT","__privateMethod","UMB_MENU_STRUCTURE_WORKSPACE_CONTEXT","html","map","structureItem","ifDefined","__privateGet","isNew","value","UmbTextStyles","css","__decorateClass","state","customElement","UmbWorkspaceBreadcrumbElement$1"],"mappings":";;;;;;;;;;;;wXAAAA,GAAAC,GAAAC,GAAAC,GAAAC,GAAAC,GAAAC;AASa,IAAAC,IAAN,cAA4CC,EAAc;AAAA,EAYhE,cAAc;AACP,UAAA,GAbDC,EAAA,MAAAN,CAAA,GAEU,KAAA,QAAA,IAGhB,KAAA,aAAsC,CAAC,GAGvCM,EAAA,MAAAT,CAAA,GACAS,EAAA,MAAAR,CAAA,GACAQ,EAAA,MAAAP,CAAA,GAKM,KAAA,eAAeQ,GAAqB,CAACC,MAAa;AACtD,MAAAC,EAAA,MAAKX,GAAkBU,CAAA;AAAA,IAAA,CACvB,GAEI,KAAA,eAAeE,GAAuB,CAACF,MAAa;AACxD,MAAAC,EAAA,MAAKZ,GAAoBW,CAAA,GACzBG,EAAA,MAAKX,GAALC,CAAA,EAAA,KAAA,IAAA,GACAU,EAAA,MAAKX,GAALE,CAAA,EAAA,KAAA,IAAA;AAAA,IAAA,CACA,GAEI,KAAA,eAAiDU,GAAsC,CAACJ,MAAa;AACzG,MAAAC,EAAA,MAAKV,GAAoBS,CAAA,GACzBG,EAAA,MAAKX,GAALC,CAAA,EAAA,KAAA,IAAA;AAAA,IAAA,CACA;AAAA,EAAA;AAAA,EA+BO,SAAS;AACV,WAAAY;AAAA;AAAA,MAEHC;AAAA,MACD,KAAK;AAAA,MACL,CAACC,MACAF,8BAAiCG,EAAUL,QAAKX,GAALG,CAAA,EAAA,KAAA,MAAcY,EAAc,CAAC;AAAA,UACpE,KAAK,SAAS,OAAOA,EAAc,IAAI,CAAC;AAAA;AAAA,IAE7C,CAAA;AAAA,qCACgC,KAAK,KAAK;AAAA;AAAA;AAAA,EAAA;AAa/C;AA1EClB,IAAA,oBAAA,QAAA;AACAC,IAAA,oBAAA,QAAA;AACAC,IAAA,oBAAA,QAAA;AAVMC,IAAA,oBAAA,QAAA;AA+BNC,IAAiB,WAAG;AACnB,MAAI,CAACgB,EAAA,MAAKlB,CAAqB,KAAA,CAACkB,QAAKpB,CAAmB,EAAA;AAClD,QAAAqB,IAAQD,EAAK,MAAApB,CAAA,EAAkB,SAAS;AAEzC,OAAA;AAAA,IACJoB,QAAKlB,CAAkB,EAAA;AAAA,IACvB,CAACoB,MAAU;AACV,WAAK,aAAaD,IAAQC,IAAQA,EAAM,MAAM,GAAG,EAAE;AAAA,IACpD;AAAA,IACA;AAAA,EACD;AACD;AAEAjB,IAAY,WAAG;AACT,OAAA;AAAA,IACJe,QAAKpB,CAAmB,GAAA;AAAA;AAAA;AAAA,IAGxB,CAACsB,MAAW,KAAK,QAAQA,KAAS;AAAA,IAClC;AAAA,EACD;AACD;AAEAhB,IAAQ,SAACY,GAAsC;AAC1C,MAAA,CAAAA,EAAc;AACX,WAAA,WAAWE,EAAK,MAAAnB,CAAA,GAAiB,YAAY,CAAC,cAAciB,EAAc,UAAU,SAASA,EAAc,MAAM;AACzH;AAzDYX,EA0EI,SAAS;AAAA,EACxBgB;AAAA,EACAC;AAAA;AAAA;AAAA;AAAA;AAKD;AA/EAC,EAAA;AAAA,EADCC,EAAM;AAAA,GADKnB,EAEZ,WAAA,SAAA,CAAA;AAGAkB,EAAA;AAAA,EADCC,EAAM;AAAA,GAJKnB,EAKZ,WAAA,cAAA,CAAA;AALYA,IAANkB,EAAA;AAAA,EADNE,EAAc,0BAA0B;AAAA,GAC5BpB,CAAA;AAoFb,MAAAqB,IAAerB;"}