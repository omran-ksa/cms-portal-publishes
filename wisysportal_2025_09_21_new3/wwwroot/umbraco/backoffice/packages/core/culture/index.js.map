{"version":3,"file":"index.js","sources":["../../../../src/packages/core/culture/components/input-culture-select/input-culture-select.element.ts"],"sourcesContent":["import { UmbCultureRepository } from '../../repository/culture.repository.js';\r\nimport { UmbChangeEvent } from '@umbraco-cms/backoffice/event';\r\nimport { html, repeat, ifDefined, customElement, property, state } from '@umbraco-cms/backoffice/external/lit';\r\nimport type { UUIComboboxElement, UUIComboboxEvent } from '@umbraco-cms/backoffice/external/uui';\r\nimport { UUIFormControlMixin } from '@umbraco-cms/backoffice/external/uui';\r\nimport { UmbLitElement } from '@umbraco-cms/backoffice/lit-element';\r\nimport type { CultureReponseModel } from '@umbraco-cms/backoffice/external/backend-api';\r\n\r\n@customElement('umb-input-culture-select')\r\nexport class UmbInputCultureSelectElement extends UUIFormControlMixin(UmbLitElement, '') {\r\n\t/**\r\n\t * Disables the input\r\n\t * @type {boolean}\r\n\t * @attr\r\n\t * @default false\r\n\t */\r\n\t@property({ type: Boolean, reflect: true })\r\n\tdisabled = false;\r\n\r\n\t/**\r\n\t * Disables the input\r\n\t * @type {boolean}\r\n\t * @attr\r\n\t * @default false\r\n\t */\r\n\t@property({ type: Boolean, reflect: true })\r\n\treadonly = false;\r\n\r\n\t@state()\r\n\tprivate _cultures: CultureReponseModel[] = [];\r\n\r\n\t@state()\r\n\tprivate _search = '';\r\n\r\n\tpublic selectedCultureName?: string;\r\n\r\n\t#cultureRepository = new UmbCultureRepository(this);\r\n\r\n\tprotected override getFormElement() {\r\n\t\treturn undefined;\r\n\t}\r\n\r\n\tprotected override async firstUpdated() {\r\n\t\tconst { data } = await this.#cultureRepository.requestCultures();\r\n\t\tif (data) {\r\n\t\t\tthis._cultures = data.items;\r\n\t\t}\r\n\t}\r\n\r\n\t#onSearchChange(event: UUIComboboxEvent) {\r\n\t\tevent.stopPropagation();\r\n\t\tconst target = event.composedPath()[0] as UUIComboboxElement;\r\n\t\tthis._search = target.search;\r\n\t}\r\n\r\n\t#onCultureChange(event: UUIComboboxEvent) {\r\n\t\tevent.stopPropagation();\r\n\t\tconst target = event.composedPath()[0] as UUIComboboxElement;\r\n\t\tthis.value = target.value;\r\n\t\tconst culture = this._cultures.find(\r\n\t\t\t(culture) => culture.name.toLowerCase() === (this.value as string).toLowerCase(),\r\n\t\t);\r\n\t\tthis.selectedCultureName = culture?.englishName;\r\n\t\tthis.dispatchEvent(new UmbChangeEvent());\r\n\t}\r\n\r\n\tget #filteredCultures() {\r\n\t\treturn this._cultures.filter((culture) => {\r\n\t\t\treturn culture.englishName?.toLowerCase().includes(this._search.toLowerCase());\r\n\t\t});\r\n\t}\r\n\r\n\tget #fromAvailableCultures() {\r\n\t\treturn this._cultures.find((culture) => culture.name.toLowerCase() === (this.value as string)?.toLowerCase());\r\n\t}\r\n\r\n\toverride render() {\r\n\t\treturn html`\r\n\t\t\t<!-- TODO: comboxbox doesn't support disabled or readonly mode yet. This is a temp solution -->\r\n\t\t\t${this.disabled || this.readonly\r\n\t\t\t\t? html`${this.#fromAvailableCultures?.englishName}`\r\n\t\t\t\t: html`\r\n\t\t\t\t\t\t<uui-combobox\r\n\t\t\t\t\t\t\tvalue=${ifDefined(this.#fromAvailableCultures?.name)}\r\n\t\t\t\t\t\t\t@change=${this.#onCultureChange}\r\n\t\t\t\t\t\t\t@search=${this.#onSearchChange}>\r\n\t\t\t\t\t\t\t<uui-combobox-list>\r\n\t\t\t\t\t\t\t\t${repeat(\r\n\t\t\t\t\t\t\t\t\tthis.#filteredCultures,\r\n\t\t\t\t\t\t\t\t\t(culture) => culture.name,\r\n\t\t\t\t\t\t\t\t\t(culture) => html`\r\n\t\t\t\t\t\t\t\t\t\t<uui-combobox-list-option value=${ifDefined(culture.name)}\r\n\t\t\t\t\t\t\t\t\t\t\t>${culture.englishName}</uui-combobox-list-option\r\n\t\t\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t`,\r\n\t\t\t\t\t\t\t\t)}\r\n\t\t\t\t\t\t\t</uui-combobox-list>\r\n\t\t\t\t\t\t</uui-combobox>\r\n\t\t\t\t\t`}\r\n\t\t`;\r\n\t}\r\n}\r\n\r\nexport default UmbInputCultureSelectElement;\r\n\r\ndeclare global {\r\n\tinterface HTMLElementTagNameMap {\r\n\t\t'umb-input-culture-select': UmbInputCultureSelectElement;\r\n\t}\r\n}\r\n"],"names":["_cultureRepository","_UmbInputCultureSelectElement_instances","onSearchChange_fn","onCultureChange_fn","filteredCultures_get","fromAvailableCultures_get","UmbInputCultureSelectElement","UUIFormControlMixin","UmbLitElement","__privateAdd","UmbCultureRepository","data","__privateGet","html","ifDefined","__privateMethod","repeat","culture","event","target","UmbChangeEvent","__decorateClass","property","state","customElement"],"mappings":";;;;;;;;;;;;+TAAAA,GAAAC,GAAAC,GAAAC,GAAAC,GAAAC;AASO,IAAMC,IAAN,cAA2CC,EAAoBC,GAAe,EAAE,EAAE;AAAA,EAAlF,cAAA;AAAA,UAAA,GAAA,SAAA,GAAAC,EAAA,MAAAR,CAAA,GAQK,KAAA,WAAA,IASA,KAAA,WAAA,IAGX,KAAQ,YAAmC,CAAC,GAG5C,KAAQ,UAAU,IAIGQ,EAAA,MAAAT,GAAA,IAAIU,EAAqB,IAAI,CAAA;AAAA,EAAA;AAAA,EAE/B,iBAAiB;AAAA,EAC5B;AAAA,EAGR,MAAyB,eAAe;AACvC,UAAM,EAAE,MAAAC,EAAK,IAAI,MAAMC,EAAA,MAAKZ,GAAmB,gBAAgB;AAC/D,IAAIW,MACH,KAAK,YAAYA,EAAK;AAAA,EACvB;AAAA,EA8BQ,SAAS;AACV,WAAAE;AAAA;AAAA,KAEJ,KAAK,YAAY,KAAK,WACrBA,IAAOD,EAAK,MAAAX,GAAAI,CAAA,GAAwB,WAAW,KAC/CQ;AAAA;AAAA,eAESC,EAAUF,EAAA,MAAKX,GAAwBI,CAAA,GAAA,IAAI,CAAC;AAAA,iBAC1CU,QAAKd,GAAgBE,CAAA,CAAA;AAAA,iBACrBY,QAAKd,GAAeC,CAAA,CAAA;AAAA;AAAA,UAE3Bc;AAAA,MACDJ,EAAK,MAAAX,GAAAG,CAAA;AAAA,MACL,CAACa,MAAYA,EAAQ;AAAA,MACrB,CAACA,MAAYJ;AAAA,4CACsBC,EAAUG,EAAQ,IAAI,CAAC;AAAA,cACrDA,EAAQ,WAAW;AAAA;AAAA;AAAA,IAGxB,CAAA;AAAA;AAAA;AAAA,MAGH;AAAA;AAAA,EAAA;AAGN;AAjECjB,IAAA,oBAAA,QAAA;AA3BMC,IAAA,oBAAA,QAAA;AAwCNC,IAAe,SAACgB,GAAyB;AACxC,EAAAA,EAAM,gBAAgB;AACtB,QAAMC,IAASD,EAAM,aAAa,EAAE,CAAC;AACrC,OAAK,UAAUC,EAAO;AACvB;AAEAhB,IAAgB,SAACe,GAAyB;AACzC,EAAAA,EAAM,gBAAgB;AACtB,QAAMC,IAASD,EAAM,aAAa,EAAE,CAAC;AACrC,OAAK,QAAQC,EAAO;AACd,QAAAF,IAAU,KAAK,UAAU;AAAA,IAC9B,CAACA,MAAYA,EAAQ,KAAK,kBAAmB,KAAK,MAAiB,YAAY;AAAA,EAChF;AACA,OAAK,sBAAsBA,GAAS,aAC/B,KAAA,cAAc,IAAIG,GAAgB;AACxC;AAEIhB,IAAiB,WAAG;AACvB,SAAO,KAAK,UAAU,OAAO,CAACa,MACtBA,EAAQ,aAAa,YAAY,EAAE,SAAS,KAAK,QAAQ,aAAa,CAC7E;AACF;AAEIZ,IAAsB,WAAG;AAC5B,SAAO,KAAK,UAAU,KAAK,CAACY,MAAYA,EAAQ,KAAK,YAAA,MAAmB,KAAK,OAAkB,YAAA,CAAa;AAC7G;AAzDAI,EAAA;AAAA,EADCC,EAAS,EAAE,MAAM,SAAS,SAAS,GAAM,CAAA;AAAA,GAP9BhB,EAQZ,WAAA,YAAA,CAAA;AASAe,EAAA;AAAA,EADCC,EAAS,EAAE,MAAM,SAAS,SAAS,GAAM,CAAA;AAAA,GAhB9BhB,EAiBZ,WAAA,YAAA,CAAA;AAGQe,EAAA;AAAA,EADPE,EAAM;AAAA,GAnBKjB,EAoBJ,WAAA,aAAA,CAAA;AAGAe,EAAA;AAAA,EADPE,EAAM;AAAA,GAtBKjB,EAuBJ,WAAA,WAAA,CAAA;AAvBIA,IAANe,EAAA;AAAA,EADNG,EAAc,0BAA0B;AAAA,GAC5BlB,CAAA;"}