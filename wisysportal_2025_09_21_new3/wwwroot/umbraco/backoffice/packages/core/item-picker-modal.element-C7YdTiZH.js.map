{"version":3,"file":"item-picker-modal.element-C7YdTiZH.js","sources":["../../../src/packages/core/modal/common/item-picker/item-picker-modal.element.ts"],"sourcesContent":["import { UmbModalBaseElement } from '../../component/modal-base.element.js';\r\nimport type { UmbItemPickerModalData, UmbItemPickerModel } from './item-picker-modal.token.js';\r\nimport {\r\n\tcss,\r\n\thtml,\r\n\tcustomElement,\r\n\trepeat,\r\n\tnothing,\r\n\twhen,\r\n\tstate,\r\n\tifDefined,\r\n} from '@umbraco-cms/backoffice/external/lit';\r\nimport { UmbTextStyles } from '@umbraco-cms/backoffice/style';\r\nimport { umbFocus } from '@umbraco-cms/backoffice/lit-element';\r\n\r\n@customElement('umb-item-picker-modal')\r\nexport class UmbItemPickerModalElement extends UmbModalBaseElement<UmbItemPickerModalData, UmbItemPickerModel> {\r\n\t@state()\r\n\tprivate _filtered: Array<UmbItemPickerModel> = [];\r\n\r\n\t#close() {\r\n\t\tthis.modalContext?.reject();\r\n\t}\r\n\r\n\t#filter(event: { target: HTMLInputElement }) {\r\n\t\tif (!this.data) return;\r\n\r\n\t\tif (event.target.value) {\r\n\t\t\tconst query = event.target.value.toLowerCase();\r\n\t\t\tthis._filtered = this.data.items.filter(\r\n\t\t\t\t(item) => item.label.toLowerCase().includes(query) || item.value.toLowerCase().includes(query),\r\n\t\t\t);\r\n\t\t} else {\r\n\t\t\tthis._filtered = this.data.items;\r\n\t\t}\r\n\t}\r\n\r\n\t#submit(item: UmbItemPickerModel) {\r\n\t\tthis.modalContext?.setValue(item);\r\n\t\tthis.modalContext?.submit();\r\n\t}\r\n\r\n\toverride connectedCallback() {\r\n\t\tsuper.connectedCallback();\r\n\r\n\t\tif (!this.data) return;\r\n\t\tthis._filtered = this.data.items;\r\n\t}\r\n\r\n\toverride render() {\r\n\t\tif (!this.data) return nothing;\r\n\t\tconst items = this._filtered;\r\n\t\treturn html`\r\n\t\t\t<umb-body-layout headline=${this.localize.string(this.data.headline)}>\r\n\t\t\t\t<div id=\"main\">\r\n\t\t\t\t\t<uui-input\r\n\t\t\t\t\t\ttype=\"search\"\r\n\t\t\t\t\t\tplaceholder=${this.localize.term('placeholders_filter')}\r\n\t\t\t\t\t\t@input=${this.#filter}\r\n\t\t\t\t\t\t${umbFocus()}>\r\n\t\t\t\t\t\t<div slot=\"prepend\">\r\n\t\t\t\t\t\t\t<uui-icon name=\"search\"></uui-icon>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t</uui-input>\r\n\t\t\t\t\t${when(\r\n\t\t\t\t\t\titems.length,\r\n\t\t\t\t\t\t() => html`\r\n\t\t\t\t\t\t\t<uui-box>\r\n\t\t\t\t\t\t\t\t<uui-ref-list>\r\n\t\t\t\t\t\t\t\t\t${repeat(\r\n\t\t\t\t\t\t\t\t\t\titems,\r\n\t\t\t\t\t\t\t\t\t\t(item) => item.value,\r\n\t\t\t\t\t\t\t\t\t\t(item) => html`\r\n\t\t\t\t\t\t\t\t\t\t\t<umb-ref-item\r\n\t\t\t\t\t\t\t\t\t\t\t\tname=${this.localize.string(item.label)}\r\n\t\t\t\t\t\t\t\t\t\t\t\tdetail=${ifDefined(item.description)}\r\n\t\t\t\t\t\t\t\t\t\t\t\ticon=${ifDefined(item.icon)}\r\n\t\t\t\t\t\t\t\t\t\t\t\t@open=${() => this.#submit(item)}>\r\n\t\t\t\t\t\t\t\t\t\t\t</umb-ref-item>\r\n\t\t\t\t\t\t\t\t\t\t`,\r\n\t\t\t\t\t\t\t\t\t)}\r\n\t\t\t\t\t\t\t\t</uui-ref-list>\r\n\t\t\t\t\t\t\t</uui-box>\r\n\t\t\t\t\t\t`,\r\n\t\t\t\t\t\t() => html`<p>There are no items to select.</p>`,\r\n\t\t\t\t\t)}\r\n\t\t\t\t</div>\r\n\t\t\t\t<div slot=\"actions\">\r\n\t\t\t\t\t<uui-button @click=${this.#close} label=\"${this.localize.term('general_close')}\"></uui-button>\r\n\t\t\t\t</div>\r\n\t\t\t</umb-body-layout>\r\n\t\t`;\r\n\t}\r\n\r\n\tstatic override styles = [\r\n\t\tUmbTextStyles,\r\n\t\tcss`\r\n\t\t\t#main {\r\n\t\t\t\tdisplay: flex;\r\n\t\t\t\tflex-direction: column;\r\n\t\t\t\tgap: var(--uui-size-space-5);\r\n\t\t\t}\r\n\r\n\t\t\tuui-box > uui-input {\r\n\t\t\t\twidth: 100%;\r\n\t\t\t}\r\n\r\n\t\t\tuui-box > uui-button {\r\n\t\t\t\tdisplay: block;\r\n\t\t\t\t--uui-button-content-align: flex-start;\r\n\t\t\t}\r\n\r\n\t\t\tuui-box > uui-button:not(:last-of-type) {\r\n\t\t\t\tmargin-bottom: var(--uui-size-space-5);\r\n\t\t\t}\r\n\r\n\t\t\th4 {\r\n\t\t\t\ttext-align: left;\r\n\t\t\t\tmargin: 0.5rem 0;\r\n\t\t\t}\r\n\r\n\t\t\tp {\r\n\t\t\t\ttext-align: left;\r\n\t\t\t\tmargin: 0 0 0.5rem 0;\r\n\t\t\t}\r\n\t\t`,\r\n\t];\r\n}\r\n\r\nexport default UmbItemPickerModalElement;\r\n\r\ndeclare global {\r\n\tinterface HTMLElementTagNameMap {\r\n\t\t'umb-item-picker-modal': UmbItemPickerModalElement;\r\n\t}\r\n}\r\n"],"names":["_UmbItemPickerModalElement_instances","close_fn","filter_fn","submit_fn","UmbItemPickerModalElement","UmbModalBaseElement","__privateAdd","nothing","items","html","__privateMethod","umbFocus","when","repeat","item","ifDefined","event","query","UmbTextStyles","css","__decorateClass","state","customElement","UmbItemPickerModalElement$1"],"mappings":";;;;;;;;;;8OAAAA,GAAAC,GAAAC,GAAAC;AAgBa,IAAAC,IAAN,cAAwCC,EAAgE;AAAA,EAAxG,cAAA;AAAA,UAAA,GAAA,SAAA,GAAAC,EAAA,MAAAN,CAAA,GAEN,KAAQ,YAAuC,CAAC;AAAA,EAAA;AAAA,EAwBvC,oBAAoB;AAGxB,IAFJ,MAAM,kBAAkB,GAEnB,KAAK,SACL,KAAA,YAAY,KAAK,KAAK;AAAA,EAAA;AAAA,EAGnB,SAAS;AACb,QAAA,CAAC,KAAK,KAAa,QAAAO;AACvB,UAAMC,IAAQ,KAAK;AACZ,WAAAC;AAAA,+BACsB,KAAK,SAAS,OAAO,KAAK,KAAK,QAAQ,CAAC;AAAA;AAAA;AAAA;AAAA,oBAInD,KAAK,SAAS,KAAK,qBAAqB,CAAC;AAAA,eAC9CC,QAAKV,GAAOE,CAAA,CAAA;AAAA,QACnBS,GAAU;AAAA;AAAA;AAAA;AAAA;AAAA,OAKXC;AAAA,MACDJ,EAAM;AAAA,MACN,MAAMC;AAAA;AAAA;AAAA,WAGDI;AAAA,QACDL;AAAA,QACA,CAACM,MAASA,EAAK;AAAA,QACf,CAACA,MAASL;AAAA;AAAA,mBAED,KAAK,SAAS,OAAOK,EAAK,KAAK,CAAC;AAAA,qBAC9BC,EAAUD,EAAK,WAAW,CAAC;AAAA,mBAC7BC,EAAUD,EAAK,IAAI,CAAC;AAAA,oBACnB,MAAMJ,EAAA,MAAKV,GAALG,CAAA,EAAA,KAAA,MAAaW,CAAK,CAAA;AAAA;AAAA;AAAA,MAGlC,CAAA;AAAA;AAAA;AAAA;AAAA,MAIJ,MAAML;AAAA,IACN,CAAA;AAAA;AAAA;AAAA,0BAGoBC,QAAKV,GAAMC,CAAA,CAAA,WAAW,KAAK,SAAS,KAAK,eAAe,CAAC;AAAA;AAAA;AAAA;AAAA,EAAA;AAuCnF;AA/GOD,IAAA,oBAAA,QAAA;AAINC,IAAM,WAAG;AACR,OAAK,cAAc,OAAO;AAC3B;AAEAC,IAAO,SAACc,GAAqC;AACxC,MAAC,KAAK;AAEN,QAAAA,EAAM,OAAO,OAAO;AACvB,YAAMC,IAAQD,EAAM,OAAO,MAAM,YAAY;AACxC,WAAA,YAAY,KAAK,KAAK,MAAM;AAAA,QAChC,CAACF,MAASA,EAAK,MAAM,YAAc,EAAA,SAASG,CAAK,KAAKH,EAAK,MAAM,YAAY,EAAE,SAASG,CAAK;AAAA,MAC9F;AAAA,IAAA;AAEK,WAAA,YAAY,KAAK,KAAK;AAE7B;AAEAd,IAAO,SAACW,GAA0B;AAC5B,OAAA,cAAc,SAASA,CAAI,GAChC,KAAK,cAAc,OAAO;AAC3B;AAxBYV,EA8EI,SAAS;AAAA,EACxBc;AAAA,EACAC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AA8BD;AA5GQC,EAAA;AAAA,EADPC,EAAM;AAAA,GADKjB,EAEJ,WAAA,aAAA,CAAA;AAFIA,IAANgB,EAAA;AAAA,EADNE,EAAc,uBAAuB;AAAA,GACzBlB,CAAA;AAiHb,MAAAmB,IAAenB;"}