{"version":3,"file":"empty-recycle-bin.action-CL03sClh.js","sources":["../../../src/packages/core/recycle-bin/entity-action/empty-recycle-bin/empty-recycle-bin.action.ts"],"sourcesContent":["import type { UmbRecycleBinRepository } from '../../recycle-bin-repository.interface.js';\r\nimport type { MetaEntityActionEmptyRecycleBinKind } from './types.js';\r\nimport { umbConfirmModal } from '@umbraco-cms/backoffice/modal';\r\nimport { createExtensionApiByAlias } from '@umbraco-cms/backoffice/extension-registry';\r\nimport { UMB_ACTION_EVENT_CONTEXT } from '@umbraco-cms/backoffice/action';\r\nimport { UmbEntityActionBase, UmbRequestReloadChildrenOfEntityEvent } from '@umbraco-cms/backoffice/entity-action';\r\n\r\n/**\r\n * Entity action for emptying the recycle bin.\r\n * @class UmbEmptyRecycleBinEntityAction\r\n * @augments {UmbEntityActionBase<MetaEntityActionEmptyRecycleBinKind>}\r\n */\r\nexport class UmbEmptyRecycleBinEntityAction extends UmbEntityActionBase<MetaEntityActionEmptyRecycleBinKind> {\r\n\t/**\r\n\t * Executes the action.\r\n\t * @memberof UmbEmptyRecycleBinEntityAction\r\n\t */\r\n\toverride async execute() {\r\n\t\tawait umbConfirmModal(this._host, {\r\n\t\t\theadline: `Empty Recycle Bin`,\r\n\t\t\tcontent: `When items are deleted from the recycle bin, they will be gone forever.`,\r\n\t\t\tcolor: 'danger',\r\n\t\t\tconfirmLabel: 'Empty Recycle Bin',\r\n\t\t});\r\n\r\n\t\tconst recycleBinRepository = await createExtensionApiByAlias<UmbRecycleBinRepository>(\r\n\t\t\tthis,\r\n\t\t\tthis.args.meta.recycleBinRepositoryAlias,\r\n\t\t);\r\n\r\n\t\tconst { error } = await recycleBinRepository.requestEmpty();\r\n\t\tif (error) {\r\n\t\t\tthrow error;\r\n\t\t}\r\n\r\n\t\tconst actionEventContext = await this.getContext(UMB_ACTION_EVENT_CONTEXT);\r\n\t\tif (!actionEventContext) throw new Error('Action event context is not available');\r\n\t\tconst event = new UmbRequestReloadChildrenOfEntityEvent({\r\n\t\t\tunique: this.args.unique,\r\n\t\t\tentityType: this.args.entityType,\r\n\t\t});\r\n\r\n\t\tactionEventContext.dispatchEvent(event);\r\n\t}\r\n}\r\n\r\nexport { UmbEmptyRecycleBinEntityAction as api };\r\n"],"names":["UmbEmptyRecycleBinEntityAction","UmbEntityActionBase","umbConfirmModal","recycleBinRepository","createExtensionApiByAlias","error","actionEventContext","UMB_ACTION_EVENT_CONTEXT","event","UmbRequestReloadChildrenOfEntityEvent"],"mappings":";;;;AAYO,MAAMA,UAAuCC,EAAyD;AAAA;AAAA;AAAA;AAAA;AAAA,EAK5G,MAAe,UAAU;AAClB,UAAAC,EAAgB,KAAK,OAAO;AAAA,MACjC,UAAU;AAAA,MACV,SAAS;AAAA,MACT,OAAO;AAAA,MACP,cAAc;AAAA,IAAA,CACd;AAED,UAAMC,IAAuB,MAAMC;AAAA,MAClC;AAAA,MACA,KAAK,KAAK,KAAK;AAAA,IAChB,GAEM,EAAE,OAAAC,EAAA,IAAU,MAAMF,EAAqB,aAAa;AAC1D,QAAIE;AACG,YAAAA;AAGP,UAAMC,IAAqB,MAAM,KAAK,WAAWC,CAAwB;AACzE,QAAI,CAACD,EAA0B,OAAA,IAAI,MAAM,uCAAuC;AAC1E,UAAAE,IAAQ,IAAIC,EAAsC;AAAA,MACvD,QAAQ,KAAK,KAAK;AAAA,MAClB,YAAY,KAAK,KAAK;AAAA,IAAA,CACtB;AAED,IAAAH,EAAmB,cAAcE,CAAK;AAAA,EAAA;AAExC;"}