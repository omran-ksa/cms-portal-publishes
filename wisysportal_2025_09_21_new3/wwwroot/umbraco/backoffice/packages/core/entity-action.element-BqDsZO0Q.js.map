{"version":3,"file":"entity-action.element-BqDsZO0Q.js","sources":["../../../src/packages/core/entity-action/default/entity-action.element.ts"],"sourcesContent":["import type { UmbEntityAction } from '../entity-action.interface.js';\r\nimport type { UmbEntityActionElement } from '../entity-action-element.interface.js';\r\nimport type { ManifestEntityAction } from '../entity-action.extension.js';\r\nimport type { MetaEntityActionDefaultKind } from './types.js';\r\nimport { UmbActionExecutedEvent } from '@umbraco-cms/backoffice/event';\r\nimport { html, nothing, ifDefined, customElement, property, state } from '@umbraco-cms/backoffice/external/lit';\r\nimport type { UUIMenuItemEvent } from '@umbraco-cms/backoffice/external/uui';\r\nimport { UmbLitElement } from '@umbraco-cms/backoffice/lit-element';\r\n\r\n@customElement('umb-entity-action')\r\nexport class UmbEntityActionDefaultElement<\r\n\t\tMetaType extends MetaEntityActionDefaultKind = MetaEntityActionDefaultKind,\r\n\t\tApiType extends UmbEntityAction<MetaType> = UmbEntityAction<MetaType>,\r\n\t>\r\n\textends UmbLitElement\r\n\timplements UmbEntityActionElement\r\n{\r\n\t#api?: ApiType;\r\n\r\n\t// TODO: Do these need to be properties? [NL]\r\n\t@property({ type: String })\r\n\tentityType?: string | null;\r\n\r\n\t// TODO: Do these need to be properties? [NL]\r\n\t@property({ type: String })\r\n\tpublic unique?: string | null;\r\n\r\n\t@property({ attribute: false })\r\n\tpublic manifest?: ManifestEntityAction<MetaType>;\r\n\r\n\tpublic set api(api: ApiType | undefined) {\r\n\t\tthis.#api = api;\r\n\r\n\t\t// TODO: Fix so when we use a HREF it does not refresh the page?\r\n\t\tthis.#api?.getHref?.().then((href) => {\r\n\t\t\tthis._href = href;\r\n\t\t\t// TODO: Do we need to update the component here? [NL]\r\n\t\t});\r\n\t}\r\n\r\n\t@state()\r\n\t_href?: string;\r\n\r\n\toverride async focus() {\r\n\t\tawait this.updateComplete;\r\n\t\tthis.shadowRoot?.querySelector('uui-menu-item')?.focus();\r\n\t}\r\n\r\n\tasync #onClickLabel(event: UUIMenuItemEvent) {\r\n\t\tif (!this._href) {\r\n\t\t\tevent.stopPropagation();\r\n\r\n\t\t\ttry {\r\n\t\t\t\tawait this.#api?.execute();\r\n\t\t\t\tthis.dispatchEvent(new UmbActionExecutedEvent());\r\n\t\t\t} catch (error) {\r\n\t\t\t\tconsole.error('Error executing action:', error);\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\t// TODO: we need to stop the regular click event from bubbling up to the table so it doesn't select the row.\r\n\t// This should probably be handled in the UUI Menu item component. so we don't dispatch a label-click event and click event at the same time.\r\n\t#onClick(event: PointerEvent) {\r\n\t\tevent.stopPropagation();\r\n\t}\r\n\r\n\toverride render() {\r\n\t\tif (!this.manifest) return nothing;\r\n\r\n\t\tconst label = this.manifest.meta.label ? this.localize.string(this.manifest.meta.label) : this.manifest.name;\r\n\r\n\t\treturn html`\r\n\t\t\t<uui-menu-item\r\n\t\t\t\tdata-mark=${'entity-action:' + this.manifest?.alias}\r\n\t\t\t\tlabel=${ifDefined(this.manifest?.meta.additionalOptions ? label + 'â€¦' : label)}\r\n\t\t\t\thref=${ifDefined(this._href)}\r\n\t\t\t\t@click-label=${this.#onClickLabel}\r\n\t\t\t\t@click=${this.#onClick}>\r\n\t\t\t\t${this.manifest.meta.icon ? html`<umb-icon slot=\"icon\" name=\"${this.manifest.meta.icon}\"></umb-icon>` : nothing}\r\n\t\t\t</uui-menu-item>\r\n\t\t`;\r\n\t}\r\n}\r\nexport default UmbEntityActionDefaultElement;\r\n\r\ndeclare global {\r\n\tinterface HTMLElementTagNameMap {\r\n\t\t'umb-entity-action': UmbEntityActionDefaultElement;\r\n\t}\r\n}\r\n"],"names":["_api","_UmbEntityActionDefaultElement_instances","onClickLabel_fn","onClick_fn","UmbEntityActionDefaultElement","UmbLitElement","__privateAdd","api","__privateSet","__privateGet","href","nothing","label","html","ifDefined","__privateMethod","event","UmbActionExecutedEvent","error","__decorateClass","property","state","customElement","UmbEntityActionDefaultElement$1"],"mappings":";;;;;;;;;wXAAAA,GAAAC,GAAAC,GAAAC;AAUa,IAAAC,IAAN,cAIEC,EAET;AAAA,EANO,cAAA;AAAA,UAAA,GAAA,SAAA,GAAAC,EAAA,MAAAL,CAAA,GAONK,EAAA,MAAAN,CAAA;AAAA,EAAA;AAAA,EAaA,IAAW,IAAIO,GAA0B;AACxC,IAAAC,EAAA,MAAKR,GAAOO,CAAA,GAGZE,EAAA,MAAKT,CAAM,GAAA,UAAA,EAAY,KAAK,CAACU,MAAS;AACrC,WAAK,QAAQA;AAAA,IAAA,CAEb;AAAA,EAAA;AAAA,EAMF,MAAe,QAAQ;AACtB,UAAM,KAAK,gBACX,KAAK,YAAY,cAAc,eAAe,GAAG,MAAM;AAAA,EAAA;AAAA,EAsB/C,SAAS;AACb,QAAA,CAAC,KAAK,SAAiB,QAAAC;AAE3B,UAAMC,IAAQ,KAAK,SAAS,KAAK,QAAQ,KAAK,SAAS,OAAO,KAAK,SAAS,KAAK,KAAK,IAAI,KAAK,SAAS;AAEjG,WAAAC;AAAA;AAAA,gBAEO,mBAAmB,KAAK,UAAU,KAAK;AAAA,YAC3CC,EAAU,KAAK,UAAU,KAAK,oBAAoBF,IAAQ,MAAMA,CAAK,CAAC;AAAA,WACvEE,EAAU,KAAK,KAAK,CAAC;AAAA,mBACbC,QAAKd,GAAaC,CAAA,CAAA;AAAA,aACxBa,QAAKd,GAAQE,CAAA,CAAA;AAAA,MACpB,KAAK,SAAS,KAAK,OAAOU,gCAAmC,KAAK,SAAS,KAAK,IAAI,kBAAkBF,CAAO;AAAA;AAAA;AAAA,EAAA;AAInH;AAlECX,IAAA,oBAAA,QAAA;AAPMC,IAAA,oBAAA,QAAA;AAsCAC,IAAa,eAACc,GAAyB;AACxC,MAAA,CAAC,KAAK,OAAO;AAChB,IAAAA,EAAM,gBAAgB;AAElB,QAAA;AACG,YAAAP,EAAA,MAAKT,IAAM,QAAQ,GACpB,KAAA,cAAc,IAAIiB,GAAwB;AAAA,aACvCC,GAAO;AACP,cAAA,MAAM,2BAA2BA,CAAK;AAAA,IAAA;AAAA,EAC/C;AAEF;AAIAf,IAAQ,SAACa,GAAqB;AAC7B,EAAAA,EAAM,gBAAgB;AACvB;AA5CAG,EAAA;AAAA,EADCC,EAAS,EAAE,MAAM,OAAQ,CAAA;AAAA,GAVdhB,EAWZ,WAAA,cAAA,CAAA;AAIOe,EAAA;AAAA,EADNC,EAAS,EAAE,MAAM,OAAQ,CAAA;AAAA,GAddhB,EAeL,WAAA,UAAA,CAAA;AAGAe,EAAA;AAAA,EADNC,EAAS,EAAE,WAAW,GAAO,CAAA;AAAA,GAjBlBhB,EAkBL,WAAA,YAAA,CAAA;AAaPe,EAAA;AAAA,EADCE,EAAM;AAAA,GA9BKjB,EA+BZ,WAAA,SAAA,CAAA;AA/BYA,IAANe,EAAA;AAAA,EADNG,EAAc,mBAAmB;AAAA,GACrBlB,CAAA;AA0Eb,MAAAmB,IAAenB;"}