{"version":3,"file":"sort-children-of-modal.token-Dek4OSuA.js","sources":["../../../src/packages/core/tree/folder/modal/folder-create-modal.token.ts","../../../src/packages/core/tree/folder/modal/folder-update-modal.token.ts","../../../src/packages/core/tree/folder/entity-action/create-folder/create-folder.action.ts","../../../src/packages/core/tree/folder/entity-action/delete-folder/delete-folder.action.ts","../../../src/packages/core/tree/folder/entity-action/update-folder/update-folder.action.ts","../../../src/packages/core/tree/tree-item/tree-item-default/manifests.ts","../../../src/packages/core/tree/entity-actions/duplicate-to/modal/duplicate-to-modal.token.ts","../../../src/packages/core/tree/entity-actions/sort-children-of/sort-children-of.action.kind.ts","../../../src/packages/core/tree/entity-actions/sort-children-of/modal/sort-children-of-modal.token.ts"],"sourcesContent":["import type { UmbFolderModel } from '../types.js';\r\nimport type { UmbEntityModel } from '@umbraco-cms/backoffice/entity';\r\nimport { UmbModalToken } from '@umbraco-cms/backoffice/modal';\r\n\r\nexport interface UmbFolderCreateModalData {\r\n\tfolderRepositoryAlias: string;\r\n\tparent: UmbEntityModel;\r\n}\r\n\r\nexport interface UmbFolderCreateModalValue {\r\n\tfolder: UmbFolderModel;\r\n}\r\n\r\nexport const UMB_FOLDER_CREATE_MODAL = new UmbModalToken<UmbFolderCreateModalData, UmbFolderCreateModalValue>(\r\n\t'Umb.Modal.Folder.Create',\r\n\t{\r\n\t\tmodal: {\r\n\t\t\ttype: 'sidebar',\r\n\t\t\tsize: 'small',\r\n\t\t},\r\n\t},\r\n);\r\n","import type { UmbFolderModel } from '../types.js';\r\nimport { UmbModalToken } from '@umbraco-cms/backoffice/modal';\r\n\r\nexport interface UmbFolderUpdateModalData {\r\n\tfolderRepositoryAlias: string;\r\n\tunique: string;\r\n}\r\n\r\nexport interface UmbFolderUpdateModalValue {\r\n\tfolder: UmbFolderModel;\r\n}\r\n\r\nexport const UMB_FOLDER_UPDATE_MODAL = new UmbModalToken<UmbFolderUpdateModalData, UmbFolderUpdateModalValue>(\r\n\t'Umb.Modal.Folder.Update',\r\n\t{\r\n\t\tmodal: {\r\n\t\t\ttype: 'sidebar',\r\n\t\t\tsize: 'small',\r\n\t\t},\r\n\t},\r\n);\r\n","import { UMB_FOLDER_CREATE_MODAL } from '../../modal/index.js';\r\nimport type { MetaEntityActionFolderKind } from '../../types.js';\r\nimport { UMB_ACTION_EVENT_CONTEXT } from '@umbraco-cms/backoffice/action';\r\nimport { UmbEntityActionBase, UmbRequestReloadChildrenOfEntityEvent } from '@umbraco-cms/backoffice/entity-action';\r\nimport { umbOpenModal } from '@umbraco-cms/backoffice/modal';\r\n\r\nexport class UmbCreateFolderEntityAction extends UmbEntityActionBase<MetaEntityActionFolderKind> {\r\n\toverride async execute() {\r\n\t\tawait umbOpenModal(this, UMB_FOLDER_CREATE_MODAL, {\r\n\t\t\tdata: {\r\n\t\t\t\tfolderRepositoryAlias: this.args.meta.folderRepositoryAlias,\r\n\t\t\t\tparent: {\r\n\t\t\t\t\tunique: this.args.unique,\r\n\t\t\t\t\tentityType: this.args.entityType,\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t});\r\n\r\n\t\tconst eventContext = await this.getContext(UMB_ACTION_EVENT_CONTEXT);\r\n\t\tif (!eventContext) {\r\n\t\t\tthrow new Error('Event context not found.');\r\n\t\t}\r\n\t\tconst event = new UmbRequestReloadChildrenOfEntityEvent({\r\n\t\t\tentityType: this.args.entityType,\r\n\t\t\tunique: this.args.unique,\r\n\t\t});\r\n\r\n\t\teventContext.dispatchEvent(event);\r\n\t}\r\n}\r\n","import type { MetaEntityActionFolderKind, UmbFolderModel } from '../../types.js';\r\nimport { UMB_ACTION_EVENT_CONTEXT } from '@umbraco-cms/backoffice/action';\r\nimport { UmbEntityActionBase, UmbRequestReloadStructureForEntityEvent } from '@umbraco-cms/backoffice/entity-action';\r\nimport { createExtensionApiByAlias } from '@umbraco-cms/backoffice/extension-registry';\r\nimport { umbConfirmModal } from '@umbraco-cms/backoffice/modal';\r\nimport type { UmbDetailRepository } from '@umbraco-cms/backoffice/repository';\r\n\r\nexport class UmbDeleteFolderEntityAction extends UmbEntityActionBase<MetaEntityActionFolderKind> {\r\n\toverride async execute() {\r\n\t\tif (!this.args.unique) throw new Error('Unique is not available');\r\n\t\tconst folderRepository = await createExtensionApiByAlias<UmbDetailRepository<UmbFolderModel>>(\r\n\t\t\tthis,\r\n\t\t\tthis.args.meta.folderRepositoryAlias,\r\n\t\t);\r\n\r\n\t\tconst { data: folder } = await folderRepository.requestByUnique(this.args.unique);\r\n\r\n\t\tif (folder) {\r\n\t\t\t// TODO: maybe we can show something about how many items are part of the folder?\r\n\t\t\tawait umbConfirmModal(this, {\r\n\t\t\t\theadline: `Delete ${folder.name}`,\r\n\t\t\t\tcontent: 'Are you sure you want to delete this folder?',\r\n\t\t\t\tcolor: 'danger',\r\n\t\t\t\tconfirmLabel: 'Delete',\r\n\t\t\t});\r\n\r\n\t\t\tconst { error } = await folderRepository.delete(this.args.unique);\r\n\t\t\tif (error) {\r\n\t\t\t\tthrow error;\r\n\t\t\t}\r\n\r\n\t\t\tconst actionEventContext = await this.getContext(UMB_ACTION_EVENT_CONTEXT);\r\n\t\t\tif (!actionEventContext) throw new Error('Action event context is missing');\r\n\t\t\tconst event = new UmbRequestReloadStructureForEntityEvent({\r\n\t\t\t\tunique: this.args.unique,\r\n\t\t\t\tentityType: this.args.entityType,\r\n\t\t\t});\r\n\r\n\t\t\tactionEventContext.dispatchEvent(event);\r\n\t\t}\r\n\t}\r\n}\r\n","import { UMB_FOLDER_UPDATE_MODAL } from '../../modal/index.js';\r\nimport type { MetaEntityActionFolderKind } from '../../types.js';\r\nimport { UMB_ACTION_EVENT_CONTEXT } from '@umbraco-cms/backoffice/action';\r\nimport { UmbEntityActionBase, UmbRequestReloadStructureForEntityEvent } from '@umbraco-cms/backoffice/entity-action';\r\nimport { umbOpenModal } from '@umbraco-cms/backoffice/modal';\r\n\r\nexport class UmbUpdateFolderEntityAction extends UmbEntityActionBase<MetaEntityActionFolderKind> {\r\n\toverride async execute() {\r\n\t\tif (!this.args.unique) throw new Error('Unique is not available');\r\n\r\n\t\tawait umbOpenModal(this, UMB_FOLDER_UPDATE_MODAL, {\r\n\t\t\tdata: {\r\n\t\t\t\tfolderRepositoryAlias: this.args.meta.folderRepositoryAlias,\r\n\t\t\t\tunique: this.args.unique,\r\n\t\t\t},\r\n\t\t});\r\n\r\n\t\tconst actionEventContext = await this.getContext(UMB_ACTION_EVENT_CONTEXT);\r\n\t\tif (!actionEventContext) {\r\n\t\t\tthrow new Error('Event context not found.');\r\n\t\t}\r\n\t\tconst event = new UmbRequestReloadStructureForEntityEvent({\r\n\t\t\tunique: this.args.unique,\r\n\t\t\tentityType: this.args.entityType,\r\n\t\t});\r\n\r\n\t\tactionEventContext.dispatchEvent(event);\r\n\t}\r\n}\r\n","import type { UmbExtensionManifestKind } from '@umbraco-cms/backoffice/extension-registry';\r\n\r\nexport const UMB_TREE_ITEM_DEFAULT_KIND_MANIFEST: UmbExtensionManifestKind = {\r\n\ttype: 'kind',\r\n\talias: 'Umb.Kind.TreeItem.Default',\r\n\tmatchKind: 'default',\r\n\tmatchType: 'treeItem',\r\n\tmanifest: {\r\n\t\ttype: 'treeItem',\r\n\t\tapi: () => import('./tree-item-default.context.js'),\r\n\t\telement: () => import('./tree-item-default.element.js'),\r\n\t},\r\n};\r\n\r\nexport const manifests: Array<UmbExtensionManifest | UmbExtensionManifestKind> = [UMB_TREE_ITEM_DEFAULT_KIND_MANIFEST];\r\n","import type { UmbEntityModel } from '@umbraco-cms/backoffice/entity';\r\nimport { UmbModalToken } from '@umbraco-cms/backoffice/modal';\r\n\r\nexport const UMB_DUPLICATE_TO_MODAL_ALIAS = 'Umb.Modal.DuplicateTo';\r\n\r\nexport interface UmbDuplicateToModalData extends UmbEntityModel {\r\n\ttreeAlias: string;\r\n\tfoldersOnly?: boolean;\r\n}\r\n\r\nexport interface UmbDuplicateToModalValue {\r\n\tdestination: {\r\n\t\tunique: string | null;\r\n\t};\r\n}\r\n\r\nexport const UMB_DUPLICATE_TO_MODAL = new UmbModalToken<UmbDuplicateToModalData, UmbDuplicateToModalValue>(\r\n\tUMB_DUPLICATE_TO_MODAL_ALIAS,\r\n\t{\r\n\t\tmodal: {\r\n\t\t\ttype: 'sidebar',\r\n\t\t\tsize: 'small',\r\n\t\t},\r\n\t},\r\n);\r\n","import { UMB_ENTITY_ACTION_DEFAULT_KIND_MANIFEST } from '@umbraco-cms/backoffice/entity-action';\r\nimport type { UmbExtensionManifestKind } from '@umbraco-cms/backoffice/extension-registry';\r\n\r\nexport const UMB_ENTITY_ACTION_SORT_CHILDREN_OF_KIND_MANIFEST: UmbExtensionManifestKind = {\r\n\ttype: 'kind',\r\n\talias: 'Umb.Kind.EntityAction.SortChildrenOf',\r\n\tmatchKind: 'sortChildrenOf',\r\n\tmatchType: 'entityAction',\r\n\tmanifest: {\r\n\t\t...UMB_ENTITY_ACTION_DEFAULT_KIND_MANIFEST.manifest,\r\n\t\ttype: 'entityAction',\r\n\t\tkind: 'sortChildrenOf',\r\n\t\tapi: () => import('./sort-children-of.action.js'),\r\n\t\tweight: 100,\r\n\t\tforEntityTypes: [],\r\n\t\tmeta: {\r\n\t\t\ticon: 'icon-height',\r\n\t\t\tlabel: '#actions_sort',\r\n\t\t\tadditionalOptions: true,\r\n\t\t\titemRepositoryAlias: '',\r\n\t\t\tsortRepositoryAlias: '',\r\n\t\t},\r\n\t},\r\n};\r\n\r\nexport const manifest = UMB_ENTITY_ACTION_SORT_CHILDREN_OF_KIND_MANIFEST;\r\n","import type { UmbEntityModel } from '@umbraco-cms/backoffice/entity';\r\nimport { UmbModalToken } from '@umbraco-cms/backoffice/modal';\r\n\r\nexport const UMB_SORT_CHILDREN_OF_MODAL_ALIAS = 'Umb.Modal.SortChildrenOf';\r\n\r\nexport interface UmbSortChildrenOfModalData extends UmbEntityModel {\r\n\ttreeRepositoryAlias: string;\r\n\tsortChildrenOfRepositoryAlias: string;\r\n}\r\n\r\n// eslint-disable-next-line @typescript-eslint/no-empty-object-type\r\nexport interface UmbSortChildrenOfModalValue {}\r\n\r\nexport const UMB_SORT_CHILDREN_OF_MODAL = new UmbModalToken<UmbSortChildrenOfModalData, UmbSortChildrenOfModalValue>(\r\n\tUMB_SORT_CHILDREN_OF_MODAL_ALIAS,\r\n\t{\r\n\t\tmodal: {\r\n\t\t\ttype: 'sidebar',\r\n\t\t\tsize: 'small',\r\n\t\t},\r\n\t},\r\n);\r\n"],"names":["UMB_FOLDER_CREATE_MODAL","UmbModalToken","UMB_FOLDER_UPDATE_MODAL","UmbCreateFolderEntityAction","UmbEntityActionBase","umbOpenModal","eventContext","UMB_ACTION_EVENT_CONTEXT","event","UmbRequestReloadChildrenOfEntityEvent","UmbDeleteFolderEntityAction","folderRepository","createExtensionApiByAlias","folder","umbConfirmModal","error","actionEventContext","UmbRequestReloadStructureForEntityEvent","UmbUpdateFolderEntityAction","UMB_TREE_ITEM_DEFAULT_KIND_MANIFEST","manifests","UMB_DUPLICATE_TO_MODAL_ALIAS","UMB_DUPLICATE_TO_MODAL","UMB_ENTITY_ACTION_SORT_CHILDREN_OF_KIND_MANIFEST","UMB_ENTITY_ACTION_DEFAULT_KIND_MANIFEST","manifest","UMB_SORT_CHILDREN_OF_MODAL_ALIAS","UMB_SORT_CHILDREN_OF_MODAL"],"mappings":"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"}