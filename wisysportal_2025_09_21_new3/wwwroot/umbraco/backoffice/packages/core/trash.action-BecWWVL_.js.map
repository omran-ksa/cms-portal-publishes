{"version":3,"file":"trash.action-BecWWVL_.js","sources":["../../../src/packages/core/entity-bulk-action/common/trash/trash.action.ts"],"sourcesContent":["import { UmbEntityBulkActionBase } from '../../entity-bulk-action-base.js';\r\nimport type { UmbEntityBulkActionArgs } from '../../types.js';\r\nimport type { UmbBulkTrashRepository } from './trash-repository.interface.js';\r\nimport { createExtensionApiByAlias } from '@umbraco-cms/backoffice/extension-registry';\r\nimport {\r\n\tUmbRequestReloadChildrenOfEntityEvent,\r\n\tUmbRequestReloadStructureForEntityEvent,\r\n} from '@umbraco-cms/backoffice/entity-action';\r\nimport { UMB_ACTION_EVENT_CONTEXT } from '@umbraco-cms/backoffice/action';\r\nimport { UMB_ENTITY_CONTEXT } from '@umbraco-cms/backoffice/entity';\r\nimport { umbConfirmModal } from '@umbraco-cms/backoffice/modal';\r\nimport type { MetaEntityBulkActionTrashKind } from '@umbraco-cms/backoffice/extension-registry';\r\nimport type { UmbControllerHost } from '@umbraco-cms/backoffice/controller-api';\r\nimport { UmbDeprecation } from '@umbraco-cms/backoffice/utils';\r\n\r\n/**\r\n * @deprecated since v15.3.0. Will be removed in v17.0.0. import `UmbMediaTrashEntityBulkAction` from @umbraco-cms/backoffice/recycle-bin instead.\r\n * @exports\r\n * @class UmbMediaTrashEntityBulkAction\r\n * @augments {UmbEntityBulkActionBase<MetaEntityBulkActionTrashKind>}\r\n */\r\nexport class UmbMediaTrashEntityBulkAction extends UmbEntityBulkActionBase<MetaEntityBulkActionTrashKind> {\r\n\tconstructor(host: UmbControllerHost, args: UmbEntityBulkActionArgs<MetaEntityBulkActionTrashKind>) {\r\n\t\tsuper(host, args);\r\n\r\n\t\tnew UmbDeprecation({\r\n\t\t\tremoveInVersion: '17.0.0',\r\n\t\t\tdeprecated: 'UmbMediaTrashEntityBulkAction',\r\n\t\t\tsolution: 'import UmbMediaTrashEntityBulkAction from @umbraco-cms/backoffice/recycle-bin instead.',\r\n\t\t}).warn();\r\n\t}\r\n\r\n\tasync execute() {\r\n\t\tif (this.selection?.length === 0) return;\r\n\r\n\t\tawait umbConfirmModal(this._host, {\r\n\t\t\theadline: `Trash`,\r\n\t\t\tcontent: `Are you sure you want to move ${this.selection.length} ${this.selection.length === 1 ? 'item' : 'items'} to the recycle bin?`,\r\n\t\t\tcolor: 'danger',\r\n\t\t\tconfirmLabel: 'Trash',\r\n\t\t});\r\n\r\n\t\tconst bulkTrashRepository = await createExtensionApiByAlias<UmbBulkTrashRepository>(\r\n\t\t\tthis,\r\n\t\t\tthis.args.meta.bulkTrashRepositoryAlias,\r\n\t\t);\r\n\t\tif (!bulkTrashRepository) throw new Error('Bulk Trash Repository is not available');\r\n\r\n\t\tawait bulkTrashRepository.requestBulkTrash({ uniques: this.selection });\r\n\r\n\t\tconst entityContext = await this.getContext(UMB_ENTITY_CONTEXT);\r\n\t\tif (!entityContext) throw new Error('Entity Context is not available');\r\n\r\n\t\tconst entityType = entityContext.getEntityType();\r\n\t\tconst unique = entityContext.getUnique();\r\n\r\n\t\tif (entityType && unique !== undefined) {\r\n\t\t\tconst eventContext = await this.getContext(UMB_ACTION_EVENT_CONTEXT);\r\n\t\t\tif (!eventContext) throw new Error('Event Context is not available');\r\n\r\n\t\t\tconst args = { entityType, unique };\r\n\r\n\t\t\tconst reloadChildren = new UmbRequestReloadChildrenOfEntityEvent(args);\r\n\t\t\teventContext.dispatchEvent(reloadChildren);\r\n\r\n\t\t\tconst reloadStructure = new UmbRequestReloadStructureForEntityEvent(args);\r\n\t\t\teventContext.dispatchEvent(reloadStructure);\r\n\t\t}\r\n\t}\r\n}\r\n\r\nexport { UmbMediaTrashEntityBulkAction as api };\r\n"],"names":["UmbMediaTrashEntityBulkAction","UmbEntityBulkActionBase","host","args","UmbDeprecation","umbConfirmModal","bulkTrashRepository","createExtensionApiByAlias","entityContext","UMB_ENTITY_CONTEXT","entityType","unique","eventContext","UMB_ACTION_EVENT_CONTEXT","reloadChildren","UmbRequestReloadChildrenOfEntityEvent","reloadStructure","UmbRequestReloadStructureForEntityEvent"],"mappings":";;;;;;;AAqBO,MAAMA,UAAsCC,EAAuD;AAAA,EACzG,YAAYC,GAAyBC,GAA8D;AAClG,UAAMD,GAAMC,CAAI,GAEhB,IAAIC,EAAe;AAAA,MAClB,iBAAiB;AAAA,MACjB,YAAY;AAAA,MACZ,UAAU;AAAA,IACV,CAAA,EAAE,KAAK;AAAA,EAAA;AAAA,EAGT,MAAM,UAAU;AACX,QAAA,KAAK,WAAW,WAAW,EAAG;AAE5B,UAAAC,EAAgB,KAAK,OAAO;AAAA,MACjC,UAAU;AAAA,MACV,SAAS,iCAAiC,KAAK,UAAU,MAAM,IAAI,KAAK,UAAU,WAAW,IAAI,SAAS,OAAO;AAAA,MACjH,OAAO;AAAA,MACP,cAAc;AAAA,IAAA,CACd;AAED,UAAMC,IAAsB,MAAMC;AAAA,MACjC;AAAA,MACA,KAAK,KAAK,KAAK;AAAA,IAChB;AACA,QAAI,CAACD,EAA2B,OAAA,IAAI,MAAM,wCAAwC;AAElF,UAAMA,EAAoB,iBAAiB,EAAE,SAAS,KAAK,WAAW;AAEtE,UAAME,IAAgB,MAAM,KAAK,WAAWC,CAAkB;AAC9D,QAAI,CAACD,EAAqB,OAAA,IAAI,MAAM,iCAAiC;AAE/D,UAAAE,IAAaF,EAAc,cAAc,GACzCG,IAASH,EAAc,UAAU;AAEnC,QAAAE,KAAcC,MAAW,QAAW;AACvC,YAAMC,IAAe,MAAM,KAAK,WAAWC,CAAwB;AACnE,UAAI,CAACD,EAAoB,OAAA,IAAI,MAAM,gCAAgC;AAE7D,YAAAT,IAAO,EAAE,YAAAO,GAAY,QAAAC,EAAO,GAE5BG,IAAiB,IAAIC,EAAsCZ,CAAI;AACrE,MAAAS,EAAa,cAAcE,CAAc;AAEnC,YAAAE,IAAkB,IAAIC,EAAwCd,CAAI;AACxE,MAAAS,EAAa,cAAcI,CAAe;AAAA,IAAA;AAAA,EAC3C;AAEF;"}