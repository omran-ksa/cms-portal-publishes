{"version":3,"file":"property-action.element-nnFDE4YK.js","sources":["../../../src/packages/core/property-action/kinds/default/property-action.element.ts"],"sourcesContent":["import type {\r\n\tManifestPropertyActionDefaultKind,\r\n\tMetaPropertyActionDefaultKind,\r\n} from '../../property-action.extension.js';\r\nimport type { UmbPropertyAction } from '../../property-action.interface.js';\r\nimport { UmbActionExecutedEvent } from '@umbraco-cms/backoffice/event';\r\nimport { customElement, html, ifDefined, property, state, when } from '@umbraco-cms/backoffice/external/lit';\r\nimport { UmbLitElement } from '@umbraco-cms/backoffice/lit-element';\r\nimport type { UUIMenuItemEvent } from '@umbraco-cms/backoffice/external/uui';\r\n\r\n@customElement('umb-property-action')\r\nexport class UmbPropertyActionElement<\r\n\tMetaType extends MetaPropertyActionDefaultKind = MetaPropertyActionDefaultKind,\r\n\tApiType extends UmbPropertyAction<MetaType> = UmbPropertyAction<MetaType>,\r\n> extends UmbLitElement {\r\n\t#api?: ApiType;\r\n\r\n\t@state()\r\n\t_href?: string;\r\n\r\n\t@property({ attribute: false })\r\n\tpublic manifest?: ManifestPropertyActionDefaultKind<MetaType>;\r\n\r\n\tpublic set api(api: ApiType | undefined) {\r\n\t\tthis.#api = api;\r\n\r\n\t\t// TODO: Fix so when we use a HREF it does not refresh the page?\r\n\t\tthis.#api?.getHref?.().then((href) => {\r\n\t\t\tthis._href = href;\r\n\t\t\t// TODO: Do we need to update the component here? [NL]\r\n\t\t});\r\n\t}\r\n\r\n\tasync #onClickLabel(event: UUIMenuItemEvent) {\r\n\t\tif (!this._href) {\r\n\t\t\tevent.stopPropagation();\r\n\t\t\tawait this.#api?.execute().catch(() => {});\r\n\t\t}\r\n\t\tthis.dispatchEvent(new UmbActionExecutedEvent());\r\n\t}\r\n\r\n\t// TODO: we need to stop the regular click event from bubbling up to the table so it doesn't select the row.\r\n\t// This should probably be handled in the UUI Menu item component. so we don't dispatch a label-click event and click event at the same time.\r\n\t#onClick(event: PointerEvent) {\r\n\t\tevent.stopPropagation();\r\n\t}\r\n\r\n\toverride render() {\r\n\t\treturn html`\r\n\t\t\t<uui-menu-item\r\n\t\t\t\tlabel=${this.localize.string(this.manifest?.meta.label)}\r\n\t\t\t\thref=${ifDefined(this._href)}\r\n\t\t\t\t@click-label=${this.#onClickLabel}\r\n\t\t\t\t@click=${this.#onClick}>\r\n\t\t\t\t${when(this.manifest?.meta.icon, (icon) => html`<umb-icon slot=\"icon\" name=${icon}></umb-icon>`)}\r\n\t\t\t</uui-menu-item>\r\n\t\t`;\r\n\t}\r\n}\r\n\r\nexport default UmbPropertyActionElement;\r\n\r\ndeclare global {\r\n\tinterface HTMLElementTagNameMap {\r\n\t\t'umb-property-action': UmbPropertyActionElement;\r\n\t}\r\n}\r\n"],"names":["_api","_UmbPropertyActionElement_instances","onClickLabel_fn","onClick_fn","UmbPropertyActionElement","UmbLitElement","__privateAdd","api","__privateSet","__privateGet","href","html","ifDefined","__privateMethod","when","icon","event","UmbActionExecutedEvent","__decorateClass","state","property","customElement","UmbPropertyActionElement$1"],"mappings":";;;;;;;;;wXAAAA,GAAAC,GAAAC,GAAAC;AAWa,IAAAC,IAAN,cAGGC,EAAc;AAAA,EAHjB,cAAA;AAAA,UAAA,GAAA,SAAA,GAAAC,EAAA,MAAAL,CAAA,GAINK,EAAA,MAAAN,CAAA;AAAA,EAAA;AAAA,EAQA,IAAW,IAAIO,GAA0B;AACxC,IAAAC,EAAA,MAAKR,GAAOO,CAAA,GAGZE,EAAA,MAAKT,CAAM,GAAA,UAAA,EAAY,KAAK,CAACU,MAAS;AACrC,WAAK,QAAQA;AAAA,IAAA,CAEb;AAAA,EAAA;AAAA,EAiBO,SAAS;AACV,WAAAC;AAAA;AAAA,YAEG,KAAK,SAAS,OAAO,KAAK,UAAU,KAAK,KAAK,CAAC;AAAA,WAChDC,EAAU,KAAK,KAAK,CAAC;AAAA,mBACbC,QAAKZ,GAAaC,CAAA,CAAA;AAAA,aACxBW,QAAKZ,GAAQE,CAAA,CAAA;AAAA,MACpBW,EAAK,KAAK,UAAU,KAAK,MAAM,CAACC,MAASJ,+BAAkCI,CAAI,cAAc,CAAC;AAAA;AAAA;AAAA,EAAA;AAIpG;AA3CCf,IAAA,oBAAA,QAAA;AAJMC,IAAA,oBAAA,QAAA;AAsBAC,IAAa,eAACc,GAAyB;AACxC,EAAC,KAAK,UACTA,EAAM,gBAAgB,GACtB,MAAMP,EAAK,MAAAT,CAAA,GAAM,QAAQ,EAAE,MAAM,MAAM;AAAA,EAAA,CAAE,IAErC,KAAA,cAAc,IAAIiB,GAAwB;AAChD;AAIAd,IAAQ,SAACa,GAAqB;AAC7B,EAAAA,EAAM,gBAAgB;AACvB;AA3BAE,EAAA;AAAA,EADCC,EAAM;AAAA,GANKf,EAOZ,WAAA,SAAA,CAAA;AAGOc,EAAA;AAAA,EADNE,EAAS,EAAE,WAAW,GAAO,CAAA;AAAA,GATlBhB,EAUL,WAAA,YAAA,CAAA;AAVKA,IAANc,EAAA;AAAA,EADNG,EAAc,qBAAqB;AAAA,GACvBjB,CAAA;AAiDb,MAAAkB,IAAelB;"}