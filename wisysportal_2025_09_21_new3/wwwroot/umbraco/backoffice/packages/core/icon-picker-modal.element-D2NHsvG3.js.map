{"version":3,"file":"icon-picker-modal.element-D2NHsvG3.js","sources":["../../../src/packages/core/icon-registry/icon-picker-modal/icon-picker-modal.element.ts"],"sourcesContent":["import type { UmbIconDefinition } from '../types.js';\r\nimport { UMB_ICON_REGISTRY_CONTEXT } from '../icon-registry.context-token.js';\r\nimport type { UmbIconPickerModalData, UmbIconPickerModalValue } from './icon-picker-modal.token.js';\r\nimport { css, customElement, html, nothing, query, repeat, state } from '@umbraco-cms/backoffice/external/lit';\r\nimport { extractUmbColorVariable, umbracoColors } from '@umbraco-cms/backoffice/resources';\r\nimport { umbFocus } from '@umbraco-cms/backoffice/lit-element';\r\nimport { UmbModalBaseElement } from '@umbraco-cms/backoffice/modal';\r\nimport { UmbTextStyles } from '@umbraco-cms/backoffice/style';\r\nimport type { UUIColorSwatchesEvent } from '@umbraco-cms/backoffice/external/uui';\r\n\r\n@customElement('umb-icon-picker-modal')\r\nexport class UmbIconPickerModalElement extends UmbModalBaseElement<UmbIconPickerModalData, UmbIconPickerModalValue> {\r\n\t#icons?: Array<UmbIconDefinition>;\r\n\r\n\t@query('#search')\r\n\tprivate _searchInput?: HTMLInputElement;\r\n\r\n\t@state()\r\n\tprivate _iconsFiltered?: Array<UmbIconDefinition>;\r\n\r\n\t@state()\r\n\tprivate _colorList = umbracoColors.filter((color) => !color.legacy);\r\n\r\n\t@state()\r\n\tprivate _currentIcon?: string;\r\n\r\n\t@state()\r\n\tprivate _currentColor = 'text';\r\n\r\n\tconstructor() {\r\n\t\tsuper();\r\n\t\tthis.consumeContext(UMB_ICON_REGISTRY_CONTEXT, (context) => {\r\n\t\t\tthis.observe(context?.approvedIcons, (icons) => {\r\n\t\t\t\tthis.#icons = icons;\r\n\t\t\t\tthis.#filterIcons();\r\n\t\t\t});\r\n\t\t});\r\n\t}\r\n\r\n\t#filterIcons() {\r\n\t\tif (!this.#icons) return;\r\n\t\tconst value = this._searchInput?.value;\r\n\t\tif (value) {\r\n\t\t\tthis._iconsFiltered = this.#icons.filter((icon) => icon.name.toLowerCase().includes(value.toLowerCase()));\r\n\t\t} else {\r\n\t\t\tthis._iconsFiltered = this.#icons;\r\n\t\t}\r\n\t}\r\n\r\n\toverride connectedCallback() {\r\n\t\tsuper.connectedCallback();\r\n\t\tthis._iconsFiltered = this.#icons;\r\n\r\n\t\tif (this.modalContext) {\r\n\t\t\tthis.observe(\r\n\t\t\t\tthis.modalContext?.value,\r\n\t\t\t\t(newValue) => {\r\n\t\t\t\t\tthis._currentIcon = newValue?.icon;\r\n\t\t\t\t\tthis._currentColor = newValue?.color ?? 'text';\r\n\t\t\t\t},\r\n\t\t\t\t'_observeModalContextValue',\r\n\t\t\t);\r\n\t\t}\r\n\t}\r\n\r\n\t#changeIcon(e: InputEvent | KeyboardEvent, iconName: string) {\r\n\t\tif (e.type == 'click' || (e.type == 'keyup' && (e as KeyboardEvent).key == 'Enter')) {\r\n\t\t\tthis.modalContext?.updateValue({ icon: iconName });\r\n\t\t}\r\n\t}\r\n\r\n\t#onColorChange(e: UUIColorSwatchesEvent) {\r\n\t\tconst colorAlias = e.target.value;\r\n\t\tthis.modalContext?.updateValue({ color: colorAlias });\r\n\t\tthis._currentColor = colorAlias;\r\n\t}\r\n\r\n\toverride render() {\r\n\t\t// TODO: Missing localization in general. [NL]\r\n\t\treturn html`\r\n\t\t\t<umb-body-layout headline=\"Select Icon\">\r\n\t\t\t\t<div id=\"container\">\r\n\t\t\t\t\t${this.renderSearch()}\r\n\t\t\t\t\t<hr />\r\n\t\t\t\t\t<uui-color-swatches\r\n\t\t\t\t\t\t.value=${this._currentColor}\r\n\t\t\t\t\t\tlabel=\"Color switcher for icons\"\r\n\t\t\t\t\t\t@change=${this.#onColorChange}>\r\n\t\t\t\t\t\t${\r\n\t\t\t\t\t\t\t// TODO: Missing localization for the color aliases. [NL]\r\n\t\t\t\t\t\t\tthis._colorList.map(\r\n\t\t\t\t\t\t\t\t(color) => html`\r\n\t\t\t\t\t\t\t\t\t<uui-color-swatch\r\n\t\t\t\t\t\t\t\t\t\tlabel=${color.alias}\r\n\t\t\t\t\t\t\t\t\t\ttitle=${color.alias}\r\n\t\t\t\t\t\t\t\t\t\tvalue=${color.alias}\r\n\t\t\t\t\t\t\t\t\t\tstyle=\"--uui-swatch-color: var(${color.varName})\">\r\n\t\t\t\t\t\t\t\t\t</uui-color-swatch>\r\n\t\t\t\t\t\t\t\t`,\r\n\t\t\t\t\t\t\t)\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t</uui-color-swatches>\r\n\t\t\t\t\t<hr />\r\n\t\t\t\t\t<uui-scroll-container id=\"icons\">${this.renderIcons()}</uui-scroll-container>\r\n\t\t\t\t</div>\r\n\t\t\t\t<uui-button\r\n\t\t\t\t\tslot=\"actions\"\r\n\t\t\t\t\tlabel=${this.localize.term('general_close')}\r\n\t\t\t\t\t@click=${this._rejectModal}></uui-button>\r\n\t\t\t\t<uui-button\r\n\t\t\t\t\tslot=\"actions\"\r\n\t\t\t\t\tcolor=\"positive\"\r\n\t\t\t\t\tlook=\"primary\"\r\n\t\t\t\t\t@click=${this._submitModal}\r\n\t\t\t\t\tlabel=${this.localize.term('general_submit')}></uui-button>\r\n\t\t\t</umb-body-layout>\r\n\t\t`;\r\n\t}\r\n\r\n\trenderSearch() {\r\n\t\treturn html`\r\n\t\t\t<uui-input\r\n\t\t\t\ttype=\"search\"\r\n\t\t\t\tplaceholder=${this.localize.term('placeholders_filter')}\r\n\t\t\t\tlabel=${this.localize.term('placeholders_filter')}\r\n\t\t\t\tid=\"search\"\r\n\t\t\t\t@keyup=${this.#filterIcons}\r\n\t\t\t\t${umbFocus()}>\r\n\t\t\t\t<uui-icon name=\"search\" slot=\"prepend\" id=\"search_icon\"></uui-icon>\r\n\t\t\t</uui-input>\r\n\t\t`;\r\n\t}\r\n\r\n\trenderIcons() {\r\n\t\treturn this._iconsFiltered\r\n\t\t\t? repeat(\r\n\t\t\t\t\tthis._iconsFiltered,\r\n\t\t\t\t\t(icon) => icon.name,\r\n\t\t\t\t\t(icon) => html`\r\n\t\t\t\t\t\t<uui-button\r\n\t\t\t\t\t\t\tlabel=${icon.name}\r\n\t\t\t\t\t\t\ttitle=${icon.name}\r\n\t\t\t\t\t\t\tclass=${icon.name === this._currentIcon ? 'selected' : ''}\r\n\t\t\t\t\t\t\t@click=${(e: InputEvent) => this.#changeIcon(e, icon.name)}\r\n\t\t\t\t\t\t\t@keyup=${(e: KeyboardEvent) => this.#changeIcon(e, icon.name)}>\r\n\t\t\t\t\t\t\t<uui-icon\r\n\t\t\t\t\t\t\t\tstyle=\"--uui-icon-color: var(${extractUmbColorVariable(this._currentColor)})\"\r\n\t\t\t\t\t\t\t\tname=${icon.name}></uui-icon>\r\n\t\t\t\t\t\t</uui-button>\r\n\t\t\t\t\t`,\r\n\t\t\t\t)\r\n\t\t\t: nothing;\r\n\t}\r\n\r\n\tstatic override styles = [\r\n\t\tUmbTextStyles,\r\n\t\tcss`\r\n\t\t\t:host {\r\n\t\t\t\tposition: relative;\r\n\t\t\t}\r\n\r\n\t\t\t#container {\r\n\t\t\t\tdisplay: flex;\r\n\t\t\t\tflex-direction: column;\r\n\t\t\t\theight: 100%;\r\n\t\t\t\tbackground-color: var(--uui-color-surface);\r\n\t\t\t\tbox-shadow: var(--uui-shadow-depth-1, 0 1px 3px rgba(0, 0, 0, 0.12), 0 1px 2px rgba(0, 0, 0, 0.24));\r\n\t\t\t\tborder-radius: var(--uui-border-radius);\r\n\t\t\t\tpadding: var(--uui-size-space-5);\r\n\t\t\t\tbox-sizing: border-box;\r\n\t\t\t}\r\n\t\t\t#container hr {\r\n\t\t\t\theight: 1px;\r\n\t\t\t\tborder: none;\r\n\t\t\t\tbackground-color: var(--uui-color-divider);\r\n\t\t\t\tmargin: 20px 0;\r\n\t\t\t}\r\n\r\n\t\t\t#search {\r\n\t\t\t\twidth: 100%;\r\n\t\t\t\talign-items: center;\r\n\t\t\t}\r\n\t\t\t#search_icon {\r\n\t\t\t\tpadding-left: var(--uui-size-space-2);\r\n\t\t\t}\r\n\r\n\t\t\t#icons {\r\n\t\t\t\tline-height: 0;\r\n\t\t\t\tdisplay: grid;\r\n\t\t\t\tgrid-template-columns: repeat(auto-fit, minmax(40px, calc((100% / 12) - 10px)));\r\n\t\t\t\tgap: 10px;\r\n\t\t\t\toverflow-y: scroll;\r\n\t\t\t\tmax-height: 100%;\r\n\t\t\t\tmin-height: 0;\r\n\t\t\t\tpadding: 2px;\r\n\t\t\t}\r\n\r\n\t\t\t#icons uui-button {\r\n\t\t\t\tborder-radius: var(--uui-border-radius);\r\n\t\t\t\tfont-size: 16px; /* specific for icons */\r\n\t\t\t}\r\n\t\t\t#icons uui-button:focus,\r\n\t\t\t#icons uui-button:hover,\r\n\t\t\t#icons uui-button.selected {\r\n\t\t\t\toutline: 2px solid var(--uui-color-selected);\r\n\t\t\t}\r\n\r\n\t\t\tuui-button[slot='actions'] {\r\n\t\t\t\tmargin-left: var(--uui-size-space-4);\r\n\t\t\t}\r\n\r\n\t\t\tuui-color-swatches {\r\n\t\t\t\tmargin: 0;\r\n\t\t\t}\r\n\t\t`,\r\n\t];\r\n}\r\n\r\nexport default UmbIconPickerModalElement;\r\n\r\ndeclare global {\r\n\tinterface HTMLElementTagNameMap {\r\n\t\t'umb-icon-picker-modal': UmbIconPickerModalElement;\r\n\t}\r\n}\r\n"],"names":["_icons","_UmbIconPickerModalElement_instances","filterIcons_fn","changeIcon_fn","onColorChange_fn","UmbIconPickerModalElement","UmbModalBaseElement","__privateAdd","umbracoColors","color","UMB_ICON_REGISTRY_CONTEXT","context","icons","__privateSet","__privateMethod","__privateGet","newValue","html","umbFocus","repeat","icon","e","extractUmbColorVariable","nothing","value","iconName","colorAlias","UmbTextStyles","css","__decorateClass","query","state","customElement","UmbIconPickerModalElement$1"],"mappings":"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"}