{"version":3,"file":"folder-create-modal.element-5mizfH9T.js","sources":["../../../src/packages/core/tree/folder/modal/folder-create-modal.element.ts"],"sourcesContent":["import type { UmbFolderModel } from '../types.js';\r\nimport type { UmbFolderCreateModalData, UmbFolderCreateModalValue } from './folder-create-modal.token.js';\r\nimport { UmbFolderModalElementBase } from './folder-modal-element-base.js';\r\nimport { customElement, state } from '@umbraco-cms/backoffice/external/lit';\r\n\r\n@customElement('umb-folder-create-modal')\r\nexport class UmbFolderCreateModalElement extends UmbFolderModalElementBase<\r\n\tUmbFolderCreateModalData,\r\n\tUmbFolderCreateModalValue\r\n> {\r\n\t@state()\r\n\t_folderScaffold?: UmbFolderModel;\r\n\r\n\tconstructor() {\r\n\t\tsuper();\r\n\t\tthis._isNew = true;\r\n\t}\r\n\r\n\tasync init() {\r\n\t\tif (!this.folderRepository) throw new Error('A folder repository is required to create a folder');\r\n\r\n\t\tconst { data } = await this.folderRepository.createScaffold();\r\n\r\n\t\tif (data) {\r\n\t\t\tthis._folderScaffold = data;\r\n\t\t}\r\n\t}\r\n\r\n\tasync onFormSubmit({ name }: { name: string }): Promise<void> {\r\n\t\tif (!this.folderRepository) throw new Error('A folder repository is required to create a folder');\r\n\t\tif (!this._folderScaffold) throw new Error('The folder scaffold was not initialized correctly');\r\n\t\tif (!this.data?.parent) throw new Error('A parent is required to create folder');\r\n\r\n\t\tconst folder: UmbFolderModel = {\r\n\t\t\t...this._folderScaffold,\r\n\t\t\tname,\r\n\t\t};\r\n\r\n\t\tconst { data: createdFolder } = await this.folderRepository.create(folder, this.data.parent.unique);\r\n\r\n\t\tif (createdFolder) {\r\n\t\t\tthis.value = { folder: createdFolder };\r\n\t\t\tthis._submitModal();\r\n\t\t}\r\n\t}\r\n}\r\n\r\nexport default UmbFolderCreateModalElement;\r\n\r\ndeclare global {\r\n\tinterface HTMLElementTagNameMap {\r\n\t\t'umb-folder-create-modal': UmbFolderCreateModalElement;\r\n\t}\r\n}\r\n"],"names":["UmbFolderCreateModalElement","UmbFolderModalElementBase","data","name","folder","createdFolder","__decorateClass","state","customElement","UmbFolderCreateModalElement$1"],"mappings":";;;;;;;AAMa,IAAAA,IAAN,cAA0CC,EAG/C;AAAA,EAID,cAAc;AACP,UAAA,GACN,KAAK,SAAS;AAAA,EAAA;AAAA,EAGf,MAAM,OAAO;AACZ,QAAI,CAAC,KAAK,iBAAwB,OAAA,IAAI,MAAM,oDAAoD;AAEhG,UAAM,EAAE,MAAAC,EAAK,IAAI,MAAM,KAAK,iBAAiB,eAAe;AAE5D,IAAIA,MACH,KAAK,kBAAkBA;AAAA,EACxB;AAAA,EAGD,MAAM,aAAa,EAAE,MAAAC,KAAyC;AAC7D,QAAI,CAAC,KAAK,iBAAwB,OAAA,IAAI,MAAM,oDAAoD;AAChG,QAAI,CAAC,KAAK,gBAAuB,OAAA,IAAI,MAAM,mDAAmD;AAC9F,QAAI,CAAC,KAAK,MAAM,OAAc,OAAA,IAAI,MAAM,uCAAuC;AAE/E,UAAMC,IAAyB;AAAA,MAC9B,GAAG,KAAK;AAAA,MACR,MAAAD;AAAA,IACD,GAEM,EAAE,MAAME,EAAc,IAAI,MAAM,KAAK,iBAAiB,OAAOD,GAAQ,KAAK,KAAK,OAAO,MAAM;AAElG,IAAIC,MACE,KAAA,QAAQ,EAAE,QAAQA,EAAc,GACrC,KAAK,aAAa;AAAA,EACnB;AAEF;AAlCCC,EAAA;AAAA,EADCC,EAAM;AAAA,GAJKP,EAKZ,WAAA,mBAAA,CAAA;AALYA,IAANM,EAAA;AAAA,EADNE,EAAc,yBAAyB;AAAA,GAC3BR,CAAA;AAyCb,MAAAS,IAAeT;"}