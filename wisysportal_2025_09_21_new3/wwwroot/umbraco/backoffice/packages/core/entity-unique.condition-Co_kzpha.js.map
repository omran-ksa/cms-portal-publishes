{"version":3,"file":"entity-unique.condition-Co_kzpha.js","sources":["../../../src/packages/core/entity/entity-unique/entity-unique.condition.ts"],"sourcesContent":["import { UMB_ENTITY_CONTEXT } from '../entity.context-token.js';\r\nimport type { UmbEntityUnique } from '../types.js';\r\nimport type { UmbEntityUniqueConditionConfig } from './types.js';\r\nimport type { UmbControllerHost } from '@umbraco-cms/backoffice/controller-api';\r\nimport type { UmbConditionControllerArguments, UmbExtensionCondition } from '@umbraco-cms/backoffice/extension-api';\r\nimport { UmbConditionBase } from '@umbraco-cms/backoffice/extension-registry';\r\n\r\nexport class UmbEntityUniqueCondition\r\n\textends UmbConditionBase<UmbEntityUniqueConditionConfig>\r\n\timplements UmbExtensionCondition\r\n{\r\n\tconstructor(host: UmbControllerHost, args: UmbConditionControllerArguments<UmbEntityUniqueConditionConfig>) {\r\n\t\tsuper(host, args);\r\n\r\n\t\tthis.consumeContext(UMB_ENTITY_CONTEXT, (context) => {\r\n\t\t\tthis.observe(context?.unique, (unique) => this.#check(unique), 'umbEntityUniqueObserver');\r\n\t\t});\r\n\t}\r\n\r\n\t#check(value: UmbEntityUnique | undefined) {\r\n\t\tif (value === undefined) {\r\n\t\t\tthis.permitted = false;\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\t// if the config has a match, we only check that\r\n\t\tif (this.config.match !== undefined) {\r\n\t\t\tthis.permitted = value === this.config.match;\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tthis.permitted = this.config.oneOf?.some((configValue) => configValue === value) ?? false;\r\n\t}\r\n}\r\n\r\nexport { UmbEntityUniqueCondition as api };\r\n"],"names":["UmbEntityUniqueCondition","UmbConditionBase","host","args","UMB_ENTITY_CONTEXT","context","unique","#check","value","configValue"],"mappings":";;AAOO,MAAMA,UACJC,EAET;AAAA,EACC,YAAYC,GAAyBC,GAAuE;AAC3G,UAAMD,GAAMC,CAAI,GAEX,KAAA,eAAeC,GAAoB,CAACC,MAAY;AAC/C,WAAA,QAAQA,GAAS,QAAQ,CAACC,MAAW,KAAKC,GAAOD,CAAM,GAAG,yBAAyB;AAAA,IAAA,CACxF;AAAA,EAAA;AAAA,EAGFC,GAAOC,GAAoC;AAC1C,QAAIA,MAAU,QAAW;AACxB,WAAK,YAAY;AACjB;AAAA,IAAA;AAIG,QAAA,KAAK,OAAO,UAAU,QAAW;AAC/B,WAAA,YAAYA,MAAU,KAAK,OAAO;AACvC;AAAA,IAAA;AAGI,SAAA,YAAY,KAAK,OAAO,OAAO,KAAK,CAACC,MAAgBA,MAAgBD,CAAK,KAAK;AAAA,EAAA;AAEtF;"}