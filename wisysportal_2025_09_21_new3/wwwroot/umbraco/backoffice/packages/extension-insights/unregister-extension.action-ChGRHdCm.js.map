{"version":3,"file":"unregister-extension.action-ChGRHdCm.js","sources":["../../../src/packages/extension-insights/entity-actions/unregister/unregister-extension.action.ts"],"sourcesContent":["import { umbExtensionsRegistry } from '@umbraco-cms/backoffice/extension-registry';\r\nimport { UMB_ACTION_EVENT_CONTEXT } from '@umbraco-cms/backoffice/action';\r\nimport { UmbEntityActionBase, UmbRequestReloadStructureForEntityEvent } from '@umbraco-cms/backoffice/entity-action';\r\nimport { umbConfirmModal } from '@umbraco-cms/backoffice/modal';\r\nimport { html } from '@umbraco-cms/backoffice/external/lit';\r\n\r\nexport class UmbUnregisterExtensionEntityAction extends UmbEntityActionBase<unknown> {\r\n\toverride async execute() {\r\n\t\tif (!this.args.unique) throw new Error('Cannot delete an item without a unique identifier.');\r\n\r\n\t\tconst extension = umbExtensionsRegistry.getByAlias(this.args.unique);\r\n\t\tif (!extension) throw new Error('Extension not found');\r\n\r\n\t\tawait umbConfirmModal(this, {\r\n\t\t\theadline: 'Unregister extension',\r\n\t\t\tconfirmLabel: 'Unregister',\r\n\t\t\tcontent: html`<p>Are you sure you want to unregister the extension <strong>${extension.alias}</strong>?</p>`,\r\n\t\t\tcolor: 'danger',\r\n\t\t});\r\n\r\n\t\tumbExtensionsRegistry.unregister(extension.alias);\r\n\r\n\t\tconst actionEventContext = await this.getContext(UMB_ACTION_EVENT_CONTEXT);\r\n\t\tif (!actionEventContext) {\r\n\t\t\tthrow new Error('Action event context not found');\r\n\t\t}\r\n\t\tconst event = new UmbRequestReloadStructureForEntityEvent({\r\n\t\t\tunique: this.args.unique,\r\n\t\t\tentityType: this.args.entityType,\r\n\t\t});\r\n\r\n\t\tactionEventContext.dispatchEvent(event);\r\n\t}\r\n}\r\n\r\nexport { UmbUnregisterExtensionEntityAction as api };\r\n"],"names":["UmbUnregisterExtensionEntityAction","UmbEntityActionBase","extension","umbExtensionsRegistry","umbConfirmModal","html","actionEventContext","UMB_ACTION_EVENT_CONTEXT","event","UmbRequestReloadStructureForEntityEvent"],"mappings":";;;;;AAMO,MAAMA,UAA2CC,EAA6B;AAAA,EACpF,MAAe,UAAU;AACxB,QAAI,CAAC,KAAK,KAAK,OAAc,OAAA,IAAI,MAAM,oDAAoD;AAE3F,UAAMC,IAAYC,EAAsB,WAAW,KAAK,KAAK,MAAM;AACnE,QAAI,CAACD,EAAiB,OAAA,IAAI,MAAM,qBAAqB;AAErD,UAAME,EAAgB,MAAM;AAAA,MAC3B,UAAU;AAAA,MACV,cAAc;AAAA,MACd,SAASC,iEAAoEH,EAAU,KAAK;AAAA,MAC5F,OAAO;AAAA,IAAA,CACP,GAEqBC,EAAA,WAAWD,EAAU,KAAK;AAEhD,UAAMI,IAAqB,MAAM,KAAK,WAAWC,CAAwB;AACzE,QAAI,CAACD;AACE,YAAA,IAAI,MAAM,gCAAgC;AAE3C,UAAAE,IAAQ,IAAIC,EAAwC;AAAA,MACzD,QAAQ,KAAK,KAAK;AAAA,MAClB,YAAY,KAAK,KAAK;AAAA,IAAA,CACtB;AAED,IAAAH,EAAmB,cAAcE,CAAK;AAAA,EAAA;AAExC;"}