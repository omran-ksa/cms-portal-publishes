{"version":3,"file":"move-to.repository-CHGd2CBT.js","sources":["../../../src/packages/documents/documents/entity-bulk-actions/move-to/repository/move-to.repository.ts"],"sourcesContent":["import { UmbMoveDocumentServerDataSource } from '../../../entity-actions/move-to/repository/document-move.server.data-source.js';\r\nimport { UmbRepositoryBase } from '@umbraco-cms/backoffice/repository';\r\nimport { UMB_NOTIFICATION_CONTEXT } from '@umbraco-cms/backoffice/notification';\r\nimport type { UmbBulkMoveToRepository, UmbBulkMoveToRequestArgs } from '@umbraco-cms/backoffice/entity-bulk-action';\r\nimport type { UmbRepositoryErrorResponse } from '@umbraco-cms/backoffice/repository';\r\n\r\nexport class UmbBulkMoveToDocumentRepository extends UmbRepositoryBase implements UmbBulkMoveToRepository {\r\n\t#moveSource = new UmbMoveDocumentServerDataSource(this);\r\n\r\n\tasync requestBulkMoveTo(args: UmbBulkMoveToRequestArgs): Promise<UmbRepositoryErrorResponse> {\r\n\t\tconst notificationContext = await this.getContext(UMB_NOTIFICATION_CONTEXT);\r\n\t\tlet count = 0;\r\n\r\n\t\tconst destination = args.destination;\r\n\t\tfor (const unique of args.uniques) {\r\n\t\t\tconst { error } = await this.#moveSource.moveTo({ unique, destination });\r\n\r\n\t\t\tif (error) {\r\n\t\t\t\tconst notification = { data: { message: error.message } };\r\n\t\t\t\tnotificationContext?.peek('danger', notification);\r\n\t\t\t} else {\r\n\t\t\t\tcount++;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tif (count > 0) {\r\n\t\t\tconst notification = { data: { message: `Moved ${count} ${count === 1 ? 'document' : 'documents'}` } };\r\n\t\t\tnotificationContext?.peek('positive', notification);\r\n\t\t}\r\n\r\n\t\treturn {};\r\n\t}\r\n}\r\n\r\nexport { UmbBulkMoveToDocumentRepository as api };\r\n"],"names":["UmbBulkMoveToDocumentRepository","UmbRepositoryBase","#moveSource","UmbMoveDocumentServerDataSource","args","notificationContext","UMB_NOTIFICATION_CONTEXT","count","destination","unique","error","notification"],"mappings":";;;AAMO,MAAMA,UAAwCC,EAAqD;AAAA,EACzGC,KAAc,IAAIC,EAAgC,IAAI;AAAA,EAEtD,MAAM,kBAAkBC,GAAqE;AAC5F,UAAMC,IAAsB,MAAM,KAAK,WAAWC,CAAwB;AAC1E,QAAIC,IAAQ;AAEZ,UAAMC,IAAcJ,EAAK;AACd,eAAAK,KAAUL,EAAK,SAAS;AAC5B,YAAA,EAAE,OAAAM,EAAM,IAAI,MAAM,KAAKR,GAAY,OAAO,EAAE,QAAAO,GAAQ,aAAAD,GAAa;AAEvE,UAAIE,GAAO;AACV,cAAMC,IAAe,EAAE,MAAM,EAAE,SAASD,EAAM,UAAU;AACnC,QAAAL,GAAA,KAAK,UAAUM,CAAY;AAAA,MAAA;AAEhD,QAAAJ;AAAA,IACD;AAGD,QAAIA,IAAQ,GAAG;AACd,YAAMI,IAAe,EAAE,MAAM,EAAE,SAAS,SAASJ,CAAK,IAAIA,MAAU,IAAI,aAAa,WAAW,KAAK;AAChF,MAAAF,GAAA,KAAK,YAAYM,CAAY;AAAA,IAAA;AAGnD,WAAO,CAAC;AAAA,EAAA;AAEV;"}