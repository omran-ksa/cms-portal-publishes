{"version":3,"file":"utils-DjhBxJtv.js","sources":["../../../src/packages/documents/documents/utils.ts"],"sourcesContent":["import type { UmbDocumentVariantOptionModel } from './types.js';\r\nimport { DocumentVariantStateModel } from '@umbraco-cms/backoffice/external/backend-api';\r\n\r\ntype VariantType = UmbDocumentVariantOptionModel;\r\n\r\nconst variantStatesOrder = {\r\n\t[DocumentVariantStateModel.PUBLISHED_PENDING_CHANGES]: 1,\r\n\t[DocumentVariantStateModel.PUBLISHED]: 1,\r\n\t[DocumentVariantStateModel.DRAFT]: 2,\r\n\t[DocumentVariantStateModel.NOT_CREATED]: 3,\r\n};\r\n\r\nconst getVariantStateOrderValue = (variant?: UmbDocumentVariantOptionModel['variant']) => {\r\n\tconst fallbackOrder = 99;\r\n\r\n\tif (!variant || !variant.state) {\r\n\t\treturn fallbackOrder;\r\n\t}\r\n\r\n\treturn variantStatesOrder[variant.state] || fallbackOrder;\r\n};\r\n\r\nexport const sortVariants = (a: VariantType, b: VariantType) => {\r\n\tconst compareDefault = (a: VariantType, b: VariantType) =>\r\n\t\t(a.language?.isDefault ? -1 : 1) - (b.language?.isDefault ? -1 : 1);\r\n\r\n\t// Make sure mandatory variants goes on top, unless they are published, cause then they already goes to the top and then we want to mix them with other published variants.\r\n\tconst compareMandatory = (a: VariantType, b: VariantType) =>\r\n\t\ta.variant?.state === DocumentVariantStateModel.PUBLISHED_PENDING_CHANGES ||\r\n\t\ta.variant?.state === DocumentVariantStateModel.PUBLISHED\r\n\t\t\t? 0\r\n\t\t\t: (a.language?.isMandatory ? -1 : 1) - (b.language?.isMandatory ? -1 : 1);\r\n\tconst compareState = (a: VariantType, b: VariantType) =>\r\n\t\tgetVariantStateOrderValue(a.variant) - getVariantStateOrderValue(b.variant);\r\n\r\n\tconst compareName = (a: VariantType, b: VariantType) => a.variant?.name.localeCompare(b.variant?.name || '') || 99;\r\n\r\n\treturn compareDefault(a, b) || compareMandatory(a, b) || compareState(a, b) || compareName(a, b);\r\n};\r\n\r\nexport const TimeOptions: Intl.DateTimeFormatOptions = {\r\n\tyear: 'numeric',\r\n\tmonth: 'long',\r\n\tday: 'numeric',\r\n\thour: 'numeric',\r\n\tminute: 'numeric',\r\n\tsecond: 'numeric',\r\n};\r\n"],"names":["variantStatesOrder","DocumentVariantStateModel","getVariantStateOrderValue","variant","sortVariants","a","b","compareDefault","compareMandatory","compareState","compareName","TimeOptions"],"mappings":";AAKA,MAAMA,IAAqB;AAAA,EAC1B,CAACC,EAA0B,yBAAyB,GAAG;AAAA,EACvD,CAACA,EAA0B,SAAS,GAAG;AAAA,EACvC,CAACA,EAA0B,KAAK,GAAG;AAAA,EACnC,CAACA,EAA0B,WAAW,GAAG;AAC1C,GAEMC,IAA4B,CAACC,MAG9B,CAACA,KAAW,CAACA,EAAQ,QACjB,KAGDH,EAAmBG,EAAQ,KAAK,KAAK,IAGhCC,IAAe,CAACC,GAAgBC,MAAmB;AAC/D,QAAMC,IAAiB,CAACF,GAAgBC,OACtCD,EAAE,UAAU,YAAY,KAAK,MAAMC,EAAE,UAAU,YAAY,KAAK,IAG5DE,IAAmB,CAACH,GAAgBC,MACzCD,EAAE,SAAS,UAAUJ,EAA0B,6BAC/CI,EAAE,SAAS,UAAUJ,EAA0B,YAC5C,KACCI,EAAE,UAAU,cAAc,KAAK,MAAMC,EAAE,UAAU,cAAc,KAAK,IACnEG,IAAe,CAACJ,GAAgBC,MACrCJ,EAA0BG,EAAE,OAAO,IAAIH,EAA0BI,EAAE,OAAO,GAErEI,IAAc,CAACL,GAAgBC,MAAmBD,EAAE,SAAS,KAAK,cAAcC,EAAE,SAAS,QAAQ,EAAE,KAAK;AAEhH,SAAOC,EAAeF,GAAGC,CAAC,KAAKE,EAAiBH,GAAGC,CAAC,KAAKG,EAAaJ,GAAGC,CAAC,KAAKI,EAAYL,GAAGC,CAAC;AAChG,GAEaK,IAA0C;AAAA,EACtD,MAAM;AAAA,EACN,OAAO;AAAA,EACP,KAAK;AAAA,EACL,MAAM;AAAA,EACN,QAAQ;AAAA,EACR,QAAQ;AACT;"}