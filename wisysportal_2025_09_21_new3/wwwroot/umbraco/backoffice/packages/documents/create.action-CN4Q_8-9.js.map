{"version":3,"file":"create.action-CN4Q_8-9.js","sources":["../../../src/packages/documents/documents/entity-actions/create/create.action.ts"],"sourcesContent":["import { UmbDocumentItemRepository } from '../../item/index.js';\r\nimport { UMB_DOCUMENT_CREATE_OPTIONS_MODAL } from './document-create-options-modal.token.js';\r\nimport type { UmbEntityActionArgs } from '@umbraco-cms/backoffice/entity-action';\r\nimport { UmbEntityActionBase } from '@umbraco-cms/backoffice/entity-action';\r\nimport type { UmbControllerHost } from '@umbraco-cms/backoffice/controller-api';\r\nimport { umbOpenModal } from '@umbraco-cms/backoffice/modal';\r\n\r\nexport class UmbCreateDocumentEntityAction extends UmbEntityActionBase<never> {\r\n\tconstructor(host: UmbControllerHost, args: UmbEntityActionArgs<never>) {\r\n\t\tsuper(host, args);\r\n\t}\r\n\r\n\toverride async execute() {\r\n\t\t// default to root\r\n\t\tlet documentItem = null;\r\n\r\n\t\tif (this.args.unique) {\r\n\t\t\t// get document item to get the doc type id\r\n\t\t\tconst itemRepository = new UmbDocumentItemRepository(this._host);\r\n\t\t\tconst { data, error } = await itemRepository.requestItems([this.args.unique]);\r\n\t\t\tif (error || !data) throw new Error(`Failed to load document item`);\r\n\t\t\tdocumentItem = data[0];\r\n\t\t}\r\n\r\n\t\tawait umbOpenModal(this, UMB_DOCUMENT_CREATE_OPTIONS_MODAL, {\r\n\t\t\tdata: {\r\n\t\t\t\tparent: { unique: this.args.unique, entityType: this.args.entityType },\r\n\t\t\t\tdocumentType: documentItem ? { unique: documentItem.documentType.unique } : null,\r\n\t\t\t},\r\n\t\t});\r\n\t}\r\n}\r\nexport default UmbCreateDocumentEntityAction;\r\n"],"names":["UmbCreateDocumentEntityAction","UmbEntityActionBase","host","args","documentItem","itemRepository","UmbDocumentItemRepository","data","error","umbOpenModal","UMB_DOCUMENT_CREATE_OPTIONS_MODAL"],"mappings":";;;;;;;;AAOO,MAAMA,UAAsCC,EAA2B;AAAA,EAC7E,YAAYC,GAAyBC,GAAkC;AACtE,UAAMD,GAAMC,CAAI;AAAA,EAAA;AAAA,EAGjB,MAAe,UAAU;AAExB,QAAIC,IAAe;AAEf,QAAA,KAAK,KAAK,QAAQ;AAErB,YAAMC,IAAiB,IAAIC,EAA0B,KAAK,KAAK,GACzD,EAAE,MAAAC,GAAM,OAAAC,EAAA,IAAU,MAAMH,EAAe,aAAa,CAAC,KAAK,KAAK,MAAM,CAAC;AAC5E,UAAIG,KAAS,CAACD,EAAY,OAAA,IAAI,MAAM,8BAA8B;AAClE,MAAAH,IAAeG,EAAK,CAAC;AAAA,IAAA;AAGhB,UAAAE,EAAa,MAAMC,GAAmC;AAAA,MAC3D,MAAM;AAAA,QACL,QAAQ,EAAE,QAAQ,KAAK,KAAK,QAAQ,YAAY,KAAK,KAAK,WAAW;AAAA,QACrE,cAAcN,IAAe,EAAE,QAAQA,EAAa,aAAa,WAAW;AAAA,MAAA;AAAA,IAC7E,CACA;AAAA,EAAA;AAEH;"}