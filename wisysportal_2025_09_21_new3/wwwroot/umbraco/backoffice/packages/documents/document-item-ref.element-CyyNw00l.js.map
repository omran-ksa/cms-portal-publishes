{"version":3,"file":"document-item-ref.element-CyyNw00l.js","sources":["../../../src/packages/documents/documents/item/document-item-ref.element.ts"],"sourcesContent":["import { UMB_DOCUMENT_ENTITY_TYPE } from '../entity.js';\r\nimport { UMB_EDIT_DOCUMENT_WORKSPACE_PATH_PATTERN } from '../paths.js';\r\nimport type { UmbDocumentItemModel } from './types.js';\r\nimport { UmbDocumentItemDataResolver } from './document-item-data-resolver.js';\r\nimport { customElement, html, ifDefined, nothing, property, state } from '@umbraco-cms/backoffice/external/lit';\r\nimport { UmbLitElement } from '@umbraco-cms/backoffice/lit-element';\r\nimport { UmbModalRouteRegistrationController } from '@umbraco-cms/backoffice/router';\r\nimport { UMB_WORKSPACE_MODAL } from '@umbraco-cms/backoffice/workspace';\r\nimport type { UUISelectableEvent } from '@umbraco-cms/backoffice/external/uui';\r\nimport { UmbDeselectedEvent, UmbSelectedEvent } from '@umbraco-cms/backoffice/event';\r\n\r\n@customElement('umb-document-item-ref')\r\nexport class UmbDocumentItemRefElement extends UmbLitElement {\r\n\t#item = new UmbDocumentItemDataResolver<UmbDocumentItemModel>(this);\r\n\r\n\t@property({ type: Object })\r\n\tpublic get item(): UmbDocumentItemModel | undefined {\r\n\t\treturn this.#item.getData();\r\n\t}\r\n\tpublic set item(value: UmbDocumentItemModel | undefined) {\r\n\t\tthis.#item.setData(value);\r\n\t}\r\n\r\n\t@property({ type: Boolean, reflect: true })\r\n\treadonly = false;\r\n\r\n\t@property({ type: Boolean })\r\n\tstandalone = false;\r\n\r\n\t@property({ type: Boolean, attribute: 'select-only', reflect: true })\r\n\tselectOnly = false;\r\n\r\n\t@property({ type: Boolean, reflect: true })\r\n\tselectable = false;\r\n\r\n\t@property({ type: Boolean, reflect: true })\r\n\tselected = false;\r\n\r\n\t@property({ type: Boolean, reflect: true })\r\n\tdisabled = false;\r\n\r\n\t@state()\r\n\tprivate _unique = '';\r\n\r\n\t@state()\r\n\tprivate _name = '';\r\n\r\n\t@state()\r\n\tprivate _icon = '';\r\n\r\n\t@state()\r\n\tprivate _isTrashed = false;\r\n\r\n\t@state()\r\n\tprivate _isDraft = false;\r\n\r\n\t@state()\r\n\tprivate _editPath = '';\r\n\r\n\tconstructor() {\r\n\t\tsuper();\r\n\r\n\t\tnew UmbModalRouteRegistrationController(this, UMB_WORKSPACE_MODAL)\r\n\t\t\t.addUniquePaths(['unique'])\r\n\t\t\t.onSetup(() => {\r\n\t\t\t\treturn { data: { entityType: UMB_DOCUMENT_ENTITY_TYPE, preset: {} } };\r\n\t\t\t})\r\n\t\t\t.observeRouteBuilder((routeBuilder) => {\r\n\t\t\t\tthis._editPath = routeBuilder({});\r\n\t\t\t});\r\n\r\n\t\tthis.#item.observe(this.#item.unique, (unique) => (this._unique = unique ?? ''));\r\n\t\tthis.#item.observe(this.#item.name, (name) => (this._name = name ?? ''));\r\n\t\tthis.#item.observe(this.#item.icon, (icon) => (this._icon = icon ?? ''));\r\n\t\tthis.#item.observe(this.#item.isTrashed, (isTrashed) => (this._isTrashed = isTrashed ?? false));\r\n\t\tthis.#item.observe(this.#item.isDraft, (isDraft) => (this._isDraft = isDraft ?? false));\r\n\t}\r\n\r\n\t#getHref() {\r\n\t\tif (!this._unique) return;\r\n\t\tconst path = UMB_EDIT_DOCUMENT_WORKSPACE_PATH_PATTERN.generateLocal({ unique: this._unique });\r\n\t\treturn `${this._editPath}/${path}`;\r\n\t}\r\n\r\n\t#onSelected(event: UUISelectableEvent) {\r\n\t\tevent.stopPropagation();\r\n\t\tthis.dispatchEvent(new UmbSelectedEvent(this._unique));\r\n\t}\r\n\r\n\t#onDeselected(event: UUISelectableEvent) {\r\n\t\tevent.stopPropagation();\r\n\t\tthis.dispatchEvent(new UmbDeselectedEvent(this._unique));\r\n\t}\r\n\r\n\toverride render() {\r\n\t\tif (!this.item) return nothing;\r\n\r\n\t\treturn html`\r\n\t\t\t<uui-ref-node\r\n\t\t\t\tname=${this._name}\r\n\t\t\t\thref=${ifDefined(this.#getHref())}\r\n\t\t\t\t?readonly=${this.readonly}\r\n\t\t\t\t?standalone=${this.standalone}\r\n\t\t\t\t?select-only=${this.selectOnly}\r\n\t\t\t\t?selectable=${this.selectable}\r\n\t\t\t\t?selected=${this.selected}\r\n\t\t\t\t?disabled=${this.disabled}\r\n\t\t\t\t@selected=${this.#onSelected}\r\n\t\t\t\t@deselected=${this.#onDeselected}>\r\n\t\t\t\t<slot name=\"actions\" slot=\"actions\"></slot>\r\n\t\t\t\t${this.#renderIcon()}${this.#renderIsDraft()} ${this.#renderIsTrashed()}\r\n\t\t\t</uui-ref-node>\r\n\t\t`;\r\n\t}\r\n\r\n\t#renderIcon() {\r\n\t\tif (!this._icon) return nothing;\r\n\t\treturn html`<umb-icon slot=\"icon\" name=${this._icon}></umb-icon>`;\r\n\t}\r\n\r\n\t#renderIsTrashed() {\r\n\t\tif (!this._isTrashed) return nothing;\r\n\t\treturn html`<uui-tag size=\"s\" slot=\"tag\" color=\"danger\">Trashed</uui-tag>`;\r\n\t}\r\n\r\n\t#renderIsDraft() {\r\n\t\tif (!this._isDraft) return nothing;\r\n\t\treturn html`<uui-tag size=\"s\" slot=\"tag\" look=\"secondary\" color=\"default\">Draft</uui-tag>`;\r\n\t}\r\n}\r\n\r\nexport { UmbDocumentItemRefElement as element };\r\n\r\ndeclare global {\r\n\tinterface HTMLElementTagNameMap {\r\n\t\t'umb-document-item-ref': UmbDocumentItemRefElement;\r\n\t}\r\n}\r\n"],"names":["_item","_UmbDocumentItemRefElement_instances","getHref_fn","onSelected_fn","onDeselected_fn","renderIcon_fn","renderIsTrashed_fn","renderIsDraft_fn","UmbDocumentItemRefElement","UmbLitElement","__privateAdd","UmbDocumentItemDataResolver","UmbModalRouteRegistrationController","UMB_WORKSPACE_MODAL","UMB_DOCUMENT_ENTITY_TYPE","routeBuilder","__privateGet","unique","name","icon","isTrashed","isDraft","value","html","ifDefined","__privateMethod","nothing","path","UMB_EDIT_DOCUMENT_WORKSPACE_PATH_PATTERN","event","UmbSelectedEvent","UmbDeselectedEvent","__decorateClass","property","state","customElement"],"mappings":"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"}