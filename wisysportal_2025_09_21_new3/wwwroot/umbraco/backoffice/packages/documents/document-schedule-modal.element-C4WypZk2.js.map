{"version":3,"file":"document-schedule-modal.element-C4WypZk2.js","sources":["../../../src/packages/documents/documents/publishing/schedule-publish/modal/document-schedule-modal.element.ts"],"sourcesContent":["import { UmbDocumentVariantState, type UmbDocumentVariantOptionModel } from '../../../types.js';\r\nimport { isNotPublishedMandatory } from '../../utils.js';\r\nimport { UmbDocumentVariantLanguagePickerElement } from '../../../modals/index.js';\r\nimport type {\r\n\tUmbDocumentScheduleModalData,\r\n\tUmbDocumentScheduleModalValue,\r\n\tUmbDocumentScheduleSelectionModel,\r\n} from './document-schedule-modal.token.js';\r\nimport { css, customElement, html, ref, repeat, state, when } from '@umbraco-cms/backoffice/external/lit';\r\nimport { UmbModalBaseElement } from '@umbraco-cms/backoffice/modal';\r\nimport { UmbTextStyles } from '@umbraco-cms/backoffice/style';\r\nimport { UmbSelectionManager } from '@umbraco-cms/backoffice/utils';\r\nimport { umbBindToValidation, UmbValidationContext } from '@umbraco-cms/backoffice/validation';\r\nimport type { UmbInputDateElement } from '@umbraco-cms/backoffice/components';\r\nimport type { UUIBooleanInputElement, UUIButtonState } from '@umbraco-cms/backoffice/external/uui';\r\n\r\n@customElement('umb-document-schedule-modal')\r\nexport class UmbDocumentScheduleModalElement extends UmbModalBaseElement<\r\n\tUmbDocumentScheduleModalData,\r\n\tUmbDocumentScheduleModalValue\r\n> {\r\n\t#selectionManager = new UmbSelectionManager<string>(this);\r\n\r\n\t@state()\r\n\tprivate _options: Array<UmbDocumentVariantOptionModel> = [];\r\n\r\n\t@state()\r\n\tprivate _hasNotSelectedMandatory?: boolean;\r\n\r\n\t@state()\r\n\tprivate readonly _selection: Array<UmbDocumentScheduleSelectionModel> = [];\r\n\r\n\t@state()\r\n\tprivate _isAllSelected = false;\r\n\r\n\t@state()\r\n\tprivate _internalValues: Array<UmbDocumentScheduleSelectionModel> = [];\r\n\r\n\t@state()\r\n\tprivate _submitButtonState?: UUIButtonState;\r\n\r\n\t#validation = new UmbValidationContext(this);\r\n\r\n\t#pickableFilter = (option: UmbDocumentVariantOptionModel) => {\r\n\t\tif (isNotPublishedMandatory(option)) {\r\n\t\t\treturn true;\r\n\t\t}\r\n\t\tif (!option.variant || option.variant.state === UmbDocumentVariantState.NOT_CREATED) {\r\n\t\t\t// If no data present, then its not pickable.\r\n\t\t\treturn false;\r\n\t\t}\r\n\t\treturn this.data?.pickableFilter ? this.data.pickableFilter(option) : true;\r\n\t};\r\n\r\n\tconstructor() {\r\n\t\tsuper();\r\n\t\tthis.observe(\r\n\t\t\tthis.#selectionManager.selection,\r\n\t\t\t(selection) => {\r\n\t\t\t\tif (!this._options && !selection) return;\r\n\r\n\t\t\t\t// New selections are mapped to the schedule data\r\n\t\t\t\tthis._selection.length = 0;\r\n\t\t\t\tfor (const unique of selection) {\r\n\t\t\t\t\tconst existing = this._internalValues.find((s) => s.unique === unique);\r\n\t\t\t\t\tif (existing) {\r\n\t\t\t\t\t\tthis._selection.push(existing);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\tthis._isAllSelected = this.#isAllSelected();\r\n\r\n\t\t\t\t//Getting not published mandatory options â€” the options that are mandatory and not currently published.\r\n\t\t\t\tconst missingMandatoryOptions = this._options.filter(isNotPublishedMandatory);\r\n\t\t\t\tthis._hasNotSelectedMandatory = missingMandatoryOptions.some((option) => !selection.includes(option.unique));\r\n\r\n\t\t\t\tthis.requestUpdate();\r\n\t\t\t},\r\n\t\t\t'_selection',\r\n\t\t);\r\n\t}\r\n\r\n\toverride firstUpdated() {\r\n\t\tthis._internalValues = this.data?.prevalues ? [...this.data.prevalues] : [];\r\n\t\tthis.#configureSelectionManager();\r\n\t}\r\n\r\n\tasync #configureSelectionManager() {\r\n\t\tthis.#selectionManager.setMultiple(true);\r\n\t\tthis.#selectionManager.setSelectable(true);\r\n\r\n\t\tthis.#selectionManager.setAllowLimitation((unique) => {\r\n\t\t\tconst option = this._options.find((o) => o.unique === unique);\r\n\t\t\treturn option ? this.#pickableFilter(option) : true;\r\n\t\t});\r\n\r\n\t\t// Only display variants that are relevant to pick from, i.e. variants that are draft, not-published-mandatory or published with pending changes.\r\n\t\t// If we don't know the state (e.g. from a bulk publishing selection) we need to consider it available for selection.\r\n\t\tthis._options =\r\n\t\t\tthis.data?.options.filter(\r\n\t\t\t\t(option) =>\r\n\t\t\t\t\t(option.variant && option.variant.state === null) ||\r\n\t\t\t\t\tisNotPublishedMandatory(option) ||\r\n\t\t\t\t\toption.variant?.state !== UmbDocumentVariantState.NOT_CREATED,\r\n\t\t\t) ?? [];\r\n\r\n\t\tlet selected = this.data?.activeVariants ?? [];\r\n\r\n\t\t// Only display variants that are relevant to pick from, i.e. variants that are draft, not-published-mandatory or published with pending changes.\r\n\t\t// If we don't know the state (e.g. from a bulk publishing selection) we need to consider it available for selection.\r\n\t\tconst validOptions = this._options.filter((option) => this.#pickableFilter(option));\r\n\r\n\t\t// Filter selection based on options:\r\n\t\tselected = selected.filter((unique) => validOptions.some((o) => o.unique === unique));\r\n\r\n\t\tthis.#selectionManager.setSelection(selected);\r\n\t}\r\n\r\n\tasync #submit() {\r\n\t\tthis._submitButtonState = 'waiting';\r\n\t\ttry {\r\n\t\t\tawait this.#validation.validate();\r\n\t\t\tthis._submitButtonState = 'success';\r\n\t\t\tthis.value = {\r\n\t\t\t\tselection: this._selection,\r\n\t\t\t};\r\n\t\t\tthis.modalContext?.submit();\r\n\t\t} catch {\r\n\t\t\tthis._submitButtonState = 'failed';\r\n\t\t} finally {\r\n\t\t\tthis._submitButtonState = undefined;\r\n\t\t}\r\n\t}\r\n\r\n\t#close() {\r\n\t\tthis.modalContext?.reject();\r\n\t}\r\n\r\n\t#isSelected(unique: string) {\r\n\t\treturn this._selection.some((s) => s.unique === unique);\r\n\t}\r\n\r\n\t#onSelectAllChange(event: Event) {\r\n\t\tconst allUniques = this._options.map((o) => o.unique);\r\n\t\tconst filter = this.#selectionManager.getAllowLimitation();\r\n\t\tconst allowedUniques = allUniques.filter((unique) => filter(unique));\r\n\r\n\t\tif ((event.target as UUIBooleanInputElement).checked) {\r\n\t\t\tthis.#selectionManager.setSelection(allowedUniques);\r\n\t\t} else {\r\n\t\t\tthis.#selectionManager.setSelection([]);\r\n\t\t}\r\n\t}\r\n\r\n\t#isAllSelected() {\r\n\t\tconst allUniques = this._options.map((o) => o.unique);\r\n\t\tconst filter = this.#selectionManager.getAllowLimitation();\r\n\t\tconst allowedUniques = allUniques.filter((unique) => filter(unique));\r\n\t\treturn this._selection.length !== 0 && this._selection.length === allowedUniques.length;\r\n\t}\r\n\r\n\toverride render() {\r\n\t\treturn html`<uui-dialog-layout headline=${this.localize.term('general_scheduledPublishing')}>\r\n\t\t\t${this.#renderOptions()}\r\n\r\n\t\t\t<div slot=\"actions\">\r\n\t\t\t\t<uui-button label=${this.localize.term('general_close')} @click=${this.#close}></uui-button>\r\n\t\t\t\t<uui-button\r\n\t\t\t\t\t.state=${this._submitButtonState}\r\n\t\t\t\t\tlabel=\"${this.localize.term('buttons_schedulePublish')}\"\r\n\t\t\t\t\tlook=\"primary\"\r\n\t\t\t\t\tcolor=\"positive\"\r\n\t\t\t\t\t?disabled=${!this._selection.length || this._hasNotSelectedMandatory}\r\n\t\t\t\t\t@click=${this.#submit}></uui-button>\r\n\t\t\t</div>\r\n\t\t</uui-dialog-layout> `;\r\n\t}\r\n\r\n\t#renderOptions() {\r\n\t\treturn html`\r\n\t\t\t${when(\r\n\t\t\t\tthis._options.length > 1,\r\n\t\t\t\t() => html`\r\n\t\t\t\t\t<uui-checkbox\r\n\t\t\t\t\t\t@change=${this.#onSelectAllChange}\r\n\t\t\t\t\t\tlabel=${this.localize.term('general_selectAll')}\r\n\t\t\t\t\t\t.checked=${this._isAllSelected}></uui-checkbox>\r\n\t\t\t\t`,\r\n\t\t\t)}\r\n\t\t\t${repeat(\r\n\t\t\t\tthis._options,\r\n\t\t\t\t(option) => option.unique,\r\n\t\t\t\t(option) => this.#renderItem(option),\r\n\t\t\t)}\r\n\t\t`;\r\n\t}\r\n\r\n\t#renderItem(option: UmbDocumentVariantOptionModel) {\r\n\t\tconst pickable = this.#pickableFilter(option);\r\n\t\tconst fromDate = this.#fromDate(option.unique);\r\n\t\tconst toDate = this.#toDate(option.unique);\r\n\t\tconst isChanged =\r\n\t\t\tfromDate !== option.variant?.scheduledPublishDate || toDate !== option.variant?.scheduledUnpublishDate;\r\n\r\n\t\treturn html`\r\n\t\t\t<uui-menu-item\r\n\t\t\t\t?selectable=${pickable}\r\n\t\t\t\t?disabled=${!pickable}\r\n\t\t\t\tlabel=${option.variant?.name ?? option.language.name}\r\n\t\t\t\t@selected=${() => this.#selectionManager.select(option.unique)}\r\n\t\t\t\t@deselected=${() => this.#selectionManager.deselect(option.unique)}\r\n\t\t\t\t?selected=${this.#isSelected(option.unique)}>\r\n\t\t\t\t<uui-icon slot=\"icon\" name=\"icon-globe\"></uui-icon>\r\n\t\t\t\t${UmbDocumentVariantLanguagePickerElement.renderLabel(option)}\r\n\t\t\t</uui-menu-item>\r\n\t\t\t${when(this.#isSelected(option.unique), () => this.#renderPublishDateInput(option, fromDate, toDate))}\r\n\t\t\t${when(\r\n\t\t\t\tisChanged,\r\n\t\t\t\t() =>\r\n\t\t\t\t\thtml`<p>\r\n\t\t\t\t\t\t${this.localize.term('content_scheduledPendingChanges', this.localize.term('buttons_schedulePublish'))}\r\n\t\t\t\t\t</p>`,\r\n\t\t\t)}\r\n\t\t`;\r\n\t}\r\n\r\n\t#attachValidatorsToPublish(element: UmbInputDateElement | null) {\r\n\t\tif (!element) return;\r\n\r\n\t\telement.addValidator(\r\n\t\t\t'badInput',\r\n\t\t\t() => this.localize.term('speechBubbles_scheduleErrReleaseDate1'),\r\n\t\t\t() => {\r\n\t\t\t\tconst value = element.value.toString();\r\n\t\t\t\tif (!value) return false;\r\n\t\t\t\tconst date = new Date(value);\r\n\t\t\t\treturn date < new Date();\r\n\t\t\t},\r\n\t\t);\r\n\t}\r\n\r\n\t#attachValidatorsToUnpublish(element: UmbInputDateElement | null, unique: string) {\r\n\t\tif (!element) return;\r\n\r\n\t\telement.addValidator(\r\n\t\t\t'badInput',\r\n\t\t\t() => this.localize.term('speechBubbles_scheduleErrExpireDate1'),\r\n\t\t\t() => {\r\n\t\t\t\tconst value = element.value.toString();\r\n\t\t\t\tif (!value) return false;\r\n\t\t\t\tconst date = new Date(value);\r\n\t\t\t\treturn date < new Date();\r\n\t\t\t},\r\n\t\t);\r\n\r\n\t\telement.addValidator(\r\n\t\t\t'customError',\r\n\t\t\t() => this.localize.term('speechBubbles_scheduleErrExpireDate2'),\r\n\t\t\t() => {\r\n\t\t\t\tconst value = element.value.toString();\r\n\t\t\t\tif (!value) return false;\r\n\r\n\t\t\t\t// Check if the unpublish date is before the publish date\r\n\t\t\t\tconst variant = this._internalValues.find((s) => s.unique === unique);\r\n\t\t\t\tif (!variant) return false;\r\n\t\t\t\tconst publishTime = variant.schedule?.publishTime;\r\n\t\t\t\tif (!publishTime) return false;\r\n\r\n\t\t\t\tconst date = new Date(value);\r\n\t\t\t\tconst publishDate = new Date(publishTime);\r\n\t\t\t\treturn date < publishDate;\r\n\t\t\t},\r\n\t\t);\r\n\t}\r\n\r\n\t#renderPublishDateInput(option: UmbDocumentVariantOptionModel, fromDate: string | null, toDate: string | null) {\r\n\t\treturn html`\r\n\t\t\t<div class=\"publish-date\">\r\n\t\t\t\t<uui-form-layout-item>\r\n\t\t\t\t\t<uui-label slot=\"label\"><umb-localize key=\"content_releaseDate\">Publish at</umb-localize></uui-label>\r\n\t\t\t\t\t<div>\r\n\t\t\t\t\t\t<umb-input-date\r\n\t\t\t\t\t\t\t${ref((e) => this.#attachValidatorsToPublish(e as UmbInputDateElement))}\r\n\t\t\t\t\t\t\t${umbBindToValidation(this)}\r\n\t\t\t\t\t\t\ttype=\"datetime-local\"\r\n\t\t\t\t\t\t\t.value=${this.#formatDate(fromDate)}\r\n\t\t\t\t\t\t\t@change=${(e: Event) => this.#onFromDateChange(e, option.unique)}\r\n\t\t\t\t\t\t\tlabel=${this.localize.term('general_publishDate')}>\r\n\t\t\t\t\t\t\t<div slot=\"append\">\r\n\t\t\t\t\t\t\t\t${when(\r\n\t\t\t\t\t\t\t\t\tfromDate,\r\n\t\t\t\t\t\t\t\t\t() => html`\r\n\t\t\t\t\t\t\t\t\t\t<uui-button\r\n\t\t\t\t\t\t\t\t\t\t\tcompact\r\n\t\t\t\t\t\t\t\t\t\t\tlabel=${this.localize.term('general_clear')}\r\n\t\t\t\t\t\t\t\t\t\t\ttitle=${this.localize.term('general_clear')}\r\n\t\t\t\t\t\t\t\t\t\t\t@click=${() => this.#removeFromDate(option.unique)}>\r\n\t\t\t\t\t\t\t\t\t\t\t<uui-icon name=\"remove\"></uui-icon>\r\n\t\t\t\t\t\t\t\t\t\t</uui-button>\r\n\t\t\t\t\t\t\t\t\t`,\r\n\t\t\t\t\t\t\t\t)}\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t</umb-input-date>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</uui-form-layout-item>\r\n\r\n\t\t\t\t<uui-form-layout-item>\r\n\t\t\t\t\t<uui-label slot=\"label\"><umb-localize key=\"content_unpublishDate\">Unpublish at</umb-localize></uui-label>\r\n\t\t\t\t\t<div>\r\n\t\t\t\t\t\t<umb-input-date\r\n\t\t\t\t\t\t\t${ref((e) => this.#attachValidatorsToUnpublish(e as UmbInputDateElement, option.unique))}\r\n\t\t\t\t\t\t\t${umbBindToValidation(this)}\r\n\t\t\t\t\t\t\ttype=\"datetime-local\"\r\n\t\t\t\t\t\t\t.value=${this.#formatDate(toDate)}\r\n\t\t\t\t\t\t\t@change=${(e: Event) => this.#onToDateChange(e, option.unique)}\r\n\t\t\t\t\t\t\tlabel=${this.localize.term('general_publishDate')}>\r\n\t\t\t\t\t\t\t<div slot=\"append\">\r\n\t\t\t\t\t\t\t\t${when(\r\n\t\t\t\t\t\t\t\t\ttoDate,\r\n\t\t\t\t\t\t\t\t\t() => html`\r\n\t\t\t\t\t\t\t\t\t\t<uui-button\r\n\t\t\t\t\t\t\t\t\t\t\tcompact\r\n\t\t\t\t\t\t\t\t\t\t\tlabel=${this.localize.term('general_clear')}\r\n\t\t\t\t\t\t\t\t\t\t\ttitle=${this.localize.term('general_clear')}\r\n\t\t\t\t\t\t\t\t\t\t\t@click=${() => this.#removeToDate(option.unique)}>\r\n\t\t\t\t\t\t\t\t\t\t\t<uui-icon name=\"remove\"></uui-icon>\r\n\t\t\t\t\t\t\t\t\t\t</uui-button>\r\n\t\t\t\t\t\t\t\t\t`,\r\n\t\t\t\t\t\t\t\t)}\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t</umb-input-date>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</uui-form-layout-item>\r\n\t\t\t</div>\r\n\t\t`;\r\n\t}\r\n\r\n\t#fromDate(unique: string): string | null {\r\n\t\tconst variant = this._internalValues.find((s) => s.unique === unique);\r\n\t\treturn variant?.schedule?.publishTime ?? null;\r\n\t}\r\n\r\n\t#toDate(unique: string): string | null {\r\n\t\tconst variant = this._internalValues.find((s) => s.unique === unique);\r\n\t\treturn variant?.schedule?.unpublishTime ?? null;\r\n\t}\r\n\r\n\t#removeFromDate(unique: string): void {\r\n\t\tconst variant = this._internalValues.find((s) => s.unique === unique);\r\n\t\tif (!variant) return;\r\n\t\tvariant.schedule = {\r\n\t\t\t...variant.schedule,\r\n\t\t\tpublishTime: null,\r\n\t\t};\r\n\t\tthis.#validation.validate();\r\n\t\tthis.requestUpdate('_internalValues');\r\n\t}\r\n\r\n\t#removeToDate(unique: string): void {\r\n\t\tconst variant = this._internalValues.find((s) => s.unique === unique);\r\n\t\tif (!variant) return;\r\n\t\tvariant.schedule = {\r\n\t\t\t...variant.schedule,\r\n\t\t\tunpublishTime: null,\r\n\t\t};\r\n\t\tthis.#validation.validate();\r\n\t\tthis.requestUpdate('_internalValues');\r\n\t}\r\n\r\n\t/**\r\n\t * Formats the date to be compatible with the input type datetime-local\r\n\t * @param {string} dateStr The date to format, example: 2021-01-01T12:00:00.000+01:00\r\n\t * @returns {string | undefined} The formatted date in local time with no offset, example: 2021-01-01T11:00\r\n\t */\r\n\t#formatDate(dateStr: string | null): string {\r\n\t\tif (!dateStr) return '';\r\n\r\n\t\tconst d = new Date(dateStr);\r\n\r\n\t\tif (isNaN(d.getTime())) {\r\n\t\t\tconsole.warn('[Schedule]: Invalid date:', dateStr);\r\n\t\t\treturn '';\r\n\t\t}\r\n\r\n\t\t// We need to subtract the offset to get the correct time in the input field\r\n\t\t// the input field expects local time without offset and the Date object will convert the date to local time\r\n\t\treturn (\r\n\t\t\td.getFullYear() +\r\n\t\t\t'-' +\r\n\t\t\tString(d.getMonth() + 1).padStart(2, '0') +\r\n\t\t\t'-' +\r\n\t\t\tString(d.getDate()).padStart(2, '0') +\r\n\t\t\t'T' +\r\n\t\t\tString(d.getHours()).padStart(2, '0') +\r\n\t\t\t':' +\r\n\t\t\tString(d.getMinutes()).padStart(2, '0')\r\n\t\t);\r\n\t}\r\n\r\n\t#onFromDateChange(e: Event, unique: string) {\r\n\t\tconst variant = this._internalValues.find((s) => s.unique === unique);\r\n\t\tif (!variant) return;\r\n\t\tvariant.schedule = {\r\n\t\t\t...variant.schedule,\r\n\t\t\tpublishTime: this.#getDateValue(e),\r\n\t\t};\r\n\t\tthis.#validation.validate();\r\n\t\tthis.requestUpdate('_internalValues');\r\n\t}\r\n\r\n\t#onToDateChange(e: Event, unique: string) {\r\n\t\tconst variant = this._internalValues.find((s) => s.unique === unique);\r\n\t\tif (!variant) return;\r\n\t\tvariant.schedule = {\r\n\t\t\t...variant.schedule,\r\n\t\t\tunpublishTime: this.#getDateValue(e),\r\n\t\t};\r\n\t\tthis.#validation.validate();\r\n\t\tthis.requestUpdate('_internalValues');\r\n\t}\r\n\r\n\t#getDateValue(e: Event): string | null {\r\n\t\tconst value = (e.target as UmbInputDateElement).value.toString();\r\n\t\treturn value.length ? value : null;\r\n\t}\r\n\r\n\tstatic override readonly styles = [\r\n\t\tUmbTextStyles,\r\n\t\tcss`\r\n\t\t\t:host {\r\n\t\t\t\tdisplay: block;\r\n\t\t\t\tmin-width: 600px;\r\n\t\t\t\tmax-width: 90vw;\r\n\t\t\t}\r\n\r\n\t\t\t.label {\r\n\t\t\t\tpadding: 0.5rem 0;\r\n\t\t\t}\r\n\t\t\t.label-status {\r\n\t\t\t\tfont-size: 0.8rem;\r\n\t\t\t}\r\n\r\n\t\t\t.publish-date {\r\n\t\t\t\tdisplay: flex;\r\n\t\t\t\tflex-direction: row;\r\n\t\t\t\tjustify-content: space-between;\r\n\t\t\t\tgap: 1rem;\r\n\t\t\t\tborder-top: 1px solid var(--uui-color-border);\r\n\t\t\t\tborder-bottom: 1px solid var(--uui-color-border);\r\n\t\t\t\tmargin-top: var(--uui-size-space-4);\r\n\t\t\t}\r\n\r\n\t\t\t.publish-date > uui-form-layout-item {\r\n\t\t\t\tflex: 1;\r\n\t\t\t\tmargin: 0;\r\n\t\t\t\tpadding: 0.5rem 0 1rem;\r\n\t\t\t}\r\n\r\n\t\t\t.publish-date > uui-form-layout-item:first-child {\r\n\t\t\t\tborder-right: 1px dashed var(--uui-color-border);\r\n\t\t\t}\r\n\r\n\t\t\tuui-checkbox {\r\n\t\t\t\tmargin-bottom: var(--uui-size-space-3);\r\n\t\t\t}\r\n\r\n\t\t\tuui-menu-item {\r\n\t\t\t\t--uui-menu-item-flat-structure: 1;\r\n\t\t\t}\r\n\t\t`,\r\n\t];\r\n}\r\n\r\nexport default UmbDocumentScheduleModalElement;\r\n\r\ndeclare global {\r\n\tinterface HTMLElementTagNameMap {\r\n\t\t'umb-document-schedule-modal': UmbDocumentScheduleModalElement;\r\n\t}\r\n}\r\n"],"names":["_selectionManager","_validation","_pickableFilter","_UmbDocumentScheduleModalElement_instances","configureSelectionManager_fn","submit_fn","close_fn","isSelected_fn","onSelectAllChange_fn","isAllSelected_fn","renderOptions_fn","renderItem_fn","attachValidatorsToPublish_fn","attachValidatorsToUnpublish_fn","renderPublishDateInput_fn","fromDate_fn","toDate_fn","removeFromDate_fn","removeToDate_fn","formatDate_fn","onFromDateChange_fn","onToDateChange_fn","getDateValue_fn","UmbDocumentScheduleModalElement","UmbModalBaseElement","__privateAdd","UmbSelectionManager","UmbValidationContext","option","isNotPublishedMandatory","UmbDocumentVariantState","__privateGet","selection","unique","existing","s","__privateMethod","missingMandatoryOptions","html","o","selected","validOptions","event","allUniques","filter","allowedUniques","when","repeat","pickable","fromDate","toDate","isChanged","UmbDocumentVariantLanguagePickerElement","element","value","variant","publishTime","date","publishDate","ref","e","umbBindToValidation","dateStr","d","UmbTextStyles","css","__decorateClass","state","customElement","UmbDocumentScheduleModalElement$1"],"mappings":";;;;;;;;;;;;;;+TAAAA,GAAAC,GAAAC,GAAAC,GAAAC,GAAAC,GAAAC,GAAAC,GAAAC,GAAAC,GAAAC,GAAAC,GAAAC,GAAAC,GAAAC,GAAAC,GAAAC,GAAAC,GAAAC,GAAAC,GAAAC,GAAAC,GAAAC;AAiBa,IAAAC,IAAN,cAA8CC,EAGnD;AAAA,EAkCD,cAAc;AACP,UAAA,GAtCDC,EAAA,MAAAtB,CAAA,GAIcsB,EAAA,MAAAzB,GAAA,IAAI0B,EAA4B,IAAI,CAAA,GAGxD,KAAQ,WAAiD,CAAC,GAM1D,KAAiB,aAAuD,CAAC,GAGzE,KAAQ,iBAAiB,IAGzB,KAAQ,kBAA4D,CAAC,GAKvDD,EAAA,MAAAxB,GAAA,IAAI0B,EAAqB,IAAI,CAAA,GAE3CF,EAAA,MAAAvB,GAAkB,CAAC0B,MACdC,EAAwBD,CAAM,IAC1B,KAEJ,CAACA,EAAO,WAAWA,EAAO,QAAQ,UAAUE,EAAwB,cAEhE,KAED,KAAK,MAAM,iBAAiB,KAAK,KAAK,eAAeF,CAAM,IAAI,EACvE,GAIM,KAAA;AAAA,MACJG,QAAK/B,CAAkB,EAAA;AAAA,MACvB,CAACgC,MAAc;AACd,YAAI,CAAC,KAAK,YAAY,CAACA,EAAW;AAGlC,aAAK,WAAW,SAAS;AACzB,mBAAWC,KAAUD,GAAW;AACzB,gBAAAE,IAAW,KAAK,gBAAgB,KAAK,CAACC,MAAMA,EAAE,WAAWF,CAAM;AACrE,UAAIC,KACE,KAAA,WAAW,KAAKA,CAAQ;AAAA,QAC9B;AAEI,aAAA,iBAAiBE,QAAKjC,GAALM,CAAA,EAAA,KAAA,IAAA;AAGtB,cAAM4B,IAA0B,KAAK,SAAS,OAAOR,CAAuB;AACvE,aAAA,2BAA2BQ,EAAwB,KAAK,CAACT,MAAW,CAACI,EAAU,SAASJ,EAAO,MAAM,CAAC,GAE3G,KAAK,cAAc;AAAA,MACpB;AAAA,MACA;AAAA,IACD;AAAA,EAAA;AAAA,EAGQ,eAAe;AAClB,SAAA,kBAAkB,KAAK,MAAM,YAAY,CAAC,GAAG,KAAK,KAAK,SAAS,IAAI,CAAC,GAC1EQ,EAAA,MAAKjC,GAALC,CAAA,EAAA,KAAA,IAAA;AAAA,EAAA;AAAA,EA6EQ,SAAS;AACjB,WAAOkC,gCAAmC,KAAK,SAAS,KAAK,6BAA6B,CAAC;AAAA,KACxFF,EAAA,MAAKjC,MAAL,KAAqB,IAAA,CAAA;AAAA;AAAA;AAAA,wBAGF,KAAK,SAAS,KAAK,eAAe,CAAC,WAAWiC,QAAKjC,GAAMG,CAAA,CAAA;AAAA;AAAA,cAEnE,KAAK,kBAAkB;AAAA,cACvB,KAAK,SAAS,KAAK,yBAAyB,CAAC;AAAA;AAAA;AAAA,iBAG1C,CAAC,KAAK,WAAW,UAAU,KAAK,wBAAwB;AAAA,cAC3D8B,QAAKjC,GAAOE,CAAA,CAAA;AAAA;AAAA;AAAA,EAAA;AA0S1B;AAjcCL,IAAA,oBAAA,QAAA;AAoBAC,IAAA,oBAAA,QAAA;AAEAC,IAAA,oBAAA,QAAA;AA1BMC,IAAA,oBAAA,QAAA;AAqEAC,IAA0B,iBAAG;AAC7B,EAAA2B,EAAA,MAAA/B,CAAA,EAAkB,YAAY,EAAI,GAClC+B,EAAA,MAAA/B,CAAA,EAAkB,cAAc,EAAI,GAEpC+B,EAAA,MAAA/B,CAAA,EAAkB,mBAAmB,CAACiC,MAAW;AAC/C,UAAAL,IAAS,KAAK,SAAS,KAAK,CAACW,MAAMA,EAAE,WAAWN,CAAM;AAC5D,WAAOL,IAASG,EAAA,MAAK7B,CAAL,EAAA,KAAA,MAAqB0B,CAAU,IAAA;AAAA,EAAA,CAC/C,GAII,KAAA,WACJ,KAAK,MAAM,QAAQ;AAAA,IAClB,CAACA,MACCA,EAAO,WAAWA,EAAO,QAAQ,UAAU,QAC5CC,EAAwBD,CAAM,KAC9BA,EAAO,SAAS,UAAUE,EAAwB;AAAA,EAAA,KAC/C,CAAC;AAEP,MAAIU,IAAW,KAAK,MAAM,kBAAkB,CAAC;AAIvC,QAAAC,IAAe,KAAK,SAAS,OAAO,CAACb,MAAWG,EAAA,MAAK7B,CAAL,EAAA,KAAA,MAAqB0B,CAAO,CAAA;AAGvE,EAAAY,IAAAA,EAAS,OAAO,CAACP,MAAWQ,EAAa,KAAK,CAACF,MAAMA,EAAE,WAAWN,CAAM,CAAC,GAE/EF,EAAA,MAAA/B,CAAA,EAAkB,aAAawC,CAAQ;AAC7C;AAEMnC,IAAO,iBAAG;AACf,OAAK,qBAAqB;AACtB,MAAA;AACG,UAAA0B,EAAA,MAAK9B,GAAY,SAAS,GAChC,KAAK,qBAAqB,WAC1B,KAAK,QAAQ;AAAA,MACZ,WAAW,KAAK;AAAA,IACjB,GACA,KAAK,cAAc,OAAO;AAAA,EAAA,QACnB;AACP,SAAK,qBAAqB;AAAA,EAAA,UACzB;AACD,SAAK,qBAAqB;AAAA,EAAA;AAE5B;AAEAK,IAAM,WAAG;AACR,OAAK,cAAc,OAAO;AAC3B;AAEAC,IAAW,SAAC0B,GAAgB;AAC3B,SAAO,KAAK,WAAW,KAAK,CAACE,MAAMA,EAAE,WAAWF,CAAM;AACvD;AAEAzB,IAAkB,SAACkC,GAAc;AAChC,QAAMC,IAAa,KAAK,SAAS,IAAI,CAACJ,MAAMA,EAAE,MAAM,GAC9CK,IAASb,EAAK,MAAA/B,CAAA,EAAkB,mBAAmB,GACnD6C,IAAiBF,EAAW,OAAO,CAACV,MAAWW,EAAOX,CAAM,CAAC;AAE9D,EAAAS,EAAM,OAAkC,UACvCX,EAAA,MAAA/B,CAAA,EAAkB,aAAa6C,CAAc,IAE7Cd,EAAA,MAAA/B,CAAA,EAAkB,aAAa,CAAA,CAAE;AAExC;AAEAS,IAAc,WAAG;AAChB,QAAMkC,IAAa,KAAK,SAAS,IAAI,CAACJ,MAAMA,EAAE,MAAM,GAC9CK,IAASb,EAAK,MAAA/B,CAAA,EAAkB,mBAAmB,GACnD6C,IAAiBF,EAAW,OAAO,CAACV,MAAWW,EAAOX,CAAM,CAAC;AACnE,SAAO,KAAK,WAAW,WAAW,KAAK,KAAK,WAAW,WAAWY,EAAe;AAClF;AAmBAnC,IAAc,WAAG;AACT,SAAA4B;AAAA,KACJQ;AAAA,IACD,KAAK,SAAS,SAAS;AAAA,IACvB,MAAMR;AAAA;AAAA,gBAEMF,QAAKjC,GAAkBK,CAAA,CAAA;AAAA,cACzB,KAAK,SAAS,KAAK,mBAAmB,CAAC;AAAA,iBACpC,KAAK,cAAc;AAAA;AAAA,EAEhC,CAAA;AAAA,KACCuC;AAAA,IACD,KAAK;AAAA,IACL,CAACnB,MAAWA,EAAO;AAAA,IACnB,CAACA,MAAWQ,EAAK,MAAAjC,GAAAQ,CAAA,EAAL,KAAiB,MAAAiB,CAAA;AAAA,EAC7B,CAAA;AAAA;AAEH;AAEAjB,IAAW,SAACiB,GAAuC;AAC5C,QAAAoB,IAAWjB,EAAK,MAAA7B,CAAA,EAAL,KAAqB,MAAA0B,CAAA,GAChCqB,IAAWb,EAAA,MAAKjC,GAALY,CAAA,EAAA,KAAA,MAAea,EAAO,MAAA,GACjCsB,IAASd,EAAA,MAAKjC,GAALa,CAAA,EAAA,KAAA,MAAaY,EAAO,MAAA,GAC7BuB,IACLF,MAAarB,EAAO,SAAS,wBAAwBsB,MAAWtB,EAAO,SAAS;AAE1E,SAAAU;AAAA;AAAA,kBAESU,CAAQ;AAAA,gBACV,CAACA,CAAQ;AAAA,YACbpB,EAAO,SAAS,QAAQA,EAAO,SAAS,IAAI;AAAA,gBACxC,MAAMG,EAAK,MAAA/B,CAAA,EAAkB,OAAO4B,EAAO,MAAM,CAAC;AAAA,kBAChD,MAAMG,EAAK,MAAA/B,CAAA,EAAkB,SAAS4B,EAAO,MAAM,CAAC;AAAA,gBACtDQ,EAAK,MAAAjC,GAAAI,CAAA,EAAL,KAAiB,MAAAqB,EAAO,MAAO,CAAA;AAAA;AAAA,MAEzCwB,EAAwC,YAAYxB,CAAM,CAAC;AAAA;AAAA,KAE5DkB,EAAKV,EAAA,MAAKjC,GAALI,CAAA,EAAA,KAAA,MAAiBqB,EAAO,MAAA,GAAS,MAAMQ,EAAA,MAAKjC,GAALW,CAAA,EAAA,KAAA,MAA6Bc,GAAQqB,GAAUC,EAAO,CAAC;AAAA,KACnGJ;AAAA,IACDK;AAAA,IACA,MACCb;AAAA,QACG,KAAK,SAAS,KAAK,mCAAmC,KAAK,SAAS,KAAK,yBAAyB,CAAC,CAAC;AAAA;AAAA,EAExG,CAAA;AAAA;AAEH;AAEA1B,IAA0B,SAACyC,GAAqC;AAC/D,EAAKA,KAEGA,EAAA;AAAA,IACP;AAAA,IACA,MAAM,KAAK,SAAS,KAAK,uCAAuC;AAAA,IAChE,MAAM;AACC,YAAAC,IAAQD,EAAQ,MAAM,SAAS;AACjC,aAACC,IACQ,IAAI,KAAKA,CAAK,wBACT,KAAK,IAFJ;AAAA,IAEI;AAAA,EAEzB;AACD;AAEAzC,IAA4B,SAACwC,GAAqCpB,GAAgB;AACjF,EAAKoB,MAEGA,EAAA;AAAA,IACP;AAAA,IACA,MAAM,KAAK,SAAS,KAAK,sCAAsC;AAAA,IAC/D,MAAM;AACC,YAAAC,IAAQD,EAAQ,MAAM,SAAS;AACjC,aAACC,IACQ,IAAI,KAAKA,CAAK,wBACT,KAAK,IAFJ;AAAA,IAEI;AAAA,EAEzB,GAEQD,EAAA;AAAA,IACP;AAAA,IACA,MAAM,KAAK,SAAS,KAAK,sCAAsC;AAAA,IAC/D,MAAM;AACC,YAAAC,IAAQD,EAAQ,MAAM,SAAS;AACjC,UAAA,CAACC,EAAc,QAAA;AAGb,YAAAC,IAAU,KAAK,gBAAgB,KAAK,CAACpB,MAAMA,EAAE,WAAWF,CAAM;AAChE,UAAA,CAACsB,EAAgB,QAAA;AACf,YAAAC,IAAcD,EAAQ,UAAU;AAClC,UAAA,CAACC,EAAoB,QAAA;AAEnB,YAAAC,IAAO,IAAI,KAAKH,CAAK,GACrBI,IAAc,IAAI,KAAKF,CAAW;AACxC,aAAOC,IAAOC;AAAA,IAAA;AAAA,EAEhB;AACD;AAEA5C,IAAuB,SAACc,GAAuCqB,GAAyBC,GAAuB;AACvG,SAAAZ;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SAMAqB,EAAI,CAACC,MAAMxB,QAAKjC,GAALS,CAAA,EAAA,KAAA,MAAgCgD,EAAyB,CAAC;AAAA,SACrEC,EAAoB,IAAI,CAAC;AAAA;AAAA,gBAElBzB,EAAA,MAAKjC,GAALgB,CAAA,EAAA,KAAA,MAAiB8B,CAAS,CAAA;AAAA,iBACzB,CAACW,MAAaxB,EAAA,MAAKjC,MAAL,KAAuB,MAAAyD,GAAGhC,EAAO,MAAO,CAAA;AAAA,eACxD,KAAK,SAAS,KAAK,qBAAqB,CAAC;AAAA;AAAA,UAE9CkB;AAAA,IACDG;AAAA,IACA,MAAMX;AAAA;AAAA;AAAA,mBAGI,KAAK,SAAS,KAAK,eAAe,CAAC;AAAA,mBACnC,KAAK,SAAS,KAAK,eAAe,CAAC;AAAA,oBAClC,MAAMF,EAAA,MAAKjC,GAALc,CAAA,EAAA,KAAA,MAAqBW,EAAO,MAAO,CAAA;AAAA;AAAA;AAAA;AAAA,EAIpD,CAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SAUA+B,EAAI,CAACC,MAAMxB,EAAA,MAAKjC,MAAL,KAAkC,MAAAyD,GAA0BhC,EAAO,MAAA,CAAO,CAAC;AAAA,SACtFiC,EAAoB,IAAI,CAAC;AAAA;AAAA,gBAElBzB,EAAA,MAAKjC,GAALgB,CAAA,EAAA,KAAA,MAAiB+B,CAAO,CAAA;AAAA,iBACvB,CAACU,MAAaxB,EAAA,MAAKjC,MAAL,KAAqB,MAAAyD,GAAGhC,EAAO,MAAO,CAAA;AAAA,eACtD,KAAK,SAAS,KAAK,qBAAqB,CAAC;AAAA;AAAA,UAE9CkB;AAAA,IACDI;AAAA,IACA,MAAMZ;AAAA;AAAA;AAAA,mBAGI,KAAK,SAAS,KAAK,eAAe,CAAC;AAAA,mBACnC,KAAK,SAAS,KAAK,eAAe,CAAC;AAAA,oBAClC,MAAMF,EAAA,MAAKjC,GAALe,CAAA,EAAA,KAAA,MAAmBU,EAAO,MAAO,CAAA;AAAA;AAAA;AAAA;AAAA,EAIlD,CAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAOR;AAEAb,IAAS,SAACkB,GAA+B;AAEjC,SADS,KAAK,gBAAgB,KAAK,CAACE,MAAMA,EAAE,WAAWF,CAAM,GACpD,UAAU,eAAe;AAC1C;AAEAjB,IAAO,SAACiB,GAA+B;AAE/B,SADS,KAAK,gBAAgB,KAAK,CAACE,MAAMA,EAAE,WAAWF,CAAM,GACpD,UAAU,iBAAiB;AAC5C;AAEAhB,IAAe,SAACgB,GAAsB;AAC/B,QAAAsB,IAAU,KAAK,gBAAgB,KAAK,CAACpB,MAAMA,EAAE,WAAWF,CAAM;AACpE,EAAKsB,MACLA,EAAQ,WAAW;AAAA,IAClB,GAAGA,EAAQ;AAAA,IACX,aAAa;AAAA,EACd,GACAxB,EAAA,MAAK9B,GAAY,SAAS,GAC1B,KAAK,cAAc,iBAAiB;AACrC;AAEAiB,IAAa,SAACe,GAAsB;AAC7B,QAAAsB,IAAU,KAAK,gBAAgB,KAAK,CAACpB,MAAMA,EAAE,WAAWF,CAAM;AACpE,EAAKsB,MACLA,EAAQ,WAAW;AAAA,IAClB,GAAGA,EAAQ;AAAA,IACX,eAAe;AAAA,EAChB,GACAxB,EAAA,MAAK9B,GAAY,SAAS,GAC1B,KAAK,cAAc,iBAAiB;AACrC;AAOAkB,IAAW,SAAC2C,GAAgC;AACvC,MAAA,CAACA,EAAgB,QAAA;AAEf,QAAAC,IAAI,IAAI,KAAKD,CAAO;AAE1B,SAAI,MAAMC,EAAE,QAAQ,CAAC,KACZ,QAAA,KAAK,6BAA6BD,CAAO,GAC1C,MAMPC,EAAE,gBACF,MACA,OAAOA,EAAE,aAAa,CAAC,EAAE,SAAS,GAAG,GAAG,IACxC,MACA,OAAOA,EAAE,QAAS,CAAA,EAAE,SAAS,GAAG,GAAG,IACnC,MACA,OAAOA,EAAE,SAAU,CAAA,EAAE,SAAS,GAAG,GAAG,IACpC,MACA,OAAOA,EAAE,WAAY,CAAA,EAAE,SAAS,GAAG,GAAG;AAExC;AAEA3C,IAAiB,SAACwC,GAAU3B,GAAgB;AACrC,QAAAsB,IAAU,KAAK,gBAAgB,KAAK,CAACpB,MAAMA,EAAE,WAAWF,CAAM;AACpE,EAAKsB,MACLA,EAAQ,WAAW;AAAA,IAClB,GAAGA,EAAQ;AAAA,IACX,aAAanB,EAAK,MAAAjC,GAAAmB,CAAA,EAAL,KAAmB,MAAAsC,CAAA;AAAA,EACjC,GACA7B,EAAA,MAAK9B,GAAY,SAAS,GAC1B,KAAK,cAAc,iBAAiB;AACrC;AAEAoB,IAAe,SAACuC,GAAU3B,GAAgB;AACnC,QAAAsB,IAAU,KAAK,gBAAgB,KAAK,CAACpB,MAAMA,EAAE,WAAWF,CAAM;AACpE,EAAKsB,MACLA,EAAQ,WAAW;AAAA,IAClB,GAAGA,EAAQ;AAAA,IACX,eAAenB,EAAK,MAAAjC,GAAAmB,CAAA,EAAL,KAAmB,MAAAsC,CAAA;AAAA,EACnC,GACA7B,EAAA,MAAK9B,GAAY,SAAS,GAC1B,KAAK,cAAc,iBAAiB;AACrC;AAEAqB,IAAa,SAACsC,GAAyB;AACtC,QAAMN,IAASM,EAAE,OAA+B,MAAM,SAAS;AACxD,SAAAN,EAAM,SAASA,IAAQ;AAC/B;AAtZY/B,EAwZa,SAAS;AAAA,EACjCyC;AAAA,EACAC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AA0CD;AA7bQC,EAAA;AAAA,EADPC,EAAM;AAAA,GANK5C,EAOJ,WAAA,YAAA,CAAA;AAGA2C,EAAA;AAAA,EADPC,EAAM;AAAA,GATK5C,EAUJ,WAAA,4BAAA,CAAA;AAGS2C,EAAA;AAAA,EADhBC,EAAM;AAAA,GAZK5C,EAaK,WAAA,cAAA,CAAA;AAGT2C,EAAA;AAAA,EADPC,EAAM;AAAA,GAfK5C,EAgBJ,WAAA,kBAAA,CAAA;AAGA2C,EAAA;AAAA,EADPC,EAAM;AAAA,GAlBK5C,EAmBJ,WAAA,mBAAA,CAAA;AAGA2C,EAAA;AAAA,EADPC,EAAM;AAAA,GArBK5C,EAsBJ,WAAA,sBAAA,CAAA;AAtBIA,IAAN2C,EAAA;AAAA,EADNE,EAAc,6BAA6B;AAAA,GAC/B7C,CAAA;AAucb,MAAA8C,KAAe9C;"}