{"version":3,"file":"create-blueprint-modal.element-B4spslKT.js","sources":["../../../src/packages/documents/documents/entity-actions/create-blueprint/modal/create-blueprint-modal.element.ts"],"sourcesContent":["import { UmbDocumentDetailRepository } from '../../../repository/index.js';\r\nimport type { UmbCreateBlueprintModalData, UmbCreateBlueprintModalValue } from './create-blueprint-modal.token.js';\r\nimport { html, customElement, css, state } from '@umbraco-cms/backoffice/external/lit';\r\nimport { UmbTextStyles } from '@umbraco-cms/backoffice/style';\r\nimport { UmbModalBaseElement } from '@umbraco-cms/backoffice/modal';\r\nimport type { UUIInputEvent } from '@umbraco-cms/backoffice/external/uui';\r\n\r\n@customElement('umb-create-blueprint-modal')\r\nexport class UmbCreateBlueprintModalElement extends UmbModalBaseElement<\r\n\tUmbCreateBlueprintModalData,\r\n\tUmbCreateBlueprintModalValue\r\n> {\r\n\t#documentRepository = new UmbDocumentDetailRepository(this);\r\n\r\n\t#documentUnique = '';\r\n\r\n\t@state()\r\n\tprivate _documentName = '';\r\n\r\n\t@state()\r\n\tprivate _blueprintName = '';\r\n\r\n\toverride firstUpdated() {\r\n\t\tthis.#documentUnique = this.data?.unique ?? '';\r\n\t\tthis.#getDocumentData();\r\n\t}\r\n\r\n\tasync #getDocumentData() {\r\n\t\tconst { data } = await this.#documentRepository.requestByUnique(this.#documentUnique);\r\n\t\tif (!data) return;\r\n\r\n\t\tthis._documentName = data.variants[0].name;\r\n\t\tthis._blueprintName = data.variants[0].name;\r\n\t}\r\n\r\n\tasync #handleSave() {\r\n\t\tthis.value = { name: this._blueprintName, parent: null };\r\n\t\tthis.modalContext?.submit();\r\n\t}\r\n\r\n\toverride render() {\r\n\t\treturn html`\r\n\t\t\t<umb-body-layout headline=${this.localize.term('actions_createblueprint')}>\r\n\t\t\t\t<uui-box id=\"tree-box\" headline=${this.localize.term('blueprints_createBlueprintFrom', this._documentName)}>\r\n\t\t\t\t\t<umb-localize key=\"blueprints_blueprintDescription\"></umb-localize>\r\n\t\t\t\t\t<umb-property-layout label=${this.localize.term('general_name')} orientation=\"vertical\">\r\n\t\t\t\t\t\t<div slot=\"editor\">\r\n\t\t\t\t\t\t\t<uui-input\r\n\t\t\t\t\t\t\t\tid=\"name\"\r\n\t\t\t\t\t\t\t\tlabel=\"name\"\r\n\t\t\t\t\t\t\t\t.value=${this._blueprintName}\r\n\t\t\t\t\t\t\t\t@input=${(e: UUIInputEvent) => (this._blueprintName = e.target.value as string)}></uui-input>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t</umb-property-layout>\r\n\t\t\t\t</uui-box>\r\n\t\t\t\t<uui-button\r\n\t\t\t\t\tslot=\"actions\"\r\n\t\t\t\t\tid=\"close\"\r\n\t\t\t\t\tlabel=${this.localize.term('general_close')}\r\n\t\t\t\t\t@click=\"${this.#handleClose}\"></uui-button>\r\n\t\t\t\t<uui-button\r\n\t\t\t\t\tslot=\"actions\"\r\n\t\t\t\t\tid=\"save\"\r\n\t\t\t\t\tlook=\"primary\"\r\n\t\t\t\t\tcolor=\"positive\"\r\n\t\t\t\t\tlabel=${this.localize.term('buttons_save')}\r\n\t\t\t\t\t@click=\"${this.#handleSave}\"></uui-button>\r\n\t\t\t</umb-body-layout>\r\n\t\t`;\r\n\t}\r\n\r\n\t#handleClose() {\r\n\t\tthis.modalContext?.reject();\r\n\t}\r\n\r\n\tstatic override styles = [\r\n\t\tUmbTextStyles,\r\n\t\tcss`\r\n\t\t\tstrong,\r\n\t\t\tuui-label,\r\n\t\t\tuui-input {\r\n\t\t\t\twidth: 100%;\r\n\t\t\t}\r\n\r\n\t\t\tuui-label {\r\n\t\t\t\tmargin-top: var(--uui-size-space-6);\r\n\t\t\t}\r\n\t\t`,\r\n\t];\r\n}\r\n\r\nexport default UmbCreateBlueprintModalElement;\r\n\r\ndeclare global {\r\n\tinterface HTMLElementTagNameMap {\r\n\t\t'umb-create-blueprint-modal': UmbCreateBlueprintModalElement;\r\n\t}\r\n}\r\n"],"names":["_documentRepository","_documentUnique","_UmbCreateBlueprintModalElement_instances","getDocumentData_fn","handleSave_fn","handleClose_fn","UmbCreateBlueprintModalElement","UmbModalBaseElement","__privateAdd","UmbDocumentDetailRepository","__privateSet","__privateMethod","html","e","data","__privateGet","UmbTextStyles","css","__decorateClass","state","customElement","UmbCreateBlueprintModalElement$1"],"mappings":";;;;;;;;;;;;;;wYAAAA,GAAAC,GAAAC,GAAAC,GAAAC,GAAAC;AAQa,IAAAC,IAAN,cAA6CC,EAGlD;AAAA,EAHK,cAAA;AAAA,UAAA,GAAA,SAAA,GAAAC,EAAA,MAAAN,CAAA,GAIgBM,EAAA,MAAAR,GAAA,IAAIS,EAA4B,IAAI,CAAA,GAExCD,EAAA,MAAAP,GAAA,EAAA,GAGlB,KAAQ,gBAAgB,IAGxB,KAAQ,iBAAiB;AAAA,EAAA;AAAA,EAEhB,eAAe;AAClB,IAAAS,EAAA,MAAAT,GAAkB,KAAK,MAAM,UAAU,EAAA,GAC5CU,EAAA,MAAKT,GAALC,CAAA,EAAA,KAAA,IAAA;AAAA,EAAA;AAAA,EAgBQ,SAAS;AACV,WAAAS;AAAA,+BACsB,KAAK,SAAS,KAAK,yBAAyB,CAAC;AAAA,sCACtC,KAAK,SAAS,KAAK,kCAAkC,KAAK,aAAa,CAAC;AAAA;AAAA,kCAE5E,KAAK,SAAS,KAAK,cAAc,CAAC;AAAA;AAAA;AAAA;AAAA;AAAA,iBAKnD,KAAK,cAAc;AAAA,iBACnB,CAACC,MAAsB,KAAK,iBAAiBA,EAAE,OAAO,KAAgB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,aAO1E,KAAK,SAAS,KAAK,eAAe,CAAC;AAAA,eACjCF,QAAKT,GAAYG,CAAA,CAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,aAMnB,KAAK,SAAS,KAAK,cAAc,CAAC;AAAA,eAChCM,QAAKT,GAAWE,CAAA,CAAA;AAAA;AAAA;AAAA,EAAA;AAuB/B;AA7ECJ,IAAA,oBAAA,QAAA;AAEAC,IAAA,oBAAA,QAAA;AANMC,IAAA,oBAAA,QAAA;AAmBAC,IAAgB,iBAAG;AAClB,QAAA,EAAE,MAAAW,MAAS,MAAMC,QAAKf,CAAoB,EAAA,gBAAgBe,QAAKd,CAAe,CAAA;AACpF,EAAKa,MAEL,KAAK,gBAAgBA,EAAK,SAAS,CAAC,EAAE,MACtC,KAAK,iBAAiBA,EAAK,SAAS,CAAC,EAAE;AACxC;AAEMV,IAAW,iBAAG;AACnB,OAAK,QAAQ,EAAE,MAAM,KAAK,gBAAgB,QAAQ,KAAK,GACvD,KAAK,cAAc,OAAO;AAC3B;AAiCAC,IAAY,WAAG;AACd,OAAK,cAAc,OAAO;AAC3B;AAjEYC,EAmEI,SAAS;AAAA,EACxBU;AAAA,EACAC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAWD;AAvEQC,EAAA;AAAA,EADPC,EAAM;AAAA,GARKb,EASJ,WAAA,iBAAA,CAAA;AAGAY,EAAA;AAAA,EADPC,EAAM;AAAA,GAXKb,EAYJ,WAAA,kBAAA,CAAA;AAZIA,IAANY,EAAA;AAAA,EADNE,EAAc,4BAA4B;AAAA,GAC9Bd,CAAA;AAmFb,MAAAe,IAAef;"}