{"version":3,"file":"document-history-workspace-info-app.element-3TCBdCzD.js","sources":["../../../src/packages/documents/documents/audit-log/utils/index.ts","../../../src/packages/documents/documents/audit-log/info-app/utils.ts","../../../src/packages/documents/documents/audit-log/info-app/document-history-workspace-info-app.element.ts"],"sourcesContent":["import type { UmbAuditLogType } from '@umbraco-cms/backoffice/audit-log';\r\n\r\nexport type UmbDocumentAuditLogType =\r\n\t| 'New'\r\n\t| 'Save'\r\n\t| 'SaveVariant'\r\n\t| 'Open'\r\n\t| 'Delete'\r\n\t| 'Publish'\r\n\t| 'PublishVariant'\r\n\t| 'SendToPublish'\r\n\t| 'SendToPublishVariant'\r\n\t| 'Unpublish'\r\n\t| 'UnpublishVariant'\r\n\t| 'Move'\r\n\t| 'Copy'\r\n\t| 'AssignDomain'\r\n\t| 'PublicAccess'\r\n\t| 'Sort'\r\n\t| 'Notify'\r\n\t| 'RollBack'\r\n\t| 'ContentVersionPreventCleanup'\r\n\t| 'ContentVersionEnableCleanup'\r\n\t| UmbAuditLogType;\r\n\r\nexport const UmbDocumentAuditLog = Object.freeze({\r\n\tASSIGN_DOMAIN: 'AssignDomain',\r\n\tCONTENT_VERSION_ENABLE_CLEANUP: 'ContentVersionEnableCleanup',\r\n\tCONTENT_VERSION_PREVENT_CLEANUP: 'ContentVersionPreventCleanup',\r\n\tCOPY: 'Copy',\r\n\tCUSTOM: 'Custom',\r\n\tDELETE: 'Delete',\r\n\tMOVE: 'Move',\r\n\tNEW: 'New',\r\n\tNOTIFY: 'Notify',\r\n\tOPEN: 'Open',\r\n\tPUBLIC_ACCESS: 'PublicAccess',\r\n\tPUBLISH_VARIANT: 'PublishVariant',\r\n\tPUBLISH: 'Publish',\r\n\tROLL_BACK: 'RollBack',\r\n\tSAVE_VARIANT: 'SaveVariant',\r\n\tSAVE: 'Save',\r\n\tSEND_TO_PUBLISH_VARIANT: 'SendToPublishVariant',\r\n\tSEND_TO_PUBLISH: 'SendToPublish',\r\n\tSORT: 'Sort',\r\n\tSYSTEM: 'System',\r\n\tUNPUBLISH_VARIANT: 'UnpublishVariant',\r\n\tUNPUBLISH: 'Unpublish',\r\n});\r\n","import { UmbDocumentAuditLog, type UmbDocumentAuditLogType } from '../utils/index.js';\r\n\r\ninterface HistoryStyleMap {\r\n\tlook: 'default' | 'primary' | 'secondary' | 'outline' | 'placeholder';\r\n\tcolor: 'default' | 'danger' | 'warning' | 'positive';\r\n}\r\n\r\ninterface HistoryLocalizeKeys {\r\n\tlabel: string;\r\n\tdesc: string;\r\n}\r\n\r\ninterface HistoryData {\r\n\tstyle: HistoryStyleMap;\r\n\ttext: HistoryLocalizeKeys;\r\n}\r\n\r\n/**\r\n * @description Helper function to get look and color for uui-tag and localization keys for the label and description.\r\n * @param type AuditTypeModel\r\n * @returns {HistoricData}\r\n */\r\nexport function getDocumentHistoryTagStyleAndText(type: UmbDocumentAuditLogType): HistoryData {\r\n\tswitch (type) {\r\n\t\tcase UmbDocumentAuditLog.SAVE:\r\n\t\t\treturn {\r\n\t\t\t\tstyle: { look: 'primary', color: 'default' },\r\n\t\t\t\ttext: { label: 'auditTrails_smallSave', desc: 'auditTrails_save' },\r\n\t\t\t};\r\n\r\n\t\tcase UmbDocumentAuditLog.SAVE_VARIANT:\r\n\t\t\treturn {\r\n\t\t\t\tstyle: { look: 'primary', color: 'default' },\r\n\t\t\t\ttext: { label: 'auditTrails_smallSaveVariant', desc: 'auditTrails_savevariant' },\r\n\t\t\t};\r\n\r\n\t\tcase UmbDocumentAuditLog.PUBLISH:\r\n\t\t\treturn {\r\n\t\t\t\tstyle: { look: 'primary', color: 'positive' },\r\n\t\t\t\ttext: { label: 'auditTrails_smallPublish', desc: 'auditTrails_publish' },\r\n\t\t\t};\r\n\r\n\t\tcase UmbDocumentAuditLog.UNPUBLISH:\r\n\t\t\treturn {\r\n\t\t\t\tstyle: { look: 'primary', color: 'warning' },\r\n\t\t\t\ttext: { label: 'auditTrails_smallUnpublish', desc: 'auditTrails_unpublish' },\r\n\t\t\t};\r\n\r\n\t\tcase UmbDocumentAuditLog.PUBLISH_VARIANT:\r\n\t\t\treturn {\r\n\t\t\t\tstyle: { look: 'primary', color: 'positive' },\r\n\t\t\t\ttext: { label: 'auditTrails_smallPublishVariant', desc: 'auditTrails_publishvariant' },\r\n\t\t\t};\r\n\r\n\t\tcase UmbDocumentAuditLog.UNPUBLISH_VARIANT:\r\n\t\t\treturn {\r\n\t\t\t\tstyle: { look: 'primary', color: 'warning' },\r\n\t\t\t\ttext: { label: 'auditTrails_smallUnpublishVariant', desc: 'auditTrails_unpublishvariant' },\r\n\t\t\t};\r\n\r\n\t\tcase UmbDocumentAuditLog.CONTENT_VERSION_ENABLE_CLEANUP:\r\n\t\t\treturn {\r\n\t\t\t\tstyle: { look: 'secondary', color: 'default' },\r\n\t\t\t\ttext: {\r\n\t\t\t\t\tlabel: 'auditTrails_smallContentVersionEnableCleanup',\r\n\t\t\t\t\tdesc: 'auditTrails_contentversionenablecleanup',\r\n\t\t\t\t},\r\n\t\t\t};\r\n\r\n\t\tcase UmbDocumentAuditLog.CONTENT_VERSION_PREVENT_CLEANUP:\r\n\t\t\treturn {\r\n\t\t\t\tstyle: { look: 'secondary', color: 'default' },\r\n\t\t\t\ttext: {\r\n\t\t\t\t\tlabel: 'auditTrails_smallContentVersionPreventCleanup',\r\n\t\t\t\t\tdesc: 'auditTrails_contentversionpreventcleanup',\r\n\t\t\t\t},\r\n\t\t\t};\r\n\r\n\t\tcase UmbDocumentAuditLog.ASSIGN_DOMAIN:\r\n\t\t\treturn {\r\n\t\t\t\tstyle: { look: 'secondary', color: 'default' },\r\n\t\t\t\ttext: { label: 'auditTrails_smallAssignDomain', desc: 'auditTrails_assigndomain' },\r\n\t\t\t};\r\n\r\n\t\tcase UmbDocumentAuditLog.COPY:\r\n\t\t\treturn {\r\n\t\t\t\tstyle: { look: 'secondary', color: 'default' },\r\n\t\t\t\ttext: { label: 'auditTrails_smallCopy', desc: 'auditTrails_copy' },\r\n\t\t\t};\r\n\r\n\t\tcase UmbDocumentAuditLog.MOVE:\r\n\t\t\treturn {\r\n\t\t\t\tstyle: { look: 'secondary', color: 'default' },\r\n\t\t\t\ttext: { label: 'auditTrails_smallMove', desc: 'auditTrails_move' },\r\n\t\t\t};\r\n\r\n\t\tcase UmbDocumentAuditLog.DELETE:\r\n\t\t\treturn {\r\n\t\t\t\tstyle: { look: 'secondary', color: 'danger' },\r\n\t\t\t\ttext: { label: 'auditTrails_smallDelete', desc: 'auditTrails_delete' },\r\n\t\t\t};\r\n\r\n\t\tcase UmbDocumentAuditLog.ROLL_BACK:\r\n\t\t\treturn {\r\n\t\t\t\tstyle: { look: 'secondary', color: 'default' },\r\n\t\t\t\ttext: { label: 'auditTrails_smallRollBack', desc: 'auditTrails_rollback' },\r\n\t\t\t};\r\n\r\n\t\tcase UmbDocumentAuditLog.SEND_TO_PUBLISH:\r\n\t\t\treturn {\r\n\t\t\t\tstyle: { look: 'secondary', color: 'positive' },\r\n\t\t\t\ttext: { label: 'auditTrails_smallSendToPublish', desc: 'auditTrails_sendtopublish' },\r\n\t\t\t};\r\n\r\n\t\tcase UmbDocumentAuditLog.SEND_TO_PUBLISH_VARIANT:\r\n\t\t\treturn {\r\n\t\t\t\tstyle: { look: 'secondary', color: 'positive' },\r\n\t\t\t\ttext: { label: 'auditTrails_smallSendToPublishVariant', desc: 'auditTrails_sendtopublishvariant' },\r\n\t\t\t};\r\n\r\n\t\tcase UmbDocumentAuditLog.SORT:\r\n\t\t\treturn {\r\n\t\t\t\tstyle: { look: 'secondary', color: 'default' },\r\n\t\t\t\ttext: { label: 'auditTrails_smallSort', desc: 'auditTrails_sort' },\r\n\t\t\t};\r\n\r\n\t\tcase UmbDocumentAuditLog.CUSTOM:\r\n\t\t\treturn {\r\n\t\t\t\tstyle: { look: 'placeholder', color: 'default' },\r\n\t\t\t\ttext: { label: 'auditTrails_smallCustom', desc: 'auditTrails_custom' },\r\n\t\t\t};\r\n\r\n\t\tdefault:\r\n\t\t\treturn {\r\n\t\t\t\tstyle: { look: 'placeholder', color: 'default' },\r\n\t\t\t\ttext: { label: type, desc: '' },\r\n\t\t\t};\r\n\t}\r\n}\r\n","import { UmbDocumentAuditLogRepository } from '../repository/index.js';\r\nimport { UMB_DOCUMENT_WORKSPACE_CONTEXT } from '../../workspace/constants.js';\r\nimport type { UmbDocumentAuditLogModel } from '../types.js';\r\nimport { TimeOptions } from '../../utils.js';\r\nimport { getDocumentHistoryTagStyleAndText } from './utils.js';\r\nimport { css, customElement, html, nothing, repeat, state, when } from '@umbraco-cms/backoffice/external/lit';\r\nimport { UmbLitElement } from '@umbraco-cms/backoffice/lit-element';\r\nimport { UmbPaginationManager } from '@umbraco-cms/backoffice/utils';\r\nimport { UmbRequestReloadStructureForEntityEvent } from '@umbraco-cms/backoffice/entity-action';\r\nimport { UmbTextStyles } from '@umbraco-cms/backoffice/style';\r\nimport { UmbUserItemRepository } from '@umbraco-cms/backoffice/user';\r\nimport { UMB_ACTION_EVENT_CONTEXT } from '@umbraco-cms/backoffice/action';\r\nimport type { ManifestEntityAction } from '@umbraco-cms/backoffice/entity-action';\r\nimport type { UmbUserItemModel } from '@umbraco-cms/backoffice/user';\r\nimport type { UUIPaginationEvent } from '@umbraco-cms/backoffice/external/uui';\r\n\r\n@customElement('umb-document-history-workspace-info-app')\r\nexport class UmbDocumentHistoryWorkspaceInfoAppElement extends UmbLitElement {\r\n\t#allowedActions = new Set(['Umb.EntityAction.Document.Rollback']);\r\n\r\n\t#auditLogRepository = new UmbDocumentAuditLogRepository(this);\r\n\r\n\t#pagination = new UmbPaginationManager();\r\n\r\n\t#userItemRepository = new UmbUserItemRepository(this);\r\n\r\n\t#userMap = new Map<string, UmbUserItemModel>();\r\n\r\n\t#workspaceContext?: typeof UMB_DOCUMENT_WORKSPACE_CONTEXT.TYPE;\r\n\r\n\t@state()\r\n\tprivate _currentPageNumber = 1;\r\n\r\n\t@state()\r\n\tprivate _items: Array<UmbDocumentAuditLogModel> = [];\r\n\r\n\t@state()\r\n\tprivate _totalPages = 1;\r\n\r\n\tconstructor() {\r\n\t\tsuper();\r\n\r\n\t\tthis.#pagination.setPageSize(10);\r\n\t\tthis.observe(this.#pagination.currentPage, (number) => (this._currentPageNumber = number));\r\n\t\tthis.observe(this.#pagination.totalPages, (number) => (this._totalPages = number));\r\n\r\n\t\tthis.consumeContext(UMB_ACTION_EVENT_CONTEXT, (context) => {\r\n\t\t\tcontext?.addEventListener(UmbRequestReloadStructureForEntityEvent.TYPE, () => {\r\n\t\t\t\tthis.#requestAuditLogs();\r\n\t\t\t});\r\n\t\t});\r\n\r\n\t\tthis.consumeContext(UMB_DOCUMENT_WORKSPACE_CONTEXT, (instance) => {\r\n\t\t\tthis.#workspaceContext = instance;\r\n\t\t\tthis.#requestAuditLogs();\r\n\t\t});\r\n\t}\r\n\r\n\t#onPageChange(event: UUIPaginationEvent) {\r\n\t\tthis.#pagination.setCurrentPageNumber(event.target?.current);\r\n\t\tthis.#requestAuditLogs();\r\n\t}\r\n\r\n\tasync #requestAuditLogs() {\r\n\t\tif (!this.#workspaceContext) return;\r\n\t\tconst unique = this.#workspaceContext.getUnique();\r\n\t\tif (!unique) throw new Error('Document unique is required');\r\n\r\n\t\tconst { data } = await this.#auditLogRepository.requestAuditLog({\r\n\t\t\tunique,\r\n\t\t\tskip: this.#pagination.getSkip(),\r\n\t\t\ttake: this.#pagination.getPageSize(),\r\n\t\t});\r\n\r\n\t\tif (data) {\r\n\t\t\tthis._items = data.items;\r\n\t\t\tthis.#pagination.setTotalItems(data.total);\r\n\t\t\tthis.#requestAndCacheUserItems();\r\n\t\t}\r\n\t}\r\n\r\n\tasync #requestAndCacheUserItems() {\r\n\t\tconst allUsers = this._items?.map((item) => item.user.unique).filter(Boolean) as string[];\r\n\t\tconst uniqueUsers = [...new Set(allUsers)];\r\n\t\tconst uncachedUsers = uniqueUsers.filter((unique) => !this.#userMap.has(unique));\r\n\r\n\t\t// If there are no uncached user items, we don't need to make a request\r\n\t\tif (uncachedUsers.length === 0) return;\r\n\r\n\t\tconst { data: items } = await this.#userItemRepository.requestItems(uncachedUsers);\r\n\r\n\t\tif (items) {\r\n\t\t\titems.forEach((item) => {\r\n\t\t\t\t// cache the user item\r\n\t\t\t\tthis.#userMap.set(item.unique, item);\r\n\t\t\t\tthis.requestUpdate('_items');\r\n\t\t\t});\r\n\t\t}\r\n\t}\r\n\r\n\toverride render() {\r\n\t\treturn html`\r\n\t\t\t<umb-workspace-info-app-layout headline=\"#general_history\">\r\n\t\t\t\t<umb-extension-with-api-slot\r\n\t\t\t\t\tslot=\"header-actions\"\r\n\t\t\t\t\ttype=\"entityAction\"\r\n\t\t\t\t\t.filter=${(manifest: ManifestEntityAction) =>\r\n\t\t\t\t\t\tthis.#allowedActions.has(manifest.alias)}></umb-extension-with-api-slot>\r\n\r\n\t\t\t\t<div id=\"content\">\r\n\t\t\t\t\t${when(\r\n\t\t\t\t\t\tthis._items,\r\n\t\t\t\t\t\t() => this.#renderHistory(),\r\n\t\t\t\t\t\t() => html`<div id=\"loader\"><uui-loader></uui-loader></div>`,\r\n\t\t\t\t\t)}\r\n\t\t\t\t\t${this.#renderPagination()}\r\n\t\t\t\t</div>\r\n\t\t\t</umb-workspace-info-app-layout>\r\n\t\t`;\r\n\t}\r\n\r\n\t#renderHistory() {\r\n\t\tif (!this._items?.length) return html`${this.localize.term('content_noItemsToShow')}`;\r\n\t\treturn html`\r\n\t\t\t<umb-history-list>\r\n\t\t\t\t${repeat(\r\n\t\t\t\t\tthis._items,\r\n\t\t\t\t\t(item) => item.timestamp,\r\n\t\t\t\t\t(item) => {\r\n\t\t\t\t\t\tconst { text, style } = getDocumentHistoryTagStyleAndText(item.logType);\r\n\t\t\t\t\t\tconst user = this.#userMap.get(item.user.unique);\r\n\r\n\t\t\t\t\t\treturn html`\r\n\t\t\t\t\t\t\t<umb-history-item\r\n\t\t\t\t\t\t\t\t.name=${user?.name ?? 'Unknown'}\r\n\t\t\t\t\t\t\t\t.detail=${this.localize.date(item.timestamp, TimeOptions)}>\r\n\t\t\t\t\t\t\t\t<umb-user-avatar\r\n\t\t\t\t\t\t\t\t\tslot=\"avatar\"\r\n\t\t\t\t\t\t\t\t\t.name=${user?.name}\r\n\t\t\t\t\t\t\t\t\t.kind=${user?.kind}\r\n\t\t\t\t\t\t\t\t\t.imgUrls=${user?.avatarUrls ?? []}>\r\n\t\t\t\t\t\t\t\t</umb-user-avatar>\r\n\t\t\t\t\t\t\t\t<div class=\"log-type\">\r\n\t\t\t\t\t\t\t\t\t<uui-tag look=${style.look} color=${style.color}>\r\n\t\t\t\t\t\t\t\t\t\t${this.localize.term(text.label, item.parameters)}\r\n\t\t\t\t\t\t\t\t\t</uui-tag>\r\n\t\t\t\t\t\t\t\t\t<span>${this.localize.term(text.desc, item.parameters)}</span>\r\n\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t</umb-history-item>\r\n\t\t\t\t\t\t`;\r\n\t\t\t\t\t},\r\n\t\t\t\t)}\r\n\t\t\t</umb-history-list>\r\n\t\t`;\r\n\t}\r\n\r\n\t#renderPagination() {\r\n\t\tif (this._totalPages <= 1) return nothing;\r\n\t\treturn html`\r\n\t\t\t<uui-pagination\r\n\t\t\t\t.current=${this._currentPageNumber}\r\n\t\t\t\t.total=${this._totalPages}\r\n\t\t\t\tfirstlabel=${this.localize.term('general_first')}\r\n                previouslabel=${this.localize.term('general_previous')}\r\n                nextlabel=${this.localize.term('general_next')}\r\n                lastlabel=${this.localize.term('general_last')}\r\n\t\t\t\t@change=${this.#onPageChange}></uui-pagination>\r\n\t\t`;\r\n\t}\r\n\r\n\tstatic override styles = [\r\n\t\tUmbTextStyles,\r\n\t\tcss`\r\n\t\t\t#content {\r\n\t\t\t\tdisplay: block;\r\n\t\t\t\tpadding: var(--uui-size-space-4) var(--uui-size-space-5);\r\n\t\t\t}\r\n\r\n\t\t\t#loader {\r\n\t\t\t\tdisplay: flex;\r\n\t\t\t\tjustify-content: center;\r\n\t\t\t}\r\n\r\n\t\t\t.log-type {\r\n\t\t\t\tdisplay: grid;\r\n\t\t\t\tgrid-template-columns: var(--uui-size-40) auto;\r\n\t\t\t\tgap: var(--uui-size-layout-1);\r\n\t\t\t}\r\n\r\n\t\t\t.log-type uui-tag {\r\n\t\t\t\tjustify-self: center;\r\n\t\t\t\theight: fit-content;\r\n\t\t\t\tmargin-top: auto;\r\n\t\t\t\tmargin-bottom: auto;\r\n\t\t\t}\r\n\r\n\t\t\tuui-pagination {\r\n\t\t\t\tflex: 1;\r\n\t\t\t\tdisplay: flex;\r\n\t\t\t\tjustify-content: center;\r\n\t\t\t\tmargin-top: var(--uui-size-layout-1);\r\n\t\t\t}\r\n\t\t`,\r\n\t];\r\n}\r\n\r\nexport default UmbDocumentHistoryWorkspaceInfoAppElement;\r\n\r\ndeclare global {\r\n\tinterface HTMLElementTagNameMap {\r\n\t\t'umb-document-history-workspace-info-app': UmbDocumentHistoryWorkspaceInfoAppElement;\r\n\t}\r\n}\r\n"],"names":["UmbDocumentAuditLog","getDocumentHistoryTagStyleAndText","type","_allowedActions","_auditLogRepository","_pagination","_userItemRepository","_userMap","_workspaceContext","_UmbDocumentHistoryWorkspaceInfoAppElement_instances","onPageChange_fn","requestAuditLogs_fn","requestAndCacheUserItems_fn","renderHistory_fn","renderPagination_fn","UmbDocumentHistoryWorkspaceInfoAppElement","UmbLitElement","__privateAdd","UmbDocumentAuditLogRepository","UmbPaginationManager","UmbUserItemRepository","__privateGet","number","UMB_ACTION_EVENT_CONTEXT","context","UmbRequestReloadStructureForEntityEvent","__privateMethod","UMB_DOCUMENT_WORKSPACE_CONTEXT","instance","__privateSet","html","manifest","when","event","unique","data","allUsers","item","uncachedUsers","items","repeat","text","style","user","TimeOptions","nothing","UmbTextStyles","css","__decorateClass","state","customElement","UmbDocumentHistoryWorkspaceInfoAppElement$1"],"mappings":"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"}