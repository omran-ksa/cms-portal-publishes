{"version":3,"file":"document-search-result-item.element-tbl0_RYd.js","sources":["../../../src/packages/documents/documents/search/document-search-result-item.element.ts"],"sourcesContent":["import type { UmbDocumentItemModel, UmbDocumentItemVariantModel } from '../item/repository/types.js';\r\nimport {\r\n\tclassMap,\r\n\tcss,\r\n\tcustomElement,\r\n\thtml,\r\n\tnothing,\r\n\tproperty,\r\n\tstate,\r\n\twhen,\r\n} from '@umbraco-cms/backoffice/external/lit';\r\nimport { UmbLitElement } from '@umbraco-cms/backoffice/lit-element';\r\nimport { UMB_APP_LANGUAGE_CONTEXT } from '@umbraco-cms/backoffice/language';\r\nimport type { UmbSearchResultItemModel } from '@umbraco-cms/backoffice/search';\r\n\r\n@customElement('umb-document-search-result-item')\r\nexport class UmbDocumentSearchResultItemElement extends UmbLitElement {\r\n\t@property({ type: Object })\r\n\titem?: UmbSearchResultItemModel & UmbDocumentItemModel;\r\n\r\n\t@state()\r\n\t_currentCulture?: string;\r\n\r\n\t@state()\r\n\t_defaultCulture?: string;\r\n\r\n\t@state()\r\n\t_variant?: UmbDocumentItemVariantModel;\r\n\r\n\tconstructor() {\r\n\t\tsuper();\r\n\r\n\t\tthis.consumeContext(UMB_APP_LANGUAGE_CONTEXT, (instance) => {\r\n\t\t\tthis.#observeAppCulture(instance);\r\n\t\t\tthis.#observeDefaultCulture(instance);\r\n\t\t});\r\n\t}\r\n\r\n\t#observeAppCulture(context: typeof UMB_APP_LANGUAGE_CONTEXT.TYPE | undefined) {\r\n\t\tthis.observe(context?.appLanguageCulture, (value) => {\r\n\t\t\tthis._currentCulture = value;\r\n\t\t\tthis._variant = this.#getVariant(value);\r\n\t\t});\r\n\t}\r\n\r\n\t#observeDefaultCulture(context: typeof UMB_APP_LANGUAGE_CONTEXT.TYPE | undefined) {\r\n\t\tthis.observe(context?.appDefaultLanguage, (value) => {\r\n\t\t\tthis._defaultCulture = value?.unique;\r\n\t\t});\r\n\t}\r\n\r\n\t#getVariant(culture: string | undefined) {\r\n\t\treturn this.item?.variants.find((x) => x.culture === culture);\r\n\t}\r\n\r\n\t#getLabel() {\r\n\t\tif (this.item?.variants[0]?.culture === null) {\r\n\t\t\treturn this.item?.name ?? 'Unknown';\r\n\t\t}\r\n\r\n\t\tconst fallbackName = this.#getVariant(this._defaultCulture)?.name ?? this.item?.name ?? 'Unknown';\r\n\t\treturn this._variant?.name ?? `(${fallbackName})`;\r\n\t}\r\n\r\n\t#getDraftState(): boolean {\r\n\t\tif (this.item?.isTrashed) return false;\r\n\t\treturn this._variant?.state === 'Draft' || this.item?.variants[0]?.state === 'Draft';\r\n\t}\r\n\r\n\toverride render() {\r\n\t\tif (!this.item) return nothing;\r\n\r\n\t\tconst label = this.#getLabel();\r\n\t\tconst isDraft = this.#getDraftState();\r\n\r\n\t\tconst classes = {\r\n\t\t\ttrashed: this.item.isTrashed,\r\n\t\t\thasState: this.item.isTrashed || isDraft,\r\n\t\t};\r\n\r\n\t\treturn html`\r\n\t\t\t${when(\r\n\t\t\t\tthis.item.documentType.icon ?? this.item.icon,\r\n\t\t\t\t(icon) => html`<umb-icon name=${icon}></umb-icon>`,\r\n\t\t\t\t() => html`<uui-icon name=\"icon-document\"></uui-icon>`,\r\n\t\t\t)}\r\n\t\t\t<span class=${classMap(classes)}>${label}</span>\r\n\t\t\t<div class=\"extra\">\r\n\t\t\t\t${when(\r\n\t\t\t\t\tthis.item.isTrashed,\r\n\t\t\t\t\t() => html`\r\n\t\t\t\t\t\t<uui-tag look=\"secondary\">\r\n\t\t\t\t\t\t\t<umb-localize key=\"mediaPicker_trashed\">Trashed</umb-localize>\r\n\t\t\t\t\t\t</uui-tag>\r\n\t\t\t\t\t`,\r\n\t\t\t\t)}\r\n\t\t\t\t${when(!this.item.isTrashed && isDraft, () => html`<uui-tag look=\"secondary\">Draft</uui-tag>`)}\r\n\t\t\t</div>\r\n\t\t`;\r\n\t}\r\n\r\n\tstatic override styles = [\r\n\t\tcss`\r\n\t\t\t:host {\r\n\t\t\t\tborder-radius: var(--uui-border-radius);\r\n\t\t\t\toutline-offset: -3px;\r\n\t\t\t\tpadding: var(--uui-size-space-3) var(--uui-size-space-5);\r\n\r\n\t\t\t\tdisplay: flex;\r\n\t\t\t\tgap: var(--uui-size-space-3);\r\n\t\t\t\talign-items: center;\r\n\r\n\t\t\t\twidth: 100%;\r\n\r\n\t\t\t\t> span {\r\n\t\t\t\t\tflex: 1;\r\n\r\n\t\t\t\t\t&.hasState {\r\n\t\t\t\t\t\topacity: 0.6;\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\t&.trashed {\r\n\t\t\t\t\t\ttext-decoration: line-through;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t`,\r\n\t];\r\n}\r\n\r\nexport { UmbDocumentSearchResultItemElement as element };\r\n\r\ndeclare global {\r\n\tinterface HTMLElementTagNameMap {\r\n\t\t'umb-document-search-result-item': UmbDocumentSearchResultItemElement;\r\n\t}\r\n}\r\n"],"names":["_UmbDocumentSearchResultItemElement_instances","observeAppCulture_fn","observeDefaultCulture_fn","getVariant_fn","getLabel_fn","getDraftState_fn","UmbDocumentSearchResultItemElement","UmbLitElement","__privateAdd","UMB_APP_LANGUAGE_CONTEXT","instance","__privateMethod","nothing","label","isDraft","classes","html","when","icon","classMap","context","value","culture","x","fallbackName","css","__decorateClass","property","state","customElement"],"mappings":"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"}