{"version":3,"file":"dictionary-workspace.context-Cz8XzC-c.js","sources":["../../../src/packages/dictionary/workspace/dictionary-workspace-editor.element.ts","../../../src/packages/dictionary/workspace/dictionary-workspace.context.ts"],"sourcesContent":["import { UMB_DICTIONARY_OVERVIEW_DASHBOARD_PATH } from '../dashboard/index.js';\r\nimport { html, customElement } from '@umbraco-cms/backoffice/external/lit';\r\nimport { UmbLitElement } from '@umbraco-cms/backoffice/lit-element';\r\n\r\n@customElement('umb-dictionary-workspace-editor')\r\nexport class UmbDictionaryWorkspaceEditorElement extends UmbLitElement {\r\n\toverride render() {\r\n\t\treturn html`\r\n\t\t\t<umb-entity-detail-workspace-editor .backPath=${UMB_DICTIONARY_OVERVIEW_DASHBOARD_PATH}>\r\n\t\t\t\t<umb-workspace-header-name-editable slot=\"header\"></umb-workspace-header-name-editable>\r\n\t\t\t</umb-entity-detail-workspace-editor>\r\n\t\t`;\r\n\t}\r\n}\r\n\r\nexport default UmbDictionaryWorkspaceEditorElement;\r\n\r\ndeclare global {\r\n\tinterface HTMLElementTagNameMap {\r\n\t\t'umb-dictionary-workspace-editor': UmbDictionaryWorkspaceEditorElement;\r\n\t}\r\n}\r\n","import type { UmbDictionaryDetailModel } from '../types.js';\r\nimport { UMB_DICTIONARY_DETAIL_REPOSITORY_ALIAS, type UmbDictionaryDetailRepository } from '../repository/index.js';\r\nimport { UMB_DICTIONARY_ENTITY_TYPE } from '../entity.js';\r\nimport { UmbDictionaryWorkspaceEditorElement } from './dictionary-workspace-editor.element.js';\r\nimport { UMB_DICTIONARY_WORKSPACE_ALIAS } from './constants.js';\r\nimport {\r\n\ttype UmbSubmittableWorkspaceContext,\r\n\tUmbWorkspaceIsNewRedirectController,\r\n\ttype UmbRoutableWorkspaceContext,\r\n\tUmbEntityNamedDetailWorkspaceContextBase,\r\n} from '@umbraco-cms/backoffice/workspace';\r\nimport type { UmbControllerHost } from '@umbraco-cms/backoffice/controller-api';\r\n\r\nexport class UmbDictionaryWorkspaceContext\r\n\textends UmbEntityNamedDetailWorkspaceContextBase<UmbDictionaryDetailModel, UmbDictionaryDetailRepository>\r\n\timplements UmbSubmittableWorkspaceContext, UmbRoutableWorkspaceContext\r\n{\r\n\treadonly dictionary = this._data.createObservablePartOfCurrent((data) => data);\r\n\r\n\tconstructor(host: UmbControllerHost) {\r\n\t\tsuper(host, {\r\n\t\t\tworkspaceAlias: UMB_DICTIONARY_WORKSPACE_ALIAS,\r\n\t\t\tentityType: UMB_DICTIONARY_ENTITY_TYPE,\r\n\t\t\tdetailRepositoryAlias: UMB_DICTIONARY_DETAIL_REPOSITORY_ALIAS,\r\n\t\t});\r\n\r\n\t\tthis.routes.setRoutes([\r\n\t\t\t{\r\n\t\t\t\tpath: 'create/parent/:entityType/:parentUnique',\r\n\t\t\t\tcomponent: UmbDictionaryWorkspaceEditorElement,\r\n\t\t\t\tsetup: async (_component, info) => {\r\n\t\t\t\t\tconst parentEntityType = info.match.params.entityType;\r\n\t\t\t\t\tconst parentUnique = info.match.params.parentUnique === 'null' ? null : info.match.params.parentUnique;\r\n\t\t\t\t\tawait this.createScaffold({ parent: { entityType: parentEntityType, unique: parentUnique } });\r\n\r\n\t\t\t\t\tnew UmbWorkspaceIsNewRedirectController(\r\n\t\t\t\t\t\tthis,\r\n\t\t\t\t\t\tthis,\r\n\t\t\t\t\t\tthis.getHostElement().shadowRoot!.querySelector('umb-router-slot')!,\r\n\t\t\t\t\t);\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t\t{\r\n\t\t\t\tpath: 'edit/:unique',\r\n\t\t\t\tcomponent: UmbDictionaryWorkspaceEditorElement,\r\n\t\t\t\tsetup: (_component, info) => {\r\n\t\t\t\t\tconst unique = info.match.params.unique;\r\n\t\t\t\t\tthis.load(unique);\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t]);\r\n\t}\r\n\r\n\tsetPropertyValue(isoCode: string, translation: string) {\r\n\t\tconst currentData = this._data.getCurrent();\r\n\t\tif (!currentData) return;\r\n\r\n\t\t// TODO: This can use some of our own methods, to make it simpler. see appendToFrozenArray()\r\n\t\t// update if the code already exists\r\n\t\tconst updatedValue =\r\n\t\t\tcurrentData.translations?.map((translationItem) => {\r\n\t\t\t\tif (translationItem.isoCode === isoCode) {\r\n\t\t\t\t\treturn { ...translationItem, translation };\r\n\t\t\t\t}\r\n\t\t\t\treturn translationItem;\r\n\t\t\t}) ?? [];\r\n\r\n\t\t// if code doesn't exist, add it to the new value set\r\n\t\tif (!updatedValue?.find((x) => x.isoCode === isoCode)) {\r\n\t\t\tupdatedValue?.push({ isoCode, translation });\r\n\t\t}\r\n\r\n\t\tthis._data.setCurrent({ ...currentData, translations: updatedValue });\r\n\t}\r\n}\r\n\r\nexport { UmbDictionaryWorkspaceContext as api };\r\n"],"names":["UmbDictionaryWorkspaceEditorElement","UmbLitElement","html","UMB_DICTIONARY_OVERVIEW_DASHBOARD_PATH","__decorateClass","customElement","UmbDictionaryWorkspaceContext","UmbEntityNamedDetailWorkspaceContextBase","host","UMB_DICTIONARY_WORKSPACE_ALIAS","UMB_DICTIONARY_ENTITY_TYPE","UMB_DICTIONARY_DETAIL_REPOSITORY_ALIAS","data","_component","info","parentEntityType","parentUnique","UmbWorkspaceIsNewRedirectController","unique","isoCode","translation","currentData","updatedValue","translationItem","x"],"mappings":";;;;;;;;;;;;;;;AAKa,IAAAA,IAAN,cAAkDC,EAAc;AAAA,EAC7D,SAAS;AACV,WAAAC;AAAA,mDAC0CC,CAAsC;AAAA;AAAA;AAAA;AAAA,EAAA;AAKzF;AARaH,IAANI,EAAA;AAAA,EADNC,EAAc,iCAAiC;AAAA,GACnCL,CAAA;ACQN,MAAMM,UACJC,EAET;AAAA,EAGC,YAAYC,GAAyB;AACpC,UAAMA,GAAM;AAAA,MACX,gBAAgBC;AAAA,MAChB,YAAYC;AAAA,MACZ,uBAAuBC;AAAA,IAAA,CACvB,GAPF,KAAS,aAAa,KAAK,MAAM,8BAA8B,CAACC,MAASA,CAAI,GAS5E,KAAK,OAAO,UAAU;AAAA,MACrB;AAAA,QACC,MAAM;AAAA,QACN,WAAWZ;AAAA,QACX,OAAO,OAAOa,GAAYC,MAAS;AAC5B,gBAAAC,IAAmBD,EAAK,MAAM,OAAO,YACrCE,IAAeF,EAAK,MAAM,OAAO,iBAAiB,SAAS,OAAOA,EAAK,MAAM,OAAO;AACpF,gBAAA,KAAK,eAAe,EAAE,QAAQ,EAAE,YAAYC,GAAkB,QAAQC,EAAa,GAAG,GAExF,IAAAC;AAAA,YACH;AAAA,YACA;AAAA,YACA,KAAK,eAAA,EAAiB,WAAY,cAAc,iBAAiB;AAAA,UAClE;AAAA,QAAA;AAAA,MAEF;AAAA,MACA;AAAA,QACC,MAAM;AAAA,QACN,WAAWjB;AAAA,QACX,OAAO,CAACa,GAAYC,MAAS;AACtB,gBAAAI,IAASJ,EAAK,MAAM,OAAO;AACjC,eAAK,KAAKI,CAAM;AAAA,QAAA;AAAA,MACjB;AAAA,IACD,CACA;AAAA,EAAA;AAAA,EAGF,iBAAiBC,GAAiBC,GAAqB;AAChD,UAAAC,IAAc,KAAK,MAAM,WAAW;AAC1C,QAAI,CAACA,EAAa;AAIlB,UAAMC,IACLD,EAAY,cAAc,IAAI,CAACE,MAC1BA,EAAgB,YAAYJ,IACxB,EAAE,GAAGI,GAAiB,aAAAH,EAAY,IAEnCG,CACP,KAAK,CAAC;AAGJ,IAACD,GAAc,KAAK,CAACE,MAAMA,EAAE,YAAYL,CAAO,KACnDG,GAAc,KAAK,EAAE,SAAAH,GAAS,aAAAC,EAAA,CAAa,GAG5C,KAAK,MAAM,WAAW,EAAE,GAAGC,GAAa,cAAcC,GAAc;AAAA,EAAA;AAEtE;"}