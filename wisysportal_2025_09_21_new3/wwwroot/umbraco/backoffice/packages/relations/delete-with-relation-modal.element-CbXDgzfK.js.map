{"version":3,"file":"delete-with-relation-modal.element-CbXDgzfK.js","sources":["../../../src/packages/relations/relations/entity-actions/delete/modal/delete-with-relation-modal.element.ts"],"sourcesContent":["import type { UmbConfirmActionModalEntityReferencesConfig } from '../../../global-components/types.js';\r\nimport type {\r\n\tUmbDeleteWithRelationConfirmModalData,\r\n\tUmbDeleteWithRelationConfirmModalValue,\r\n} from './delete-with-relation-modal.token.js';\r\nimport {\r\n\thtml,\r\n\tcustomElement,\r\n\tcss,\r\n\tstate,\r\n\ttype PropertyValues,\r\n\tnothing,\r\n\tunsafeHTML,\r\n} from '@umbraco-cms/backoffice/external/lit';\r\nimport { UmbTextStyles } from '@umbraco-cms/backoffice/style';\r\nimport { UmbModalBaseElement } from '@umbraco-cms/backoffice/modal';\r\nimport { umbFocus } from '@umbraco-cms/backoffice/lit-element';\r\nimport type { UmbItemRepository } from '@umbraco-cms/backoffice/repository';\r\nimport { createExtensionApiByAlias } from '@umbraco-cms/backoffice/extension-registry';\r\n\r\n@customElement('umb-delete-with-relation-confirm-modal')\r\nexport class UmbDeleteWithRelationConfirmModalElement extends UmbModalBaseElement<\r\n\tUmbDeleteWithRelationConfirmModalData,\r\n\tUmbDeleteWithRelationConfirmModalValue\r\n> {\r\n\t@state()\r\n\t_name?: string;\r\n\r\n\t@state()\r\n\t_referencesConfig?: UmbConfirmActionModalEntityReferencesConfig;\r\n\r\n\t#itemRepository?: UmbItemRepository<any>;\r\n\r\n\tprotected override firstUpdated(_changedProperties: PropertyValues): void {\r\n\t\tsuper.firstUpdated(_changedProperties);\r\n\t\tthis.#initData();\r\n\t}\r\n\r\n\tasync #initData() {\r\n\t\tif (!this.data) {\r\n\t\t\tthis.#itemRepository?.destroy();\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tthis.#itemRepository = await createExtensionApiByAlias<UmbItemRepository<any>>(this, this.data.itemRepositoryAlias);\r\n\r\n\t\tconst { data } = await this.#itemRepository.requestItems([this.data.unique]);\r\n\t\tconst item = data?.[0];\r\n\t\tif (!item) throw new Error('Item not found.');\r\n\r\n\t\tthis._name = item.name;\r\n\r\n\t\tthis._referencesConfig = {\r\n\t\t\tunique: this.data.unique,\r\n\t\t\titemRepositoryAlias: this.data.itemRepositoryAlias,\r\n\t\t\treferenceRepositoryAlias: this.data.referenceRepositoryAlias,\r\n\t\t};\r\n\t}\r\n\r\n\toverride render() {\r\n\t\tconst headline = this.localize.string('#actions_delete');\r\n\t\tconst content = this.localize.string('#defaultdialogs_confirmdelete', this._name);\r\n\r\n\t\treturn html`\r\n\t\t\t<uui-dialog-layout class=\"uui-text\" headline=${headline}>\r\n\t\t\t\t<p>${unsafeHTML(content)}</p>\r\n\t\t\t\t${this._referencesConfig\r\n\t\t\t\t\t? html`<umb-confirm-action-modal-entity-references\r\n\t\t\t\t\t\t\t.config=${this._referencesConfig}></umb-confirm-action-modal-entity-references>`\r\n\t\t\t\t\t: nothing}\r\n\r\n\t\t\t\t<uui-button\r\n\t\t\t\t\tslot=\"actions\"\r\n\t\t\t\t\tid=\"cancel\"\r\n\t\t\t\t\tlabel=${this.localize.term('general_cancel')}\r\n\t\t\t\t\t@click=${this._rejectModal}></uui-button>\r\n\r\n\t\t\t\t<uui-button\r\n\t\t\t\t\tslot=\"actions\"\r\n\t\t\t\t\tid=\"confirm\"\r\n\t\t\t\t\tcolor=\"danger\"\r\n\t\t\t\t\tlook=\"primary\"\r\n\t\t\t\t\tlabel=${this.localize.term('general_delete')}\r\n\t\t\t\t\t@click=${this._submitModal}\r\n\t\t\t\t\t${umbFocus()}></uui-button>\r\n\t\t\t</uui-dialog-layout>\r\n\t\t`;\r\n\t}\r\n\r\n\tstatic override styles = [\r\n\t\tUmbTextStyles,\r\n\t\tcss`\r\n\t\t\tuui-dialog-layout {\r\n\t\t\t\tmax-inline-size: 60ch;\r\n\t\t\t}\r\n\t\t`,\r\n\t];\r\n}\r\n\r\nexport { UmbDeleteWithRelationConfirmModalElement as element };\r\n\r\ndeclare global {\r\n\tinterface HTMLElementTagNameMap {\r\n\t\t'umb-delete-with-relation-confirm-modal': UmbDeleteWithRelationConfirmModalElement;\r\n\t}\r\n}\r\n"],"names":["_itemRepository","_UmbDeleteWithRelationConfirmModalElement_instances","initData_fn","UmbDeleteWithRelationConfirmModalElement","UmbModalBaseElement","__privateAdd","_changedProperties","__privateMethod","headline","content","html","unsafeHTML","nothing","umbFocus","__privateGet","__privateSet","createExtensionApiByAlias","data","item","UmbTextStyles","css","__decorateClass","state","customElement"],"mappings":";;;;;;;;;;;wXAAAA,GAAAC,GAAAC;AAqBa,IAAAC,IAAN,cAAuDC,EAG5D;AAAA,EAHK,cAAA;AAAA,UAAA,GAAA,SAAA,GAAAC,EAAA,MAAAJ,CAAA,GAUNI,EAAA,MAAAL,CAAA;AAAA,EAAA;AAAA,EAEmB,aAAaM,GAA0C;AACzE,UAAM,aAAaA,CAAkB,GACrCC,EAAA,MAAKN,GAALC,CAAA,EAAA,KAAA,IAAA;AAAA,EAAA;AAAA,EAwBQ,SAAS;AACjB,UAAMM,IAAW,KAAK,SAAS,OAAO,iBAAiB,GACjDC,IAAU,KAAK,SAAS,OAAO,iCAAiC,KAAK,KAAK;AAEzE,WAAAC;AAAA,kDACyCF,CAAQ;AAAA,SACjDG,EAAWF,CAAO,CAAC;AAAA,MACtB,KAAK,oBACJC;AAAA,iBACU,KAAK,iBAAiB,mDAChCE,CAAO;AAAA;AAAA;AAAA;AAAA;AAAA,aAKD,KAAK,SAAS,KAAK,gBAAgB,CAAC;AAAA,cACnC,KAAK,YAAY;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,aAOlB,KAAK,SAAS,KAAK,gBAAgB,CAAC;AAAA,cACnC,KAAK,YAAY;AAAA,OACxBC,GAAU;AAAA;AAAA;AAAA,EAAA;AAajB;AAlECb,IAAA,oBAAA,QAAA;AAVMC,IAAA,oBAAA,QAAA;AAiBAC,IAAS,iBAAG;AACb,MAAA,CAAC,KAAK,MAAM;AACf,IAAAY,EAAA,MAAKd,IAAiB,QAAQ;AAC9B;AAAA,EAAA;AAGD,EAAAe,EAAA,MAAKf,GAAkB,MAAMgB,EAAkD,MAAM,KAAK,KAAK,mBAAmB,CAAA;AAE5G,QAAA,EAAE,MAAAC,EAAK,IAAI,MAAMH,EAAA,MAAKd,CAAgB,EAAA,aAAa,CAAC,KAAK,KAAK,MAAM,CAAC,GACrEkB,IAAOD,IAAO,CAAC;AACrB,MAAI,CAACC,EAAY,OAAA,IAAI,MAAM,iBAAiB;AAE5C,OAAK,QAAQA,EAAK,MAElB,KAAK,oBAAoB;AAAA,IACxB,QAAQ,KAAK,KAAK;AAAA,IAClB,qBAAqB,KAAK,KAAK;AAAA,IAC/B,0BAA0B,KAAK,KAAK;AAAA,EACrC;AACD;AApCYf,EAoEI,SAAS;AAAA,EACxBgB;AAAA,EACAC;AAAA;AAAA;AAAA;AAAA;AAKD;AAtEAC,EAAA;AAAA,EADCC,EAAM;AAAA,GAJKnB,EAKZ,WAAA,SAAA,CAAA;AAGAkB,EAAA;AAAA,EADCC,EAAM;AAAA,GAPKnB,EAQZ,WAAA,qBAAA,CAAA;AARYA,IAANkB,EAAA;AAAA,EADNE,EAAc,wCAAwC;AAAA,GAC1CpB,CAAA;"}