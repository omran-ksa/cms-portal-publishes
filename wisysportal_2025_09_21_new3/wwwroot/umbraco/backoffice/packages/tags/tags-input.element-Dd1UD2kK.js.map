{"version":3,"file":"tags-input.element-Dd1UD2kK.js","sources":["../../../src/packages/tags/components/tags-input/tags-input.element.ts"],"sourcesContent":["import { UmbTagRepository } from '../../repository/tag.repository.js';\r\nimport {\r\n\tcss,\r\n\thtml,\r\n\tnothing,\r\n\tcustomElement,\r\n\tproperty,\r\n\tquery,\r\n\tqueryAll,\r\n\tstate,\r\n\trepeat,\r\n} from '@umbraco-cms/backoffice/external/lit';\r\nimport type { UUIInputElement, UUIInputEvent, UUITagElement } from '@umbraco-cms/backoffice/external/uui';\r\nimport { UUIFormControlMixin } from '@umbraco-cms/backoffice/external/uui';\r\nimport { UmbLitElement } from '@umbraco-cms/backoffice/lit-element';\r\nimport type { TagResponseModel } from '@umbraco-cms/backoffice/external/backend-api';\r\n\r\n@customElement('umb-tags-input')\r\nexport class UmbTagsInputElement extends UUIFormControlMixin(UmbLitElement, '') {\r\n\t@property({ type: String })\r\n\tgroup?: string;\r\n\r\n\t@property({ type: String })\r\n\tculture?: string | null;\r\n\r\n\t_items: string[] = [];\r\n\t@property({ type: Array })\r\n\tpublic set items(newTags: string[]) {\r\n\t\tconst newItems = newTags.filter((x) => x !== '');\r\n\t\tthis._items = newItems;\r\n\t\tsuper.value = this._items.join(',');\r\n\t}\r\n\tpublic get items(): string[] {\r\n\t\treturn this._items;\r\n\t}\r\n\r\n\t/**\r\n\t * Sets the input to readonly mode, meaning value cannot be changed but still able to read and select its content.\r\n\t * @type {boolean}\r\n\t * @attr\r\n\t * @default false\r\n\t */\r\n\t@property({ type: Boolean, reflect: true })\r\n\treadonly = false;\r\n\r\n\t@state()\r\n\tprivate _matches: Array<TagResponseModel> = [];\r\n\r\n\t@state()\r\n\tprivate _currentInput = '';\r\n\r\n\t@query('#main-tag')\r\n\tprivate _mainTag!: UUITagElement;\r\n\r\n\t@query('#tag-input')\r\n\tprivate _tagInput!: UUIInputElement;\r\n\r\n\t@query('#input-width-tracker')\r\n\tprivate _widthTracker!: HTMLElement;\r\n\r\n\t@queryAll('.options')\r\n\tprivate _optionCollection?: HTMLCollectionOf<HTMLInputElement>;\r\n\r\n\t#repository = new UmbTagRepository(this);\r\n\r\n\tpublic override focus() {\r\n\t\tthis._tagInput.focus();\r\n\t}\r\n\r\n\tprotected override getFormElement() {\r\n\t\treturn undefined;\r\n\t}\r\n\r\n\tasync #getExistingTags(query: string) {\r\n\t\tif (!this.group || this.culture === undefined || !query) return;\r\n\t\tconst { data } = await this.#repository.queryTags(this.group, this.culture, query);\r\n\t\tif (!data) return;\r\n\t\tthis._matches = data.items;\r\n\t}\r\n\r\n\t#onKeydown(e: KeyboardEvent) {\r\n\t\t//Prevent tab away if there is a input.\r\n\t\tif (e.key === 'Tab' && (this._tagInput.value as string).trim().length && !this._matches.length) {\r\n\t\t\te.preventDefault();\r\n\t\t\tthis.#createTag();\r\n\t\t\treturn;\r\n\t\t}\r\n\t\tif (e.key === 'Enter') {\r\n\t\t\tthis.#createTag();\r\n\t\t\treturn;\r\n\t\t}\r\n\t\tif (e.key === 'ArrowDown' || e.key === 'Tab') {\r\n\t\t\te.preventDefault();\r\n\t\t\tthis._currentInput = this._optionCollection?.item(0)?.value ?? this._currentInput;\r\n\t\t\tthis._optionCollection?.item(0)?.focus();\r\n\t\t\treturn;\r\n\t\t}\r\n\t\tthis.#inputError(false);\r\n\t}\r\n\r\n\t#onInput(e: UUIInputEvent) {\r\n\t\tthis._currentInput = e.target.value as string;\r\n\t\tif (!this._currentInput || !this._currentInput.length) {\r\n\t\t\tthis._matches = [];\r\n\t\t} else {\r\n\t\t\tthis.#getExistingTags(this._currentInput);\r\n\t\t}\r\n\t}\r\n\r\n\tprotected override updated(): void {\r\n\t\tthis._mainTag.style.width = `${this._widthTracker.offsetWidth - 4}px`;\r\n\t}\r\n\r\n\t#onBlur() {\r\n\t\tif (this._matches.length) return;\r\n\t\telse this.#createTag();\r\n\t}\r\n\r\n\t#createTag() {\r\n\t\tthis.#inputError(false);\r\n\t\tconst newTag = (this._tagInput.value as string).trim();\r\n\t\tif (!newTag) return;\r\n\r\n\t\tconst tagExists = this.items.find((tag) => tag === newTag);\r\n\t\tif (tagExists) return this.#inputError(true);\r\n\r\n\t\tthis.#inputError(false);\r\n\t\tthis.items = [...this.items, newTag];\r\n\t\tthis._tagInput.value = '';\r\n\t\tthis._currentInput = '';\r\n\t\tthis.dispatchEvent(new CustomEvent('change', { bubbles: true, composed: true }));\r\n\t}\r\n\r\n\t#inputError(error: boolean) {\r\n\t\tif (error) {\r\n\t\t\tthis._mainTag.style.border = '1px solid var(--uui-color-danger)';\r\n\t\t\tthis._tagInput.style.color = 'var(--uui-color-danger)';\r\n\t\t\treturn;\r\n\t\t}\r\n\t\tthis._mainTag.style.border = '';\r\n\t\tthis._tagInput.style.color = '';\r\n\t}\r\n\r\n\t#delete(tag: string) {\r\n\t\tconst currentItems = [...this.items];\r\n\t\tconst index = currentItems.findIndex((x) => x === tag);\r\n\t\tcurrentItems.splice(index, 1);\r\n\t\tif (currentItems.length) {\r\n\t\t\tthis.items = currentItems;\r\n\t\t} else {\r\n\t\t\tthis.items = [];\r\n\t\t}\r\n\t\tthis.dispatchEvent(new CustomEvent('change', { bubbles: true, composed: true }));\r\n\t}\r\n\r\n\t/** Dropdown */\r\n\r\n\t#optionClick(index: number) {\r\n\t\tthis._tagInput.value = this._optionCollection?.item(index)?.value ?? '';\r\n\t\tthis.#createTag();\r\n\t\tthis.focus();\r\n\t\treturn;\r\n\t}\r\n\r\n\t#optionKeydown(e: KeyboardEvent, index: number) {\r\n\t\tif (e.key === 'Enter' || e.key === 'Tab') {\r\n\t\t\te.preventDefault();\r\n\t\t\tthis._currentInput = this._optionCollection?.item(index)?.value ?? '';\r\n\t\t\tthis.#createTag();\r\n\t\t\tthis.focus();\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tif (e.key === 'ArrowDown') {\r\n\t\t\te.preventDefault();\r\n\t\t\tif (!this._optionCollection?.item(index + 1)) return;\r\n\t\t\tthis._optionCollection?.item(index + 1)?.focus();\r\n\t\t\tthis._currentInput = this._optionCollection?.item(index + 1)?.value ?? '';\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tif (e.key === 'ArrowUp') {\r\n\t\t\te.preventDefault();\r\n\t\t\tif (!this._optionCollection?.item(index - 1)) return;\r\n\t\t\tthis._optionCollection?.item(index - 1)?.focus();\r\n\t\t\tthis._currentInput = this._optionCollection?.item(index - 1)?.value ?? '';\r\n\t\t}\r\n\r\n\t\tif (e.key === 'Backspace') {\r\n\t\t\tthis.focus();\r\n\t\t}\r\n\t}\r\n\r\n\t/** Render */\r\n\r\n\toverride render() {\r\n\t\treturn html`\r\n\t\t\t<div id=\"wrapper\">\r\n\t\t\t\t${this.#enteredTags()}\r\n\t\t\t\t<span id=\"main-tag-wrapper\">\r\n\t\t\t\t\t<uui-tag id=\"input-width-tracker\" aria-hidden=\"true\" style=\"visibility:hidden;opacity:0;position:absolute;\">\r\n\t\t\t\t\t\t${this._currentInput}\r\n\t\t\t\t\t</uui-tag>\r\n\t\t\t\t\t${this.#renderAddButton()}\r\n\t\t\t\t</span>\r\n\t\t\t</div>\r\n\t\t`;\r\n\t}\r\n\r\n\t#enteredTags() {\r\n\t\treturn html` ${this.items.map((tag) => {\r\n\t\t\treturn html`\r\n\t\t\t\t<uui-tag class=\"tag\">\r\n\t\t\t\t\t<span>${tag}</span>\r\n\t\t\t\t\t${this.#renderRemoveButton(tag)}\r\n\t\t\t\t</uui-tag>\r\n\t\t\t`;\r\n\t\t})}`;\r\n\t}\r\n\r\n\t#renderTagOptions() {\r\n\t\tif (!this._currentInput.length || !this._matches.length) return nothing;\r\n\t\tconst matchfilter = this._matches.filter((tag) => tag.text !== this._items.find((x) => x === tag.text));\r\n\t\tif (!matchfilter.length) return;\r\n\t\treturn html`\r\n\t\t\t<div id=\"matchlist\">\r\n\t\t\t\t${repeat(\r\n\t\t\t\t\tmatchfilter.slice(0, 5),\r\n\t\t\t\t\t(tag: TagResponseModel) => tag.id,\r\n\t\t\t\t\t(tag: TagResponseModel, index: number) => {\r\n\t\t\t\t\t\treturn html` <input\r\n\t\t\t\t\t\t\t\tclass=\"options\"\r\n\t\t\t\t\t\t\t\tid=\"tag-${tag.id}\"\r\n\t\t\t\t\t\t\t\ttype=\"radio\"\r\n\t\t\t\t\t\t\t\tname=\"${tag.group ?? ''}\"\r\n\t\t\t\t\t\t\t\t@click=\"${() => this.#optionClick(index)}\"\r\n\t\t\t\t\t\t\t\t@keydown=\"${(e: KeyboardEvent) => this.#optionKeydown(e, index)}\"\r\n\t\t\t\t\t\t\t\tvalue=\"${tag.text ?? ''}\"\r\n\t\t\t\t\t\t\t\t?readonly=${this.readonly} />\r\n\t\t\t\t\t\t\t<label for=\"tag-${tag.id}\"> ${tag.text} </label>`;\r\n\t\t\t\t\t},\r\n\t\t\t\t)}\r\n\t\t\t</div>\r\n\t\t`;\r\n\t}\r\n\r\n\t#renderAddButton() {\r\n\t\tif (this.readonly) return nothing;\r\n\r\n\t\treturn html`\r\n\t\t\t<uui-tag look=\"outline\" id=\"main-tag\" @click=\"${this.focus}\" slot=\"trigger\">\r\n\t\t\t\t<input\r\n\t\t\t\t\tid=\"tag-input\"\r\n\t\t\t\t\taria-label=\"tag input\"\r\n\t\t\t\t\tplaceholder=\"Enter tag\"\r\n\t\t\t\t\t.value=\"${this._currentInput ?? undefined}\"\r\n\t\t\t\t\t@keydown=\"${this.#onKeydown}\"\r\n\t\t\t\t\t@input=\"${this.#onInput}\"\r\n\t\t\t\t\t@blur=\"${this.#onBlur}\" />\r\n\t\t\t\t<uui-icon id=\"icon-add\" name=\"icon-add\"></uui-icon>\r\n\t\t\t\t${this.#renderTagOptions()}\r\n\t\t\t</uui-tag>\r\n\t\t`;\r\n\t}\r\n\r\n\t#renderRemoveButton(tag: string) {\r\n\t\tif (this.readonly) return nothing;\r\n\t\treturn html` <uui-icon name=\"icon-wrong\" @click=\"${() => this.#delete(tag)}\"></uui-icon> `;\r\n\t}\r\n\r\n\tstatic override styles = [\r\n\t\tcss`\r\n\t\t\t#wrapper {\r\n\t\t\t\tbox-sizing: border-box;\r\n\t\t\t\tdisplay: flex;\r\n\t\t\t\tgap: var(--uui-size-space-2);\r\n\t\t\t\tflex-wrap: wrap;\r\n\t\t\t\talign-items: center;\r\n\t\t\t\tpadding: var(--uui-size-space-2);\r\n\t\t\t\tborder: 1px solid var(--uui-color-border);\r\n\t\t\t\tborder-radius: var(--uui-border-radius);\r\n\t\t\t\tbackground-color: var(--uui-input-background-color, var(--uui-color-surface));\r\n\t\t\t\tflex: 1;\r\n\t\t\t\tmin-height: 40px;\r\n\t\t\t}\r\n\r\n\t\t\t#main-tag-wrapper {\r\n\t\t\t\tposition: relative;\r\n\t\t\t}\r\n\r\n\t\t\t/** Tags */\r\n\r\n\t\t\tuui-tag {\r\n\t\t\t\tposition: relative;\r\n\t\t\t\tmax-width: 200px;\r\n\t\t\t}\r\n\r\n\t\t\tuui-tag uui-icon {\r\n\t\t\t\tcursor: pointer;\r\n\t\t\t\tmin-width: 12.8px !important;\r\n\t\t\t}\r\n\r\n\t\t\tuui-tag span {\r\n\t\t\t\toverflow: hidden;\r\n\t\t\t\ttext-overflow: ellipsis;\r\n\t\t\t\twhite-space: nowrap;\r\n\t\t\t}\r\n\r\n\t\t\t/** Created tags */\r\n\r\n\t\t\t.tag uui-icon {\r\n\t\t\t\tmargin-left: var(--uui-size-space-2);\r\n\t\t\t}\r\n\r\n\t\t\t.tag uui-icon:hover,\r\n\t\t\t.tag uui-icon:active {\r\n\t\t\t\tcolor: var(--uui-color-selected-contrast);\r\n\t\t\t}\r\n\r\n\t\t\t/** Main tag */\r\n\r\n\t\t\t#main-tag {\r\n\t\t\t\tpadding: 3px;\r\n\t\t\t\tbackground-color: var(--uui-color-selected-contrast);\r\n\t\t\t\tmin-width: 20px;\r\n\t\t\t\tposition: relative;\r\n\t\t\t\tborder-radius: var(--uui-size-5, 12px);\r\n\t\t\t}\r\n\r\n\t\t\t#main-tag uui-icon {\r\n\t\t\t\tposition: absolute;\r\n\t\t\t\ttop: 50%;\r\n\t\t\t\tleft: 50%;\r\n\t\t\t\ttransform: translate(-50%, -50%);\r\n\t\t\t}\r\n\r\n\t\t\t#main-tag:hover uui-icon,\r\n\t\t\t#main-tag:active uui-icon {\r\n\t\t\t\tcolor: var(--uui-color-selected);\r\n\t\t\t}\r\n\r\n\t\t\t#main-tag #tag-input:focus ~ uui-icon,\r\n\t\t\t#main-tag #tag-input:not(:placeholder-shown) ~ uui-icon {\r\n\t\t\t\tdisplay: none;\r\n\t\t\t}\r\n\r\n\t\t\t#main-tag:has(*:hover),\r\n\t\t\t#main-tag:has(*:active),\r\n\t\t\t#main-tag:has(*:focus) {\r\n\t\t\t\tborder: 1px solid var(--uui-color-selected-emphasis);\r\n\t\t\t}\r\n\r\n\t\t\t#main-tag:has(#tag-input:not(:focus)):hover {\r\n\t\t\t\tcursor: pointer;\r\n\t\t\t\tborder: 1px solid var(--uui-color-selected-emphasis);\r\n\t\t\t}\r\n\r\n\t\t\t#main-tag:not(:focus-within) #tag-input:placeholder-shown {\r\n\t\t\t\topacity: 0;\r\n\t\t\t}\r\n\r\n\t\t\t#main-tag:has(#tag-input:focus),\r\n\t\t\t#main-tag:has(#tag-input:not(:placeholder-shown)) {\r\n\t\t\t\tmin-width: 65px;\r\n\t\t\t}\r\n\r\n\t\t\t#main-tag #tag-input {\r\n\t\t\t\tbox-sizing: border-box;\r\n\t\t\t\tmax-height: 25.8px;\r\n\t\t\t\tbackground: none;\r\n\t\t\t\tfont: inherit;\r\n\t\t\t\tcolor: var(--uui-color-selected);\r\n\t\t\t\tline-height: reset;\r\n\t\t\t\tpadding: 0 var(--uui-size-space-2);\r\n\t\t\t\tmargin: 0.5px 0 -0.5px;\r\n\t\t\t\tborder: none;\r\n\t\t\t\toutline: none;\r\n\t\t\t\twidth: 100%;\r\n\t\t\t}\r\n\r\n\t\t\t/** Dropdown matchlist */\r\n\r\n\t\t\t#matchlist input[type='radio'] {\r\n\t\t\t\t-webkit-appearance: none;\r\n\t\t\t\tappearance: none;\r\n\t\t\t\t/* For iOS < 15 to remove gradient background */\r\n\t\t\t\tbackground-color: transparent;\r\n\t\t\t\t/* Not removed via appearance */\r\n\t\t\t\tmargin: 0;\r\n\t\t\t}\r\n\r\n\t\t\tuui-tag:focus-within #matchlist {\r\n\t\t\t\tdisplay: flex;\r\n\t\t\t}\r\n\r\n\t\t\t#matchlist {\r\n\t\t\t\tdisplay: flex;\r\n\t\t\t\tflex-direction: column;\r\n\t\t\t\tbackground-color: var(--uui-color-surface);\r\n\t\t\t\tposition: absolute;\r\n\t\t\t\twidth: 150px;\r\n\t\t\t\tleft: 0;\r\n\t\t\t\ttop: var(--uui-size-space-6);\r\n\t\t\t\tborder-radius: var(--uui-border-radius);\r\n\t\t\t\tborder: 1px solid var(--uui-color-border);\r\n\t\t\t\tz-index: 10;\r\n\t\t\t}\r\n\r\n\t\t\t#matchlist label {\r\n\t\t\t\tdisplay: none;\r\n\t\t\t\tcursor: pointer;\r\n\t\t\t\tbox-sizing: border-box;\r\n\t\t\t\tdisplay: block;\r\n\t\t\t\twidth: 100%;\r\n\t\t\t\tbackground: none;\r\n\t\t\t\tborder: none;\r\n\t\t\t\ttext-align: left;\r\n\t\t\t\tpadding: 10px 12px;\r\n\r\n\t\t\t\t/** Overflow */\r\n\t\t\t\toverflow: hidden;\r\n\t\t\t\ttext-overflow: ellipsis;\r\n\t\t\t\twhite-space: nowrap;\r\n\t\t\t}\r\n\r\n\t\t\t#matchlist label:hover,\r\n\t\t\t#matchlist label:focus,\r\n\t\t\t#matchlist label:focus-within,\r\n\t\t\t#matchlist input[type='radio']:focus + label {\r\n\t\t\t\tdisplay: block;\r\n\t\t\t\tbackground-color: var(--uui-color-focus);\r\n\t\t\t\tcolor: var(--uui-color-selected-contrast);\r\n\t\t\t}\r\n\t\t`,\r\n\t];\r\n}\r\n\r\nexport default UmbTagsInputElement;\r\n\r\ndeclare global {\r\n\tinterface HTMLElementTagNameMap {\r\n\t\t'umb-tags-input': UmbTagsInputElement;\r\n\t}\r\n}\r\n"],"names":["_repository","_UmbTagsInputElement_instances","getExistingTags_fn","onKeydown_fn","onInput_fn","onBlur_fn","createTag_fn","inputError_fn","delete_fn","optionClick_fn","optionKeydown_fn","enteredTags_fn","renderTagOptions_fn","renderAddButton_fn","renderRemoveButton_fn","UmbTagsInputElement","UUIFormControlMixin","UmbLitElement","__privateAdd","UmbTagRepository","newTags","newItems","x","html","__privateMethod","query","data","__privateGet","e","newTag","tag","error","currentItems","index","nothing","matchfilter","repeat","css","__decorateClass","property","state","queryAll","customElement"],"mappings":"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"}