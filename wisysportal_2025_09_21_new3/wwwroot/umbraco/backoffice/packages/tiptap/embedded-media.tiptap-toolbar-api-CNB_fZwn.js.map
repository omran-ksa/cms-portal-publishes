{"version":3,"file":"embedded-media.tiptap-toolbar-api-CNB_fZwn.js","sources":["../../../src/packages/tiptap/extensions/toolbar/embedded-media.tiptap-toolbar-api.ts"],"sourcesContent":["import { UmbTiptapToolbarElementApiBase } from '../base.js';\r\nimport { umbEmbeddedMedia } from '@umbraco-cms/backoffice/external/tiptap';\r\nimport { UMB_EMBEDDED_MEDIA_MODAL } from '@umbraco-cms/backoffice/embedded-media';\r\nimport { umbOpenModal } from '@umbraco-cms/backoffice/modal';\r\nimport type { Editor } from '@umbraco-cms/backoffice/external/tiptap';\r\n\r\nexport default class UmbTiptapToolbarEmbeddedMediaExtensionApi extends UmbTiptapToolbarElementApiBase {\r\n\toverride async execute(editor?: Editor) {\r\n\t\tconst data = {\r\n\t\t\tconstrain: false,\r\n\t\t\theight: 240,\r\n\t\t\twidth: 360,\r\n\t\t\turl: '',\r\n\t\t};\r\n\r\n\t\tconst attrs = editor?.getAttributes(umbEmbeddedMedia.name);\r\n\t\tif (attrs) {\r\n\t\t\tdata.constrain = attrs['data-embed-constrain'];\r\n\t\t\tdata.height = attrs['data-embed-height'];\r\n\t\t\tdata.width = attrs['data-embed-width'];\r\n\t\t\tdata.url = attrs['data-embed-url'];\r\n\t\t}\r\n\r\n\t\tconst result = await umbOpenModal(this, UMB_EMBEDDED_MEDIA_MODAL, { data }).catch(() => undefined);\r\n\r\n\t\tif (!result) return;\r\n\r\n\t\teditor?.commands.setEmbeddedMedia({\r\n\t\t\tmarkup: result.markup,\r\n\t\t\turl: result.url,\r\n\t\t\tconstrain: result.constrain,\r\n\t\t\theight: result.height?.toString(),\r\n\t\t\twidth: result.width?.toString(),\r\n\t\t});\r\n\t}\r\n}\r\n"],"names":["UmbTiptapToolbarEmbeddedMediaExtensionApi","UmbTiptapToolbarElementApiBase","editor","data","attrs","umbEmbeddedMedia","result","umbOpenModal","UMB_EMBEDDED_MEDIA_MODAL"],"mappings":";;;;AAMA,MAAqBA,UAAkDC,EAA+B;AAAA,EACrG,MAAe,QAAQC,GAAiB;AACvC,UAAMC,IAAO;AAAA,MACZ,WAAW;AAAA,MACX,QAAQ;AAAA,MACR,OAAO;AAAA,MACP,KAAK;AAAA,IACN,GAEMC,IAAQF,GAAQ,cAAcG,EAAiB,IAAI;AACzD,IAAID,MACED,EAAA,YAAYC,EAAM,sBAAsB,GACxCD,EAAA,SAASC,EAAM,mBAAmB,GAClCD,EAAA,QAAQC,EAAM,kBAAkB,GAChCD,EAAA,MAAMC,EAAM,gBAAgB;AAG5B,UAAAE,IAAS,MAAMC,EAAa,MAAMC,GAA0B,EAAE,MAAAL,GAAM,EAAE,MAAM,MAAA;AAAA,KAAe;AAEjG,IAAKG,KAELJ,GAAQ,SAAS,iBAAiB;AAAA,MACjC,QAAQI,EAAO;AAAA,MACf,KAAKA,EAAO;AAAA,MACZ,WAAWA,EAAO;AAAA,MAClB,QAAQA,EAAO,QAAQ,SAAS;AAAA,MAChC,OAAOA,EAAO,OAAO,SAAS;AAAA,IAAA,CAC9B;AAAA,EAAA;AAEH;"}