{"version":3,"file":"word-count.tiptap-statusbar-element-BRtYSXRt.js","sources":["../../../src/packages/tiptap/extensions/statusbar/word-count.tiptap-statusbar-element.ts"],"sourcesContent":["import { customElement, html, state } from '@umbraco-cms/backoffice/external/lit';\r\nimport type { Editor } from '@umbraco-cms/backoffice/external/tiptap';\r\nimport { UmbLitElement } from '@umbraco-cms/backoffice/lit-element';\r\n\r\n@customElement('umb-tiptap-statusbar-word-count')\r\nexport class UmbTiptapStatusbarWordCountElement extends UmbLitElement {\r\n\t@state()\r\n\tprivate _characters = 0;\r\n\r\n\t@state()\r\n\tprivate _words = 0;\r\n\r\n\t@state()\r\n\tprivate _showCharacters = false;\r\n\r\n\tpublic editor?: Editor;\r\n\r\n\toverride connectedCallback() {\r\n\t\tsuper.connectedCallback();\r\n\r\n\t\tif (this.editor) {\r\n\t\t\tthis.editor.on('update', this.#onEditorUpdate);\r\n\t\t\tthis.#onEditorUpdate();\r\n\t\t}\r\n\t}\r\n\r\n\toverride disconnectedCallback() {\r\n\t\tsuper.disconnectedCallback();\r\n\r\n\t\tif (this.editor) {\r\n\t\t\tthis.editor.off('update', this.#onEditorUpdate);\r\n\t\t}\r\n\t}\r\n\r\n\treadonly #onEditorUpdate = () => {\r\n\t\tthis._characters = this.editor?.storage.characterCount.characters() ?? 0;\r\n\t\tthis._words = this.editor?.storage.characterCount.words() ?? 0;\r\n\t};\r\n\r\n\treadonly #onClick = () => (this._showCharacters = !this._showCharacters);\r\n\r\n\toverride render() {\r\n\t\tconst label = this._showCharacters\r\n\t\t\t? this._characters.toLocaleString() + ' ' + (this._characters === 1 ? 'character' : 'characters')\r\n\t\t\t: this._words.toLocaleString() + ' ' + (this._words === 1 ? 'word' : 'words');\r\n\t\treturn html`<uui-button compact label=${label} @click=${this.#onClick}></uui-button>`;\r\n\t}\r\n}\r\n\r\nexport { UmbTiptapStatusbarWordCountElement as element };\r\n\r\ndeclare global {\r\n\tinterface HTMLElementTagNameMap {\r\n\t\t'umb-tiptap-statusbar-word-count': UmbTiptapStatusbarWordCountElement;\r\n\t}\r\n}\r\n"],"names":["_onEditorUpdate","_onClick","UmbTiptapStatusbarWordCountElement","UmbLitElement","__privateAdd","__privateGet","label","html","__decorateClass","state","customElement"],"mappings":";;;;;;;;uQAAAA,GAAAC;AAKa,IAAAC,IAAN,cAAiDC,EAAc;AAAA,EAA/D,cAAA;AAAA,UAAA,GAAA,SAAA,GAEN,KAAQ,cAAc,GAGtB,KAAQ,SAAS,GAGjB,KAAQ,kBAAkB,IAqB1BC,EAAA,MAASJ,GAAkB,MAAM;AAChC,WAAK,cAAc,KAAK,QAAQ,QAAQ,eAAe,gBAAgB,GACvE,KAAK,SAAS,KAAK,QAAQ,QAAQ,eAAe,WAAW;AAAA,IAAA,CAC9D,GAEAI,EAAA,MAASH,GAAW,MAAO,KAAK,kBAAkB,CAAC,KAAK,eAAA;AAAA,EAAA;AAAA,EAtB/C,oBAAoB;AAC5B,UAAM,kBAAkB,GAEpB,KAAK,WACR,KAAK,OAAO,GAAG,UAAUI,EAAA,MAAKL,CAAe,CAAA,GAC7CK,EAAA,MAAKL,CAAL,EAAA,KAAA,IAAA;AAAA,EACD;AAAA,EAGQ,uBAAuB;AAC/B,UAAM,qBAAqB,GAEvB,KAAK,UACR,KAAK,OAAO,IAAI,UAAUK,EAAA,MAAKL,CAAe,CAAA;AAAA,EAC/C;AAAA,EAUQ,SAAS;AACX,UAAAM,IAAQ,KAAK,kBAChB,KAAK,YAAY,eAAe,IAAI,OAAO,KAAK,gBAAgB,IAAI,cAAc,gBAClF,KAAK,OAAO,mBAAmB,OAAO,KAAK,WAAW,IAAI,SAAS;AACtE,WAAOC,8BAAiCD,CAAK,WAAWD,EAAA,MAAKJ,CAAQ,CAAA;AAAA,EAAA;AAEvE;AAbUD,IAAA,oBAAA,QAAA;AAKAC,IAAA,oBAAA,QAAA;AAhCDO,EAAA;AAAA,EADPC,EAAM;AAAA,GADKP,EAEJ,WAAA,eAAA,CAAA;AAGAM,EAAA;AAAA,EADPC,EAAM;AAAA,GAJKP,EAKJ,WAAA,UAAA,CAAA;AAGAM,EAAA;AAAA,EADPC,EAAM;AAAA,GAPKP,EAQJ,WAAA,mBAAA,CAAA;AARIA,IAANM,EAAA;AAAA,EADNE,EAAc,iCAAiC;AAAA,GACnCR,CAAA;"}