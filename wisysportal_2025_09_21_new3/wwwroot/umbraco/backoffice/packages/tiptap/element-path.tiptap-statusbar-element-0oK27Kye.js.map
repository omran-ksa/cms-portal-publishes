{"version":3,"file":"element-path.tiptap-statusbar-element-0oK27Kye.js","sources":["../../../src/packages/tiptap/extensions/statusbar/element-path.tiptap-statusbar-element.ts"],"sourcesContent":["import { css, customElement, html, map, nothing, state } from '@umbraco-cms/backoffice/external/lit';\r\nimport { UmbLitElement } from '@umbraco-cms/backoffice/lit-element';\r\nimport type { Editor } from '@umbraco-cms/backoffice/external/tiptap';\r\n\r\n@customElement('umb-tiptap-statusbar-element-path')\r\nexport class UmbTiptapStatusbarElementPathElement extends UmbLitElement {\r\n\t@state()\r\n\tprivate _path?: Array<string>;\r\n\r\n\tpublic editor?: Editor;\r\n\r\n\toverride connectedCallback() {\r\n\t\tsuper.connectedCallback();\r\n\r\n\t\tif (this.editor) {\r\n\t\t\tthis.editor.on('selectionUpdate', this.#onEditorSelectionUpdate);\r\n\t\t\tthis.#onEditorSelectionUpdate();\r\n\t\t}\r\n\t}\r\n\r\n\toverride disconnectedCallback() {\r\n\t\tsuper.disconnectedCallback();\r\n\r\n\t\tif (this.editor) {\r\n\t\t\tthis.editor.off('selectionUpdate', this.#onEditorSelectionUpdate);\r\n\t\t}\r\n\t}\r\n\r\n\treadonly #onEditorSelectionUpdate = () => {\r\n\t\tlet dom = this.editor?.view.domAtPos(this.editor!.state.selection.from).node;\r\n\r\n\t\tthis._path = [];\r\n\r\n\t\twhile (dom) {\r\n\t\t\tif (!this.editor?.view.dom.contains(dom)) break;\r\n\r\n\t\t\tif (dom.nodeType === dom.ELEMENT_NODE && dom instanceof HTMLElement) {\r\n\t\t\t\tlet tagName = dom.nodeName.toLocaleLowerCase();\r\n\r\n\t\t\t\tif (dom.id) {\r\n\t\t\t\t\ttagName += `#${dom.id}`;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif (dom.classList.length) {\r\n\t\t\t\t\ttagName += `${['', ...dom.classList].join('.')}`;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tthis._path.push(tagName);\r\n\t\t\t}\r\n\r\n\t\t\tif (!dom.parentElement) break;\r\n\r\n\t\t\tdom = dom.parentElement;\r\n\t\t}\r\n\r\n\t\tthis._path.reverse().shift();\r\n\t};\r\n\r\n\toverride render() {\r\n\t\tif (!this._path) return nothing;\r\n\t\treturn map(this._path, (item) => html`<code>${item}</code>`);\r\n\t}\r\n\r\n\tstatic override readonly styles = [\r\n\t\tcss`\r\n\t\t\t:host {\r\n\t\t\t\tdisplay: flex;\r\n\t\t\t\tgap: 0.5rem;\r\n\r\n\t\t\t\tfont-size: var(--uui-type-small-size);\r\n\t\t\t\tcolor: var(--uui-color-text-alt);\r\n\t\t\t}\r\n\r\n\t\t\tcode:not(:last-of-type)::after {\r\n\t\t\t\tcontent: '>';\r\n\t\t\t\tmargin-left: 0.5rem;\r\n\t\t\t}\r\n\t\t`,\r\n\t];\r\n}\r\n\r\nexport { UmbTiptapStatusbarElementPathElement as element };\r\n\r\ndeclare global {\r\n\tinterface HTMLElementTagNameMap {\r\n\t\t'umb-tiptap-statusbar-element-path': UmbTiptapStatusbarElementPathElement;\r\n\t}\r\n}\r\n"],"names":["_onEditorSelectionUpdate","UmbTiptapStatusbarElementPathElement","UmbLitElement","__privateAdd","dom","tagName","__privateGet","map","item","html","nothing","css","__decorateClass","state","customElement"],"mappings":";;;;;;;;uQAAAA;AAKa,IAAAC,IAAN,cAAmDC,EAAc;AAAA,EAAjE,cAAA;AAAA,UAAA,GAAA,SAAA,GAuBNC,EAAA,MAASH,GAA2B,MAAM;AACrC,UAAAI,IAAM,KAAK,QAAQ,KAAK,SAAS,KAAK,OAAQ,MAAM,UAAU,IAAI,EAAE;AAIxE,WAFA,KAAK,QAAQ,CAAC,GAEPA,KACD,KAAK,QAAQ,KAAK,IAAI,SAASA,CAAG,KAD5B;AAGX,YAAIA,EAAI,aAAaA,EAAI,gBAAgBA,aAAe,aAAa;AAChE,cAAAC,IAAUD,EAAI,SAAS,kBAAkB;AAE7C,UAAIA,EAAI,OACIC,KAAA,IAAID,EAAI,EAAE,KAGlBA,EAAI,UAAU,WACNC,KAAA,GAAG,CAAC,IAAI,GAAGD,EAAI,SAAS,EAAE,KAAK,GAAG,CAAC,KAG1C,KAAA,MAAM,KAAKC,CAAO;AAAA,QAAA;AAGpB,YAAA,CAACD,EAAI,cAAe;AAExB,QAAAA,IAAMA,EAAI;AAAA,MAAA;AAGN,WAAA,MAAM,QAAQ,EAAE,MAAM;AAAA,IAAA,CAC5B;AAAA,EAAA;AAAA,EA7CS,oBAAoB;AAC5B,UAAM,kBAAkB,GAEpB,KAAK,WACR,KAAK,OAAO,GAAG,mBAAmBE,EAAA,MAAKN,CAAwB,CAAA,GAC/DM,EAAA,MAAKN,CAAL,EAAA,KAAA,IAAA;AAAA,EACD;AAAA,EAGQ,uBAAuB;AAC/B,UAAM,qBAAqB,GAEvB,KAAK,UACR,KAAK,OAAO,IAAI,mBAAmBM,EAAA,MAAKN,CAAwB,CAAA;AAAA,EACjE;AAAA,EAiCQ,SAAS;AACb,WAAC,KAAK,QACHO,EAAI,KAAK,OAAO,CAACC,MAASC,UAAaD,CAAI,SAAS,IADnCE;AAAA,EACmC;AAmB7D;AAnDUV,IAAA,oBAAA,QAAA;AAvBGC,EA0Da,SAAS;AAAA,EACjCU;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAcD;AAvEQC,EAAA;AAAA,EADPC,EAAM;AAAA,GADKZ,EAEJ,WAAA,SAAA,CAAA;AAFIA,IAANW,EAAA;AAAA,EADNE,EAAc,mCAAmC;AAAA,GACrCb,CAAA;"}