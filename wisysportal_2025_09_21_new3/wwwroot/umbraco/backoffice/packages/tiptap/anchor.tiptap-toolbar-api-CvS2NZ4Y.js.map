{"version":3,"file":"anchor.tiptap-toolbar-api-CvS2NZ4Y.js","sources":["../../../src/packages/tiptap/extensions/toolbar/anchor.tiptap-toolbar-api.ts"],"sourcesContent":["import { UmbTiptapToolbarElementApiBase } from '../base.js';\r\nimport { UMB_TIPTAP_ANCHOR_MODAL } from '../../components/anchor-modal/index.js';\r\nimport { Anchor } from '@umbraco-cms/backoffice/external/tiptap';\r\nimport { UMB_MODAL_MANAGER_CONTEXT } from '@umbraco-cms/backoffice/modal';\r\nimport type { Editor } from '@umbraco-cms/backoffice/external/tiptap';\r\n\r\nexport default class UmbTiptapToolbarAnchorExtensionApi extends UmbTiptapToolbarElementApiBase {\r\n\toverride async execute(editor?: Editor) {\r\n\t\tconst attrs = editor?.getAttributes(Anchor.name);\r\n\t\tif (!attrs) return;\r\n\r\n\t\tconst modalManager = await this.getContext(UMB_MODAL_MANAGER_CONTEXT);\r\n\t\tif (!modalManager) throw new Error('Modal manager not found');\r\n\t\tconst modal = modalManager.open(this, UMB_TIPTAP_ANCHOR_MODAL, { data: { id: attrs?.id } });\r\n\t\tif (!modal) return;\r\n\r\n\t\tconst result = await modal.onSubmit().catch(() => undefined);\r\n\t\tif (!result) return;\r\n\r\n\t\teditor\r\n\t\t\t?.chain()\r\n\t\t\t.insertContent({ type: Anchor.name, attrs: { id: result } })\r\n\t\t\t.run();\r\n\t}\r\n}\r\n"],"names":["UmbTiptapToolbarAnchorExtensionApi","UmbTiptapToolbarElementApiBase","editor","attrs","Anchor","modalManager","UMB_MODAL_MANAGER_CONTEXT","modal","UMB_TIPTAP_ANCHOR_MODAL","result"],"mappings":";;;;AAMA,MAAqBA,UAA2CC,EAA+B;AAAA,EAC9F,MAAe,QAAQC,GAAiB;AACvC,UAAMC,IAAQD,GAAQ,cAAcE,EAAO,IAAI;AAC/C,QAAI,CAACD,EAAO;AAEZ,UAAME,IAAe,MAAM,KAAK,WAAWC,CAAyB;AACpE,QAAI,CAACD,EAAoB,OAAA,IAAI,MAAM,yBAAyB;AAC5D,UAAME,IAAQF,EAAa,KAAK,MAAMG,GAAyB,EAAE,MAAM,EAAE,IAAIL,GAAO,GAAG,EAAA,CAAG;AAC1F,QAAI,CAACI,EAAO;AAEZ,UAAME,IAAS,MAAMF,EAAM,WAAW,MAAM,MAAA;AAAA,KAAe;AAC3D,IAAKE,KAELP,GACG,MAAM,EACP,cAAc,EAAE,MAAME,EAAO,MAAM,OAAO,EAAE,IAAIK,EAAA,EAAU,CAAA,EAC1D,IAAI;AAAA,EAAA;AAER;"}