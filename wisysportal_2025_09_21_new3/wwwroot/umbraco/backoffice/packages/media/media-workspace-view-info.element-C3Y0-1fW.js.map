{"version":3,"file":"media-workspace-view-info.element-C3Y0-1fW.js","sources":["../../../src/packages/media/media/workspace/views/info/media-workspace-view-info.element.ts"],"sourcesContent":["import { UMB_MEDIA_WORKSPACE_CONTEXT } from '../../media-workspace.context-token.js';\r\nimport { TimeOptions } from '../../../audit-log/info-app/utils.js';\r\nimport { css, customElement, html, ifDefined, nothing, state } from '@umbraco-cms/backoffice/external/lit';\r\nimport { UmbLitElement } from '@umbraco-cms/backoffice/lit-element';\r\nimport type { UmbMediaTypeItemModel } from '@umbraco-cms/backoffice/media-type';\r\nimport { UMB_MEDIA_TYPE_ENTITY_TYPE, UmbMediaTypeItemRepository } from '@umbraco-cms/backoffice/media-type';\r\nimport { UmbModalRouteRegistrationController } from '@umbraco-cms/backoffice/router';\r\nimport { UmbTextStyles } from '@umbraco-cms/backoffice/style';\r\nimport { UMB_WORKSPACE_MODAL } from '@umbraco-cms/backoffice/workspace';\r\nimport { createExtensionApiByAlias } from '@umbraco-cms/backoffice/extension-registry';\r\nimport { UMB_SECTION_USER_PERMISSION_CONDITION_ALIAS } from '@umbraco-cms/backoffice/section';\r\nimport { UMB_SETTINGS_SECTION_ALIAS } from '@umbraco-cms/backoffice/settings';\r\n\r\n@customElement('umb-media-workspace-view-info')\r\nexport class UmbMediaWorkspaceViewInfoElement extends UmbLitElement {\r\n\t@state()\r\n\tprivate _mediaTypeUnique: string | undefined = undefined;\r\n\r\n\t@state()\r\n\tprivate _mediaTypeName?: UmbMediaTypeItemModel['name'];\r\n\r\n\t@state()\r\n\tprivate _mediaTypeIcon?: UmbMediaTypeItemModel['icon'];\r\n\r\n\t@state()\r\n\tprivate _editMediaTypePath = '';\r\n\r\n\t@state()\r\n\tprivate _mediaUnique = '';\r\n\r\n\t#workspaceContext?: typeof UMB_MEDIA_WORKSPACE_CONTEXT.TYPE;\r\n\r\n\t#mediaTypeItemRepository = new UmbMediaTypeItemRepository(this);\r\n\r\n\t@state()\r\n\tprivate _createDate?: string | null = null;\r\n\r\n\t@state()\r\n\tprivate _updateDate?: string | null = null;\r\n\r\n\t@state()\r\n\tprivate _hasSettingsAccess: boolean = false;\r\n\r\n\tconstructor() {\r\n\t\tsuper();\r\n\r\n\t\tnew UmbModalRouteRegistrationController(this, UMB_WORKSPACE_MODAL)\r\n\t\t\t.addAdditionalPath('media-type')\r\n\t\t\t.onSetup(() => {\r\n\t\t\t\treturn { data: { entityType: UMB_MEDIA_TYPE_ENTITY_TYPE, preset: {} } };\r\n\t\t\t})\r\n\t\t\t.observeRouteBuilder((routeBuilder) => {\r\n\t\t\t\tthis._editMediaTypePath = routeBuilder({});\r\n\t\t\t});\r\n\r\n\t\tcreateExtensionApiByAlias(this, UMB_SECTION_USER_PERMISSION_CONDITION_ALIAS, [\r\n\t\t\t{\r\n\t\t\t\tconfig: {\r\n\t\t\t\t\tmatch: UMB_SETTINGS_SECTION_ALIAS,\r\n\t\t\t\t},\r\n\t\t\t\tonChange: (permitted: boolean) => {\r\n\t\t\t\t\tthis._hasSettingsAccess = permitted;\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t]);\r\n\r\n\t\tthis.consumeContext(UMB_MEDIA_WORKSPACE_CONTEXT, (context) => {\r\n\t\t\tthis.#workspaceContext = context;\r\n\t\t\tthis._mediaTypeUnique = context?.getContentTypeId();\r\n\t\t\tthis.#getData();\r\n\t\t\tthis.#observeContent();\r\n\t\t});\r\n\t}\r\n\r\n\tasync #getData() {\r\n\t\tif (!this.#workspaceContext) return;\r\n\t\tif (!this._mediaTypeUnique) throw new Error('Media type unique is not set');\r\n\t\tconst { data } = await this.#mediaTypeItemRepository.requestItems([this._mediaTypeUnique]);\r\n\t\tthis._mediaTypeName = data?.[0].name;\r\n\t\tthis._mediaTypeIcon = data?.[0].icon;\r\n\t}\r\n\r\n\t#observeContent() {\r\n\t\tthis.observe(\r\n\t\t\tthis.#workspaceContext?.unique,\r\n\t\t\t(unique) => {\r\n\t\t\t\tthis._mediaUnique = unique!;\r\n\t\t\t},\r\n\t\t\t'_mediaUnique',\r\n\t\t);\r\n\r\n\t\t/** TODO: Doubt this is the right way to get the create date... */\r\n\t\tthis.observe(\r\n\t\t\tthis.#workspaceContext?.variants,\r\n\t\t\t(variants) => {\r\n\t\t\t\tthis._createDate = variants?.[0]?.createDate;\r\n\t\t\t\tthis._updateDate = variants?.[0]?.updateDate;\r\n\t\t\t},\r\n\t\t\t'observeVariants',\r\n\t\t);\r\n\t}\r\n\r\n\toverride render() {\r\n\t\treturn html`\r\n\t\t\t<div class=\"container\">\r\n\t\t\t\t<umb-extension-slot id=\"workspace-info-apps\" type=\"workspaceInfoApp\"></umb-extension-slot>\r\n\t\t\t</div>\r\n\t\t\t<div class=\"container\">\r\n\t\t\t\t<uui-box headline=${this.localize.term('general_general')} id=\"general-section\"\r\n\t\t\t\t\t>${this.#renderGeneralSection()}</uui-box\r\n\t\t\t\t>\r\n\t\t\t</div>\r\n\t\t`;\r\n\t}\r\n\r\n\t#renderGeneralSection() {\r\n\t\treturn html`\r\n\t\t\t${this.#renderCreateDate()} ${this.#renderUpdateDate()}\r\n\t\t\t<div class=\"general-item\">\r\n\t\t\t\t<strong><umb-localize key=\"content_mediaType\">Media Type</umb-localize></strong>\r\n\t\t\t\t<uui-ref-node-document-type\r\n\t\t\t\t\tstandalone\r\n\t\t\t\t\thref=${ifDefined(\r\n\t\t\t\t\t\tthis._hasSettingsAccess ? this._editMediaTypePath + 'edit/' + this._mediaTypeUnique : undefined,\r\n\t\t\t\t\t)}\r\n\t\t\t\t\t?readonly=${!this._hasSettingsAccess}\r\n\t\t\t\t\tname=${ifDefined(this._mediaTypeName)}>\r\n\t\t\t\t\t${this._mediaTypeIcon ? html`<umb-icon slot=\"icon\" name=${this._mediaTypeIcon}></umb-icon>` : nothing}\r\n\t\t\t\t</uui-ref-node-document-type>\r\n\t\t\t</div>\r\n\t\t\t<div class=\"general-item\">\r\n\t\t\t\t<strong><umb-localize key=\"template_id\">Id</umb-localize></strong>\r\n\t\t\t\t<span>${this._mediaUnique}</span>\r\n\t\t\t</div>\r\n\t\t`;\r\n\t}\r\n\r\n\t#renderCreateDate() {\r\n\t\tif (!this._createDate) return nothing;\r\n\t\treturn html`\r\n\t\t\t<div class=\"general-item\">\r\n\t\t\t\t<strong><umb-localize key=\"content_createDate\"></umb-localize></strong>\r\n\t\t\t\t<span>\r\n\t\t\t\t\t<umb-localize-date .date=${this._createDate} .options=${TimeOptions}></umb-localize-date>\r\n\t\t\t\t</span>\r\n\t\t\t</div>\r\n\t\t`;\r\n\t}\r\n\r\n\t#renderUpdateDate() {\r\n\t\tif (!this._updateDate) return nothing;\r\n\t\treturn html`\r\n\t\t\t<div class=\"general-item\">\r\n\t\t\t\t<strong><umb-localize key=\"content_updateDate\"></umb-localize></strong>\r\n\t\t\t\t<span>\r\n\t\t\t\t\t<umb-localize-date .date=${this._updateDate} .options=${TimeOptions}></umb-localize-date>\r\n\t\t\t\t</span>\r\n\t\t\t</div>\r\n\t\t`;\r\n\t}\r\n\r\n\tstatic override styles = [\r\n\t\tUmbTextStyles,\r\n\t\tcss`\r\n\t\t\t:host {\r\n\t\t\t\tdisplay: grid;\r\n\t\t\t\tgap: var(--uui-size-layout-1);\r\n\t\t\t\tpadding: var(--uui-size-layout-1);\r\n\t\t\t\tgrid-template-columns: 1fr 350px;\r\n\t\t\t}\r\n\r\n\t\t\tdiv.container {\r\n\t\t\t\tdisplay: flex;\r\n\t\t\t\tflex-direction: column;\r\n\t\t\t\tgap: var(--uui-size-layout-1);\r\n\t\t\t}\r\n\r\n\t\t\t//General section\r\n\r\n\t\t\t#general-section {\r\n\t\t\t\tdisplay: flex;\r\n\t\t\t\tflex-direction: column;\r\n\t\t\t}\r\n\r\n\t\t\t.general-item {\r\n\t\t\t\tdisplay: flex;\r\n\t\t\t\tflex-direction: column;\r\n\t\t\t\tgap: var(--uui-size-space-1);\r\n\t\t\t}\r\n\r\n\t\t\t.general-item:not(:last-child) {\r\n\t\t\t\tmargin-bottom: var(--uui-size-space-6);\r\n\t\t\t}\r\n\r\n\t\t\tuui-ref-node-document-type[readonly] {\r\n\t\t\t\tpadding-top: 7px;\r\n\t\t\t\tpadding-bottom: 7px;\r\n\t\t\t}\r\n\t\t`,\r\n\t];\r\n}\r\n\r\nexport default UmbMediaWorkspaceViewInfoElement;\r\n\r\ndeclare global {\r\n\tinterface HTMLElementTagNameMap {\r\n\t\t'umb-media-workspace-view-info': UmbMediaWorkspaceViewInfoElement;\r\n\t}\r\n}\r\n"],"names":["_workspaceContext","_mediaTypeItemRepository","_UmbMediaWorkspaceViewInfoElement_instances","getData_fn","observeContent_fn","renderGeneralSection_fn","renderCreateDate_fn","renderUpdateDate_fn","UmbMediaWorkspaceViewInfoElement","UmbLitElement","__privateAdd","UmbMediaTypeItemRepository","UmbModalRouteRegistrationController","UMB_WORKSPACE_MODAL","UMB_MEDIA_TYPE_ENTITY_TYPE","routeBuilder","createExtensionApiByAlias","UMB_SECTION_USER_PERMISSION_CONDITION_ALIAS","UMB_SETTINGS_SECTION_ALIAS","permitted","UMB_MEDIA_WORKSPACE_CONTEXT","context","__privateSet","__privateMethod","html","__privateGet","data","unique","variants","ifDefined","nothing","TimeOptions","UmbTextStyles","css","__decorateClass","state","customElement","UmbMediaWorkspaceViewInfoElement$1"],"mappings":";;;;;;;;;;;;;;;;;wXAAAA,GAAAC,GAAAC,GAAAC,GAAAC,GAAAC,GAAAC,GAAAC;AAca,IAAAC,IAAN,cAA+CC,EAAc;AAAA,EA6BnE,cAAc;AACP,UAAA,GA9BDC,EAAA,MAAAR,CAAA,GAEN,KAAQ,mBAAuC,QAS/C,KAAQ,qBAAqB,IAG7B,KAAQ,eAAe,IAEvBQ,EAAA,MAAAV,CAAA,GAE2BU,EAAA,MAAAT,GAAA,IAAIU,EAA2B,IAAI,CAAA,GAG9D,KAAQ,cAA8B,MAGtC,KAAQ,cAA8B,MAGtC,KAAQ,qBAA8B,IAKjC,IAAAC,EAAoC,MAAMC,CAAmB,EAC/D,kBAAkB,YAAY,EAC9B,QAAQ,OACD,EAAE,MAAM,EAAE,YAAYC,GAA4B,QAAQ,CAAA,IAAK,EACtE,EACA,oBAAoB,CAACC,MAAiB;AACjC,WAAA,qBAAqBA,EAAa,EAAE;AAAA,IAAA,CACzC,GAEFC,EAA0B,MAAMC,GAA6C;AAAA,MAC5E;AAAA,QACC,QAAQ;AAAA,UACP,OAAOC;AAAA,QACR;AAAA,QACA,UAAU,CAACC,MAAuB;AACjC,eAAK,qBAAqBA;AAAA,QAAA;AAAA,MAC3B;AAAA,IACD,CACA,GAEI,KAAA,eAAeC,GAA6B,CAACC,MAAY;AAC7D,MAAAC,EAAA,MAAKtB,GAAoBqB,CAAA,GACpB,KAAA,mBAAmBA,GAAS,iBAAiB,GAClDE,EAAA,MAAKrB,GAALC,CAAA,EAAA,KAAA,IAAA,GACAoB,EAAA,MAAKrB,GAALE,CAAA,EAAA,KAAA,IAAA;AAAA,IAAA,CACA;AAAA,EAAA;AAAA,EA+BO,SAAS;AACV,WAAAoB;AAAA;AAAA;AAAA;AAAA;AAAA,wBAKe,KAAK,SAAS,KAAK,iBAAiB,CAAC;AAAA,QACrDD,EAAA,MAAKrB,MAAL,KAA4B,IAAA,CAAA;AAAA;AAAA;AAAA;AAAA,EAAA;AA2FpC;AA1KCF,IAAA,oBAAA,QAAA;AAEAC,IAAA,oBAAA,QAAA;AAlBMC,IAAA,oBAAA,QAAA;AA4DAC,IAAQ,iBAAG;AACZ,MAAA,CAACsB,QAAKzB,CAAmB,EAAA;AAC7B,MAAI,CAAC,KAAK,iBAAwB,OAAA,IAAI,MAAM,8BAA8B;AACpE,QAAA,EAAE,MAAA0B,EAAK,IAAI,MAAMD,EAAA,MAAKxB,GAAyB,aAAa,CAAC,KAAK,gBAAgB,CAAC;AACpF,OAAA,iBAAiByB,IAAO,CAAC,EAAE,MAC3B,KAAA,iBAAiBA,IAAO,CAAC,EAAE;AACjC;AAEAtB,IAAe,WAAG;AACZ,OAAA;AAAA,IACJqB,QAAKzB,CAAmB,GAAA;AAAA,IACxB,CAAC2B,MAAW;AACX,WAAK,eAAeA;AAAA,IACrB;AAAA,IACA;AAAA,EACD,GAGK,KAAA;AAAA,IACJF,QAAKzB,CAAmB,GAAA;AAAA,IACxB,CAAC4B,MAAa;AACR,WAAA,cAAcA,IAAW,CAAC,GAAG,YAC7B,KAAA,cAAcA,IAAW,CAAC,GAAG;AAAA,IACnC;AAAA,IACA;AAAA,EACD;AACD;AAeAvB,IAAqB,WAAG;AAChB,SAAAmB;AAAA,KACJD,QAAKrB,GAALI,CAAA,EAAA,KAAA,IAAA,CAAwB,IAAIiB,EAAA,MAAKrB,MAAL,KAAwB,IAAA,CAAA;AAAA;AAAA;AAAA;AAAA;AAAA,YAK7C2B;AAAA,IACN,KAAK,qBAAqB,KAAK,qBAAqB,UAAU,KAAK,mBAAmB;AAAA,EACtF,CAAA;AAAA,iBACW,CAAC,KAAK,kBAAkB;AAAA,YAC7BA,EAAU,KAAK,cAAc,CAAC;AAAA,OACnC,KAAK,iBAAiBL,+BAAkC,KAAK,cAAc,iBAAiBM,CAAO;AAAA;AAAA;AAAA;AAAA;AAAA,YAK9F,KAAK,YAAY;AAAA;AAAA;AAG5B;AAEAxB,IAAiB,WAAG;AACf,SAAC,KAAK,cACHkB;AAAA;AAAA;AAAA;AAAA,gCAIuB,KAAK,WAAW,aAAaO,CAAW;AAAA;AAAA;AAAA,MALxCD;AAS/B;AAEAvB,IAAiB,WAAG;AACf,SAAC,KAAK,cACHiB;AAAA;AAAA;AAAA;AAAA,gCAIuB,KAAK,WAAW,aAAaO,CAAW;AAAA;AAAA;AAAA,MALxCD;AAS/B;AAjJYtB,EAmJI,SAAS;AAAA,EACxBwB;AAAA,EACAC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAoCD;AAvLQC,EAAA;AAAA,EADPC,EAAM;AAAA,GADK3B,EAEJ,WAAA,oBAAA,CAAA;AAGA0B,EAAA;AAAA,EADPC,EAAM;AAAA,GAJK3B,EAKJ,WAAA,kBAAA,CAAA;AAGA0B,EAAA;AAAA,EADPC,EAAM;AAAA,GAPK3B,EAQJ,WAAA,kBAAA,CAAA;AAGA0B,EAAA;AAAA,EADPC,EAAM;AAAA,GAVK3B,EAWJ,WAAA,sBAAA,CAAA;AAGA0B,EAAA;AAAA,EADPC,EAAM;AAAA,GAbK3B,EAcJ,WAAA,gBAAA,CAAA;AAOA0B,EAAA;AAAA,EADPC,EAAM;AAAA,GApBK3B,EAqBJ,WAAA,eAAA,CAAA;AAGA0B,EAAA;AAAA,EADPC,EAAM;AAAA,GAvBK3B,EAwBJ,WAAA,eAAA,CAAA;AAGA0B,EAAA;AAAA,EADPC,EAAM;AAAA,GA1BK3B,EA2BJ,WAAA,sBAAA,CAAA;AA3BIA,IAAN0B,EAAA;AAAA,EADNE,EAAc,+BAA+B;AAAA,GACjC5B,CAAA;AA4Lb,MAAA6B,IAAe7B;"}