{"version":3,"file":"media-item-ref.element-CtUzygju.js","sources":["../../../src/packages/media/media/item/media-item-ref.element.ts"],"sourcesContent":["import type { UmbMediaItemModel } from '../repository/types.js';\r\nimport { UMB_MEDIA_SECTION_ALIAS } from '../../media-section/constants.js';\r\nimport { UMB_MEDIA_ENTITY_TYPE } from '../entity.js';\r\nimport { UMB_EDIT_MEDIA_WORKSPACE_PATH_PATTERN } from '../paths.js';\r\nimport { createExtensionApiByAlias } from '@umbraco-cms/backoffice/extension-registry';\r\nimport { customElement, html, ifDefined, nothing, property, state } from '@umbraco-cms/backoffice/external/lit';\r\nimport { UmbLitElement } from '@umbraco-cms/backoffice/lit-element';\r\nimport { UmbModalRouteRegistrationController } from '@umbraco-cms/backoffice/router';\r\nimport { UMB_SECTION_USER_PERMISSION_CONDITION_ALIAS } from '@umbraco-cms/backoffice/section';\r\nimport { UMB_WORKSPACE_MODAL } from '@umbraco-cms/backoffice/workspace';\r\n\r\n@customElement('umb-media-item-ref')\r\nexport class UmbMediaItemRefElement extends UmbLitElement {\r\n\t#item?: UmbMediaItemModel | undefined;\r\n\r\n\t@property({ type: Object })\r\n\tpublic get item(): UmbMediaItemModel | undefined {\r\n\t\treturn this.#item;\r\n\t}\r\n\tpublic set item(value: UmbMediaItemModel | undefined) {\r\n\t\tthis.#item = value;\r\n\t}\r\n\r\n\t@property({ type: Boolean })\r\n\treadonly = false;\r\n\r\n\t@property({ type: Boolean })\r\n\tstandalone = false;\r\n\r\n\t@state()\r\n\t_editPath = '';\r\n\r\n\t@state()\r\n\t_userHasSectionAccess = false;\r\n\r\n\tconstructor() {\r\n\t\tsuper();\r\n\r\n\t\tcreateExtensionApiByAlias(this, UMB_SECTION_USER_PERMISSION_CONDITION_ALIAS, [\r\n\t\t\t{\r\n\t\t\t\tconfig: {\r\n\t\t\t\t\tmatch: UMB_MEDIA_SECTION_ALIAS,\r\n\t\t\t\t},\r\n\t\t\t\tonChange: (permitted: boolean) => {\r\n\t\t\t\t\tthis._userHasSectionAccess = permitted;\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t]);\r\n\r\n\t\tnew UmbModalRouteRegistrationController(this, UMB_WORKSPACE_MODAL)\r\n\t\t\t.addUniquePaths(['unique'])\r\n\t\t\t.onSetup(() => {\r\n\t\t\t\treturn { data: { entityType: UMB_MEDIA_ENTITY_TYPE, preset: {} } };\r\n\t\t\t})\r\n\t\t\t.observeRouteBuilder((routeBuilder) => {\r\n\t\t\t\tthis._editPath = routeBuilder({});\r\n\t\t\t});\r\n\t}\r\n\r\n\t#getHref(item: UmbMediaItemModel) {\r\n\t\tif (!this._editPath) return;\r\n\t\tconst path = UMB_EDIT_MEDIA_WORKSPACE_PATH_PATTERN.generateLocal({ unique: item.unique });\r\n\t\treturn `${this._editPath}/${path}`;\r\n\t}\r\n\r\n\toverride render() {\r\n\t\tif (!this.item) return nothing;\r\n\r\n\t\treturn html`\r\n\t\t\t<uui-ref-node\r\n\t\t\t\tname=${this.item.name}\r\n\t\t\t\thref=${ifDefined(this.#getHref(this.item))}\r\n\t\t\t\t?readonly=${this.readonly || !this._userHasSectionAccess}\r\n\t\t\t\t?standalone=${this.standalone}>\r\n\t\t\t\t<slot name=\"actions\" slot=\"actions\"></slot>\r\n\t\t\t\t${this.#renderIcon(this.item)}\r\n\t\t\t</uui-ref-node>\r\n\t\t`;\r\n\t}\r\n\r\n\t#renderIcon(item: UmbMediaItemModel) {\r\n\t\tif (!item.mediaType.icon) return;\r\n\t\treturn html`<umb-icon slot=\"icon\" name=${item.mediaType.icon}></umb-icon>`;\r\n\t}\r\n}\r\n\r\nexport { UmbMediaItemRefElement as element };\r\n\r\ndeclare global {\r\n\tinterface HTMLElementTagNameMap {\r\n\t\t'umb-media-item-ref': UmbMediaItemRefElement;\r\n\t}\r\n}\r\n"],"names":["_item","_UmbMediaItemRefElement_instances","getHref_fn","renderIcon_fn","UmbMediaItemRefElement","UmbLitElement","__privateAdd","createExtensionApiByAlias","UMB_SECTION_USER_PERMISSION_CONDITION_ALIAS","UMB_MEDIA_SECTION_ALIAS","permitted","UmbModalRouteRegistrationController","UMB_WORKSPACE_MODAL","UMB_MEDIA_ENTITY_TYPE","routeBuilder","__privateGet","value","__privateSet","html","ifDefined","__privateMethod","nothing","item","path","UMB_EDIT_MEDIA_WORKSPACE_PATH_PATTERN","__decorateClass","property","state","customElement"],"mappings":";;;;;;;;;;;;;;wYAAAA,GAAAC,GAAAC,GAAAC;AAYa,IAAAC,IAAN,cAAqCC,EAAc;AAAA,EAuBzD,cAAc;AACP,UAAA,GAxBDC,EAAA,MAAAL,CAAA,GACNK,EAAA,MAAAN,CAAA,GAWW,KAAA,WAAA,IAGE,KAAA,aAAA,IAGD,KAAA,YAAA,IAGY,KAAA,wBAAA,IAKvBO,EAA0B,MAAMC,GAA6C;AAAA,MAC5E;AAAA,QACC,QAAQ;AAAA,UACP,OAAOC;AAAA,QACR;AAAA,QACA,UAAU,CAACC,MAAuB;AACjC,eAAK,wBAAwBA;AAAA,QAAA;AAAA,MAC9B;AAAA,IACD,CACA,GAEG,IAAAC,EAAoC,MAAMC,CAAmB,EAC/D,eAAe,CAAC,QAAQ,CAAC,EACzB,QAAQ,OACD,EAAE,MAAM,EAAE,YAAYC,GAAuB,QAAQ,CAAA,IAAK,EACjE,EACA,oBAAoB,CAACC,MAAiB;AACjC,WAAA,YAAYA,EAAa,EAAE;AAAA,IAAA,CAChC;AAAA,EAAA;AAAA,EAxCH,IAAW,OAAsC;AAChD,WAAOC,EAAK,MAAAf,CAAA;AAAA,EAAA;AAAA,EAEb,IAAW,KAAKgB,GAAsC;AACrD,IAAAC,EAAA,MAAKjB,GAAQgB,CAAA;AAAA,EAAA;AAAA,EA6CL,SAAS;AACb,WAAC,KAAK,OAEHE;AAAA;AAAA,WAEE,KAAK,KAAK,IAAI;AAAA,WACdC,EAAUC,EAAK,MAAAnB,GAAAC,CAAA,EAAL,KAAc,MAAA,KAAK,KAAK,CAAC;AAAA,gBAC9B,KAAK,YAAY,CAAC,KAAK,qBAAqB;AAAA,kBAC1C,KAAK,UAAU;AAAA;AAAA,MAE3BkB,EAAK,MAAAnB,GAAAE,CAAA,EAAL,KAAiB,MAAA,KAAK,IAAK,CAAA;AAAA;AAAA,MATRkB;AAAA,EASQ;AASjC;AAvECrB,IAAA,oBAAA,QAAA;AADMC,IAAA,oBAAA,QAAA;AA+CNC,IAAQ,SAACoB,GAAyB;AAC7B,MAAA,CAAC,KAAK,UAAW;AACrB,QAAMC,IAAOC,EAAsC,cAAc,EAAE,QAAQF,EAAK,QAAQ;AACxF,SAAO,GAAG,KAAK,SAAS,IAAIC,CAAI;AACjC;AAiBApB,IAAW,SAACmB,GAAyB;AAChC,MAACA,EAAK,UAAU;AACb,WAAAJ,+BAAkCI,EAAK,UAAU,IAAI;AAC7D;AAnEWG,EAAA;AAAA,EADVC,EAAS,EAAE,MAAM,OAAQ,CAAA;AAAA,GAHdtB,EAID,WAAA,QAAA,CAAA;AAQXqB,EAAA;AAAA,EADCC,EAAS,EAAE,MAAM,QAAS,CAAA;AAAA,GAXftB,EAYZ,WAAA,YAAA,CAAA;AAGAqB,EAAA;AAAA,EADCC,EAAS,EAAE,MAAM,QAAS,CAAA;AAAA,GAdftB,EAeZ,WAAA,cAAA,CAAA;AAGAqB,EAAA;AAAA,EADCE,EAAM;AAAA,GAjBKvB,EAkBZ,WAAA,aAAA,CAAA;AAGAqB,EAAA;AAAA,EADCE,EAAM;AAAA,GApBKvB,EAqBZ,WAAA,yBAAA,CAAA;AArBYA,IAANqB,EAAA;AAAA,EADNG,EAAc,oBAAoB;AAAA,GACtBxB,CAAA;"}