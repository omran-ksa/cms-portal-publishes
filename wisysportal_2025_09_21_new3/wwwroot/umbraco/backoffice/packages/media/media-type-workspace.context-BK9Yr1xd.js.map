{"version":3,"file":"media-type-workspace.context-BK9Yr1xd.js","sources":["../../../src/packages/media/media-types/workspace/media-type-workspace-editor.element.ts","../../../src/packages/media/media-types/workspace/media-type-workspace.context.ts"],"sourcesContent":["import { css, html, customElement } from '@umbraco-cms/backoffice/external/lit';\r\nimport { UmbLitElement } from '@umbraco-cms/backoffice/lit-element';\r\n\r\n@customElement('umb-media-type-workspace-editor')\r\nexport class UmbMediaTypeWorkspaceEditorElement extends UmbLitElement {\r\n\toverride render() {\r\n\t\treturn html`\r\n\t\t\t<umb-entity-detail-workspace-editor>\r\n\t\t\t\t<umb-content-type-workspace-editor-header slot=\"header\"></umb-content-type-workspace-editor-header>\r\n\t\t\t</umb-entity-detail-workspace-editor>\r\n\t\t`;\r\n\t}\r\n\r\n\tstatic override styles = [\r\n\t\tcss`\r\n\t\t\t:host {\r\n\t\t\t\tdisplay: block;\r\n\t\t\t\twidth: 100%;\r\n\t\t\t\theight: 100%;\r\n\t\t\t}\r\n\t\t`,\r\n\t];\r\n}\r\n\r\nexport default UmbMediaTypeWorkspaceEditorElement;\r\n\r\ndeclare global {\r\n\tinterface HTMLElementTagNameMap {\r\n\t\t'umb-media-type-workspace-editor': UmbMediaTypeWorkspaceEditorElement;\r\n\t}\r\n}\r\n","import { UMB_MEDIA_TYPE_ENTITY_TYPE } from '../entity.js';\r\nimport type { UmbMediaTypeDetailModel } from '../types.js';\r\nimport { UMB_MEDIA_TYPE_DETAIL_REPOSITORY_ALIAS } from '../constants.js';\r\nimport { UmbMediaTypeWorkspaceEditorElement } from './media-type-workspace-editor.element.js';\r\nimport { UMB_MEDIA_TYPE_WORKSPACE_ALIAS } from './constants.js';\r\nimport {\r\n\ttype UmbRoutableWorkspaceContext,\r\n\tUmbWorkspaceIsNewRedirectController,\r\n} from '@umbraco-cms/backoffice/workspace';\r\nimport { UmbContentTypeWorkspaceContextBase } from '@umbraco-cms/backoffice/content-type';\r\nimport type { UmbContentTypeSortModel, UmbContentTypeWorkspaceContext } from '@umbraco-cms/backoffice/content-type';\r\nimport type { UmbControllerHost } from '@umbraco-cms/backoffice/controller-api';\r\nimport type { UmbReferenceByUnique } from '@umbraco-cms/backoffice/models';\r\nimport type { UmbEntityModel } from '@umbraco-cms/backoffice/entity';\r\nimport { CompositionTypeModel } from '@umbraco-cms/backoffice/external/backend-api';\r\n\r\ntype DetailModelType = UmbMediaTypeDetailModel;\r\nexport class UmbMediaTypeWorkspaceContext\r\n\textends UmbContentTypeWorkspaceContextBase<DetailModelType>\r\n\timplements UmbContentTypeWorkspaceContext<DetailModelType>, UmbRoutableWorkspaceContext\r\n{\r\n\tconstructor(host: UmbControllerHost) {\r\n\t\tsuper(host, {\r\n\t\t\tworkspaceAlias: UMB_MEDIA_TYPE_WORKSPACE_ALIAS,\r\n\t\t\tentityType: UMB_MEDIA_TYPE_ENTITY_TYPE,\r\n\t\t\tdetailRepositoryAlias: UMB_MEDIA_TYPE_DETAIL_REPOSITORY_ALIAS,\r\n\t\t});\r\n\r\n\t\tthis.routes.setRoutes([\r\n\t\t\t{\r\n\t\t\t\tpath: 'create/parent/:parentEntityType/:parentUnique',\r\n\t\t\t\tcomponent: UmbMediaTypeWorkspaceEditorElement,\r\n\t\t\t\tsetup: async (_component, info) => {\r\n\t\t\t\t\tconst parentEntityType = info.match.params.parentEntityType;\r\n\t\t\t\t\tconst parentUnique = info.match.params.parentUnique === 'null' ? null : info.match.params.parentUnique;\r\n\t\t\t\t\tconst parent: UmbEntityModel = { entityType: parentEntityType, unique: parentUnique };\r\n\r\n\t\t\t\t\tawait this.#onScaffoldSetup(parent);\r\n\r\n\t\t\t\t\tnew UmbWorkspaceIsNewRedirectController(\r\n\t\t\t\t\t\tthis,\r\n\t\t\t\t\t\tthis,\r\n\t\t\t\t\t\tthis.getHostElement().shadowRoot!.querySelector('umb-router-slot')!,\r\n\t\t\t\t\t);\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t\t{\r\n\t\t\t\tpath: 'edit/:id',\r\n\t\t\t\tcomponent: UmbMediaTypeWorkspaceEditorElement,\r\n\t\t\t\tsetup: (_component, info) => {\r\n\t\t\t\t\tconst id = info.match.params.id;\r\n\t\t\t\t\tthis.load(id);\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t]);\r\n\t}\r\n\r\n\tsetAllowedAtRoot(allowedAtRoot: boolean) {\r\n\t\tthis.structure.updateOwnerContentType({ allowedAtRoot });\r\n\t}\r\n\r\n\tsetVariesByCulture(variesByCulture: boolean) {\r\n\t\tthis.structure.updateOwnerContentType({ variesByCulture });\r\n\t}\r\n\r\n\tsetVariesBySegment(variesBySegment: boolean) {\r\n\t\tthis.structure.updateOwnerContentType({ variesBySegment });\r\n\t}\r\n\r\n\tsetIsElement(isElement: boolean) {\r\n\t\tthis.structure.updateOwnerContentType({ isElement });\r\n\t}\r\n\r\n\tsetAllowedContentTypes(allowedContentTypes: Array<UmbContentTypeSortModel>) {\r\n\t\tthis.structure.updateOwnerContentType({ allowedContentTypes });\r\n\t}\r\n\r\n\tsetCollection(collection: UmbReferenceByUnique) {\r\n\t\tthis.structure.updateOwnerContentType({ collection });\r\n\t}\r\n\r\n\t/**\r\n\t * @deprecated Use the createScaffold method instead. Will be removed in 17.\r\n\t * @param {UmbEntityModel} parent\r\n\t * @memberof UmbMediaTypeWorkspaceContext\r\n\t */\r\n\tasync create(parent: UmbEntityModel) {\r\n\t\tconsole.warn('create() is deprecated. Use createScaffold() instead.');\r\n\t\tthis.createScaffold({ parent });\r\n\t}\r\n\r\n\tasync #onScaffoldSetup(parent: UmbEntityModel) {\r\n\t\tlet preset: Partial<DetailModelType> | undefined = undefined;\r\n\r\n\t\tif (parent.unique && parent.entityType === UMB_MEDIA_TYPE_ENTITY_TYPE) {\r\n\t\t\tpreset = {\r\n\t\t\t\tcompositions: [\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tcontentType: { unique: parent.unique },\r\n\t\t\t\t\t\tcompositionType: CompositionTypeModel.INHERITANCE,\r\n\t\t\t\t\t},\r\n\t\t\t\t],\r\n\t\t\t};\r\n\t\t}\r\n\r\n\t\tthis.createScaffold({ parent, preset });\r\n\t}\r\n}\r\n\r\nexport { UmbMediaTypeWorkspaceContext as api };\r\n"],"names":["UmbMediaTypeWorkspaceEditorElement","UmbLitElement","html","css","__decorateClass","customElement","UmbMediaTypeWorkspaceContext","UmbContentTypeWorkspaceContextBase","host","UMB_MEDIA_TYPE_WORKSPACE_ALIAS","UMB_MEDIA_TYPE_ENTITY_TYPE","UMB_MEDIA_TYPE_DETAIL_REPOSITORY_ALIAS","_component","info","parentEntityType","parentUnique","parent","#onScaffoldSetup","UmbWorkspaceIsNewRedirectController","id","allowedAtRoot","variesByCulture","variesBySegment","isElement","allowedContentTypes","collection","preset","CompositionTypeModel"],"mappings":";;;;;;;;;;;;;;AAIa,IAAAA,IAAN,cAAiDC,EAAc;AAAA,EAC5D,SAAS;AACV,WAAAC;AAAA;AAAA;AAAA;AAAA;AAAA,EAAA;AAgBT;AAlBaF,EASI,SAAS;AAAA,EACxBG;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAOD;AAjBYH,IAANI,EAAA;AAAA,EADNC,EAAc,iCAAiC;AAAA,GACnCL,CAAA;ACaN,MAAMM,UACJC,EAET;AAAA,EACC,YAAYC,GAAyB;AACpC,UAAMA,GAAM;AAAA,MACX,gBAAgBC;AAAA,MAChB,YAAYC;AAAA,MACZ,uBAAuBC;AAAA,IAAA,CACvB,GAED,KAAK,OAAO,UAAU;AAAA,MACrB;AAAA,QACC,MAAM;AAAA,QACN,WAAWX;AAAA,QACX,OAAO,OAAOY,GAAYC,MAAS;AAC5B,gBAAAC,IAAmBD,EAAK,MAAM,OAAO,kBACrCE,IAAeF,EAAK,MAAM,OAAO,iBAAiB,SAAS,OAAOA,EAAK,MAAM,OAAO,cACpFG,IAAyB,EAAE,YAAYF,GAAkB,QAAQC,EAAa;AAE9E,gBAAA,KAAKE,GAAiBD,CAAM,GAE9B,IAAAE;AAAA,YACH;AAAA,YACA;AAAA,YACA,KAAK,eAAA,EAAiB,WAAY,cAAc,iBAAiB;AAAA,UAClE;AAAA,QAAA;AAAA,MAEF;AAAA,MACA;AAAA,QACC,MAAM;AAAA,QACN,WAAWlB;AAAA,QACX,OAAO,CAACY,GAAYC,MAAS;AACtB,gBAAAM,IAAKN,EAAK,MAAM,OAAO;AAC7B,eAAK,KAAKM,CAAE;AAAA,QAAA;AAAA,MACb;AAAA,IACD,CACA;AAAA,EAAA;AAAA,EAGF,iBAAiBC,GAAwB;AACxC,SAAK,UAAU,uBAAuB,EAAE,eAAAA,EAAA,CAAe;AAAA,EAAA;AAAA,EAGxD,mBAAmBC,GAA0B;AAC5C,SAAK,UAAU,uBAAuB,EAAE,iBAAAA,EAAA,CAAiB;AAAA,EAAA;AAAA,EAG1D,mBAAmBC,GAA0B;AAC5C,SAAK,UAAU,uBAAuB,EAAE,iBAAAA,EAAA,CAAiB;AAAA,EAAA;AAAA,EAG1D,aAAaC,GAAoB;AAChC,SAAK,UAAU,uBAAuB,EAAE,WAAAA,EAAA,CAAW;AAAA,EAAA;AAAA,EAGpD,uBAAuBC,GAAqD;AAC3E,SAAK,UAAU,uBAAuB,EAAE,qBAAAA,EAAA,CAAqB;AAAA,EAAA;AAAA,EAG9D,cAAcC,GAAkC;AAC/C,SAAK,UAAU,uBAAuB,EAAE,YAAAA,EAAA,CAAY;AAAA,EAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,EAQrD,MAAM,OAAOT,GAAwB;AACpC,YAAQ,KAAK,uDAAuD,GAC/D,KAAA,eAAe,EAAE,QAAAA,GAAQ;AAAA,EAAA;AAAA,EAG/B,MAAMC,GAAiBD,GAAwB;AAC9C,QAAIU;AAEJ,IAAIV,EAAO,UAAUA,EAAO,eAAeN,MACjCgB,IAAA;AAAA,MACR,cAAc;AAAA,QACb;AAAA,UACC,aAAa,EAAE,QAAQV,EAAO,OAAO;AAAA,UACrC,iBAAiBW,EAAqB;AAAA,QAAA;AAAA,MACvC;AAAA,IAEF,IAGD,KAAK,eAAe,EAAE,QAAAX,GAAQ,QAAAU,EAAA,CAAQ;AAAA,EAAA;AAExC;"}