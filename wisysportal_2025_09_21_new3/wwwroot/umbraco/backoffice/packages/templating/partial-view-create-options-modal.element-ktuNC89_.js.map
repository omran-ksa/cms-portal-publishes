{"version":3,"file":"partial-view-create-options-modal.element-ktuNC89_.js","sources":["../../../src/packages/templating/partial-views/entity-actions/create/options-modal/partial-view-create-options-modal.element.ts"],"sourcesContent":["import { UMB_PARTIAL_VIEW_FROM_SNIPPET_MODAL } from '../snippet-modal/index.js';\r\nimport { UMB_PARTIAL_VIEW_FOLDER_REPOSITORY_ALIAS } from '../../../constants.js';\r\nimport type { UmbPartialViewCreateOptionsModalData } from './index.js';\r\nimport { html, customElement } from '@umbraco-cms/backoffice/external/lit';\r\nimport { UmbModalBaseElement, umbOpenModal } from '@umbraco-cms/backoffice/modal';\r\nimport { UmbCreateFolderEntityAction } from '@umbraco-cms/backoffice/tree';\r\n\r\n@customElement('umb-partial-view-create-options-modal')\r\nexport class UmbPartialViewCreateOptionsModalElement extends UmbModalBaseElement<\r\n\tUmbPartialViewCreateOptionsModalData,\r\n\tstring\r\n> {\r\n\t#createFolderAction?: UmbCreateFolderEntityAction;\r\n\r\n\toverride connectedCallback(): void {\r\n\t\tsuper.connectedCallback();\r\n\t\tif (!this.data?.parent) throw new Error('A parent unique is required to create a folder');\r\n\r\n\t\tthis.#createFolderAction = new UmbCreateFolderEntityAction(this, {\r\n\t\t\tunique: this.data.parent.unique,\r\n\t\t\tentityType: this.data.parent.entityType,\r\n\t\t\tmeta: {\r\n\t\t\t\ticon: 'icon-folder',\r\n\t\t\t\tlabel: this.localize.term('create_newFolder') + '...',\r\n\t\t\t\tfolderRepositoryAlias: UMB_PARTIAL_VIEW_FOLDER_REPOSITORY_ALIAS,\r\n\t\t\t},\r\n\t\t});\r\n\t}\r\n\r\n\tasync #onCreateFolderClick(event: PointerEvent) {\r\n\t\tevent.stopPropagation();\r\n\r\n\t\tawait this.#createFolderAction\r\n\t\t\t?.execute()\r\n\t\t\t.then(() => this._submitModal())\r\n\t\t\t.catch(() => undefined);\r\n\t}\r\n\r\n\tasync #onCreateFromSnippetClick(event: PointerEvent) {\r\n\t\tevent.stopPropagation();\r\n\t\tif (!this.data?.parent) throw new Error('A parent is required to create a folder');\r\n\r\n\t\tumbOpenModal(this, UMB_PARTIAL_VIEW_FROM_SNIPPET_MODAL, {\r\n\t\t\tdata: {\r\n\t\t\t\tparent: this.data.parent,\r\n\t\t\t},\r\n\t\t})\r\n\t\t\t.then(() => this._submitModal())\r\n\t\t\t.catch(() => undefined);\r\n\t}\r\n\r\n\t// close the modal when navigating to data type\r\n\t#onNavigate() {\r\n\t\tthis._submitModal();\r\n\t}\r\n\r\n\t#getCreateHref() {\r\n\t\treturn `section/settings/workspace/partial-view/create/parent/${this.data?.parent.entityType}/${\r\n\t\t\tthis.data?.parent.unique || 'null'\r\n\t\t}`;\r\n\t}\r\n\r\n\toverride render() {\r\n\t\treturn html`\r\n\t\t\t<umb-body-layout headline=\"Create Partial View\">\r\n\t\t\t\t<uui-box>\r\n\t\t\t\t\t<!-- TODO: construct url -->\r\n\t\t\t\t\t<uui-menu-item\r\n\t\t\t\t\t\thref=${this.#getCreateHref()}\r\n\t\t\t\t\t\tlabel=${this.localize.term('create_newEmptyPartialView')}\r\n\t\t\t\t\t\t@click=${this.#onNavigate}>\r\n\t\t\t\t\t\t<uui-icon slot=\"icon\" name=\"icon-document-html\"></uui-icon>\r\n\t\t\t\t\t</uui-menu-item>\r\n\r\n\t\t\t\t\t<uui-menu-item\r\n\t\t\t\t\t\t@click=${this.#onCreateFromSnippetClick}\r\n\t\t\t\t\t\tlabel=\"${this.localize.term('create_newPartialViewFromSnippet')}...\">\r\n\t\t\t\t\t\t<uui-icon slot=\"icon\" name=\"icon-document-html\"></uui-icon>\r\n\t\t\t\t\t</uui-menu-item>\r\n\r\n\t\t\t\t\t<uui-menu-item @click=${this.#onCreateFolderClick} label=\"${this.localize.term('create_newFolder')}...\">\r\n\t\t\t\t\t\t<uui-icon slot=\"icon\" name=\"icon-folder\"></uui-icon>\r\n\t\t\t\t\t</uui-menu-item>\r\n\t\t\t\t</uui-box>\r\n\r\n\t\t\t\t<uui-button\r\n\t\t\t\t\tslot=\"actions\"\r\n\t\t\t\t\tid=\"cancel\"\r\n\t\t\t\t\tlabel=${this.localize.term('buttons_confirmActionCancel')}\r\n\t\t\t\t\t@click=\"${this._rejectModal}\"></uui-button>\r\n\t\t\t</umb-body-layout>\r\n\t\t`;\r\n\t}\r\n}\r\n\r\nexport default UmbPartialViewCreateOptionsModalElement;\r\n\r\ndeclare global {\r\n\tinterface HTMLElementTagNameMap {\r\n\t\t'umb-partial-view-create-options-modal': UmbPartialViewCreateOptionsModalElement;\r\n\t}\r\n}\r\n"],"names":["_createFolderAction","_UmbPartialViewCreateOptionsModalElement_instances","onCreateFolderClick_fn","onCreateFromSnippetClick_fn","onNavigate_fn","getCreateHref_fn","UmbPartialViewCreateOptionsModalElement","UmbModalBaseElement","__privateAdd","__privateSet","UmbCreateFolderEntityAction","UMB_PARTIAL_VIEW_FOLDER_REPOSITORY_ALIAS","html","__privateMethod","event","__privateGet","umbOpenModal","UMB_PARTIAL_VIEW_FROM_SNIPPET_MODAL","__decorateClass","customElement","UmbPartialViewCreateOptionsModalElement$1"],"mappings":";;;;;;;;;;;wYAAAA,GAAAC,GAAAC,GAAAC,GAAAC,GAAAC;AAQa,IAAAC,IAAN,cAAsDC,EAG3D;AAAA,EAHK,cAAA;AAAA,UAAA,GAAA,SAAA,GAAAC,EAAA,MAAAP,CAAA,GAINO,EAAA,MAAAR,CAAA;AAAA,EAAA;AAAA,EAES,oBAA0B;AAElC,QADA,MAAM,kBAAkB,GACpB,CAAC,KAAK,MAAM,OAAc,OAAA,IAAI,MAAM,gDAAgD;AAEnF,IAAAS,EAAA,MAAAT,GAAsB,IAAIU,EAA4B,MAAM;AAAA,MAChE,QAAQ,KAAK,KAAK,OAAO;AAAA,MACzB,YAAY,KAAK,KAAK,OAAO;AAAA,MAC7B,MAAM;AAAA,QACL,MAAM;AAAA,QACN,OAAO,KAAK,SAAS,KAAK,kBAAkB,IAAI;AAAA,QAChD,uBAAuBC;AAAA,MAAA;AAAA,IACxB,CACA,CAAA;AAAA,EAAA;AAAA,EAoCO,SAAS;AACV,WAAAC;AAAA;AAAA;AAAA;AAAA;AAAA,aAKIC,EAAA,MAAKZ,MAAL,KAAqB,IAAA,CAAA;AAAA,cACpB,KAAK,SAAS,KAAK,4BAA4B,CAAC;AAAA,eAC/CY,QAAKZ,GAAWG,CAAA,CAAA;AAAA;AAAA;AAAA;AAAA;AAAA,eAKhBS,QAAKZ,GAAyBE,CAAA,CAAA;AAAA,eAC9B,KAAK,SAAS,KAAK,kCAAkC,CAAC;AAAA;AAAA;AAAA;AAAA,6BAIxCU,QAAKZ,GAAoBC,CAAA,CAAA,WAAW,KAAK,SAAS,KAAK,kBAAkB,CAAC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,aAQ1F,KAAK,SAAS,KAAK,6BAA6B,CAAC;AAAA,eAC/C,KAAK,YAAY;AAAA;AAAA;AAAA,EAAA;AAIhC;AAjFCF,IAAA,oBAAA,QAAA;AAJMC,IAAA,oBAAA,QAAA;AAqBAC,IAAoB,eAACY,GAAqB;AAC/C,EAAAA,EAAM,gBAAgB,GAEtB,MAAMC,EAAK,MAAAf,CAAA,GACR,QAAQ,EACT,KAAK,MAAM,KAAK,aAAc,CAAA,EAC9B,MAAM,MAAM;AAAA,GAAS;AACxB;AAEMG,IAAyB,eAACW,GAAqB;AAEpD,MADAA,EAAM,gBAAgB,GAClB,CAAC,KAAK,MAAM,OAAc,OAAA,IAAI,MAAM,yCAAyC;AAEjF,EAAAE,EAAa,MAAMC,GAAqC;AAAA,IACvD,MAAM;AAAA,MACL,QAAQ,KAAK,KAAK;AAAA,IAAA;AAAA,EACnB,CACA,EACC,KAAK,MAAM,KAAK,cAAc,EAC9B,MAAM,MAAA;AAAA,GAAe;AACxB;AAGAb,IAAW,WAAG;AACb,OAAK,aAAa;AACnB;AAEAC,IAAc,WAAG;AACT,SAAA,yDAAyD,KAAK,MAAM,OAAO,UAAU,IAC3F,KAAK,MAAM,OAAO,UAAU,MAC7B;AACD;AApDYC,IAANY,EAAA;AAAA,EADNC,EAAc,uCAAuC;AAAA,GACzCb,CAAA;AAuFb,MAAAc,IAAed;"}