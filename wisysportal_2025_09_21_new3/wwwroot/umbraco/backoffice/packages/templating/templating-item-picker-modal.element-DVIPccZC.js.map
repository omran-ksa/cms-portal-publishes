{"version":3,"file":"templating-item-picker-modal.element-DVIPccZC.js","sources":["../../../src/packages/templating/modals/templating-item-picker/templating-item-picker-modal.element.ts"],"sourcesContent":["import { CodeSnippetType } from '../../types.js';\r\nimport { UMB_TEMPLATING_PAGE_FIELD_BUILDER_MODAL } from '../templating-page-field-builder/templating-page-field-builder-modal.token.js';\r\nimport type {\r\n\tUmbTemplatingItemPickerModalData,\r\n\tUmbTemplatingItemPickerModalValue,\r\n} from './templating-item-picker-modal.token.js';\r\nimport { UMB_PARTIAL_VIEW_PICKER_MODAL } from '@umbraco-cms/backoffice/partial-view';\r\nimport { UmbTextStyles } from '@umbraco-cms/backoffice/style';\r\nimport { css, html, customElement } from '@umbraco-cms/backoffice/external/lit';\r\nimport type { UmbModalManagerContext } from '@umbraco-cms/backoffice/modal';\r\nimport { UMB_MODAL_MANAGER_CONTEXT, UmbModalBaseElement } from '@umbraco-cms/backoffice/modal';\r\nimport { UMB_DICTIONARY_PICKER_MODAL } from '@umbraco-cms/backoffice/dictionary';\r\n\r\n@customElement('umb-templating-item-picker-modal')\r\nexport class UmbTemplatingItemPickerModalElement extends UmbModalBaseElement<\r\n\tUmbTemplatingItemPickerModalData,\r\n\tUmbTemplatingItemPickerModalValue\r\n> {\r\n\tprivate _close() {\r\n\t\tthis.modalContext?.reject();\r\n\t}\r\n\r\n\t#modalContext?: UmbModalManagerContext;\r\n\r\n\tconstructor() {\r\n\t\tsuper();\r\n\t\tthis.consumeContext(UMB_MODAL_MANAGER_CONTEXT, (instance) => {\r\n\t\t\tthis.#modalContext = instance;\r\n\t\t});\r\n\t}\r\n\r\n\tasync #openTemplatingPageFieldModal() {\r\n\t\tconst pageFieldBuilderContext = this.#modalContext?.open(this, UMB_TEMPLATING_PAGE_FIELD_BUILDER_MODAL);\r\n\t\tconst result = await pageFieldBuilderContext?.onSubmit().catch(() => undefined);\r\n\r\n\t\tif (result === undefined) return;\r\n\r\n\t\tconst value = pageFieldBuilderContext?.getValue().output;\r\n\r\n\t\tif (!value) return;\r\n\r\n\t\tthis.value = { value, type: CodeSnippetType.pageField };\r\n\t\tthis.modalContext?.submit();\r\n\t}\r\n\r\n\tasync #openPartialViewPickerModal() {\r\n\t\tconst partialViewPickerContext = this.#modalContext?.open(this, UMB_PARTIAL_VIEW_PICKER_MODAL);\r\n\t\tconst result = await partialViewPickerContext?.onSubmit().catch(() => undefined);\r\n\r\n\t\tif (result === undefined) return;\r\n\r\n\t\tconst value = partialViewPickerContext?.getValue().selection[0];\r\n\r\n\t\tif (!value) return;\r\n\r\n\t\tthis.value = {\r\n\t\t\tvalue: value,\r\n\t\t\ttype: CodeSnippetType.partialView,\r\n\t\t};\r\n\t\tthis.modalContext?.submit();\r\n\t}\r\n\r\n\tasync #openDictionaryItemPickerModal() {\r\n\t\tconst dictionaryItemPickerModal = this.#modalContext?.open(this, UMB_DICTIONARY_PICKER_MODAL, {\r\n\t\t\tdata: {\r\n\t\t\t\tpickableFilter: (item) => item.unique !== null,\r\n\t\t\t},\r\n\t\t});\r\n\t\tconst result = await dictionaryItemPickerModal?.onSubmit().catch(() => undefined);\r\n\t\tif (result === undefined) return;\r\n\r\n\t\tconst dictionaryItem = dictionaryItemPickerModal?.getValue().selection[0];\r\n\r\n\t\tif (!dictionaryItem) return;\r\n\r\n\t\tthis.value = { value: dictionaryItem, type: CodeSnippetType.dictionaryItem };\r\n\t\tthis.modalContext?.submit();\r\n\t}\r\n\r\n\toverride render() {\r\n\t\treturn html`\r\n\t\t\t<umb-body-layout headline=${this.localize.term('template_insert')}>\r\n\t\t\t\t<uui-box> ${this.#renderItems()} </uui-box>\r\n\t\t\t\t<uui-button\r\n\t\t\t\t\tslot=\"actions\"\r\n\t\t\t\t\t@click=${this._close}\r\n\t\t\t\t\tlook=\"secondary\"\r\n\t\t\t\t\tlabel=${this.localize.term('general_close')}></uui-button>\r\n\t\t\t</umb-body-layout>\r\n\t\t`;\r\n\t}\r\n\r\n\t#renderItems() {\r\n\t\treturn html`<div id=\"main\">\r\n\t\t\t<uui-button\r\n\t\t\t\t@click=${this.#openTemplatingPageFieldModal}\r\n\t\t\t\tlook=\"placeholder\"\r\n\t\t\t\tlabel=${this.localize.term('template_insert')}>\r\n\t\t\t\t<h3><umb-localize key=\"template_insertPageField\">Value</umb-localize></h3>\r\n\t\t\t\t<p>\r\n\t\t\t\t\t<umb-localize key=\"template_insertPageFieldDesc\">\r\n\t\t\t\t\t\tDisplays the value of a named field from the current page, with options to modify the value or fallback to\r\n\t\t\t\t\t\talternative values.\r\n\t\t\t\t\t</umb-localize>\r\n\t\t\t\t</p>\r\n\t\t\t</uui-button>\r\n\t\t\t${!this.data?.hidePartialViews\r\n\t\t\t\t? html`<uui-button\r\n\t\t\t\t\t\t@click=${this.#openPartialViewPickerModal}\r\n\t\t\t\t\t\tlook=\"placeholder\"\r\n\t\t\t\t\t\tlabel=${this.localize.term('template_insert')}>\r\n\t\t\t\t\t\t<h3><umb-localize key=\"template_insertPartialView\">Partial view</umb-localize></h3>\r\n\t\t\t\t\t\t<p>\r\n\t\t\t\t\t\t\t<umb-localize key=\"template_insertPartialViewDesc\">\r\n\t\t\t\t\t\t\t\tA partial view is a separate template file which can be rendered inside another template, it's great for\r\n\t\t\t\t\t\t\t\treusing markup or for separating complex templates into separate files.\r\n\t\t\t\t\t\t\t</umb-localize>\r\n\t\t\t\t\t\t</p>\r\n\t\t\t\t\t</uui-button>`\r\n\t\t\t\t: ''}\r\n\t\t\t<uui-button\r\n\t\t\t\t@click=${this.#openDictionaryItemPickerModal}\r\n\t\t\t\tlook=\"placeholder\"\r\n\t\t\t\tlabel=${this.localize.term('template_insertDictionaryItem')}>\r\n\t\t\t\t<h3><umb-localize key=\"template_insertDictionaryItem\">Dictionary Item</umb-localize></h3>\r\n\t\t\t\t<p>\r\n\t\t\t\t\t<umb-localize key=\"template_insertDictionaryItemDesc\">\r\n\t\t\t\t\t\tA dictionary item is a placeholder for a translatable piece of text, which makes it easy to create designs\r\n\t\t\t\t\t\tfor multilingual websites.\r\n\t\t\t\t\t</umb-localize>\r\n\t\t\t\t</p>\r\n\t\t\t</uui-button>\r\n\t\t</div>`;\r\n\t}\r\n\r\n\tstatic override styles = [\r\n\t\tUmbTextStyles,\r\n\t\tcss`\r\n\t\t\t#main uui-button:not(:last-of-type) {\r\n\t\t\t\tdisplay: block;\r\n\t\t\t\tmargin-bottom: var(--uui-size-space-5);\r\n\t\t\t}\r\n\r\n\t\t\th3,\r\n\t\t\tp {\r\n\t\t\t\ttext-align: left;\r\n\t\t\t}\r\n\t\t`,\r\n\t];\r\n}\r\n\r\nexport default UmbTemplatingItemPickerModalElement;\r\n\r\ndeclare global {\r\n\tinterface HTMLElementTagNameMap {\r\n\t\t'umb-templating-item-picker-modal': UmbTemplatingItemPickerModalElement;\r\n\t}\r\n}\r\n"],"names":["_modalContext","_UmbTemplatingItemPickerModalElement_instances","openTemplatingPageFieldModal_fn","openPartialViewPickerModal_fn","openDictionaryItemPickerModal_fn","renderItems_fn","UmbTemplatingItemPickerModalElement","UmbModalBaseElement","__privateAdd","UMB_MODAL_MANAGER_CONTEXT","instance","__privateSet","html","__privateMethod","pageFieldBuilderContext","__privateGet","UMB_TEMPLATING_PAGE_FIELD_BUILDER_MODAL","value","CodeSnippetType","partialViewPickerContext","UMB_PARTIAL_VIEW_PICKER_MODAL","dictionaryItemPickerModal","UMB_DICTIONARY_PICKER_MODAL","item","dictionaryItem","UmbTextStyles","css","__decorateClass","customElement","UmbTemplatingItemPickerModalElement$1"],"mappings":"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"}