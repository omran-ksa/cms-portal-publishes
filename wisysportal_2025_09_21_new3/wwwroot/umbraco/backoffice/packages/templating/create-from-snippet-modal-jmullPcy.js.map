{"version":3,"file":"create-from-snippet-modal-jmullPcy.js","sources":["../../../src/packages/templating/partial-views/entity-actions/create/snippet-modal/create-from-snippet-modal.ts"],"sourcesContent":["import type { UmbCreatePartialViewFromSnippetModalData } from './index.js';\r\nimport { html, customElement, state } from '@umbraco-cms/backoffice/external/lit';\r\nimport { UmbModalBaseElement } from '@umbraco-cms/backoffice/modal';\r\nimport { tryExecute } from '@umbraco-cms/backoffice/resources';\r\nimport type { PartialViewSnippetItemResponseModel } from '@umbraco-cms/backoffice/external/backend-api';\r\nimport { PartialViewService } from '@umbraco-cms/backoffice/external/backend-api';\r\n\r\ninterface UmbSnippetLinkModel {\r\n\tname: string;\r\n\tpath: string;\r\n}\r\n\r\n@customElement('umb-partial-view-create-from-snippet-modal')\r\nexport class UmbPartialViewCreateFromSnippetModalElement extends UmbModalBaseElement<\r\n\tUmbCreatePartialViewFromSnippetModalData,\r\n\tstring\r\n> {\r\n\t@state()\r\n\t_snippets: Array<UmbSnippetLinkModel> = [];\r\n\r\n\t#getCreateHref(snippet: PartialViewSnippetItemResponseModel) {\r\n\t\treturn `section/settings/workspace/partial-view/create/parent/${this.data?.parent.entityType}/${\r\n\t\t\tthis.data?.parent.unique || 'null'\r\n\t\t}/snippet/${snippet.id}`;\r\n\t}\r\n\r\n\tprotected override async firstUpdated() {\r\n\t\tconst { data } = await tryExecute(this, PartialViewService.getPartialViewSnippet({ query: { take: 10000 } }));\r\n\r\n\t\tif (!data) {\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tthis._snippets = data.items.map((snippet) => {\r\n\t\t\treturn {\r\n\t\t\t\tname: snippet.name,\r\n\t\t\t\tpath: this.#getCreateHref(snippet),\r\n\t\t\t};\r\n\t\t});\r\n\t}\r\n\r\n\t// close the modal when navigating to data type\r\n\t#onNavigate() {\r\n\t\tthis._submitModal();\r\n\t}\r\n\r\n\toverride render() {\r\n\t\treturn html`\r\n\t\t\t<umb-body-layout headline=${this.localize.term('create_newPartialViewFromSnippet')}>\r\n\t\t\t\t<uui-box>\r\n\t\t\t\t\t${this._snippets.map(\r\n\t\t\t\t\t\t(snippet) =>\r\n\t\t\t\t\t\t\thtml` <uui-menu-item label=\"${snippet.name}\" href=${snippet.path} @click=${this.#onNavigate}>\r\n\t\t\t\t\t\t\t\t<uui-icon name=\"icon-document-html\" slot=\"icon\"></uui-icon\r\n\t\t\t\t\t\t\t></uui-menu-item>`,\r\n\t\t\t\t\t)}\r\n\t\t\t\t</uui-box>\r\n\t\t\t\t<uui-button\r\n\t\t\t\t\tslot=\"actions\"\r\n\t\t\t\t\t@click=${this._rejectModal}\r\n\t\t\t\t\tlook=\"secondary\"\r\n\t\t\t\t\tlabel=${this.localize.term('general_close')}></uui-button>\r\n\t\t\t</umb-body-layout>\r\n\t\t`;\r\n\t}\r\n}\r\n\r\nexport default UmbPartialViewCreateFromSnippetModalElement;\r\n\r\ndeclare global {\r\n\tinterface HTMLElementTagNameMap {\r\n\t\t'umb-partial-view-create-from-snippet-modal': UmbPartialViewCreateFromSnippetModalElement;\r\n\t}\r\n}\r\n"],"names":["_UmbPartialViewCreateFromSnippetModalElement_instances","getCreateHref_fn","onNavigate_fn","UmbPartialViewCreateFromSnippetModalElement","UmbModalBaseElement","__privateAdd","data","tryExecute","PartialViewService","snippet","__privateMethod","html","__decorateClass","state","customElement","UmbPartialViewCreateFromSnippetModalElement$1"],"mappings":";;;;;;;;;;8OAAAA,GAAAC,GAAAC;AAaa,IAAAC,IAAN,cAA0DC,EAG/D;AAAA,EAHK,cAAA;AAAA,UAAA,GAAA,SAAA,GAAAC,EAAA,MAAAL,CAAA,GAKN,KAAA,YAAwC,CAAC;AAAA,EAAA;AAAA,EAQzC,MAAyB,eAAe;AACvC,UAAM,EAAE,MAAAM,EAAS,IAAA,MAAMC,EAAW,MAAMC,EAAmB,sBAAsB,EAAE,OAAO,EAAE,MAAM,IAAM,EAAG,CAAA,CAAC;AAE5G,IAAKF,MAIL,KAAK,YAAYA,EAAK,MAAM,IAAI,CAACG,OACzB;AAAA,MACN,MAAMA,EAAQ;AAAA,MACd,MAAMC,EAAK,MAAAV,GAAAC,CAAA,EAAL,KAAoB,MAAAQ,CAAA;AAAA,IAC3B,EACA;AAAA,EAAA;AAAA,EAQO,SAAS;AACV,WAAAE;AAAA,+BACsB,KAAK,SAAS,KAAK,kCAAkC,CAAC;AAAA;AAAA,OAE9E,KAAK,UAAU;AAAA,MAChB,CAACF,MACAE,2BAA8BF,EAAQ,IAAI,UAAUA,EAAQ,IAAI,WAAWC,EAAA,MAAKV,GAAWE,CAAA,CAAA;AAAA;AAAA;AAAA,IAG5F,CAAA;AAAA;AAAA;AAAA;AAAA,cAIQ,KAAK,YAAY;AAAA;AAAA,aAElB,KAAK,SAAS,KAAK,eAAe,CAAC;AAAA;AAAA;AAAA,EAAA;AAIhD;AApDOF,IAAA,oBAAA,QAAA;AAONC,IAAc,SAACQ,GAA8C;AAC5D,SAAO,yDAAyD,KAAK,MAAM,OAAO,UAAU,IAC3F,KAAK,MAAM,OAAO,UAAU,MAC7B,YAAYA,EAAQ,EAAE;AACvB;AAkBAP,IAAW,WAAG;AACb,OAAK,aAAa;AACnB;AA1BAU,EAAA;AAAA,EADCC,EAAM;AAAA,GAJKV,EAKZ,WAAA,aAAA,CAAA;AALYA,IAANS,EAAA;AAAA,EADNE,EAAc,4CAA4C;AAAA,GAC9CX,CAAA;AAsDb,MAAAY,IAAeZ;"}