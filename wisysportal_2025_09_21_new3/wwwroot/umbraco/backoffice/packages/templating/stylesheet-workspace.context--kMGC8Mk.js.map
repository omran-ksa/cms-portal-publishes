{"version":3,"file":"stylesheet-workspace.context--kMGC8Mk.js","sources":["../../../src/packages/templating/stylesheets/workspace/stylesheet-workspace-editor.element.ts","../../../src/packages/templating/stylesheets/workspace/stylesheet-workspace.context.ts"],"sourcesContent":["import { UMB_STYLESHEET_WORKSPACE_CONTEXT } from './stylesheet-workspace.context-token.js';\r\nimport { css, html, customElement, state } from '@umbraco-cms/backoffice/external/lit';\r\nimport { UmbLitElement } from '@umbraco-cms/backoffice/lit-element';\r\nimport { UmbTextStyles } from '@umbraco-cms/backoffice/style';\r\n\r\n@customElement('umb-stylesheet-workspace-editor')\r\nexport class UmbStylesheetWorkspaceEditorElement extends UmbLitElement {\r\n\t@state()\r\n\tprivate _isNew?: boolean;\r\n\r\n\t#context?: typeof UMB_STYLESHEET_WORKSPACE_CONTEXT.TYPE;\r\n\r\n\tconstructor() {\r\n\t\tsuper();\r\n\r\n\t\tthis.consumeContext(UMB_STYLESHEET_WORKSPACE_CONTEXT, (context) => {\r\n\t\t\tthis.#context = context;\r\n\t\t\tthis.observe(this.#context?.isNew, (isNew) => (this._isNew = isNew));\r\n\t\t});\r\n\t}\r\n\r\n\toverride render() {\r\n\t\treturn html`\r\n\t\t\t<umb-entity-detail-workspace-editor>\r\n\t\t\t\t<umb-workspace-header-name-editable\r\n\t\t\t\t\tslot=\"header\"\r\n\t\t\t\t\t?readonly=${this._isNew === false}></umb-workspace-header-name-editable>\r\n\t\t\t</umb-entity-detail-workspace-editor>\r\n\t\t`;\r\n\t}\r\n\r\n\tstatic override styles = [\r\n\t\tUmbTextStyles,\r\n\t\tcss`\r\n\t\t\tumb-code-editor {\r\n\t\t\t\t--editor-height: calc(100dvh - 260px);\r\n\t\t\t}\r\n\r\n\t\t\tuui-box {\r\n\t\t\t\tmin-height: calc(100dvh - 260px);\r\n\t\t\t\tmargin: var(--uui-size-layout-1);\r\n\t\t\t\t--uui-box-default-padding: 0;\r\n\t\t\t\t/* remove header border bottom as code editor looks better in this box */\r\n\t\t\t\t--uui-color-divider-standalone: transparent;\r\n\t\t\t}\r\n\t\t`,\r\n\t];\r\n}\r\n\r\nexport default UmbStylesheetWorkspaceEditorElement;\r\n\r\ndeclare global {\r\n\tinterface HTMLElementTagNameMap {\r\n\t\t'umb-stylesheet-workspace-editor': UmbStylesheetWorkspaceEditorElement;\r\n\t}\r\n}\r\n","import type { UmbStylesheetDetailRepository } from '../repository/stylesheet-detail.repository.js';\r\nimport type { UmbStylesheetDetailModel } from '../types.js';\r\nimport { UMB_STYLESHEET_ENTITY_TYPE } from '../entity.js';\r\nimport { UMB_STYLESHEET_DETAIL_REPOSITORY_ALIAS } from '../repository/index.js';\r\nimport { UMB_STYLESHEET_WORKSPACE_ALIAS } from './manifests.js';\r\nimport { UmbStylesheetWorkspaceEditorElement } from './stylesheet-workspace-editor.element.js';\r\nimport {\r\n\ttype UmbSubmittableWorkspaceContext,\r\n\tUmbWorkspaceIsNewRedirectController,\r\n\ttype UmbRoutableWorkspaceContext,\r\n\tUmbEntityNamedDetailWorkspaceContextBase,\r\n} from '@umbraco-cms/backoffice/workspace';\r\nimport type { UmbControllerHost } from '@umbraco-cms/backoffice/controller-api';\r\nimport type { IRoutingInfo, PageComponent } from '@umbraco-cms/backoffice/router';\r\nimport type { UmbEntityModel } from '@umbraco-cms/backoffice/entity';\r\nimport { UmbServerFileRenameWorkspaceRedirectController } from '@umbraco-cms/backoffice/server-file-system';\r\n\r\nexport class UmbStylesheetWorkspaceContext\r\n\textends UmbEntityNamedDetailWorkspaceContextBase<UmbStylesheetDetailModel, UmbStylesheetDetailRepository>\r\n\timplements UmbSubmittableWorkspaceContext, UmbRoutableWorkspaceContext\r\n{\r\n\tpublic readonly content = this._data.createObservablePartOfCurrent((data) => data?.content);\r\n\r\n\tconstructor(host: UmbControllerHost) {\r\n\t\tsuper(host, {\r\n\t\t\tworkspaceAlias: UMB_STYLESHEET_WORKSPACE_ALIAS,\r\n\t\t\tentityType: UMB_STYLESHEET_ENTITY_TYPE,\r\n\t\t\tdetailRepositoryAlias: UMB_STYLESHEET_DETAIL_REPOSITORY_ALIAS,\r\n\t\t});\r\n\r\n\t\tthis.routes.setRoutes([\r\n\t\t\t{\r\n\t\t\t\tpath: 'create/parent/:entityType/:parentUnique',\r\n\t\t\t\tcomponent: UmbStylesheetWorkspaceEditorElement,\r\n\t\t\t\tsetup: async (component: PageComponent, info: IRoutingInfo) => {\r\n\t\t\t\t\tconst parentEntityType = info.match.params.entityType;\r\n\t\t\t\t\tconst parentUnique = info.match.params.parentUnique === 'null' ? null : info.match.params.parentUnique;\r\n\t\t\t\t\tawait this.createScaffold({ parent: { entityType: parentEntityType, unique: parentUnique } });\r\n\r\n\t\t\t\t\tnew UmbWorkspaceIsNewRedirectController(\r\n\t\t\t\t\t\tthis,\r\n\t\t\t\t\t\tthis,\r\n\t\t\t\t\t\tthis.getHostElement().shadowRoot!.querySelector('umb-router-slot')!,\r\n\t\t\t\t\t);\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t\t{\r\n\t\t\t\tpath: 'edit/:unique',\r\n\t\t\t\tcomponent: UmbStylesheetWorkspaceEditorElement,\r\n\t\t\t\tsetup: (component: PageComponent, info: IRoutingInfo) => {\r\n\t\t\t\t\t// TODO: Decode uniques [NL]\r\n\t\t\t\t\tconst unique = info.match.params.unique;\r\n\t\t\t\t\tthis.load(unique);\r\n\r\n\t\t\t\t\tnew UmbServerFileRenameWorkspaceRedirectController(\r\n\t\t\t\t\t\tthis,\r\n\t\t\t\t\t\tthis,\r\n\t\t\t\t\t\tthis.getHostElement().shadowRoot!.querySelector('umb-router-slot')!,\r\n\t\t\t\t\t);\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t]);\r\n\t}\r\n\r\n\t/**\r\n\t * @description Set the content of the stylesheet\r\n\t * @param {string} value The content of the stylesheet\r\n\t * @memberof UmbStylesheetWorkspaceContext\r\n\t */\r\n\tpublic setContent(value: string) {\r\n\t\tthis._data.updateCurrent({ content: value });\r\n\t}\r\n\r\n\t/**\r\n\t * @description Create a new stylesheet\r\n\t * @deprecated Use `createScaffold` instead. Will be removed in v17.\r\n\t * @param { UmbEntityModel } parent The parent entity\r\n\t * @param { string } parent.entityType The entity type of the parent\r\n\t * @param { UmbEntityUnique } parent.unique The unique identifier of the parent\r\n\t */\r\n\tasync create(parent: UmbEntityModel) {\r\n\t\tawait this.createScaffold({ parent });\r\n\t}\r\n}\r\n\r\nexport { UmbStylesheetWorkspaceContext as api };\r\n"],"names":["_context","UmbStylesheetWorkspaceEditorElement","UmbLitElement","__privateAdd","UMB_STYLESHEET_WORKSPACE_CONTEXT","context","__privateSet","__privateGet","isNew","html","UmbTextStyles","css","__decorateClass","state","customElement","UmbStylesheetWorkspaceContext","UmbEntityNamedDetailWorkspaceContextBase","host","UMB_STYLESHEET_WORKSPACE_ALIAS","UMB_STYLESHEET_ENTITY_TYPE","UMB_STYLESHEET_DETAIL_REPOSITORY_ALIAS","data","component","info","parentEntityType","parentUnique","UmbWorkspaceIsNewRedirectController","unique","UmbServerFileRenameWorkspaceRedirectController","value","parent"],"mappings":";;;;;;;;;;;;;;;;;;gUAAAA;AAMa,IAAAC,IAAN,cAAkDC,EAAc;AAAA,EAMtE,cAAc;AACP,UAAA,GAHPC,EAAA,MAAAH,CAAA,GAKM,KAAA,eAAeI,GAAkC,CAACC,MAAY;AAClE,MAAAC,EAAA,MAAKN,GAAWK,CAAA,GACX,KAAA,QAAQE,QAAKP,CAAU,GAAA,OAAO,CAACQ,MAAW,KAAK,SAASA,CAAM;AAAA,IAAA,CACnE;AAAA,EAAA;AAAA,EAGO,SAAS;AACV,WAAAC;AAAA;AAAA;AAAA;AAAA,iBAIQ,KAAK,WAAW,EAAK;AAAA;AAAA;AAAA,EAAA;AAqBtC;AArCCT,IAAA,oBAAA,QAAA;AAJYC,EAyBI,SAAS;AAAA,EACxBS;AAAA,EACAC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAaD;AAtCQC,EAAA;AAAA,EADPC,EAAM;AAAA,GADKZ,EAEJ,WAAA,UAAA,CAAA;AAFIA,IAANW,EAAA;AAAA,EADNE,EAAc,iCAAiC;AAAA,GACnCb,CAAA;ACWN,MAAMc,UACJC,EAET;AAAA,EAGC,YAAYC,GAAyB;AACpC,UAAMA,GAAM;AAAA,MACX,gBAAgBC;AAAA,MAChB,YAAYC;AAAA,MACZ,uBAAuBC;AAAA,IAAA,CACvB,GAPF,KAAgB,UAAU,KAAK,MAAM,8BAA8B,CAACC,MAASA,GAAM,OAAO,GASzF,KAAK,OAAO,UAAU;AAAA,MACrB;AAAA,QACC,MAAM;AAAA,QACN,WAAWpB;AAAA,QACX,OAAO,OAAOqB,GAA0BC,MAAuB;AACxD,gBAAAC,IAAmBD,EAAK,MAAM,OAAO,YACrCE,IAAeF,EAAK,MAAM,OAAO,iBAAiB,SAAS,OAAOA,EAAK,MAAM,OAAO;AACpF,gBAAA,KAAK,eAAe,EAAE,QAAQ,EAAE,YAAYC,GAAkB,QAAQC,EAAa,GAAG,GAExF,IAAAC;AAAA,YACH;AAAA,YACA;AAAA,YACA,KAAK,eAAA,EAAiB,WAAY,cAAc,iBAAiB;AAAA,UAClE;AAAA,QAAA;AAAA,MAEF;AAAA,MACA;AAAA,QACC,MAAM;AAAA,QACN,WAAWzB;AAAA,QACX,OAAO,CAACqB,GAA0BC,MAAuB;AAElD,gBAAAI,IAASJ,EAAK,MAAM,OAAO;AACjC,eAAK,KAAKI,CAAM,GAEZ,IAAAC;AAAA,YACH;AAAA,YACA;AAAA,YACA,KAAK,eAAA,EAAiB,WAAY,cAAc,iBAAiB;AAAA,UAClE;AAAA,QAAA;AAAA,MACD;AAAA,IACD,CACA;AAAA,EAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,EAQK,WAAWC,GAAe;AAChC,SAAK,MAAM,cAAc,EAAE,SAASA,GAAO;AAAA,EAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,EAU5C,MAAM,OAAOC,GAAwB;AACpC,UAAM,KAAK,eAAe,EAAE,QAAAA,GAAQ;AAAA,EAAA;AAEtC;"}