{"version":3,"file":"code-editor.controller-DXLfWzi_.js","sources":["../../../src/packages/code-editor/themes/code-editor.hc-light.theme.ts","../../../src/packages/code-editor/themes/code-editor.hc-dark.theme.ts","../../../src/packages/code-editor/themes/code-editor.light.theme.ts","../../../src/packages/code-editor/themes/code-editor.dark.theme.ts","../../../src/packages/code-editor/themes/index.ts","../../../src/packages/code-editor/code-editor.controller.ts"],"sourcesContent":["import type { monaco } from '@umbraco-cms/backoffice/external/monaco-editor';\r\n\r\nexport const UmbCodeEditorThemeHighContrastLight: monaco.editor.IStandaloneThemeData = {\r\n\tbase: 'vs',\r\n\tinherit: true, // can also be false to completely replace the builtin rules\r\n\trules: [],\r\n\tcolors: {},\r\n};\r\n","import type { monaco } from '@umbraco-cms/backoffice/external/monaco-editor';\r\n\r\nexport const UmbCodeEditorThemeHighContrastDark: monaco.editor.IStandaloneThemeData = {\r\n\tbase: 'vs-dark',\r\n\tinherit: true, // can also be false to completely replace the builtin rules\r\n\trules: [],\r\n\tcolors: {},\r\n};\r\n","import type { monaco } from '@umbraco-cms/backoffice/external/monaco-editor';\r\n\r\nexport const UmbCodeEditorThemeLight: monaco.editor.IStandaloneThemeData = {\r\n\tbase: 'vs',\r\n\tinherit: true, // can also be false to completely replace the builtin rules\r\n\trules: [],\r\n\tcolors: {},\r\n};\r\n","import type { monaco } from '@umbraco-cms/backoffice/external/monaco-editor';\r\n\r\nexport const UmbCodeEditorThemeDark: monaco.editor.IStandaloneThemeData = {\r\n\tbase: 'vs-dark',\r\n\tinherit: true, // can also be false to completely replace the builtin rules\r\n\trules: [],\r\n\tcolors: {\r\n\t\t'editor.background': '#21262e',\r\n\t},\r\n};\r\n","import type { CodeEditorTheme } from '../models/code-editor.model.js';\r\nimport { UmbCodeEditorThemeHighContrastLight } from './code-editor.hc-light.theme.js';\r\nimport { UmbCodeEditorThemeHighContrastDark } from './code-editor.hc-dark.theme.js';\r\nimport { UmbCodeEditorThemeLight } from './code-editor.light.theme.js';\r\nimport { UmbCodeEditorThemeDark } from './code-editor.dark.theme.js';\r\nimport type { monaco } from '@umbraco-cms/backoffice/external/monaco-editor';\r\n\r\n/**\r\n * 4 themes for the code editor.\r\n  @type {*} */\r\nconst themes: Record<CodeEditorTheme, monaco.editor.IStandaloneThemeData> = {\r\n\t'umb-dark': UmbCodeEditorThemeDark,\r\n\t'umb-light': UmbCodeEditorThemeLight,\r\n\t'umb-hc-light': UmbCodeEditorThemeHighContrastLight,\r\n\t'umb-hc-dark': UmbCodeEditorThemeHighContrastDark,\r\n};\r\n\r\nexport {\r\n\tUmbCodeEditorThemeDark,\r\n\tUmbCodeEditorThemeLight,\r\n\tUmbCodeEditorThemeHighContrastLight,\r\n\tUmbCodeEditorThemeHighContrastDark,\r\n\tthemes,\r\n};\r\n","import type {\r\n\tCodeEditorConstructorOptions,\r\n\tCodeEditorSearchOptions,\r\n\tCodeEditorTheme,\r\n\tUmbCodeEditorCursorPosition,\r\n\tUmbCodeEditorCursorPositionChangedEvent,\r\n\tUmbCodeEditorCursorSelectionChangedEvent,\r\n\tUmbCodeEditorHost,\r\n\tUmbCodeEditorRange,\r\n\tUmbCodeEditorSelection,\r\n} from './models/code-editor.model.js';\r\nimport { themes } from './themes/index.js';\r\nimport { monaco } from '@umbraco-cms/backoffice/external/monaco-editor';\r\nimport { UmbChangeEvent, UmbInputEvent } from '@umbraco-cms/backoffice/event';\r\nimport { UmbControllerBase } from '@umbraco-cms/backoffice/class-api';\r\n\r\n//TODO - consider firing change event on blur\r\n\r\n/**\r\n * This is a wrapper class for the [monaco editor](https://microsoft.github.io/monaco-editor). It exposes some of the monaco editor API. It also handles the creation of the monaco editor.\r\n * It allows access to the entire monaco editor object through `monacoEditor` property, but mind the fact that editor might be swapped in the future for a different library, so use on your own responsibility.\r\n * Through the UmbCodeEditorHost interface it can be used in a custom element.\r\n * By using monaco library directly you can access the entire monaco API along with code completions, actions etc. This class creates some level of abstraction over the monaco editor. It only provides basic functionality, that should be enough for most of the use cases and should be possible to implement with any code editor library.\r\n *\r\n * Current issues: [shadow DOM related issues](https://github.com/microsoft/monaco-editor/labels/editor-shadow-dom) #3217  currently fixed by a hack , [razor syntax highlight](https://github.com/microsoft/monaco-editor/issues/1997)\r\n * @class UmbCodeEditor\r\n */\r\nexport class UmbCodeEditorController extends UmbControllerBase {\r\n\t#host: UmbCodeEditorHost;\r\n\r\n\t#editor?: monaco.editor.IStandaloneCodeEditor;\r\n\r\n\t/**\r\n\t * The monaco editor object. This is the actual monaco editor object. It is exposed for advanced usage, but mind the fact that editor might be swapped in the future for a different library, so use on your own responsibility. For more information see [monaco editor API](https://microsoft.github.io/monaco-editor/docs.html#interfaces/editor.IStandaloneCodeEditor.html).\r\n\t * @readonly\r\n\t * @memberof UmbCodeEditor\r\n\t */\r\n\tget monacoEditor() {\r\n\t\treturn this.#editor;\r\n\t}\r\n\r\n\t#options: CodeEditorConstructorOptions = {};\r\n\r\n\t/**\r\n\t * The options used to create the editor.\r\n\t * @readonly\r\n\t * @type {CodeEditorConstructorOptions}\r\n\t * @memberof UmbCodeEditor\r\n\t */\r\n\tget options(): CodeEditorConstructorOptions {\r\n\t\treturn this.#options;\r\n\t}\r\n\r\n\t#defaultMonacoOptions: monaco.editor.IStandaloneEditorConstructionOptions = {\r\n\t\tautomaticLayout: true,\r\n\t\tscrollBeyondLastLine: false,\r\n\t\tscrollbar: {\r\n\t\t\tverticalScrollbarSize: 5,\r\n\t\t},\r\n\t\t// disable this, as it does not work with shadow dom properly.\r\n\t\tcolorDecorators: false,\r\n\t};\r\n\r\n\t#position: UmbCodeEditorCursorPosition | null = null;\r\n\r\n\t/**\r\n\t * Provides the current position of the cursor.\r\n\t * @readonly\r\n\t * @memberof UmbCodeEditor\r\n\t */\r\n\tget position() {\r\n\t\treturn this.#position;\r\n\t}\r\n\r\n\t#secondaryPositions: UmbCodeEditorCursorPosition[] = [];\r\n\r\n\t/**\r\n\t * Provides positions of all the secondary cursors.\r\n\t * @readonly\r\n\t * @memberof UmbCodeEditor\r\n\t */\r\n\tget secondaryPositions() {\r\n\t\treturn this.#secondaryPositions;\r\n\t}\r\n\r\n\t/**\r\n\t * Provides the current value of the editor.\r\n\t * @memberof UmbCodeEditor\r\n\t */\r\n\tget value() {\r\n\t\tif (!this.#editor) return '';\r\n\t\tconst value = this.#editor.getValue();\r\n\t\treturn value;\r\n\t}\r\n\r\n\tset value(newValue: string) {\r\n\t\tif (!this.#editor) throw new Error('Editor object not found');\r\n\r\n\t\tconst oldValue = this.value ?? '';\r\n\t\tif (newValue !== oldValue) {\r\n\t\t\tthis.#editor.setValue(newValue ?? '');\r\n\t\t}\r\n\t}\r\n\r\n\t/**\r\n\t * Provides the current model of the editor. For advanced usage. Bare in mind that in case of the monaco library being swapped in the future, this might not be available. For more information see [monaco editor model API](https://microsoft.github.io/monaco-editor/docs.html#interfaces/editor.ITextModel.html).\r\n\t * @readonly\r\n\t * @memberof UmbCodeEditor\r\n\t */\r\n\tget monacoModel() {\r\n\t\tif (!this.#editor) return null;\r\n\t\treturn this.#editor.getModel();\r\n\t}\r\n\r\n\t/**\r\n\t * Creates an instance of UmbCodeEditor. You should instantiate this class through the `UmbCodeEditorHost` interface and that should happen when inside DOM nodes of the host container are available, otherwise the editor will not be able to initialize, for example in lit `firstUpdated` lifecycle hook. It will make host emit change and input events when the value of the editor changes.\r\n\t * @param {UmbCodeEditorHost} host\r\n\t * @param {CodeEditorConstructorOptions} [options]\r\n\t * @memberof UmbCodeEditor\r\n\t */\r\n\tconstructor(host: UmbCodeEditorHost, options?: CodeEditorConstructorOptions) {\r\n\t\tsuper(host);\r\n\t\tthis.#options = { ...options };\r\n\t\tthis.#host = host;\r\n\t\tthis.#registerThemes();\r\n\t\tthis.#createEditor(options);\r\n\t}\r\n\r\n\t#registerThemes() {\r\n\t\tObject.entries(themes).forEach(([name, theme]) => {\r\n\t\t\tthis.#defineTheme(name, theme);\r\n\t\t});\r\n\t}\r\n\r\n\t#defineTheme(name: string, theme: monaco.editor.IStandaloneThemeData) {\r\n\t\tmonaco.editor.defineTheme(name, theme);\r\n\t}\r\n\r\n\t#initiateEvents() {\r\n\t\tthis.#editor?.onDidChangeModelContent(() => {\r\n\t\t\tthis.#host.code = this.value ?? '';\r\n\t\t\tthis.#host.dispatchEvent(new UmbInputEvent());\r\n\t\t});\r\n\r\n\t\tthis.#editor?.onDidChangeModel(() => {\r\n\t\t\tthis.#host.dispatchEvent(new UmbChangeEvent());\r\n\t\t});\r\n\r\n\t\tthis.#editor?.onDidChangeCursorPosition((e) => {\r\n\t\t\tthis.#position = e.position;\r\n\t\t\tthis.#secondaryPositions = e.secondaryPositions;\r\n\t\t});\r\n\t}\r\n\r\n\t#mapOptions(options: CodeEditorConstructorOptions): monaco.editor.IStandaloneEditorConstructionOptions {\r\n\t\tconst hasLineNumbers = Object.prototype.hasOwnProperty.call(options, 'lineNumbers');\r\n\t\tconst hasMinimap = Object.prototype.hasOwnProperty.call(options, 'minimap');\r\n\t\tconst hasLightbulb = Object.prototype.hasOwnProperty.call(options, 'lightbulb');\r\n\r\n\t\treturn {\r\n\t\t\t...options,\r\n\t\t\tlineNumbers: hasLineNumbers ? (options.lineNumbers ? 'on' : 'off') : undefined,\r\n\t\t\tminimap: hasMinimap ? (options.minimap ? { enabled: true } : { enabled: false }) : undefined,\r\n\t\t\tlightbulb: hasLightbulb\r\n\t\t\t\t? options.lightbulb\r\n\t\t\t\t\t? { enabled: monaco.editor.ShowLightbulbIconMode.On }\r\n\t\t\t\t\t: { enabled: monaco.editor.ShowLightbulbIconMode.Off }\r\n\t\t\t\t: undefined,\r\n\t\t};\r\n\t}\r\n\t/**\r\n\t * Updates the options of the editor. This is useful for updating the options after the editor has been created.\r\n\t * @param {CodeEditorConstructorOptions} newOptions\r\n\t * @memberof UmbCodeEditor\r\n\t */\r\n\tupdateOptions(newOptions: CodeEditorConstructorOptions) {\r\n\t\tif (!this.#editor) throw new Error('Editor object not found');\r\n\t\tthis.#options = { ...this.#options, ...newOptions };\r\n\t\tthis.#editor.updateOptions(this.#mapOptions(newOptions));\r\n\t}\r\n\r\n\t#createEditor(options: CodeEditorConstructorOptions = {}) {\r\n\t\tif (!this.#host.container) throw new Error('Container not found');\r\n\t\tif (this.#host.container.hasChildNodes()) throw new Error('Editor container should be empty');\r\n\r\n\t\tconst mergedOptions = { ...this.#defaultMonacoOptions, ...this.#mapOptions(options) };\r\n\r\n\t\tthis.#editor = monaco.editor.create(this.#host.container, mergedOptions);\r\n\r\n\t\tthis.#initiateEvents();\r\n\t}\r\n\t/**\r\n\t * Provides the current selections of the editor.\r\n\t * @returns {*}  {UmbCodeEditorSelection[]}\r\n\t * @memberof UmbCodeEditor\r\n\t */\r\n\tgetSelections(): UmbCodeEditorSelection[] {\r\n\t\tif (!this.#editor) return [];\r\n\t\treturn this.#editor.getSelections() ?? [];\r\n\t}\r\n\t/**\r\n\t * Provides the current positions of the cursor or multiple cursors.\r\n\t * @returns {*}  {(UmbCodeEditorCursorPosition | null)}\r\n\t * @memberof UmbCodeEditor\r\n\t */\r\n\tgetPositions(): UmbCodeEditorCursorPosition | null {\r\n\t\tif (!this.#editor) return null;\r\n\t\treturn this.#editor.getPosition();\r\n\t}\r\n\t/**\r\n\t * Inserts text at the current cursor position or multiple cursor positions.\r\n\t * @param {string} text\r\n\t * @memberof UmbCodeEditor\r\n\t */\r\n\tinsert(text: string) {\r\n\t\tif (!this.#editor) throw new Error('Editor object not found');\r\n\t\tconst selections = this.#editor.getSelections() ?? [];\r\n\t\tif (selections?.length > 0) {\r\n\t\t\tthis.#editor.executeEdits(\r\n\t\t\t\tnull,\r\n\t\t\t\tselections.map((selection) => ({ range: selection, text })),\r\n\t\t\t);\r\n\t\t}\r\n\t}\r\n\t/**\r\n\t * Looks for a string or matching strings in the editor and returns the ranges of the found strings. Can use regex, case sensitive and more. If you want regex set the isRegex to true in the options.\r\n\t * @param {string} searchString\r\n\t * @param {CodeEditorSearchOptions} [searchOptions]\r\n\t * @returns {*}  {UmbCodeEditorRange[]}\r\n\t * @memberof UmbCodeEditor\r\n\t */\r\n\tfind(\r\n\t\tsearchString: string,\r\n\t\tsearchOptions: CodeEditorSearchOptions = <CodeEditorSearchOptions>{},\r\n\t): UmbCodeEditorRange[] {\r\n\t\tif (!this.#editor) throw new Error('Editor object not found');\r\n\t\tconst defaultOptions = {\r\n\t\t\tsearchOnlyEditableRange: false,\r\n\r\n\t\t\tisRegex: false,\r\n\r\n\t\t\tmatchCase: false,\r\n\r\n\t\t\twordSeparators: null,\r\n\r\n\t\t\tcaptureMatches: false,\r\n\t\t};\r\n\r\n\t\tconst { searchOnlyEditableRange, isRegex, matchCase, wordSeparators, captureMatches } = {\r\n\t\t\t...defaultOptions,\r\n\t\t\t...searchOptions,\r\n\t\t};\r\n\t\treturn (\r\n\t\t\tthis.monacoModel\r\n\t\t\t\t?.findMatches(searchString, searchOnlyEditableRange, isRegex, matchCase, wordSeparators, captureMatches)\r\n\t\t\t\t.map((findMatch) => ({\r\n\t\t\t\t\tstartLineNumber: findMatch.range.startLineNumber,\r\n\t\t\t\t\tstartColumn: findMatch.range.startColumn,\r\n\t\t\t\t\tendLineNumber: findMatch.range.endLineNumber,\r\n\t\t\t\t\tendColumn: findMatch.range.endColumn,\r\n\t\t\t\t})) ?? []\r\n\t\t);\r\n\t}\r\n\t/**\r\n\t * Returns the value of the editor for a given range.\r\n\t * @param {UmbCodeEditorRange} range\r\n\t * @returns {*}  {string}\r\n\t * @memberof UmbCodeEditor\r\n\t */\r\n\tgetValueInRange(range: UmbCodeEditorRange): string {\r\n\t\tif (!this.#editor) throw new Error('Editor object not found');\r\n\t\treturn this.monacoModel?.getValueInRange(range) ?? '';\r\n\t}\r\n\t/**\r\n\t * Inserts text at a given position.\r\n\t * @param {string} text\r\n\t * @param {UmbCodeEditorCursorPosition} position\r\n\t * @memberof UmbCodeEditor\r\n\t */\r\n\tinsertAtPosition(text: string, position: UmbCodeEditorCursorPosition) {\r\n\t\tif (!this.#editor) throw new Error('Editor object not found');\r\n\t\tthis.#editor.executeEdits(null, [\r\n\t\t\t{\r\n\t\t\t\trange: {\r\n\t\t\t\t\tstartLineNumber: position.lineNumber,\r\n\t\t\t\t\tstartColumn: position.column,\r\n\t\t\t\t\tendLineNumber: position.lineNumber,\r\n\t\t\t\t\tendColumn: position.column,\r\n\t\t\t\t},\r\n\t\t\t\ttext,\r\n\t\t\t},\r\n\t\t]);\r\n\t}\r\n\r\n\t/**\r\n\t * Selects a range of text in the editor.\r\n\t * @param {UmbCodeEditorRange} range\r\n\t * @memberof UmbCodeEditor\r\n\t */\r\n\tselect(range: UmbCodeEditorRange) {\r\n\t\tif (!this.#editor) throw new Error('Editor object not found');\r\n\t\tthis.#editor.setSelection(range);\r\n\t}\r\n\r\n\t/**\r\n\t * Changes the theme of the editor.\r\n\t * @template T\r\n\t * @param {(CodeEditorTheme | T)} theme\r\n\t * @memberof UmbCodeEditor\r\n\t */\r\n\tsetTheme<T extends string>(theme: CodeEditorTheme | T) {\r\n\t\tif (!this.#editor) throw new Error('Editor object not found');\r\n\t\tmonaco.editor.setTheme(theme);\r\n\t}\r\n\r\n\t/**\r\n\t * Runs callback on change of model content. (for example when typing)\r\n\t * @param {() => void} callback\r\n\t * @memberof UmbCodeEditor\r\n\t */\r\n\tonChangeModelContent(callback: () => void) {\r\n\t\tif (!this.#editor) throw new Error('Editor object not found');\r\n\t\tthis.#editor.onDidChangeModelContent(() => {\r\n\t\t\tcallback();\r\n\t\t});\r\n\t}\r\n\r\n\t/**\r\n\t * Runs callback on change of model (when the entire model is replaced\t)\r\n\t * @param {() => void} callback\r\n\t * @memberof UmbCodeEditor\r\n\t */\r\n\tonDidChangeModel(callback: () => void) {\r\n\t\tif (!this.#editor) throw new Error('Editor object not found');\r\n\t\tthis.#editor.onDidChangeModel(() => {\r\n\t\t\tcallback();\r\n\t\t});\r\n\t}\r\n\t/**\r\n\t * Runs callback on change of cursor position. Gives as parameter the new position.\r\n\t * @param {((e: UmbCodeEditorCursorPositionChangedEvent | undefined) => void)} callback\r\n\t * @memberof UmbCodeEditor\r\n\t */\r\n\tonDidChangeCursorPosition(callback: (e: UmbCodeEditorCursorPositionChangedEvent | undefined) => void) {\r\n\t\tif (!this.#editor) throw new Error('Editor object not found');\r\n\t\tthis.#editor.onDidChangeCursorPosition((event) => {\r\n\t\t\tcallback(event);\r\n\t\t});\r\n\t}\r\n\t/**\r\n\t * Runs callback on change of cursor selection. Gives as parameter the new selection.\r\n\t * @param {((e: UmbCodeEditorCursorSelectionChangedEvent | undefined) => void)} callback\r\n\t * @memberof UmbCodeEditor\r\n\t */\r\n\tonDidChangeCursorSelection(callback: (e: UmbCodeEditorCursorSelectionChangedEvent | undefined) => void) {\r\n\t\tif (!this.#editor) throw new Error('Editor object not found');\r\n\t\tthis.#editor.onDidChangeCursorSelection((event) => {\r\n\t\t\tcallback(event);\r\n\t\t});\r\n\t}\r\n}\r\n"],"names":["UmbCodeEditorThemeHighContrastLight","UmbCodeEditorThemeHighContrastDark","UmbCodeEditorThemeLight","UmbCodeEditorThemeDark","themes","UmbCodeEditorController","UmbControllerBase","#host","#editor","#options","#defaultMonacoOptions","#position","#secondaryPositions","newValue","oldValue","host","options","#registerThemes","#createEditor","name","theme","#defineTheme","monaco","#initiateEvents","UmbInputEvent","UmbChangeEvent","e","#mapOptions","hasLineNumbers","hasMinimap","hasLightbulb","newOptions","mergedOptions","text","selections","selection","searchString","searchOptions","defaultOptions","searchOnlyEditableRange","isRegex","matchCase","wordSeparators","captureMatches","findMatch","range","position","callback","event"],"mappings":"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"}