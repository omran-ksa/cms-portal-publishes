{"version":3,"file":"property-editor-ui-textarea.element-6dUGfO7d.js","sources":["../../../src/packages/property-editors/textarea/property-editor-ui-textarea.element.ts"],"sourcesContent":["import { css, customElement, html, ifDefined, property, state, styleMap } from '@umbraco-cms/backoffice/external/lit';\r\nimport { UmbLitElement } from '@umbraco-cms/backoffice/lit-element';\r\nimport type { StyleInfo } from '@umbraco-cms/backoffice/external/lit';\r\nimport type {\r\n\tUmbPropertyEditorConfigCollection,\r\n\tUmbPropertyEditorUiElement,\r\n} from '@umbraco-cms/backoffice/property-editor';\r\nimport { UMB_VALIDATION_EMPTY_LOCALIZATION_KEY, UmbFormControlMixin } from '@umbraco-cms/backoffice/validation';\r\nimport { UmbTextStyles } from '@umbraco-cms/backoffice/style';\r\nimport type { UUITextareaElement } from '@umbraco-cms/backoffice/external/uui';\r\nimport { UmbChangeEvent } from '@umbraco-cms/backoffice/event';\r\n\r\n@customElement('umb-property-editor-ui-textarea')\r\nexport class UmbPropertyEditorUITextareaElement\r\n\textends UmbFormControlMixin<string | undefined, typeof UmbLitElement>(UmbLitElement, undefined)\r\n\timplements UmbPropertyEditorUiElement\r\n{\r\n\t/**\r\n\t * Sets the input to readonly mode, meaning value cannot be changed but still able to read and select its content.\r\n\t * @type {boolean}\r\n\t * @attr\r\n\t * @default false\r\n\t */\r\n\t@property({ type: Boolean, reflect: true })\r\n\treadonly = false;\r\n\r\n\t/**\r\n\t * Sets the input to mandatory, meaning validation will fail if the value is empty.\r\n\t * @type {boolean}\r\n\t */\r\n\t@property({ type: Boolean })\r\n\tmandatory?: boolean;\r\n\t@property({ type: String })\r\n\tmandatoryMessage = UMB_VALIDATION_EMPTY_LOCALIZATION_KEY;\r\n\r\n\t/**\r\n\t * The name of this field.\r\n\t * @type {string}\r\n\t */\r\n\t@property({ type: String })\r\n\tname?: string;\r\n\r\n\t@state()\r\n\tprivate _maxChars?: number;\r\n\r\n\t@state()\r\n\tprivate _rows?: number;\r\n\r\n\t@state()\r\n\tprivate _css: StyleInfo = {};\r\n\r\n\tpublic set config(config: UmbPropertyEditorConfigCollection | undefined) {\r\n\t\tthis._maxChars = Number(config?.getValueByAlias('maxChars')) || undefined;\r\n\t\tthis._rows = Number(config?.getValueByAlias('rows')) || undefined;\r\n\t\t// min/max height where for a short period present in the config, but we do not want this complexity of our configuration.\r\n\t\t// @deprecated remove config option in v.18, leave good default.\r\n\t\tconst _minHeight = Number(config?.getValueByAlias('minHeight')) || undefined;\r\n\t\tconst _maxHeight = Number(config?.getValueByAlias('maxHeight')) || undefined;\r\n\r\n\t\tthis._css = {\r\n\t\t\t'--uui-textarea-min-height': _minHeight ? `${_minHeight}px` : 'reset',\r\n\t\t\t'--uui-textarea-max-height': _maxHeight ? `${_maxHeight}px` : '33vh',\r\n\t\t};\r\n\t}\r\n\r\n\tprotected override firstUpdated(): void {\r\n\t\tthis.addFormControlElement(this.shadowRoot!.querySelector('uui-textarea')!);\r\n\t}\r\n\r\n\toverride focus() {\r\n\t\treturn this.shadowRoot?.querySelector<UUITextareaElement>('uui-textarea')?.focus();\r\n\t}\r\n\r\n\t#onInput(event: InputEvent) {\r\n\t\tconst newValue = (event.target as HTMLTextAreaElement).value;\r\n\t\tif (newValue === this.value) return;\r\n\t\tthis.value = newValue;\r\n\t\tthis.dispatchEvent(new UmbChangeEvent());\r\n\t}\r\n\r\n\toverride render() {\r\n\t\treturn html`\r\n\t\t\t<uui-textarea\r\n\t\t\t\t.label=${this.localize.term('general_fieldFor', [this.name])}\r\n\t\t\t\tstyle=${styleMap(this._css)}\r\n\t\t\t\t.autoHeight=${this._rows ? false : true}\r\n\t\t\t\tmaxlength=${ifDefined(this._maxChars)}\r\n\t\t\t\trows=${ifDefined(this._rows)}\r\n\t\t\t\t.value=${this.value ?? ''}\r\n\t\t\t\t@input=${this.#onInput}\r\n\t\t\t\t?required=${this.mandatory}\r\n\t\t\t\t.requiredMessage=${this.mandatoryMessage}\r\n\t\t\t\t?readonly=${this.readonly}></uui-textarea>\r\n\t\t`;\r\n\t}\r\n\r\n\tstatic override readonly styles = [\r\n\t\tUmbTextStyles,\r\n\t\tcss`\r\n\t\t\tuui-textarea {\r\n\t\t\t\twidth: 100%;\r\n\t\t\t}\r\n\t\t`,\r\n\t];\r\n}\r\n\r\nexport default UmbPropertyEditorUITextareaElement;\r\n\r\ndeclare global {\r\n\tinterface HTMLElementTagNameMap {\r\n\t\t'umb-property-editor-ui-textarea': UmbPropertyEditorUITextareaElement;\r\n\t}\r\n}\r\n"],"names":["_UmbPropertyEditorUITextareaElement_instances","onInput_fn","UmbPropertyEditorUITextareaElement","UmbFormControlMixin","UmbLitElement","__privateAdd","UMB_VALIDATION_EMPTY_LOCALIZATION_KEY","config","_minHeight","_maxHeight","html","styleMap","ifDefined","__privateMethod","event","newValue","UmbChangeEvent","UmbTextStyles","css","__decorateClass","property","state","customElement","UmbPropertyEditorUITextareaElement$1"],"mappings":";;;;;;;;;;;8OAAAA,GAAAC;AAaO,IAAMC,IAAN,cACEC,EAA8DC,GAAe,MAAS,EAE/F;AAAA,EAHO,cAAA;AAAA,UAAA,GAAA,SAAA,GAAAC,EAAA,MAAAL,CAAA,GAWK,KAAA,WAAA,IASQ,KAAA,mBAAAM,GAgBnB,KAAQ,OAAkB,CAAC;AAAA,EAAA;AAAA,EAE3B,IAAW,OAAOC,GAAuD;AACxE,SAAK,YAAY,OAAOA,GAAQ,gBAAgB,UAAU,CAAC,KAAK,QAChE,KAAK,QAAQ,OAAOA,GAAQ,gBAAgB,MAAM,CAAC,KAAK;AAGxD,UAAMC,IAAa,OAAOD,GAAQ,gBAAgB,WAAW,CAAC,KAAK,QAC7DE,IAAa,OAAOF,GAAQ,gBAAgB,WAAW,CAAC,KAAK;AAEnE,SAAK,OAAO;AAAA,MACX,6BAA6BC,IAAa,GAAGA,CAAU,OAAO;AAAA,MAC9D,6BAA6BC,IAAa,GAAGA,CAAU,OAAO;AAAA,IAC/D;AAAA,EAAA;AAAA,EAGkB,eAAqB;AACvC,SAAK,sBAAsB,KAAK,WAAY,cAAc,cAAc,CAAE;AAAA,EAAA;AAAA,EAGlE,QAAQ;AAChB,WAAO,KAAK,YAAY,cAAkC,cAAc,GAAG,MAAM;AAAA,EAAA;AAAA,EAUzE,SAAS;AACV,WAAAC;AAAA;AAAA,aAEI,KAAK,SAAS,KAAK,oBAAoB,CAAC,KAAK,IAAI,CAAC,CAAC;AAAA,YACpDC,EAAS,KAAK,IAAI,CAAC;AAAA,kBACb,MAAK,KAAoB;AAAA,gBAC3BC,EAAU,KAAK,SAAS,CAAC;AAAA,WAC9BA,EAAU,KAAK,KAAK,CAAC;AAAA,aACnB,KAAK,SAAS,EAAE;AAAA,aAChBC,QAAKb,GAAQC,CAAA,CAAA;AAAA,gBACV,KAAK,SAAS;AAAA,uBACP,KAAK,gBAAgB;AAAA,gBAC5B,KAAK,QAAQ;AAAA;AAAA,EAAA;AAY7B;AA3FOD,IAAA,oBAAA,QAAA;AA4DNC,IAAQ,SAACa,GAAmB;AACrB,QAAAC,IAAYD,EAAM,OAA+B;AACnD,EAAAC,MAAa,KAAK,UACtB,KAAK,QAAQA,GACR,KAAA,cAAc,IAAIC,GAAgB;AACxC;AAjEYd,EAmFa,SAAS;AAAA,EACjCe;AAAA,EACAC;AAAA;AAAA;AAAA;AAAA;AAKD;AA/EAC,EAAA;AAAA,EADCC,EAAS,EAAE,MAAM,SAAS,SAAS,GAAM,CAAA;AAAA,GAV9BlB,EAWZ,WAAA,YAAA,CAAA;AAOAiB,EAAA;AAAA,EADCC,EAAS,EAAE,MAAM,QAAS,CAAA;AAAA,GAjBflB,EAkBZ,WAAA,aAAA,CAAA;AAEAiB,EAAA;AAAA,EADCC,EAAS,EAAE,MAAM,OAAQ,CAAA;AAAA,GAnBdlB,EAoBZ,WAAA,oBAAA,CAAA;AAOAiB,EAAA;AAAA,EADCC,EAAS,EAAE,MAAM,OAAQ,CAAA;AAAA,GA1BdlB,EA2BZ,WAAA,QAAA,CAAA;AAGQiB,EAAA;AAAA,EADPE,EAAM;AAAA,GA7BKnB,EA8BJ,WAAA,aAAA,CAAA;AAGAiB,EAAA;AAAA,EADPE,EAAM;AAAA,GAhCKnB,EAiCJ,WAAA,SAAA,CAAA;AAGAiB,EAAA;AAAA,EADPE,EAAM;AAAA,GAnCKnB,EAoCJ,WAAA,QAAA,CAAA;AApCIA,IAANiB,EAAA;AAAA,EADNG,EAAc,iCAAiC;AAAA,GACnCpB,CAAA;AA6Fb,MAAAqB,IAAerB;"}