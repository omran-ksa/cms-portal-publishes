{"version":3,"file":"property-editor-ui-number.element-DVzXCQ4x.js","sources":["../../../src/packages/property-editors/number/property-editor-ui-number.element.ts"],"sourcesContent":["import { css, customElement, html, ifDefined, property, state } from '@umbraco-cms/backoffice/external/lit';\r\nimport { UmbFormControlMixin } from '@umbraco-cms/backoffice/validation';\r\nimport { UmbLitElement } from '@umbraco-cms/backoffice/lit-element';\r\nimport { UMB_PROPERTY_CONTEXT } from '@umbraco-cms/backoffice/property';\r\nimport type {\r\n\tUmbPropertyEditorConfigCollection,\r\n\tUmbPropertyEditorUiElement,\r\n} from '@umbraco-cms/backoffice/property-editor';\r\nimport { UmbChangeEvent } from '@umbraco-cms/backoffice/event';\r\n\r\n@customElement('umb-property-editor-ui-number')\r\nexport class UmbPropertyEditorUINumberElement\r\n\textends UmbFormControlMixin<number | undefined, typeof UmbLitElement, undefined>(UmbLitElement)\r\n\timplements UmbPropertyEditorUiElement\r\n{\r\n\t/**\r\n\t * Sets the input to readonly mode, meaning value cannot be changed but still able to read and select its content.\r\n\t * @type {boolean}\r\n\t * @attr\r\n\t * @default false\r\n\t */\r\n\t@property({ type: Boolean, reflect: true })\r\n\treadonly = false;\r\n\r\n\t@state()\r\n\tprivate _label?: string;\r\n\r\n\t@state()\r\n\tprivate _max?: number;\r\n\r\n\t@state()\r\n\tprivate _min?: number;\r\n\r\n\t@state()\r\n\tprivate _step?: number;\r\n\r\n\t@state()\r\n\tprivate _placeholder?: string;\r\n\r\n\tpublic set config(config: UmbPropertyEditorConfigCollection | undefined) {\r\n\t\tif (!config) return;\r\n\t\tthis._min = this.#parseNumber(config.getValueByAlias('min'));\r\n\t\tthis._max = this.#parseNumber(config.getValueByAlias('max'));\r\n\t\tthis._step = this.#parseNumber(config.getValueByAlias('step'));\r\n\t\tthis._placeholder = config.getValueByAlias('placeholder');\r\n\t}\r\n\r\n\tconstructor() {\r\n\t\tsuper();\r\n\r\n\t\tthis.consumeContext(UMB_PROPERTY_CONTEXT, (context) => {\r\n\t\t\tthis._label = context?.getLabel();\r\n\t\t});\r\n\r\n\t\tthis.addValidator(\r\n\t\t\t'rangeUnderflow',\r\n\t\t\t() => this.localize.term('validation_numberMinimum', this._min),\r\n\t\t\t() => !!this._min && this.value! < this._min,\r\n\t\t);\r\n\r\n\t\tthis.addValidator(\r\n\t\t\t'rangeOverflow',\r\n\t\t\t() => this.localize.term('validation_numberMaximum', this._max),\r\n\t\t\t() => !!this._max && this.value! > this._max,\r\n\t\t);\r\n\r\n\t\tthis.addValidator(\r\n\t\t\t'customError',\r\n\t\t\t() => this.localize.term('validation_numberMisconfigured', this._min, this._max),\r\n\t\t\t() => !!this._min && !!this._max && this._min > this._max,\r\n\t\t);\r\n\t}\r\n\r\n\tprotected override firstUpdated() {\r\n\t\tif (this._min && this._max && this._min > this._max) {\r\n\t\t\tconsole.warn(\r\n\t\t\t\t`Property '${this._label}' (Numeric) has been misconfigured, 'min' is greater than 'max'. Please correct your data type configuration.`,\r\n\t\t\t\tthis,\r\n\t\t\t);\r\n\t\t}\r\n\t}\r\n\r\n\t#parseNumber(input: unknown): number | undefined {\r\n\t\tconst num = Number(input);\r\n\t\treturn Number.isFinite(num) ? num : undefined;\r\n\t}\r\n\r\n\t#onChange(event: InputEvent & { target: HTMLInputElement }) {\r\n\t\tconst newValue = event.target.value === '' ? undefined : this.#parseNumber(event.target.value);\r\n\t\tif (newValue === this.value) return;\r\n\t\tthis.value = newValue;\r\n\t\tthis.dispatchEvent(new UmbChangeEvent());\r\n\t}\r\n\r\n\toverride render() {\r\n\t\treturn html`\r\n\t\t\t<uui-input\r\n\t\t\t\ttype=\"number\"\r\n\t\t\t\tlabel=${ifDefined(this._label)}\r\n\t\t\t\tmin=${ifDefined(this._min)}\r\n\t\t\t\tmax=${ifDefined(this._max)}\r\n\t\t\t\tstep=${ifDefined(this._step)}\r\n\t\t\t\tplaceholder=${ifDefined(this._placeholder)}\r\n\t\t\t\tvalue=${this.value?.toString() ?? ''}\r\n\t\t\t\t@change=${this.#onChange}\r\n\t\t\t\t?readonly=${this.readonly}>\r\n\t\t\t</uui-input>\r\n\t\t`;\r\n\t}\r\n\r\n\tstatic override styles = [\r\n\t\tcss`\r\n\t\t\tuui-input {\r\n\t\t\t\twidth: 100%;\r\n\t\t\t}\r\n\t\t`,\r\n\t];\r\n}\r\n\r\nexport default UmbPropertyEditorUINumberElement;\r\n\r\ndeclare global {\r\n\tinterface HTMLElementTagNameMap {\r\n\t\t'umb-property-editor-ui-number': UmbPropertyEditorUINumberElement;\r\n\t}\r\n}\r\n"],"names":["_UmbPropertyEditorUINumberElement_instances","parseNumber_fn","onChange_fn","UmbPropertyEditorUINumberElement","UmbFormControlMixin","UmbLitElement","__privateAdd","UMB_PROPERTY_CONTEXT","context","config","__privateMethod","html","ifDefined","input","num","event","newValue","UmbChangeEvent","css","__decorateClass","property","state","customElement","UmbPropertyEditorUINumberElement$1"],"mappings":"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"}