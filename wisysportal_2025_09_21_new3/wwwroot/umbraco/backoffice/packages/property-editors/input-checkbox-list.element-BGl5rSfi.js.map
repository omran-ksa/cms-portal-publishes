{"version":3,"file":"input-checkbox-list.element-BGl5rSfi.js","sources":["../../../src/packages/property-editors/checkbox-list/components/input-checkbox-list/input-checkbox-list.element.ts"],"sourcesContent":["import { classMap, css, customElement, html, nothing, property, repeat } from '@umbraco-cms/backoffice/external/lit';\r\nimport { UmbChangeEvent } from '@umbraco-cms/backoffice/event';\r\nimport { UmbLitElement } from '@umbraco-cms/backoffice/lit-element';\r\nimport { UMB_VALIDATION_EMPTY_LOCALIZATION_KEY, UmbFormControlMixin } from '@umbraco-cms/backoffice/validation';\r\nimport type { UUIBooleanInputEvent } from '@umbraco-cms/backoffice/external/uui';\r\n\r\nexport type UmbCheckboxListItem = { label: string; value: string; checked: boolean; invalid?: boolean };\r\n\r\n@customElement('umb-input-checkbox-list')\r\nexport class UmbInputCheckboxListElement extends UmbFormControlMixin<\r\n\tstring | undefined,\r\n\ttypeof UmbLitElement,\r\n\tundefined\r\n>(UmbLitElement, undefined) {\r\n\t@property({ attribute: false })\r\n\tpublic list: Array<UmbCheckboxListItem> = [];\r\n\r\n\t#selection: Array<string> = [];\r\n\t@property({ type: Array })\r\n\tpublic set selection(values: Array<string>) {\r\n\t\tthis.#selection = values;\r\n\t\tsuper.value = values.join(',');\r\n\t}\r\n\tpublic get selection(): Array<string> {\r\n\t\treturn this.#selection;\r\n\t}\r\n\r\n\t@property()\r\n\tpublic override set value(value: string) {\r\n\t\tthis.selection = value.split(',');\r\n\t}\r\n\tpublic override get value(): string {\r\n\t\treturn this.selection.join(',');\r\n\t}\r\n\r\n\t/**\r\n\t * Sets the input to readonly mode, meaning value cannot be changed but still able to read and select its content.\r\n\t * @type {boolean}\r\n\t * @attr\r\n\t * @default false\r\n\t */\r\n\t@property({ type: Boolean, reflect: true })\r\n\treadonly = false;\r\n\r\n\t/**\r\n\t * Sets the input to required, meaning validation will fail if the value is empty.\r\n\t * @type {boolean}\r\n\t */\r\n\t@property({ type: Boolean })\r\n\trequired?: boolean;\r\n\r\n\t@property({ type: String })\r\n\trequiredMessage?: string;\r\n\r\n\tconstructor() {\r\n\t\tsuper();\r\n\r\n\t\tthis.addValidator(\r\n\t\t\t'valueMissing',\r\n\t\t\t() => this.requiredMessage ?? UMB_VALIDATION_EMPTY_LOCALIZATION_KEY,\r\n\t\t\t() => !this.readonly && !!this.required && (this.value === undefined || this.value === null || this.value === ''),\r\n\t\t);\r\n\t}\r\n\r\n\t#onChange(event: UUIBooleanInputEvent) {\r\n\t\tevent.stopPropagation();\r\n\t\tif (event.target.checked) this.selection = [...this.selection, event.target.value];\r\n\t\telse this.#removeFromSelection(this.selection.findIndex((value) => event.target.value === value));\r\n\r\n\t\tthis.dispatchEvent(new UmbChangeEvent());\r\n\t}\r\n\r\n\t#removeFromSelection(index: number) {\r\n\t\tif (index == -1) return;\r\n\t\tconst values = [...this.selection];\r\n\t\tvalues.splice(index, 1);\r\n\t\tthis.selection = values;\r\n\t}\r\n\r\n\toverride render() {\r\n\t\tif (!this.list) return nothing;\r\n\t\treturn html`\r\n\t\t\t<form>\r\n\t\t\t\t<uui-form @change=${this.#onChange}>\r\n\t\t\t\t\t${repeat(\r\n\t\t\t\t\t\tthis.list,\r\n\t\t\t\t\t\t(item) => item.value,\r\n\t\t\t\t\t\t(item) => this.#renderCheckbox(item),\r\n\t\t\t\t\t)}\r\n\t\t\t\t</uui-form>\r\n\t\t\t</form>\r\n\t\t`;\r\n\t}\r\n\r\n\t#renderCheckbox(item: (typeof this.list)[0]) {\r\n\t\treturn html`\r\n\t\t\t<uui-checkbox\r\n\t\t\t\tclass=${classMap({ invalid: !!item.invalid })}\r\n\t\t\t\tlabel=${item.label + (item.invalid ? ` (${this.localize.term('validation_legacyOption')})` : '')}\r\n\t\t\t\ttitle=${item.invalid ? this.localize.term('validation_legacyOptionDescription') : ''}\r\n\t\t\t\tvalue=${item.value}\r\n\t\t\t\t?checked=${item.checked}\r\n\t\t\t\t?readonly=${this.readonly}></uui-checkbox>\r\n\t\t`;\r\n\t}\r\n\r\n\tstatic override readonly styles = [\r\n\t\tcss`\r\n\t\t\tuui-checkbox {\r\n\t\t\t\twidth: 100%;\r\n\r\n\t\t\t\t&.invalid {\r\n\t\t\t\t\ttext-decoration: line-through;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t`,\r\n\t];\r\n}\r\n\r\nexport default UmbInputCheckboxListElement;\r\n\r\ndeclare global {\r\n\tinterface HTMLElementTagNameMap {\r\n\t\t'umb-input-checkbox-list': UmbInputCheckboxListElement;\r\n\t}\r\n}\r\n"],"names":["_selection","_UmbInputCheckboxListElement_instances","onChange_fn","removeFromSelection_fn","renderCheckbox_fn","UmbInputCheckboxListElement","UmbFormControlMixin","UmbLitElement","__privateAdd","UMB_VALIDATION_EMPTY_LOCALIZATION_KEY","values","__privateSet","__privateGet","value","html","__privateMethod","repeat","item","nothing","event","UmbChangeEvent","index","classMap","css","__decorateClass","property","customElement"],"mappings":"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"}