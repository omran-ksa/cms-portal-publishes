{"version":3,"file":"dynamic-root-query-step-picker-modal.element-DX7n3S5x.js","sources":["../../../src/packages/property-editors/content-picker/dynamic-root/modals/dynamic-root-query-step-picker-modal.element.ts"],"sourcesContent":["import type { ManifestDynamicRootQueryStep } from '../dynamic-root.extension.js';\r\nimport type { UmbContentPickerDocumentRootQueryStepModalData } from './index.js';\r\nimport { customElement, html, ifDefined, repeat, state } from '@umbraco-cms/backoffice/external/lit';\r\nimport { UmbDocumentTypePickerInputContext } from '@umbraco-cms/backoffice/document-type';\r\nimport { UmbId } from '@umbraco-cms/backoffice/id';\r\nimport { UmbModalBaseElement } from '@umbraco-cms/backoffice/modal';\r\n\r\n@customElement('umb-dynamic-root-query-step-picker-modal')\r\nexport class UmbDynamicRootQueryStepPickerModalModalElement extends UmbModalBaseElement<UmbContentPickerDocumentRootQueryStepModalData> {\r\n\t@state()\r\n\tprivate _querySteps: Array<ManifestDynamicRootQueryStep> = [];\r\n\r\n\t#documentTypePickerContext = new UmbDocumentTypePickerInputContext(this);\r\n\r\n\toverride connectedCallback() {\r\n\t\tsuper.connectedCallback();\r\n\r\n\t\tif (this.data) {\r\n\t\t\tthis._querySteps = this.data.items;\r\n\t\t}\r\n\t}\r\n\r\n\tasync #choose(item: ManifestDynamicRootQueryStep) {\r\n\t\tawait this.#documentTypePickerContext.openPicker({\r\n\t\t\thideTreeRoot: true,\r\n\t\t\tpickableFilter: (x) => x.isElement === false,\r\n\t\t});\r\n\r\n\t\tconst selectedItems = this.#documentTypePickerContext.getSelection();\r\n\r\n\t\tthis.modalContext?.setValue({\r\n\t\t\tunique: UmbId.new(),\r\n\t\t\talias: item.meta.queryStepAlias,\r\n\t\t\tanyOfDocTypeKeys: selectedItems,\r\n\t\t});\r\n\r\n\t\tthis.modalContext?.submit();\r\n\t}\r\n\r\n\t#close() {\r\n\t\tthis.modalContext?.reject();\r\n\t}\r\n\r\n\toverride render() {\r\n\t\treturn html`\r\n\t\t\t<umb-body-layout headline=${this.localize.term('dynamicRoot_pickDynamicRootQueryStepTitle')}>\r\n\t\t\t\t<div id=\"main\">\r\n\t\t\t\t\t<uui-box>\r\n\t\t\t\t\t\t<uui-ref-list>\r\n\t\t\t\t\t\t\t${repeat(\r\n\t\t\t\t\t\t\t\tthis._querySteps,\r\n\t\t\t\t\t\t\t\t(item) => item.alias,\r\n\t\t\t\t\t\t\t\t(item) => html`\r\n\t\t\t\t\t\t\t\t\t<umb-ref-item\r\n\t\t\t\t\t\t\t\t\t\tname=${ifDefined(item.meta.label)}\r\n\t\t\t\t\t\t\t\t\t\tdetail=${ifDefined(item.meta.description)}\r\n\t\t\t\t\t\t\t\t\t\ticon=${ifDefined(item.meta.icon)}\r\n\t\t\t\t\t\t\t\t\t\t@open=${() => this.#choose(item)}>\r\n\t\t\t\t\t\t\t\t\t</umb-ref-item>\r\n\t\t\t\t\t\t\t\t`,\r\n\t\t\t\t\t\t\t)}\r\n\t\t\t\t\t\t</uui-ref-list>\r\n\t\t\t\t\t</uui-box>\r\n\t\t\t\t</div>\r\n\t\t\t\t<div slot=\"actions\">\r\n\t\t\t\t\t<uui-button look=\"default\" label=${this.localize.term('general_close')} @click=${this.#close}></uui-button>\r\n\t\t\t\t</div>\r\n\t\t\t</umb-body-layout>\r\n\t\t`;\r\n\t}\r\n}\r\n\r\nexport default UmbDynamicRootQueryStepPickerModalModalElement;\r\n\r\ndeclare global {\r\n\tinterface HTMLElementTagNameMap {\r\n\t\t'umb-dynamic-root-query-step-picker-modal': UmbDynamicRootQueryStepPickerModalModalElement;\r\n\t}\r\n}\r\n"],"names":["_documentTypePickerContext","_UmbDynamicRootQueryStepPickerModalModalElement_instances","choose_fn","close_fn","UmbDynamicRootQueryStepPickerModalModalElement","UmbModalBaseElement","__privateAdd","UmbDocumentTypePickerInputContext","html","repeat","item","ifDefined","__privateMethod","__privateGet","x","selectedItems","UmbId","__decorateClass","state","customElement","UmbDynamicRootQueryStepPickerModalModalElement$1"],"mappings":";;;;;;;;;;+TAAAA,GAAAC,GAAAC,GAAAC;AAQa,IAAAC,IAAN,cAA6DC,EAAoE;AAAA,EAAjI,cAAA;AAAA,UAAA,GAAA,SAAA,GAAAC,EAAA,MAAAL,CAAA,GAEN,KAAQ,cAAmD,CAAC,GAE/BK,EAAA,MAAAN,GAAA,IAAIO,EAAkC,IAAI,CAAA;AAAA,EAAA;AAAA,EAE9D,oBAAoB;AAC5B,UAAM,kBAAkB,GAEpB,KAAK,SACH,KAAA,cAAc,KAAK,KAAK;AAAA,EAC9B;AAAA,EAwBQ,SAAS;AACV,WAAAC;AAAA,+BACsB,KAAK,SAAS,KAAK,2CAA2C,CAAC;AAAA;AAAA;AAAA;AAAA,SAIrFC;AAAA,MACD,KAAK;AAAA,MACL,CAACC,MAASA,EAAK;AAAA,MACf,CAACA,MAASF;AAAA;AAAA,iBAEDG,EAAUD,EAAK,KAAK,KAAK,CAAC;AAAA,mBACxBC,EAAUD,EAAK,KAAK,WAAW,CAAC;AAAA,iBAClCC,EAAUD,EAAK,KAAK,IAAI,CAAC;AAAA,kBACxB,MAAME,EAAA,MAAKX,GAALC,CAAA,EAAA,KAAA,MAAaQ,CAAK,CAAA;AAAA;AAAA;AAAA,IAGlC,CAAA;AAAA;AAAA;AAAA;AAAA;AAAA,wCAKgC,KAAK,SAAS,KAAK,eAAe,CAAC,WAAWE,QAAKX,GAAME,CAAA,CAAA;AAAA;AAAA;AAAA;AAAA,EAAA;AAKjG;AA1DCH,IAAA,oBAAA,QAAA;AAJMC,IAAA,oBAAA,QAAA;AAcAC,IAAO,eAACQ,GAAoC;AAC3C,QAAAG,EAAA,MAAKb,GAA2B,WAAW;AAAA,IAChD,cAAc;AAAA,IACd,gBAAgB,CAACc,MAAMA,EAAE,cAAc;AAAA,EAAA,CACvC;AAEK,QAAAC,IAAgBF,EAAK,MAAAb,CAAA,EAA2B,aAAa;AAEnE,OAAK,cAAc,SAAS;AAAA,IAC3B,QAAQgB,EAAM,IAAI;AAAA,IAClB,OAAON,EAAK,KAAK;AAAA,IACjB,kBAAkBK;AAAA,EAAA,CAClB,GAED,KAAK,cAAc,OAAO;AAC3B;AAEAZ,IAAM,WAAG;AACR,OAAK,cAAc,OAAO;AAC3B;AA/BQc,EAAA;AAAA,EADPC,EAAM;AAAA,GADKd,EAEJ,WAAA,eAAA,CAAA;AAFIA,IAANa,EAAA;AAAA,EADNE,EAAc,0CAA0C;AAAA,GAC5Cf,CAAA;AAgEb,MAAAgB,IAAehB;"}