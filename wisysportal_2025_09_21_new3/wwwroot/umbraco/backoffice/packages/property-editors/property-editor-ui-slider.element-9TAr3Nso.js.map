{"version":3,"file":"property-editor-ui-slider.element-9TAr3Nso.js","sources":["../../../src/packages/property-editors/slider/property-editor-ui-slider.element.ts"],"sourcesContent":["import type { UmbSliderPropertyEditorUiValue } from './types.js';\r\nimport { UmbChangeEvent } from '@umbraco-cms/backoffice/event';\r\nimport type { UmbInputSliderElement } from '@umbraco-cms/backoffice/components';\r\nimport { customElement, html, property, state } from '@umbraco-cms/backoffice/external/lit';\r\nimport { UmbLitElement } from '@umbraco-cms/backoffice/lit-element';\r\nimport { UMB_PROPERTY_CONTEXT } from '@umbraco-cms/backoffice/property';\r\nimport type {\r\n\tUmbPropertyEditorConfigCollection,\r\n\tUmbPropertyEditorUiElement,\r\n} from '@umbraco-cms/backoffice/property-editor';\r\n\r\n/**\r\n * @element umb-property-editor-ui-slider\r\n */\r\n@customElement('umb-property-editor-ui-slider')\r\nexport class UmbPropertyEditorUISliderElement extends UmbLitElement implements UmbPropertyEditorUiElement {\r\n\t@property({ type: Object })\r\n\tvalue: UmbSliderPropertyEditorUiValue | undefined;\r\n\r\n\t/**\r\n\t * Sets the input to readonly mode, meaning value cannot be changed but still able to read and select its content.\r\n\t * @type {boolean}\r\n\t * @attr\r\n\t * @default false\r\n\t */\r\n\t@property({ type: Boolean, reflect: true })\r\n\treadonly = false;\r\n\r\n\t@state()\r\n\tprivate _enableRange = false;\r\n\r\n\t@state()\r\n\tprivate _initVal1: number = 0;\r\n\r\n\t@state()\r\n\tprivate _initVal2: number = 1;\r\n\r\n\t@state()\r\n\tprivate _label?: string;\r\n\r\n\t@state()\r\n\tprivate _step = 1;\r\n\r\n\t@state()\r\n\tprivate _min = 0;\r\n\r\n\t@state()\r\n\tprivate _max = 100;\r\n\r\n\tpublic set config(config: UmbPropertyEditorConfigCollection | undefined) {\r\n\t\tif (!config) return;\r\n\r\n\t\tthis._enableRange = Boolean(config.getValueByAlias('enableRange'));\r\n\r\n\t\t// Make sure that step is higher than 0 (decimals ok).\r\n\t\tconst step = (config.getValueByAlias('step') ?? 1) as number;\r\n\t\tthis._step = step > 0 ? step : 1;\r\n\r\n\t\tconst initVal1 = Number(config.getValueByAlias('initVal1'));\r\n\t\tthis._initVal1 = isNaN(initVal1) ? 0 : initVal1;\r\n\r\n\t\tconst initVal2 = Number(config.getValueByAlias('initVal2'));\r\n\t\tthis._initVal2 = isNaN(initVal2) ? this._initVal1 + this._step : initVal2;\r\n\r\n\t\tthis._min = this.#parseInt(config.getValueByAlias('minVal')) || 0;\r\n\t\tthis._max = this.#parseInt(config.getValueByAlias('maxVal')) || 100;\r\n\r\n\t\tif (this._min === this._max) {\r\n\t\t\tthis._max = this._min + 100;\r\n\t\t\tconsole.warn(\r\n\t\t\t\t`Property Editor (Slider) has been misconfigured, 'min' and 'max' are equal values. Please correct your data type configuration. To render the slider correctly, we changed this slider to: min = ${this._min}, max = ${this._max}`,\r\n\t\t\t\tthis,\r\n\t\t\t);\r\n\t\t}\r\n\t}\r\n\r\n\tconstructor() {\r\n\t\tsuper();\r\n\t\tthis.consumeContext(UMB_PROPERTY_CONTEXT, (context) => {\r\n\t\t\tthis._label = context?.getLabel();\r\n\t\t});\r\n\t}\r\n\r\n\tprotected override firstUpdated() {\r\n\t\tif (this._min && this._max && this._min > this._max) {\r\n\t\t\tconsole.warn(\r\n\t\t\t\t`Property '${this._label}' (Slider) has been misconfigured, 'min' is greater than 'max'. Please correct your data type configuration.`,\r\n\t\t\t\tthis,\r\n\t\t\t);\r\n\t\t}\r\n\t}\r\n\r\n\t#parseInt(input: unknown): number | undefined {\r\n\t\tconst num = Number(input);\r\n\t\treturn Number.isNaN(num) ? undefined : num;\r\n\t}\r\n\r\n\t#getValueObject(value: string) {\r\n\t\tconst [from, to] = value.split(',').map(Number);\r\n\t\treturn { from, to: to ?? from };\r\n\t}\r\n\r\n\t#onChange(event: CustomEvent & { target: UmbInputSliderElement }) {\r\n\t\tthis.value = this.#getValueObject(event.target.value as string);\r\n\t\tthis.dispatchEvent(new UmbChangeEvent());\r\n\t}\r\n\r\n\toverride render() {\r\n\t\treturn html`\r\n\t\t\t<umb-input-slider\r\n\t\t\t\t.label=${this._label ?? 'Slider'}\r\n\t\t\t\t.valueLow=${this.value?.from ?? this._initVal1}\r\n\t\t\t\t.valueHigh=${this.value?.to ?? this._initVal2}\r\n\t\t\t\t.step=${this._step}\r\n\t\t\t\t.min=${this._min}\r\n\t\t\t\t.max=${this._max}\r\n\t\t\t\t?enable-range=${this._enableRange}\r\n\t\t\t\t@change=${this.#onChange}\r\n\t\t\t\t?readonly=${this.readonly}>\r\n\t\t\t</umb-input-slider>\r\n\t\t`;\r\n\t}\r\n}\r\n\r\nexport default UmbPropertyEditorUISliderElement;\r\n\r\ndeclare global {\r\n\tinterface HTMLElementTagNameMap {\r\n\t\t'umb-property-editor-ui-slider': UmbPropertyEditorUISliderElement;\r\n\t}\r\n}\r\n"],"names":["_UmbPropertyEditorUISliderElement_instances","parseInt_fn","getValueObject_fn","onChange_fn","UmbPropertyEditorUISliderElement","UmbLitElement","__privateAdd","UMB_PROPERTY_CONTEXT","context","config","step","initVal1","initVal2","__privateMethod","html","input","num","value","from","to","event","UmbChangeEvent","__decorateClass","property","state","customElement","UmbPropertyEditorUISliderElement$1"],"mappings":"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"}