{"version":3,"file":"property-editor-ui-accepted-upload-types.element-BXiSn9w7.js","sources":["../../../src/packages/property-editors/accepted-types/property-editor-ui-accepted-upload-types.element.ts"],"sourcesContent":["import { UmbPropertyEditorUIMultipleTextStringElement } from '../multiple-text-string/property-editor-ui-multiple-text-string.element.js';\r\nimport { customElement } from '@umbraco-cms/backoffice/external/lit';\r\nimport { UmbTemporaryFileConfigRepository } from '@umbraco-cms/backoffice/temporary-file';\r\nimport type { UmbPropertyEditorUiElement } from '@umbraco-cms/backoffice/property-editor';\r\nimport type { UmbTemporaryFileConfigurationModel } from '@umbraco-cms/backoffice/temporary-file';\r\n\r\n/**\r\n * @element umb-property-editor-ui-accepted-upload-types\r\n */\r\n@customElement('umb-property-editor-ui-accepted-upload-types')\r\nexport class UmbPropertyEditorUIAcceptedUploadTypesElement\r\n\textends UmbPropertyEditorUIMultipleTextStringElement\r\n\timplements UmbPropertyEditorUiElement\r\n{\r\n\t#temporaryFileConfigRepository = new UmbTemporaryFileConfigRepository(this);\r\n\r\n\toverride async connectedCallback() {\r\n\t\tsuper.connectedCallback();\r\n\r\n\t\tawait this.#temporaryFileConfigRepository.initialized;\r\n\t\tthis.observe(this.#temporaryFileConfigRepository.all(), (config) => {\r\n\t\t\tif (!config) return;\r\n\r\n\t\t\tthis.#addValidators(config);\r\n\t\t});\r\n\t}\r\n\r\n\t#addValidators(config: UmbTemporaryFileConfigurationModel) {\r\n\t\tthis.addValidator(\r\n\t\t\t'badInput',\r\n\t\t\t() => {\r\n\t\t\t\tlet message = this.localize.term('validation_invalidExtensions');\r\n\t\t\t\tif (config.allowedUploadedFileExtensions.length) {\r\n\t\t\t\t\tmessage += `<br>${this.localize.term('validation_allowedExtensions')} ${config.allowedUploadedFileExtensions.join(', ')}`;\r\n\t\t\t\t}\r\n\t\t\t\tif (config.disallowedUploadedFilesExtensions.length) {\r\n\t\t\t\t\tmessage += `<br>${this.localize.term('validation_disallowedExtensions')} ${config.disallowedUploadedFilesExtensions.join(', ')}`;\r\n\t\t\t\t}\r\n\t\t\t\treturn message;\r\n\t\t\t},\r\n\t\t\t() => {\r\n\t\t\t\tconst extensions = this.value;\r\n\t\t\t\tif (!extensions) return false;\r\n\t\t\t\tif (\r\n\t\t\t\t\tconfig.allowedUploadedFileExtensions.length &&\r\n\t\t\t\t\t!config.allowedUploadedFileExtensions.some((ext) => extensions.includes(ext))\r\n\t\t\t\t) {\r\n\t\t\t\t\treturn true;\r\n\t\t\t\t}\r\n\t\t\t\tif (config.disallowedUploadedFilesExtensions.some((ext) => extensions.includes(ext))) {\r\n\t\t\t\t\treturn true;\r\n\t\t\t\t}\r\n\t\t\t\treturn false;\r\n\t\t\t},\r\n\t\t);\r\n\t}\r\n}\r\n\r\nexport default UmbPropertyEditorUIAcceptedUploadTypesElement;\r\n\r\ndeclare global {\r\n\tinterface HTMLElementTagNameMap {\r\n\t\t'umb-property-editor-ui-accepted-upload-types': UmbPropertyEditorUIAcceptedUploadTypesElement;\r\n\t}\r\n}\r\n"],"names":["_temporaryFileConfigRepository","_UmbPropertyEditorUIAcceptedUploadTypesElement_instances","addValidators_fn","UmbPropertyEditorUIAcceptedUploadTypesElement","UmbPropertyEditorUIMultipleTextStringElement","__privateAdd","UmbTemporaryFileConfigRepository","__privateGet","config","__privateMethod","message","extensions","ext","__decorateClass","customElement","UmbPropertyEditorUIAcceptedUploadTypesElement$1"],"mappings":";;;;;;;;;+TAAAA,GAAAC,GAAAC;AAUa,IAAAC,IAAN,cACEC,EAET;AAAA,EAHO,cAAA;AAAA,UAAA,GAAA,SAAA,GAAAC,EAAA,MAAAJ,CAAA,GAI2BI,EAAA,MAAAL,GAAA,IAAIM,EAAiC,IAAI,CAAA;AAAA,EAAA;AAAA,EAE1E,MAAe,oBAAoB;AAClC,UAAM,kBAAkB,GAExB,MAAMC,QAAKP,CAA+B,EAAA,aAC1C,KAAK,QAAQO,EAAK,MAAAP,CAAA,EAA+B,IAAI,GAAG,CAACQ,MAAW;AACnE,MAAKA,KAELC,EAAA,MAAKR,MAAL,KAAoB,MAAAO,CAAA;AAAA,IAAA,CACpB;AAAA,EAAA;AAgCH;AA1CCR,IAAA,oBAAA,QAAA;AAJMC,IAAA,oBAAA,QAAA;AAiBNC,IAAc,SAACM,GAA4C;AACrD,OAAA;AAAA,IACJ;AAAA,IACA,MAAM;AACL,UAAIE,IAAU,KAAK,SAAS,KAAK,8BAA8B;AAC3D,aAAAF,EAAO,8BAA8B,WAC7BE,KAAA,OAAO,KAAK,SAAS,KAAK,8BAA8B,CAAC,IAAIF,EAAO,8BAA8B,KAAK,IAAI,CAAC,KAEpHA,EAAO,kCAAkC,WACjCE,KAAA,OAAO,KAAK,SAAS,KAAK,iCAAiC,CAAC,IAAIF,EAAO,kCAAkC,KAAK,IAAI,CAAC,KAExHE;AAAA,IACR;AAAA,IACA,MAAM;AACL,YAAMC,IAAa,KAAK;AACpB,aAACA,IAEJ,GAAAH,EAAO,8BAA8B,UACrC,CAACA,EAAO,8BAA8B,KAAK,CAACI,MAAQD,EAAW,SAASC,CAAG,CAAC,KAIzEJ,EAAO,kCAAkC,KAAK,CAACI,MAAQD,EAAW,SAASC,CAAG,CAAC,KAP3D;AAAA,IAUjB;AAAA,EAET;AACD;AA7CYT,IAANU,EAAA;AAAA,EADNC,EAAc,8CAA8C;AAAA,GAChDX,CAAA;AAgDb,MAAAY,IAAeZ;"}