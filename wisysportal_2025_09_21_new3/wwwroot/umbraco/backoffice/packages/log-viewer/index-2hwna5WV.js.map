{"version":3,"file":"index-2hwna5WV.js","sources":["../../../src/packages/log-viewer/workspace/views/search/components/log-viewer-level-tag.element.ts","../../../src/packages/log-viewer/workspace/views/search/components/log-viewer-log-level-filter-menu.element.ts","../../../src/packages/log-viewer/workspace/views/search/components/log-viewer-message.element.ts","../../../src/packages/log-viewer/workspace/views/search/components/log-viewer-messages-list.element.ts","../../../src/packages/log-viewer/workspace/views/search/components/log-viewer-polling-button.element.ts","../../../src/packages/log-viewer/workspace/views/search/components/log-viewer-search-input.element.ts","../../../src/packages/log-viewer/workspace/views/search/log-search-view.element.ts","../../../src/packages/log-viewer/workspace/views/search/index.ts"],"sourcesContent":["import type { UUIInterfaceColor, UUIInterfaceLook } from '@umbraco-cms/backoffice/external/uui';\r\nimport { html, LitElement, ifDefined, customElement, property } from '@umbraco-cms/backoffice/external/lit';\r\nimport type { LogLevelModel } from '@umbraco-cms/backoffice/external/backend-api';\r\n\r\ninterface LevelMapStyles {\r\n\tlook?: UUIInterfaceLook;\r\n\tcolor?: UUIInterfaceColor;\r\n\tstyle?: string;\r\n}\r\n\r\n@customElement('umb-log-viewer-level-tag')\r\nexport class UmbLogViewerLevelTagElement extends LitElement {\r\n\t@property()\r\n\tlevel?: LogLevelModel;\r\n\r\n\tlevelMap: Record<LogLevelModel, LevelMapStyles> = {\r\n\t\tVerbose: { look: 'secondary' },\r\n\t\tDebug: {\r\n\t\t\tlook: 'primary',\r\n\t\t\tstyle: 'background-color: var(--umb-log-viewer-debug-color)',\r\n\t\t},\r\n\t\tInformation: { look: 'primary', color: 'positive' },\r\n\t\tWarning: { look: 'primary', color: 'warning' },\r\n\t\tError: { look: 'primary', color: 'danger' },\r\n\t\tFatal: {\r\n\t\t\tlook: 'primary',\r\n\t\t\tstyle: 'background-color: var(--umb-log-viewer-fatal-color)',\r\n\t\t},\r\n\t};\r\n\r\n\toverride render() {\r\n\t\treturn html`<uui-tag\r\n\t\t\tlook=${ifDefined(this.level ? this.levelMap[this.level]?.look : undefined)}\r\n\t\t\tcolor=${ifDefined(this.level ? this.levelMap[this.level]?.color : undefined)}\r\n\t\t\tstyle=\"${ifDefined(this.level ? this.levelMap[this.level]?.style : undefined)}\"\r\n\t\t\t>${this.level}<slot></slot\r\n\t\t></uui-tag>`;\r\n\t}\r\n}\r\n\r\ndeclare global {\r\n\tinterface HTMLElementTagNameMap {\r\n\t\t'umb-log-viewer-level-tag': UmbLogViewerLevelTagElement;\r\n\t}\r\n}\r\n","import type { UmbLogViewerWorkspaceContext } from '../../../logviewer-workspace.context.js';\r\nimport { UMB_APP_LOG_VIEWER_CONTEXT } from '../../../logviewer-workspace.context-token.js';\r\nimport type { UUICheckboxElement } from '@umbraco-cms/backoffice/external/uui';\r\nimport { css, html, customElement, queryAll, state } from '@umbraco-cms/backoffice/external/lit';\r\nimport { debounce } from '@umbraco-cms/backoffice/utils';\r\nimport { LogLevelModel } from '@umbraco-cms/backoffice/external/backend-api';\r\nimport { UmbLitElement } from '@umbraco-cms/backoffice/lit-element';\r\nimport { path, query, toQueryString } from '@umbraco-cms/backoffice/router';\r\n\r\n@customElement('umb-log-viewer-log-level-filter-menu')\r\nexport class UmbLogViewerLogLevelFilterMenuElement extends UmbLitElement {\r\n\t@queryAll('#log-level-selector > uui-checkbox')\r\n\tprivate _logLevelSelectorCheckboxes!: NodeListOf<UUICheckboxElement>;\r\n\r\n\t@state()\r\n\tprivate _logLevelFilter: LogLevelModel[] = [];\r\n\r\n\t#logViewerContext?: UmbLogViewerWorkspaceContext;\r\n\r\n\tconstructor() {\r\n\t\tsuper();\r\n\t\tthis.consumeContext(UMB_APP_LOG_VIEWER_CONTEXT, (instance) => {\r\n\t\t\tthis.#logViewerContext = instance;\r\n\t\t\tthis.#observeLogLevelFilter();\r\n\t\t});\r\n\t}\r\n\r\n\t#observeLogLevelFilter() {\r\n\t\tif (!this.#logViewerContext) return;\r\n\r\n\t\tthis.observe(this.#logViewerContext.logLevelsFilter, (levelsFilter) => {\r\n\t\t\tthis._logLevelFilter = levelsFilter ?? [];\r\n\t\t});\r\n\t}\r\n\r\n\t#setLogLevel() {\r\n\t\tif (!this.#logViewerContext) return;\r\n\r\n\t\tconst logLevels = Array.from(this._logLevelSelectorCheckboxes)\r\n\t\t\t.filter((checkbox) => checkbox.checked)\r\n\t\t\t.map((checkbox) => checkbox.value as LogLevelModel);\r\n\r\n\t\tlet q = query();\r\n\r\n\t\tif (logLevels.length) {\r\n\t\t\tq = { ...q, loglevels: logLevels.join(',') };\r\n\t\t} else {\r\n\t\t\tdelete q.loglevels;\r\n\t\t}\r\n\r\n\t\twindow.history.pushState({}, '', `${path()}?${toQueryString(q)}`);\r\n\t}\r\n\r\n\tsetLogLevelDebounce = debounce(this.#setLogLevel, 300);\r\n\r\n\t#selectAllLogLevels() {\r\n\t\tthis._logLevelSelectorCheckboxes.forEach((checkbox) => (checkbox.checked = true));\r\n\t\tthis.#setLogLevel();\r\n\t}\r\n\r\n\t#deselectAllLogLevels() {\r\n\t\tthis._logLevelSelectorCheckboxes.forEach((checkbox) => (checkbox.checked = false));\r\n\t\tthis.#setLogLevel();\r\n\t}\r\n\r\n\t#renderLogLevelSelector() {\r\n\t\treturn html`\r\n\t\t\t<div id=\"log-level-selector\" @change=${this.setLogLevelDebounce}>\r\n\t\t\t\t${Object.values(LogLevelModel).map(\r\n\t\t\t\t\t(logLevel) =>\r\n\t\t\t\t\t\thtml`<uui-checkbox\r\n\t\t\t\t\t\t\tclass=\"log-level-menu-item\"\r\n\t\t\t\t\t\t\t.checked=${this._logLevelFilter.includes(logLevel)}\r\n\t\t\t\t\t\t\t.value=${logLevel}\r\n\t\t\t\t\t\t\tlabel=\"${logLevel}\">\r\n\t\t\t\t\t\t\t<umb-log-viewer-level-tag .level=${logLevel}></umb-log-viewer-level-tag>\r\n\t\t\t\t\t\t</uui-checkbox>`,\r\n\t\t\t\t)}\r\n\t\t\t\t<uui-button\r\n\t\t\t\t\tclass=\"log-level-menu-item\"\r\n\t\t\t\t\t@click=${this.#selectAllLogLevels}\r\n\t\t\t\t\tlabel=${this.localize.term('general_selectAll')}></uui-button>\r\n\t\t\t\t<uui-button class=\"log-level-menu-item\" @click=${this.#deselectAllLogLevels} label=\"Deselect all\"\r\n\t\t\t\t\t>Deselect all</uui-button\r\n\t\t\t\t>\r\n\t\t\t</div>\r\n\t\t`;\r\n\t}\r\n\r\n\toverride render() {\r\n\t\treturn html`\r\n\t\t\t<umb-dropdown label=\"Select log levels\">\r\n\t\t\t\t<span slot=\"label\">\r\n\t\t\t\t\tLog Level:\r\n\t\t\t\t\t${this._logLevelFilter.length > 0\r\n\t\t\t\t\t\t? this._logLevelFilter.map((level) => html`<span class=\"log-level-button-indicator\">${level}</span>`)\r\n\t\t\t\t\t\t: 'All'}\r\n\t\t\t\t</span>\r\n\t\t\t\t${this.#renderLogLevelSelector()}\r\n\t\t\t</umb-dropdown>\r\n\t\t`;\r\n\t}\r\n\r\n\tstatic override styles = [\r\n\t\tcss`\r\n\t\t\t#log-level-selector {\r\n\t\t\t\tpadding: var(--uui-box-default-padding, var(--uui-size-space-5, 18px));\r\n\t\t\t\twidth: 150px;\r\n\t\t\t\tbackground-color: var(--uui-color-surface);\r\n\t\t\t\tbox-shadow: var(--uui-shadow-depth-3);\r\n\t\t\t\tdisplay: flex;\r\n\t\t\t\tflex-direction: column;\r\n\t\t\t\tgap: var(--uui-size-space-3);\r\n\t\t\t}\r\n\r\n\t\t\t.log-level-button-indicator {\r\n\t\t\t\tfont-weight: 600;\r\n\t\t\t}\r\n\r\n\t\t\t.log-level-button-indicator:not(:last-of-type)::after {\r\n\t\t\t\tcontent: ', ';\r\n\t\t\t}\r\n\t\t`,\r\n\t];\r\n}\r\n\r\ndeclare global {\r\n\tinterface HTMLElementTagNameMap {\r\n\t\t'umb-log-viewer-log-level-filter-menu': UmbLogViewerLogLevelFilterMenuElement;\r\n\t}\r\n}\r\n","import { css, customElement, html, property, query, state, when } from '@umbraco-cms/backoffice/external/lit';\r\nimport { query as getQuery, toQueryString } from '@umbraco-cms/backoffice/router';\r\nimport { UmbLitElement } from '@umbraco-cms/backoffice/lit-element';\r\nimport { UmbTextStyles } from '@umbraco-cms/backoffice/style';\r\nimport type { LogLevelModel, LogMessagePropertyPresentationModel } from '@umbraco-cms/backoffice/external/backend-api';\r\nimport type { PropertyValueMap } from '@umbraco-cms/backoffice/external/lit';\r\n\r\n//TODO: check how to display EventId field in the message properties\r\n@customElement('umb-log-viewer-message')\r\nexport class UmbLogViewerMessageElement extends UmbLitElement {\r\n\t@query('details')\r\n\tdetails!: HTMLDetailsElement;\r\n\r\n\t@property()\r\n\ttimestamp = '';\r\n\r\n\t@state()\r\n\tdate?: Date;\r\n\r\n\t@property()\r\n\tlevel: LogLevelModel | '' = '';\r\n\r\n\t@property()\r\n\tmessageTemplate = '';\r\n\r\n\t@property()\r\n\trenderedMessage = '';\r\n\r\n\t@property({ attribute: false })\r\n\tproperties: Array<LogMessagePropertyPresentationModel> = [];\r\n\r\n\t@property({ type: Boolean })\r\n\topen = false;\r\n\r\n\t@property()\r\n\texception = '';\r\n\r\n\toverride willUpdate(changedProperties: Map<string | number | symbol, unknown>) {\r\n\t\tif (changedProperties.has('timestamp')) {\r\n\t\t\tthis.date = new Date(this.timestamp);\r\n\t\t}\r\n\t}\r\n\r\n\tprotected override updated(_changedProperties: PropertyValueMap<any> | Map<PropertyKey, unknown>): void {\r\n\t\tif (_changedProperties.has('open')) {\r\n\t\t\tif (this.open) {\r\n\t\t\t\tthis.details.setAttribute('open', 'true');\r\n\t\t\t} else {\r\n\t\t\t\tthis.details.removeAttribute('open');\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\tprivate _searchMenuData: Array<{ label: string; href: () => string; icon: string; title: string }> = [\r\n\t\t{\r\n\t\t\tlabel: 'Search with Google',\r\n\t\t\ttitle: '#logViewer_searchThisMessageWithGoogle',\r\n\t\t\thref: () => `https://www.google.com/search?q=${this.renderedMessage}`,\r\n\t\t\ticon: 'icon-google',\r\n\t\t},\r\n\t\t{\r\n\t\t\tlabel: 'Search with Bing',\r\n\t\t\ttitle: 'Search this message with Microsoft Bing',\r\n\t\t\thref: () => `https://www.bing.com/search?q=${this.renderedMessage}`,\r\n\t\t\ticon: 'icon-search',\r\n\t\t},\r\n\t\t{\r\n\t\t\tlabel: 'Search in Umbraco Forum',\r\n\t\t\ttitle: 'Search this message on the Umbraco forum',\r\n\t\t\thref: () => `https://forum.umbraco.com/search?q=${this.renderedMessage}`,\r\n\t\t\ticon: 'icon-umbraco',\r\n\t\t},\r\n\t\t{\r\n\t\t\tlabel: 'Search in Umbraco Forum with Google',\r\n\t\t\ttitle: 'Search Umbraco Forum using Google',\r\n\t\t\thref: () => `https://www.google.com/?q=site:forum.umbraco.com%20${this.renderedMessage}`,\r\n\t\t\ticon: 'icon-google',\r\n\t\t},\r\n\t\t{\r\n\t\t\tlabel: 'Search Umbraco source code',\r\n\t\t\ttitle: 'Search the Umbraco source code on GitHub',\r\n\t\t\thref: () =>\r\n\t\t\t\t`https://github.com/umbraco/Umbraco-CMS/search?q=${\r\n\t\t\t\t\tthis.properties.find((property) => property.name === 'SourceContext')?.value\r\n\t\t\t\t}`,\r\n\t\t\ticon: 'icon-github',\r\n\t\t},\r\n\t\t{\r\n\t\t\tlabel: 'Search Umbraco Issues',\r\n\t\t\ttitle: 'Search Umbraco Issues on GitHub',\r\n\t\t\thref: () =>\r\n\t\t\t\t`https://github.com/umbraco/Umbraco-CMS/issues?q=${\r\n\t\t\t\t\tthis.properties.find((property) => property.name === 'SourceContext')?.value\r\n\t\t\t\t}`,\r\n\t\t\ticon: 'icon-github',\r\n\t\t},\r\n\t];\r\n\r\n\tprivate _propertiesWithSearchMenu: Array<string> = ['HttpRequestNumber', 'SourceContext', 'MachineName'];\r\n\r\n\tprivate _findLogsWithProperty({ name, value }: LogMessagePropertyPresentationModel) {\r\n\t\tif (!name) return '';\r\n\r\n\t\tlet query = getQuery();\r\n\t\tlet sanitizedValue = value ?? '';\r\n\r\n\t\tif (isNaN(+(value ?? ''))) {\r\n\t\t\tsanitizedValue = \"'\" + value + \"'\";\r\n\t\t}\r\n\r\n\t\tquery = {\r\n\t\t\t...query,\r\n\t\t\tlq: `${name}=${sanitizedValue}`,\r\n\t\t};\r\n\r\n\t\tconst queryString = toQueryString(query);\r\n\r\n\t\treturn queryString;\r\n\t}\r\n\r\n\t#setOpen(event: Event) {\r\n\t\tthis.open = (event.target as HTMLDetailsElement).open;\r\n\t}\r\n\r\n\toverride render() {\r\n\t\treturn html`\r\n\t\t\t<details @open=${this.#setOpen}>\r\n\t\t\t\t<summary>\r\n\t\t\t\t\t<div id=\"timestamp\">${this.date?.toLocaleString()}</div>\r\n\t\t\t\t\t<div id=\"level\">\r\n\t\t\t\t\t\t<umb-log-viewer-level-tag .level=${this.level ? this.level : 'Information'}></umb-log-viewer-level-tag>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t<div id=\"machine\">${this.properties.find((property) => property.name === 'MachineName')?.value}</div>\r\n\t\t\t\t\t<div id=\"message\"><uui-scroll-container>${this.renderedMessage}</uui-scroll-container></div>\r\n\t\t\t\t</summary>\r\n\t\t\t\t${this.exception ? html`<pre id=\"exception\">${this.exception}</pre>` : ''}\r\n\t\t\t\t<ul id=\"properties-list\">\r\n\t\t\t\t\t<li class=\"property\">\r\n\t\t\t\t\t\t<div class=\"property-name\">Timestamp</div>\r\n\t\t\t\t\t\t<div class=\"property-value\">${this.date?.toLocaleString()}</div>\r\n\t\t\t\t\t</li>\r\n\t\t\t\t\t<li class=\"property\">\r\n\t\t\t\t\t\t<div class=\"property-name\">@MessageTemplate</div>\r\n\t\t\t\t\t\t<div class=\"property-value\">${this.messageTemplate}</div>\r\n\t\t\t\t\t</li>\r\n\t\t\t\t\t${this.properties.map(\r\n\t\t\t\t\t\t(property) =>\r\n\t\t\t\t\t\t\thtml`<li class=\"property\">\r\n\t\t\t\t\t\t\t\t<div class=\"property-name\">${property.name}:</div>\r\n\t\t\t\t\t\t\t\t<div class=\"property-value\">\r\n\t\t\t\t\t\t\t\t\t${property.value}\r\n\t\t\t\t\t\t\t\t\t${this._propertiesWithSearchMenu.includes(property.name ?? '')\r\n\t\t\t\t\t\t\t\t\t\t? html`<uui-button\r\n\t\t\t\t\t\t\t\t\t\t\t\tcompact\r\n\t\t\t\t\t\t\t\t\t\t\t\tlook=\"secondary\"\r\n\t\t\t\t\t\t\t\t\t\t\t\tlabel=\"Find logs with ${property.name}\"\r\n\t\t\t\t\t\t\t\t\t\t\t\ttitle=\"Find logs with ${property.name}\"\r\n\t\t\t\t\t\t\t\t\t\t\t\thref=${`section/settings/workspace/logviewer/view/search/?${this._findLogsWithProperty(\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tproperty,\r\n\t\t\t\t\t\t\t\t\t\t\t\t)}`}>\r\n\t\t\t\t\t\t\t\t\t\t\t\t<uui-icon name=\"icon-search\"></uui-icon>\r\n\t\t\t\t\t\t\t\t\t\t\t</uui-button>`\r\n\t\t\t\t\t\t\t\t\t\t: ''}\r\n\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t</li>`,\r\n\t\t\t\t\t)}\r\n\t\t\t\t</ul>\r\n\t\t\t\t<umb-dropdown look=\"secondary\" placement=\"bottom-start\" id=\"search-button\" label=\"Search\">\r\n\t\t\t\t\t<span slot=\"label\"><uui-icon name=\"icon-search\"></uui-icon> Search</span>\r\n\t\t\t\t\t${this._searchMenuData.map(\r\n\t\t\t\t\t\t(menuItem) => html`\r\n\t\t\t\t\t\t\t<uui-menu-item\r\n\t\t\t\t\t\t\t\tclass=\"search-item\"\r\n\t\t\t\t\t\t\t\thref=${menuItem.href()}\r\n\t\t\t\t\t\t\t\ttarget=\"_blank\"\r\n\t\t\t\t\t\t\t\tlabel=${menuItem.label}\r\n\t\t\t\t\t\t\t\ttitle=${menuItem.title}>\r\n\t\t\t\t\t\t\t\t${when(\r\n\t\t\t\t\t\t\t\t\tmenuItem.icon,\r\n\t\t\t\t\t\t\t\t\t(icon) => html`<uui-icon slot=\"icon\" name=${icon}></uui-icon>`,\r\n\t\t\t\t\t\t\t\t\t() => html`<uui-icon slot=\"icon\" name=\"icon-search\"></uui-icon>`,\r\n\t\t\t\t\t\t\t\t)}\r\n\t\t\t\t\t\t\t</uui-menu-item>\r\n\t\t\t\t\t\t`,\r\n\t\t\t\t\t)}\r\n\t\t\t\t</umb-dropdown>\r\n\t\t\t</details>\r\n\t\t`;\r\n\t}\r\n\r\n\tstatic override readonly styles = [\r\n\t\tUmbTextStyles,\r\n\t\tcss`\r\n\t\t\t:host > details {\r\n\t\t\t\tborder-top: 1px solid var(--uui-color-border);\r\n\t\t\t}\r\n\r\n\t\t\t:host(:last-child) > details {\r\n\t\t\t\tborder-bottom: 1px solid var(--uui-color-border);\r\n\t\t\t}\r\n\r\n\t\t\tsummary {\r\n\t\t\t\tdisplay: flex;\r\n\t\t\t}\r\n\r\n\t\t\tdetails[open] {\r\n\t\t\t\tmargin-bottom: var(--uui-size-space-3);\r\n\t\t\t}\r\n\r\n\t\t\tsummary:hover {\r\n\t\t\t\tbackground-color: var(--uui-color-surface-emphasis);\r\n\t\t\t\tcolor: var(--uui-color-interactive-emphasis);\r\n\t\t\t}\r\n\r\n\t\t\t#properties-list {\r\n\t\t\t\tpadding: 0;\r\n\t\t\t\tlist-style: none;\r\n\t\t\t}\r\n\r\n\t\t\t.property {\r\n\t\t\t\tpadding: 10px 20px;\r\n\t\t\t\tdisplay: flex;\r\n\t\t\t\tborder-top: 1px solid var(--uui-color-border);\r\n\t\t\t}\r\n\r\n\t\t\t.property:first-child {\r\n\t\t\t\tborder-top: transparent;\r\n\t\t\t}\r\n\r\n\t\t\t#properties-list,\r\n\t\t\tpre {\r\n\t\t\t\tmargin: 0 var(--uui-size-layout-1);\r\n\t\t\t\tborder: 1px solid var(--uui-color-border);\r\n\t\t\t\tborder-radius: var(--uui-border-radius);\r\n\t\t\t\tbackground-color: var(--uui-color-background);\r\n\t\t\t\tmargin-bottom: var(--uui-size-space-3);\r\n\t\t\t}\r\n\r\n\t\t\tpre {\r\n\t\t\t\tborder-left: 4px solid #d42054;\r\n\t\t\t\tdisplay: block;\r\n\t\t\t\tfont-family:\r\n\t\t\t\t\tLato,\r\n\t\t\t\t\tHelvetica Neue,\r\n\t\t\t\t\tHelvetica,\r\n\t\t\t\t\tArial,\r\n\t\t\t\t\tsans-serif;\r\n\t\t\t\tline-height: 20px;\r\n\t\t\t\toverflow-x: auto;\r\n\t\t\t\tpadding: 9.5px;\r\n\t\t\t\twhite-space: pre-wrap;\r\n\t\t\t}\r\n\r\n\t\t\tsummary > div {\r\n\t\t\t\tbox-sizing: border-box;\r\n\t\t\t\tpadding: 10px 20px;\r\n\t\t\t\tdisplay: flex;\r\n\t\t\t\talign-items: center;\r\n\t\t\t}\r\n\r\n\t\t\t#timestamp {\r\n\t\t\t\tflex: 1 0 14ch;\r\n\t\t\t}\r\n\r\n\t\t\t#level,\r\n\t\t\t#machine {\r\n\t\t\t\tflex: 1 0 14ch;\r\n\t\t\t}\r\n\r\n\t\t\tuui-menu-item {\r\n\t\t\t\t--uui-menu-item-flat-structure: 1;\r\n\t\t\t}\r\n\r\n\t\t\t#message {\r\n\t\t\t\tflex: 6 0 14ch;\r\n\t\t\t\tword-break: break-all;\r\n\t\t\t}\r\n\t\t\t#search-button {\r\n\t\t\t\tmargin-left: var(--uui-size-layout-1);\r\n\t\t\t}\r\n\r\n\t\t\t.property-name,\r\n\t\t\t.property-value {\r\n\t\t\t\tdisplay: flex;\r\n\t\t\t\talign-items: center;\r\n\t\t\t}\r\n\r\n\t\t\t.property-name {\r\n\t\t\t\tfont-weight: 600;\r\n\t\t\t\tflex: 1 1 20ch;\r\n\t\t\t}\r\n\r\n\t\t\t.property-value {\r\n\t\t\t\tflex: 3 0 20ch;\r\n\t\t\t}\r\n\r\n\t\t\t.search-item {\r\n\t\t\t\twidth: 100%;\r\n\t\t\t}\r\n\t\t`,\r\n\t];\r\n}\r\n\r\ndeclare global {\r\n\tinterface HTMLElementTagNameMap {\r\n\t\t'umb-log-viewer-message': UmbLogViewerMessageElement;\r\n\t}\r\n}\r\n","import type { UmbLogViewerWorkspaceContext } from '../../../logviewer-workspace.context.js';\r\nimport { UMB_APP_LOG_VIEWER_CONTEXT } from '../../../logviewer-workspace.context-token.js';\r\nimport type { UUIScrollContainerElement, UUIPaginationElement } from '@umbraco-cms/backoffice/external/uui';\r\nimport { css, html, customElement, query, state } from '@umbraco-cms/backoffice/external/lit';\r\nimport { UmbLitElement } from '@umbraco-cms/backoffice/lit-element';\r\nimport type { LogMessageResponseModel } from '@umbraco-cms/backoffice/external/backend-api';\r\nimport { DirectionModel } from '@umbraco-cms/backoffice/external/backend-api';\r\n\r\n@customElement('umb-log-viewer-messages-list')\r\nexport class UmbLogViewerMessagesListElement extends UmbLitElement {\r\n\t@query('#logs-scroll-container')\r\n\tprivate _logsScrollContainer!: UUIScrollContainerElement;\r\n\r\n\t@state()\r\n\tprivate _sortingDirection: DirectionModel = DirectionModel.ASCENDING;\r\n\r\n\t@state()\r\n\tprivate _logs: LogMessageResponseModel[] = [];\r\n\r\n\t@state()\r\n\tprivate _logsTotal = 0;\r\n\r\n\t@state()\r\n\tprivate _isLoading = true;\r\n\r\n\t#logViewerContext?: UmbLogViewerWorkspaceContext;\r\n\r\n\tconstructor() {\r\n\t\tsuper();\r\n\t\tthis.consumeContext(UMB_APP_LOG_VIEWER_CONTEXT, (instance) => {\r\n\t\t\tthis.#logViewerContext = instance;\r\n\t\t\tthis.#observeLogs();\r\n\t\t});\r\n\t}\r\n\r\n\t#observeLogs() {\r\n\t\tif (!this.#logViewerContext) return;\r\n\r\n\t\tthis.observe(this.#logViewerContext.logs, (logs) => {\r\n\t\t\tthis._logs = logs ?? [];\r\n\t\t});\r\n\r\n\t\tthis.observe(this.#logViewerContext.isLoadingLogs, (isLoading) => {\r\n\t\t\tthis._isLoading = isLoading === null ? this._isLoading : isLoading;\r\n\t\t});\r\n\r\n\t\tthis.observe(this.#logViewerContext.logsTotal, (total) => {\r\n\t\t\tthis._logsTotal = total ?? 0;\r\n\t\t});\r\n\r\n\t\tthis.observe(this.#logViewerContext.sortingDirection, (direction) => {\r\n\t\t\tthis._sortingDirection = direction;\r\n\t\t});\r\n\t}\r\n\r\n\t#sortLogs() {\r\n\t\tthis.#logViewerContext?.toggleSortOrder();\r\n\t\tthis.#logViewerContext?.setCurrentPage(1);\r\n\t\tthis.#logViewerContext?.getLogs();\r\n\t}\r\n\r\n\t_onPageChange(event: Event): void {\r\n\t\tconst current = (event.target as UUIPaginationElement).current;\r\n\t\tthis.#logViewerContext?.setCurrentPage(current);\r\n\t\tthis.#logViewerContext?.getLogs();\r\n\t\tthis._logsScrollContainer.scrollTop = 0;\r\n\t}\r\n\r\n\tprivate _renderPagination() {\r\n\t\tif (!this._logsTotal) return '';\r\n\r\n\t\tconst totalPages = Math.ceil(this._logsTotal / 100);\r\n\r\n\t\tif (totalPages <= 1) return '';\r\n\r\n\t\treturn html`<div id=\"pagination\">\r\n\t\t\t<uui-pagination \r\n\t\t\t.total=${totalPages} \r\n\t\t\tfirstlabel=${this.localize.term('general_first')}\r\n            previouslabel=${this.localize.term('general_previous')}\r\n            nextlabel=${this.localize.term('general_next')}\r\n            lastlabel=${this.localize.term('general_last')}\r\n\t\t\t@change=\"${this._onPageChange}\"></uui-pagination>\r\n\t\t</div>`;\r\n\t}\r\n\r\n\t#renderLogs() {\r\n\t\treturn html`${this._logs.length > 0\r\n\t\t\t? html` ${this._logs.map(\r\n\t\t\t\t\t(log) =>\r\n\t\t\t\t\t\thtml`<umb-log-viewer-message\r\n\t\t\t\t\t\t\t.timestamp=${log.timestamp ?? ''}\r\n\t\t\t\t\t\t\t.level=${log.level ?? ''}\r\n\t\t\t\t\t\t\t.renderedMessage=${log.renderedMessage ?? ''}\r\n\t\t\t\t\t\t\t.properties=${log.properties ?? []}\r\n\t\t\t\t\t\t\t.exception=${log.exception ?? ''}\r\n\t\t\t\t\t\t\t.messageTemplate=${log.messageTemplate ?? ''}></umb-log-viewer-message>`,\r\n\t\t\t\t)}`\r\n\t\t\t: html`\r\n\t\t\t\t\t<span id=\"empty\">\r\n\t\t\t\t\t\t<uui-icon name=\"icon-search\"></uui-icon>Sorry, we cannot find what you are looking for.\r\n\t\t\t\t\t</span>\r\n\t\t\t\t`}`;\r\n\t}\r\n\r\n\toverride render() {\r\n\t\t// TODO: the table should scroll instead of the whole main div\r\n\t\treturn html`<uui-box>\r\n\t\t\t\t<div id=\"header\" slot=\"header\">\r\n\t\t\t\t\t<div id=\"timestamp\">\r\n\t\t\t\t\t\tTimestamp\r\n\t\t\t\t\t\t<uui-button compact @click=${this.#sortLogs} label=\"Sort logs\">\r\n\t\t\t\t\t\t\t<uui-symbol-sort\r\n\t\t\t\t\t\t\t\t?descending=${this._sortingDirection === DirectionModel.DESCENDING}\r\n\t\t\t\t\t\t\t\tactive></uui-symbol-sort>\r\n\t\t\t\t\t\t</uui-button>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t<div id=\"level\">Level</div>\r\n\t\t\t\t\t<div id=\"machine\">Machine name</div>\r\n\t\t\t\t\t<div id=\"message\">Message</div>\r\n\t\t\t\t</div>\r\n\t\t\t\t<div id=\"main\">\r\n\t\t\t\t\t${this._isLoading\r\n\t\t\t\t\t\t? html` <span id=\"empty\"> <uui-loader-circle></uui-loader-circle>Loading log messages... </span> `\r\n\t\t\t\t\t\t: html`${this.#renderLogs()}`}\r\n\t\t\t\t</div>\r\n\t\t\t</uui-box>\r\n\t\t\t${this._renderPagination()} `;\r\n\t}\r\n\r\n\tstatic override styles = [\r\n\t\tcss`\r\n\t\t\tuui-pagination {\r\n\t\t\t\tdisplay: block;\r\n\t\t\t\tmargin-bottom: var(--uui-size-layout-1);\r\n\t\t\t}\r\n\t\t\tuui-box {\r\n\t\t\t\t--uui-box-default-padding: 0;\r\n\t\t\t}\r\n\r\n\t\t\t:host {\r\n\t\t\t\theight: 100%;\r\n\t\t\t\tdisplay: flex;\r\n\t\t\t\tflex-direction: column;\r\n\t\t\t}\r\n\t\t\t#header {\r\n\t\t\t\tdisplay: flex;\r\n\t\t\t\tfont-weight: 600;\r\n\t\t\t\twidth: 100%;\r\n\t\t\t}\r\n\r\n\t\t\t#header > div {\r\n\t\t\t\tbox-sizing: border-box;\r\n\t\t\t\tpadding: 10px 20px;\r\n\t\t\t\tdisplay: flex;\r\n\t\t\t\talign-items: center;\r\n\t\t\t}\r\n\r\n\t\t\t#main {\r\n\t\t\t\tdisplay: flex;\r\n\t\t\t\tflex-direction: column;\r\n\t\t\t\twidth: 100%;\r\n\t\t\t}\r\n\r\n\t\t\t#timestamp {\r\n\t\t\t\tflex: 1 0 14ch;\r\n\t\t\t}\r\n\r\n\t\t\t#level,\r\n\t\t\t#machine {\r\n\t\t\t\tflex: 1 0 14ch;\r\n\t\t\t}\r\n\r\n\t\t\t#message {\r\n\t\t\t\tflex: 6 0 14ch;\r\n\t\t\t}\r\n\r\n\t\t\t#empty {\r\n\t\t\t\tdisplay: flex;\r\n\t\t\t\tjustify-content: center;\r\n\t\t\t\talign-items: center;\r\n\t\t\t\tgap: var(--uui-size-space-3);\r\n\t\t\t\tmargin: var(--uui-size-space-5) 0;\r\n\t\t\t}\r\n\r\n\t\t\t#pagination {\r\n\t\t\t\tdisplay: block;\r\n\t\t\t\tmargin: var(--uui-size-space-5) 0;\r\n\t\t\t}\r\n\t\t`,\r\n\t];\r\n}\r\n\r\ndeclare global {\r\n\tinterface HTMLElementTagNameMap {\r\n\t\t'umb-log-viewer-messages-list': UmbLogViewerMessagesListElement;\r\n\t}\r\n}\r\n","import type {\r\n\tPoolingCOnfig,\r\n\tPoolingInterval,\r\n\tUmbLogViewerWorkspaceContext,\r\n} from '../../../logviewer-workspace.context.js';\r\nimport { UMB_APP_LOG_VIEWER_CONTEXT } from '../../../logviewer-workspace.context-token.js';\r\nimport { css, html, customElement, query, state } from '@umbraco-cms/backoffice/external/lit';\r\nimport { UmbLitElement } from '@umbraco-cms/backoffice/lit-element';\r\nimport type { UmbDropdownElement } from '@umbraco-cms/backoffice/components';\r\n\r\n@customElement('umb-log-viewer-polling-button')\r\nexport class UmbLogViewerPollingButtonElement extends UmbLitElement {\r\n\t@query('#polling-rate-dropdown')\r\n\tprivate dropdownElement?: UmbDropdownElement;\r\n\t@state()\r\n\tprivate _poolingConfig: PoolingCOnfig = { enabled: false, interval: 0 };\r\n\r\n\t#pollingIntervals: PoolingInterval[] = [2000, 5000, 10000, 20000, 30000];\r\n\r\n\t#logViewerContext?: UmbLogViewerWorkspaceContext;\r\n\r\n\tconstructor() {\r\n\t\tsuper();\r\n\t\tthis.consumeContext(UMB_APP_LOG_VIEWER_CONTEXT, (instance) => {\r\n\t\t\tthis.#logViewerContext = instance;\r\n\t\t\tthis.#observePoolingConfig();\r\n\t\t});\r\n\t}\r\n\r\n\t#observePoolingConfig() {\r\n\t\tif (!this.#logViewerContext) return;\r\n\r\n\t\tthis.observe(this.#logViewerContext.polling, (poolingConfig) => {\r\n\t\t\tthis._poolingConfig = { ...poolingConfig };\r\n\t\t});\r\n\t}\r\n\r\n\t#togglePolling() {\r\n\t\tthis.#logViewerContext?.togglePolling();\r\n\t}\r\n\r\n\t#setPolingInterval = (interval: PoolingInterval) => {\r\n\t\tthis.#logViewerContext?.setPollingInterval(interval);\r\n\r\n\t\tthis.#closePoolingPopover();\r\n\t};\r\n\r\n\t#closePoolingPopover() {\r\n\t\tif (this.dropdownElement) {\r\n\t\t\tthis.dropdownElement.open = false;\r\n\t\t}\r\n\r\n\t\tthis.#togglePolling();\r\n\t}\r\n\r\n\toverride render() {\r\n\t\treturn html`\r\n\t\t\t<uui-button-group>\r\n\t\t\t\t<uui-button label=\"Start pooling\" @click=${this.#togglePolling}\r\n\t\t\t\t\t>${this._poolingConfig.enabled\r\n\t\t\t\t\t\t? html`<uui-icon name=\"icon-axis-rotation\" id=\"polling-enabled-icon\"></uui-icon>Polling\r\n\t\t\t\t\t\t\t\t${this._poolingConfig.interval / 1000} seconds`\r\n\t\t\t\t\t\t: 'Polling'}</uui-button\r\n\t\t\t\t>\r\n\r\n\t\t\t\t<umb-dropdown id=\"polling-rate-dropdown\" compact label=\"Choose pooling time\">\r\n\t\t\t\t\t${this.#pollingIntervals.map(\r\n\t\t\t\t\t\t(interval: PoolingInterval) =>\r\n\t\t\t\t\t\t\thtml`<uui-menu-item\r\n\t\t\t\t\t\t\t\tlabel=\"Every ${interval / 1000} seconds\"\r\n\t\t\t\t\t\t\t\t@click-label=${() => this.#setPolingInterval(interval)}></uui-menu-item>`,\r\n\t\t\t\t\t)}\r\n\t\t\t\t</umb-dropdown>\r\n\t\t\t</uui-button-group>\r\n\t\t`;\r\n\t}\r\n\r\n\tstatic override styles = [\r\n\t\tcss`\r\n\t\t\t#polling-enabled-icon {\r\n\t\t\t\tmargin-right: var(--uui-size-space-3);\r\n\t\t\t\tmargin-bottom: 1px;\r\n\t\t\t\t-webkit-animation: rotate-center 0.8s ease-in-out infinite both;\r\n\t\t\t\tanimation: rotate-center 0.8s ease-in-out infinite both;\r\n\t\t\t}\r\n\r\n\t\t\t@-webkit-keyframes rotate-center {\r\n\t\t\t\t0% {\r\n\t\t\t\t\t-webkit-transform: rotate(0);\r\n\t\t\t\t\ttransform: rotate(0);\r\n\t\t\t\t}\r\n\t\t\t\t100% {\r\n\t\t\t\t\t-webkit-transform: rotate(360deg);\r\n\t\t\t\t\ttransform: rotate(360deg);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\t@keyframes rotate-center {\r\n\t\t\t\t0% {\r\n\t\t\t\t\t-webkit-transform: rotate(0);\r\n\t\t\t\t\ttransform: rotate(0);\r\n\t\t\t\t}\r\n\t\t\t\t100% {\r\n\t\t\t\t\t-webkit-transform: rotate(360deg);\r\n\t\t\t\t\ttransform: rotate(360deg);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t`,\r\n\t];\r\n}\r\n\r\ndeclare global {\r\n\tinterface HTMLElementTagNameMap {\r\n\t\t'umb-log-viewer-polling-button': UmbLogViewerPollingButtonElement;\r\n\t}\r\n}\r\n","import type { UmbLogViewerWorkspaceContext } from '../../../logviewer-workspace.context.js';\r\nimport { UMB_APP_LOG_VIEWER_CONTEXT } from '../../../logviewer-workspace.context-token.js';\r\nimport { UMB_LOG_VIEWER_SAVE_SEARCH_MODAL } from './log-viewer-search-input-modal.modal-token.js';\r\nimport type { UUIInputElement } from '@umbraco-cms/backoffice/external/uui';\r\nimport { css, html, customElement, query, state } from '@umbraco-cms/backoffice/external/lit';\r\nimport { Subject, debounceTime, tap } from '@umbraco-cms/backoffice/external/rxjs';\r\nimport type { SavedLogSearchResponseModel } from '@umbraco-cms/backoffice/external/backend-api';\r\nimport { UmbLitElement } from '@umbraco-cms/backoffice/lit-element';\r\nimport { query as getQuery, path, toQueryString } from '@umbraco-cms/backoffice/router';\r\nimport { umbConfirmModal, umbOpenModal } from '@umbraco-cms/backoffice/modal';\r\n\r\nimport './log-viewer-search-input-modal.element.js';\r\nimport type { UmbDropdownElement } from '@umbraco-cms/backoffice/components';\r\n\r\n@customElement('umb-log-viewer-search-input')\r\nexport class UmbLogViewerSearchInputElement extends UmbLitElement {\r\n\t@query('#search-dropdown')\r\n\tprivate _searchDropdownElement!: UmbDropdownElement;\r\n\r\n\t@state()\r\n\tprivate _savedSearches: SavedLogSearchResponseModel[] = [];\r\n\r\n\t@state()\r\n\tprivate _inputQuery = '';\r\n\r\n\t@state()\r\n\tprivate _showLoader = false;\r\n\r\n\t@state()\r\n\tprivate _isQuerySaved = false;\r\n\r\n\t// TODO: Revisit this code, to not use RxJS directly:\r\n\tprivate inputQuery$ = new Subject<string>();\r\n\r\n\t#logViewerContext?: UmbLogViewerWorkspaceContext;\r\n\r\n\tconstructor() {\r\n\t\tsuper();\r\n\t\tthis.consumeContext(UMB_APP_LOG_VIEWER_CONTEXT, (instance) => {\r\n\t\t\tthis.#logViewerContext = instance;\r\n\t\t\tthis.#observeStuff();\r\n\t\t\tthis.#logViewerContext?.getSavedSearches();\r\n\t\t});\r\n\r\n\t\tthis.inputQuery$\r\n\t\t\t.pipe(\r\n\t\t\t\ttap(() => (this._showLoader = true)),\r\n\t\t\t\tdebounceTime(250),\r\n\t\t\t)\r\n\t\t\t.subscribe((query) => {\r\n\t\t\t\tthis.#logViewerContext?.setFilterExpression(query);\r\n\t\t\t\tthis.#persist(query);\r\n\t\t\t\tthis._isQuerySaved = this._savedSearches.some((search) => search.query === query);\r\n\t\t\t\tthis._showLoader = false;\r\n\t\t\t});\r\n\t}\r\n\r\n\t#observeStuff() {\r\n\t\tif (!this.#logViewerContext) return;\r\n\t\tthis.observe(this.#logViewerContext.savedSearches, (savedSearches) => {\r\n\t\t\tthis._savedSearches = savedSearches?.items ?? [];\r\n\t\t\tthis._isQuerySaved = this._savedSearches.some((search) => search.query === this._inputQuery);\r\n\t\t});\r\n\r\n\t\tthis.observe(this.#logViewerContext.filterExpression, (query) => {\r\n\t\t\tthis._inputQuery = query;\r\n\t\t\tthis._isQuerySaved = this._savedSearches.some((search) => search.query === query);\r\n\t\t});\r\n\t}\r\n\r\n\t#setQuery(event: Event) {\r\n\t\tconst target = event.target as UUIInputElement;\r\n\t\tthis.inputQuery$.next(target.value as string);\r\n\t}\r\n\r\n\t#setQueryFromSavedSearch(query: string) {\r\n\t\tthis.inputQuery$.next(query);\r\n\t\tthis._searchDropdownElement.open = false;\r\n\t}\r\n\r\n\t#persist(filter: string) {\r\n\t\tlet query = getQuery();\r\n\r\n\t\tquery = {\r\n\t\t\t...query,\r\n\t\t\tlq: filter,\r\n\t\t};\r\n\r\n\t\twindow.history.pushState({}, '', `${path()}?${toQueryString(query)}`);\r\n\t}\r\n\r\n\t#clearQuery() {\r\n\t\tthis.inputQuery$.next('');\r\n\t\tthis.#logViewerContext?.setFilterExpression('');\r\n\t}\r\n\r\n\t#saveSearch(savedSearch: SavedLogSearchResponseModel) {\r\n\t\tthis.#logViewerContext?.saveSearch(savedSearch);\r\n\t}\r\n\r\n\tasync #removeSearch(name: string) {\r\n\t\tawait umbConfirmModal(this, {\r\n\t\t\theadline: this.localize.term('logViewer_deleteSavedSearch'),\r\n\t\t\tcontent: `${this.localize.term('defaultdialogs_confirmdelete')} ${name}?`,\r\n\t\t\tcolor: 'danger',\r\n\t\t\tconfirmLabel: 'Delete',\r\n\t\t});\r\n\r\n\t\tthis.#logViewerContext?.removeSearch({ name });\r\n\t\t//this.dispatchEvent(new UmbDeleteEvent());\r\n\t}\r\n\r\n\tasync #openSaveSearchDialog() {\r\n\t\tumbOpenModal(this, UMB_LOG_VIEWER_SAVE_SEARCH_MODAL, {\r\n\t\t\tdata: { query: this._inputQuery },\r\n\t\t})\r\n\t\t\t.then((savedSearch) => {\r\n\t\t\t\tif (savedSearch) {\r\n\t\t\t\t\tthis.#saveSearch(savedSearch);\r\n\t\t\t\t\tthis._isQuerySaved = true;\r\n\t\t\t\t}\r\n\t\t\t})\r\n\t\t\t.catch(() => {});\r\n\t}\r\n\r\n\toverride render() {\r\n\t\treturn html`\r\n\t\t\t<uui-input\r\n\t\t\t\tid=\"search-input\"\r\n\t\t\t\tlabel=\"Search logs\"\r\n\t\t\t\t.placeholder=${'Search logs...'}\r\n\t\t\t\tslot=\"trigger\"\r\n\t\t\t\t@input=${this.#setQuery}\r\n\t\t\t\t.value=${this._inputQuery}>\r\n\t\t\t\t${this._showLoader\r\n\t\t\t\t\t? html`<div id=\"loader-container\" slot=\"append\">\r\n\t\t\t\t\t\t\t<uui-loader-circle></uui-loader-circle>\r\n\t\t\t\t\t\t</div>`\r\n\t\t\t\t\t: ''}\r\n\t\t\t\t${this._inputQuery\r\n\t\t\t\t\t? html`${!this._isQuerySaved\r\n\t\t\t\t\t\t\t\t? html`<uui-button compact slot=\"append\" label=\"Save search\" @click=${this.#openSaveSearchDialog}\r\n\t\t\t\t\t\t\t\t\t\t><uui-icon name=\"icon-favorite\"></uui-icon\r\n\t\t\t\t\t\t\t\t\t></uui-button>`\r\n\t\t\t\t\t\t\t\t: ''}<uui-button compact slot=\"append\" label=\"Clear\" @click=${this.#clearQuery}\r\n\t\t\t\t\t\t\t\t><uui-icon name=\"icon-delete\"></uui-icon\r\n\t\t\t\t\t\t\t></uui-button>`\r\n\t\t\t\t\t: html``}\r\n\t\t\t\t<umb-dropdown id=\"search-dropdown\" slot=\"append\" label=${this.localize.term('logViewer_savedSearches')}>\r\n\t\t\t\t\t<span slot=\"label\"><umb-localize key=\"logViewer_savedSearches\">Saved searches</umb-localize></span>\r\n\t\t\t\t\t<uui-scroll-container id=\"saved-searches-container\" role=\"list\">\r\n\t\t\t\t\t\t${this._savedSearches.map(\r\n\t\t\t\t\t\t\t(search) =>\r\n\t\t\t\t\t\t\t\thtml`<li class=\"saved-search-item\">\r\n\t\t\t\t\t\t\t\t\t<button\r\n\t\t\t\t\t\t\t\t\t\tlabel=\"Search for ${search.name}\"\r\n\t\t\t\t\t\t\t\t\t\tclass=\"saved-search-item-button\"\r\n\t\t\t\t\t\t\t\t\t\t@click=${() => this.#setQueryFromSavedSearch(search.query ?? '')}>\r\n\t\t\t\t\t\t\t\t\t\t<span class=\"saved-search-item-name\">${search.name}</span>\r\n\t\t\t\t\t\t\t\t\t\t<span class=\"saved-search-item-query\">${search.query}</span></button\r\n\t\t\t\t\t\t\t\t\t><uui-button\r\n\t\t\t\t\t\t\t\t\t\tlabel=\"Remove saved search\"\r\n\t\t\t\t\t\t\t\t\t\tcolor=\"danger\"\r\n\t\t\t\t\t\t\t\t\t\t@click=${() => this.#removeSearch(search.name ?? '')}\r\n\t\t\t\t\t\t\t\t\t\t><uui-icon name=\"icon-trash\"></uui-icon\r\n\t\t\t\t\t\t\t\t\t></uui-button>\r\n\t\t\t\t\t\t\t\t</li>`,\r\n\t\t\t\t\t\t)}\r\n\t\t\t\t\t</uui-scroll-container>\r\n\t\t\t\t</umb-dropdown>\r\n\t\t\t</uui-input>\r\n\t\t`;\r\n\t}\r\n\r\n\tstatic override styles = [\r\n\t\tcss`\r\n\t\t\t:host {\r\n\t\t\t\tdisplay: flex;\r\n\t\t\t\talign-items: center;\r\n\t\t\t\tjustify-content: space-between;\r\n\t\t\t\tgap: var(--uui-size-space-4);\r\n\t\t\t}\r\n\r\n\t\t\t#search-input {\r\n\t\t\t\twidth: 100%;\r\n\t\t\t}\r\n\r\n\t\t\t#saved-searches-button {\r\n\t\t\t\tflex-shrink: 0;\r\n\t\t\t}\r\n\r\n\t\t\t#saved-searches-popover {\r\n\t\t\t\tflex: 1;\r\n\t\t\t}\r\n\r\n\t\t\t#loader-container {\r\n\t\t\t\tdisplay: flex;\r\n\t\t\t\tjustify-content: center;\r\n\t\t\t\talign-items: center;\r\n\t\t\t\tmargin: 0 var(--uui-size-space-4);\r\n\t\t\t}\r\n\r\n\t\t\t.saved-search-item {\r\n\t\t\t\tdisplay: flex;\r\n\t\t\t\tjustify-content: space-between;\r\n\t\t\t\talign-items: stretch;\r\n\t\t\t\tborder-bottom: 1px solid #e9e9eb;\r\n\t\t\t}\r\n\r\n\t\t\t.saved-search-item-button {\r\n\t\t\t\tdisplay: flex;\r\n\t\t\t\tfont-family: inherit;\r\n\t\t\t\tflex: 1;\r\n\t\t\t\tbackground: 0 0;\r\n\t\t\t\tpadding: 0 0;\r\n\t\t\t\tborder: 0;\r\n\t\t\t\tclear: both;\r\n\t\t\t\tcursor: pointer;\r\n\t\t\t\tdisplay: flex;\r\n\t\t\t\tfont-weight: 400;\r\n\t\t\t\tline-height: 20px;\r\n\t\t\t\ttext-align: left;\r\n\t\t\t\talign-items: center;\r\n\t\t\t\twhite-space: nowrap;\r\n\t\t\t\tcolor: var(--uui-color-interactive);\r\n\t\t\t}\r\n\r\n\t\t\t.saved-search-item-button:hover {\r\n\t\t\t\tbackground-color: var(--uui-color-surface-emphasis, rgb(250, 250, 250));\r\n\t\t\t\tcolor: var(--color-standalone);\r\n\t\t\t}\r\n\r\n\t\t\t.saved-search-item-name {\r\n\t\t\t\tfont-weight: 600;\r\n\t\t\t\tmargin: 0 var(--uui-size-space-3);\r\n\t\t\t}\r\n\r\n\t\t\t#polling-symbol-expand,\r\n\t\t\t#saved-search-expand-symbol,\r\n\t\t\tuui-symbol-sort {\r\n\t\t\t\tmargin-left: var(--uui-size-space-3);\r\n\t\t\t}\r\n\t\t`,\r\n\t];\r\n}\r\n\r\ndeclare global {\r\n\tinterface HTMLElementTagNameMap {\r\n\t\t'umb-log-viewer-search-input': UmbLogViewerSearchInputElement;\r\n\t}\r\n}\r\n","import type { UmbLogViewerWorkspaceContext } from '../../logviewer-workspace.context.js';\r\nimport { UMB_APP_LOG_VIEWER_CONTEXT } from '../../logviewer-workspace.context-token.js';\r\nimport { UmbTextStyles } from '@umbraco-cms/backoffice/style';\r\nimport { css, html, customElement, state } from '@umbraco-cms/backoffice/external/lit';\r\nimport { UmbLitElement } from '@umbraco-cms/backoffice/lit-element';\r\nimport type { UmbObserverController } from '@umbraco-cms/backoffice/observable-api';\r\n\r\n@customElement('umb-log-viewer-search-view')\r\nexport class UmbLogViewerSearchViewElement extends UmbLitElement {\r\n\t@state()\r\n\tprivate _canShowLogs = true;\r\n\r\n\t#logViewerContext?: UmbLogViewerWorkspaceContext;\r\n\r\n\t#canShowLogsObserver?: UmbObserverController<boolean | null>;\r\n\r\n\tconstructor() {\r\n\t\tsuper();\r\n\t\tthis.consumeContext(UMB_APP_LOG_VIEWER_CONTEXT, (instance) => {\r\n\t\t\tthis.#logViewerContext = instance;\r\n\t\t\tthis.#observeCanShowLogs();\r\n\t\t});\r\n\t}\r\n\r\n\t#observeCanShowLogs() {\r\n\t\tif (this.#canShowLogsObserver) this.#canShowLogsObserver.destroy();\r\n\t\tif (!this.#logViewerContext) return;\r\n\r\n\t\tthis.#canShowLogsObserver = this.observe(this.#logViewerContext.canShowLogs, (canShowLogs) => {\r\n\t\t\tthis._canShowLogs = canShowLogs ?? this._canShowLogs;\r\n\t\t});\r\n\t}\r\n\r\n\toverride render() {\r\n\t\treturn html`\r\n\t\t\t<umb-body-layout header-transparent header-fit-height>\r\n\t\t\t\t<div id=\"header\" slot=\"header\">\r\n\t\t\t\t\t<div id=\"levels-container\">\r\n\t\t\t\t\t\t<umb-log-viewer-log-level-filter-menu></umb-log-viewer-log-level-filter-menu>\r\n\t\t\t\t\t\t<div id=\"dates-polling-container\">\r\n\t\t\t\t\t\t\t<umb-log-viewer-date-range-selector horizontal></umb-log-viewer-date-range-selector>\r\n\t\t\t\t\t\t\t<umb-log-viewer-polling-button> </umb-log-viewer-polling-button>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t<div id=\"input-container\">\r\n\t\t\t\t\t\t<umb-log-viewer-search-input></umb-log-viewer-search-input>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>\r\n\r\n\t\t\t\t${this._canShowLogs\r\n\t\t\t\t\t? html`<umb-log-viewer-messages-list></umb-log-viewer-messages-list>`\r\n\t\t\t\t\t: html`<umb-log-viewer-to-many-logs-warning id=\"to-many-logs-warning\"></umb-log-viewer-to-many-logs-warning>`}\r\n\t\t\t</umb-body-layout>\r\n\t\t`;\r\n\t}\r\n\r\n\tstatic override styles = [\r\n\t\tUmbTextStyles,\r\n\t\tcss`\r\n\t\t\t:host {\r\n\t\t\t\tmargin-bottom: var(--uui-size-space-2);\r\n\t\t\t}\r\n\r\n\t\t\tuui-box {\r\n\t\t\t\t--uui-box-default-padding: 0;\r\n\t\t\t}\r\n\r\n\t\t\t#header {\r\n\t\t\t\tdisplay: flex;\r\n\t\t\t\tflex-direction: column;\r\n\t\t\t\tgap: var(--uui-size-space-4);\r\n\t\t\t\twidth: 100%;\r\n\t\t\t}\r\n\r\n\t\t\t#levels-container,\r\n\t\t\t#input-container {\r\n\t\t\t\tdisplay: flex;\r\n\t\t\t\talign-items: center;\r\n\t\t\t\tgap: var(--uui-size-space-4);\r\n\t\t\t\twidth: 100%;\r\n\t\t\t}\r\n\r\n\t\t\t#levels-container {\r\n\t\t\t\tjustify-content: space-between;\r\n\t\t\t}\r\n\r\n\t\t\t#dates-polling-container {\r\n\t\t\t\tdisplay: flex;\r\n\t\t\t\talign-items: baseline;\r\n\t\t\t}\r\n\r\n\t\t\tumb-log-viewer-search-input {\r\n\t\t\t\tflex: 1;\r\n\t\t\t}\r\n\r\n\t\t\tumb-log-viewer-date-range-selector {\r\n\t\t\t\tflex-direction: row;\r\n\t\t\t}\r\n\t\t`,\r\n\t];\r\n}\r\n\r\ndeclare global {\r\n\tinterface HTMLElementTagNameMap {\r\n\t\t'umb-log-viewer-search-view': UmbLogViewerSearchViewElement;\r\n\t}\r\n}\r\n","import './components/index.js';\r\nimport { UmbLogViewerSearchViewElement } from './log-search-view.element.js';\r\n\r\nexport default UmbLogViewerSearchViewElement;\r\n"],"names":["UmbLogViewerLevelTagElement","LitElement","html","ifDefined","__decorateClass","property","customElement","_logViewerContext","_UmbLogViewerLogLevelFilterMenuElement_instances","observeLogLevelFilter_fn","setLogLevel_fn","selectAllLogLevels_fn","deselectAllLogLevels_fn","renderLogLevelSelector_fn","UmbLogViewerLogLevelFilterMenuElement","UmbLitElement","__privateAdd","debounce","__privateMethod","UMB_APP_LOG_VIEWER_CONTEXT","instance","__privateSet","level","__privateGet","levelsFilter","logLevels","checkbox","q","query","path","toQueryString","LogLevelModel","logLevel","css","queryAll","state","_UmbLogViewerMessageElement_instances","setOpen_fn","UmbLogViewerMessageElement","changedProperties","_changedProperties","name","value","getQuery","sanitizedValue","menuItem","when","icon","event","UmbTextStyles","_UmbLogViewerMessagesListElement_instances","observeLogs_fn","sortLogs_fn","renderLogs_fn","UmbLogViewerMessagesListElement","DirectionModel","current","totalPages","logs","isLoading","total","direction","log","_pollingIntervals","_UmbLogViewerPollingButtonElement_instances","observePoolingConfig_fn","togglePolling_fn","_setPolingInterval","closePoolingPopover_fn","UmbLogViewerPollingButtonElement","interval","poolingConfig","_UmbLogViewerSearchInputElement_instances","observeStuff_fn","setQuery_fn","setQueryFromSavedSearch_fn","persist_fn","clearQuery_fn","saveSearch_fn","removeSearch_fn","openSaveSearchDialog_fn","UmbLogViewerSearchInputElement","Subject","tap","debounceTime","search","savedSearches","target","filter","savedSearch","umbConfirmModal","umbOpenModal","UMB_LOG_VIEWER_SAVE_SEARCH_MODAL","_canShowLogsObserver","_UmbLogViewerSearchViewElement_instances","observeCanShowLogs_fn","UmbLogViewerSearchViewElement","canShowLogs"],"mappings":"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"}