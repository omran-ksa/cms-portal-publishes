@* Update your news grid section with proper onclick configuration: *@

@using System.Globalization
@using Umbraco.Cms.Core.Models
@using Umbraco.Cms.Core.Models.Blocks
@using Umbraco.Cms.Core.Strings
@using Umbraco.Extensions
@using Umbraco.Models
@inherits Umbraco.Cms.Web.Common.Views.UmbracoViewPage<IPublishedElement>

@inject Umbraco.Cms.Core.Models.PublishedContent.IPublishedValueFallback PublishedValueFallback;
@inject IShortStringHelper ShortStringHelper

@{

    var ui = CultureInfo.CurrentUICulture;
    var isVisible = Model.Value<bool?>("isVisible") ?? true;
    if (!isVisible) { return; }

    var sectionName = Model.Value<string>("sectionName");
    var mainTitle = Model.Value<string>("mainTitle");
    var description = Model.Value<string>("description");
    var extraCss = Model.Value<string>("extraCssClasses");
    var bgColor = Model.Value<string>("backgroundColor");
    var bgImage = Model.Value<MediaWithCrops>("backgroundImage");
    var blocks = Model.Value<BlockListModel>("cards") ?? BlockListModel.Empty;

    var anchor = string.IsNullOrWhiteSpace(sectionName)
        ? null
        : sectionName.ToUrlSegment(ShortStringHelper, ui.Name);

    var classes = $"news-grid-section py-3 py-lg-4 {(string.IsNullOrWhiteSpace(extraCss) ? "" : extraCss)}";

    var style = "";
    if (!string.IsNullOrWhiteSpace(bgColor))
        style += (bgColor.StartsWith("#") || bgColor.StartsWith("rgb"))
            ? $"background-color:{bgColor};"
            : "";
    if (bgImage != null)
        style += $"background-image:url('{bgImage.GetCropUrl()}');background-size:cover;background-position:center;";

    var cards = blocks.Select(b => new CardModel(b.Content, PublishedValueFallback))
                      .OrderByDescending(c => c.Date);

    // Helper function to generate news detail URL
    string GetNewsDetailUrl(CardModel newsItem)
    {
        var slug = newsItem.Title?.ToUrlSegment(ShortStringHelper, ui.Name) ?? "news-item";
        var id = newsItem.Key.ToString();
        return $"/{ui.Name}/news/details/{slug}/{id}";
    }

}

<section id="@anchor" class="@classes" style="@style">
    <div class="container-fluid px-sm-4 pb-3 pb-md-5">
        @if (!string.IsNullOrWhiteSpace(mainTitle) || !string.IsNullOrWhiteSpace(description))
        {
            <div class="d-flex align-items-center justify-content-between mb-3 mb-md-4">
                @if (!string.IsNullOrWhiteSpace(mainTitle))
                {
                    <h2 class="h4 fw-bold mb-0">@mainTitle</h2>
                }
              @*   @if (!string.IsNullOrWhiteSpace(description))
                {
                    <p class="text-secondary mb-0">@description</p>
                } *@
            </div>
        }

        <div class="row row-cols-1 row-cols-md-2 row-cols-xl-3 g-4">
            @foreach (var n in cards)
            {
                var img = n.Image;
                var detailUrl = GetNewsDetailUrl(n);

                <div class="col d-flex">
                    <article class="card news-card w-100 shadow-sm h-100 border-0 position-relative"
                             style="cursor: pointer; transition: transform 0.2s ease;"
                             onclick="navigateToNews('@detailUrl')"
                             onmouseover="this.style.transform='translateY(-5px)'"
                             onmouseout="this.style.transform='translateY(0)'">

                        @* Image (16:9 crop) *@
                        @if (img != null)
                        {
                            <div class="ratio ratio-16x9 rounded-top">
                                <img src="@img.Url()" alt="@img.Name" class="object-fit-cover rounded-top">
                            </div>
                        }

                        <div class="card-body d-flex flex-column">
                            <div class="d-flex justify-content-start">
                                @if (n.Date != default)
                                {
                                    <small class="text-muted">@n.Date.ToString("yyyy MMM dd", ui)</small>
                                }
                            </div>

                            @if (!string.IsNullOrWhiteSpace(n.Title))
                            {
                                <h3 class="h5 fw-bold mt-2 mb-2">@n.Title</h3>
                            }

                            @if (!string.IsNullOrWhiteSpace(n.Description))
                            {
                                <p class="text-secondary mb-3 line-clamp-3 flex-grow-1">
                                    @(n.Description.StripHtml().Truncate(150))
                                </p>
                            }
                        </div>

                        @* Invisible link for accessibility and SEO *@
                        <a href="@detailUrl" class="stretched-link" aria-label="اقرأ المزيد عن @n.Title" tabindex="-1"></a>
                    </article>
                </div>
            }
        </div>
    </div>
</section>

<script>
    function navigateToNews(url) {
        // Add loading state or analytics tracking here if needed
        window.location.href = url;
    }

    // Optional: Add keyboard support for accessibility
    document.addEventListener('DOMContentLoaded', function() {
        const newsCards = document.querySelectorAll('.news-card');
        newsCards.forEach(card => {
            card.addEventListener('keydown', function(e) {
                if (e.key === 'Enter' || e.key === ' ') {
                    e.preventDefault();
                    const url = card.querySelector('.stretched-link').href;
                    navigateToNews(url);
                }
            });

            // Make cards focusable for keyboard navigation
            card.setAttribute('tabindex', '0');
            card.setAttribute('role', 'button');
        });
    });
</script>

<style>
    .line-clamp-3 {
        display: -webkit-box;
        -webkit-line-clamp: 3;
        -webkit-box-orient: vertical;
        overflow: hidden;
        line-height: 1.4;
    }

    .news-card:hover {
        box-shadow: 0 8px 25px rgba(0,0,0,0.15);
    }

    .news-card:focus {
        outline: 2px solid #007bff;
        outline-offset: 2px;
    }
</style>